var CramFileQuery=function(t){"use strict";var e={},n={},r=34,i=10,o=13;function s(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}var a=function(t){var a=new RegExp('["'+t+"\n\r]"),c=t.charCodeAt(0);function u(t,s){var a,u=[],l=t.length,h=0,f=0,d=l<=0,p=!1;function g(){if(d)return n;if(p)return p=!1,e;var s,a,u=h;if(t.charCodeAt(u)===r){for(;h++<l&&t.charCodeAt(h)!==r||t.charCodeAt(++h)===r;);return(s=h)>=l?d=!0:(a=t.charCodeAt(h++))===i?p=!0:a===o&&(p=!0,t.charCodeAt(h)===i&&++h),t.slice(u+1,s-1).replace(/""/g,'"')}for(;h<l;){if((a=t.charCodeAt(s=h++))===i)p=!0;else if(a===o)p=!0,t.charCodeAt(h)===i&&++h;else if(a!==c)continue;return t.slice(u,s)}return d=!0,t.slice(u,l)}for(t.charCodeAt(l-1)===i&&--l,t.charCodeAt(l-1)===o&&--l;(a=g())!==n;){for(var m=[];a!==e&&a!==n;)m.push(a),a=g();s&&null==(m=s(m,f++))||u.push(m)}return u}function l(e){return e.map(h).join(t)}function h(t){return null==t?"":a.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,i=u(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=s(t);return function(r,i){return e(n(r),i,t)}}(t,e):s(t)});return i.columns=r||[],i},parseRows:u,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(h).join(t)].concat(e.map(function(e){return n.map(function(t){return h(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(l).join("\n")}}},c=a(",").parse,u=a("\t").parse;function l(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var h=function(t,e){return fetch(t,e).then(l)};function f(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),h(e,n).then(function(e){return t(e,r)})}}f(c);var d=f(u);function p(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var g=function(t,e){return fetch(t,e).then(p)},m="http://www.w3.org/1999/xhtml",v={svg:"http://www.w3.org/2000/svg",xhtml:m,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),v.hasOwnProperty(e)?{space:v[e],local:t}:t};var y=function(t){var e=_(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===m&&e.documentElement.namespaceURI===m?e.createElement(t):e.createElementNS(n,t)}})(e)};function w(){}var x=function(t){return null==t?w:function(){return this.querySelector(t)}};function S(){return[]}var b=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var A=document.documentElement;if(!A.matches){var I=A.webkitMatchesSelector||A.msMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector;b=function(t){return function(){return I.call(this,t)}}}}var E=b,C=function(t){return new Array(t.length)};function T(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}T.prototype={constructor:T,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var q="$";function P(t,e,n,r,i,o){for(var s,a=0,c=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new T(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function N(t,e,n,r,i,o,s){var a,c,u,l={},h=e.length,f=o.length,d=new Array(h);for(a=0;a<h;++a)(c=e[a])&&(d[a]=u=q+s.call(c,c.__data__,a,e),u in l?i[a]=c:l[u]=c);for(a=0;a<f;++a)(c=l[u=q+s.call(t,o[a],a,o)])?(r[a]=c,c.__data__=o[a],l[u]=null):n[a]=new T(t,o[a]);for(a=0;a<h;++a)(c=e[a])&&l[d[a]]===c&&(i[a]=c)}function B(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var D=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function O(t){return t.trim().split(/^|\s+/)}function R(t){return t.classList||new k(t)}function k(t){this._node=t,this._names=O(t.getAttribute("class")||"")}function j(t,e){for(var n=R(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function G(t,e){for(var n=R(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}k.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function M(){this.textContent=""}function W(){this.innerHTML=""}function F(){this.nextSibling&&this.parentNode.appendChild(this)}function L(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U(){return null}function z(){var t=this.parentNode;t&&t.removeChild(this)}function H(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function V(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var Y={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Y={mouseenter:"mouseover",mouseleave:"mouseout"}));function X(t,e,n){return t=J(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function J(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function Q(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function K(t,e,n){var r=Y.hasOwnProperty(t.type)?X:J;return function(i,o,s){var a,c=this.__on,u=r(e,o,s);if(c)for(var l=0,h=c.length;l<h;++l)if((a=c[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=n),void(a.value=e);this.addEventListener(t.type,u,n),a={type:t.type,name:t.name,value:e,listener:u,capture:n},c?c.push(a):this.__on=[a]}}function Z(t,e,n){var r=D(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var tt=[null];function et(t,e){this._groups=t,this._parents=e}et.prototype=function(){return new et([[document.documentElement]],tt)}.prototype={constructor:et,select:function(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],c=a.length,u=r[i]=new Array(c),l=0;l<c;++l)(o=a[l])&&(s=t.call(o,o.__data__,l,a))&&("__data__"in o&&(s.__data__=o.__data__),u[l]=s);return new et(r,this._parents)},selectAll:function(t){var e;"function"!=typeof t&&(t=null==(e=t)?S:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,i=[],o=[],s=0;s<r;++s)for(var a,c=n[s],u=c.length,l=0;l<u;++l)(a=c[l])&&(i.push(t.call(a,a.__data__,l,c)),o.push(a));return new et(i,o)},filter:function(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,c=r[i]=[],u=0;u<a;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&c.push(o);return new et(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each(function(t){p[++l]=t}),p;var n,r=e?N:P,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=o.length,a=new Array(s),c=new Array(s),u=new Array(s),l=0;l<s;++l){var h=i[l],f=o[l],d=f.length,p=t.call(h,h&&h.__data__,l,i),g=p.length,m=c[l]=new Array(g),v=a[l]=new Array(g);r(h,f,m,v,u[l]=new Array(d),p,e);for(var _,y,w=0,x=0;w<g;++w)if(_=m[w]){for(w>=x&&(x=w+1);!(y=v[x])&&++x<g;);_._next=y||null}}return(a=new et(a,i))._enter=c,a._exit=u,a},enter:function(){return new et(this._enter||this._groups.map(C),this._parents)},exit:function(){return new et(this._exit||this._groups.map(C),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c,u=e[a],l=n[a],h=u.length,f=s[a]=new Array(h),d=0;d<h;++d)(c=u[d]||l[d])&&(f[d]=c);for(;a<r;++a)s[a]=e[a];return new et(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&s!==r.nextSibling&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=B);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],c=a.length,u=i[o]=new Array(c),l=0;l<c;++l)(s=a[l])&&(u[l]=s);u.sort(e)}return new et(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=_(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||D(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=O(t+"");if(arguments.length<2){for(var r=R(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?j:G)(this,t)}}:e?function(t){return function(){j(this,t)}}:function(t){return function(){G(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?M:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?W:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(F)},lower:function(){return this.each(L)},append:function(t){var e="function"==typeof t?t:y(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:y(t),r=null==e?U:"function"==typeof e?e:x(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(z)},clone:function(t){return this.select(t?V:H)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?K:Q,null==n&&(n=!1),r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var c,u=0,l=a.length;u<l;++u)for(r=0,c=a[u];r<s;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Z(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Z(this,t,e)}})(t,e))}};var nt=function(t){return"string"==typeof t?new et([[document.querySelector(t)]],[document.documentElement]):new et([[t]],tt)};class rt{constructor(t,e,n=!1){$(`#${t}`).show();const r=n?"btn-group-vertical btn-group-sm":"btn-group btn-group-sm";this.bar=$("<div/>").addClass(r).appendTo(`#${t}`),this.buttons={},this.tooltip=e}createDownloadSvgButton(t,e,n,r,i="fa-download"){this.createButton(t,i);nt(`#${t}`).on("click",()=>{this.downloadSvg(e,n,r)}).on("mouseover",()=>{this.tooltip.show("Download")}).on("mouseout",()=>{this.tooltip.hide()})}createResetButton(t,e,n="fa-expand-arrows-alt"){this.createButton(t,n);nt(`#${t}`).on("click",e).on("mouseover",()=>{this.tooltip.show("Reset the scales")}).on("mouseout",()=>{this.tooltip.hide()})}createButton(t,e="fa-download"){const n=$("<a/>").attr("id",t).addClass("btn btn-default").appendTo(this.bar);return $("<i/>").addClass(`fa ${e}`).appendTo(n),this.buttons[t]=n,n}attachTooltip(t){this.tooltip=t}downloadSvg(t,e,n){let r=$($($(`${"#"+t}`))[0]),i=r.clone().attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg"),o=function(t){for(var e="",n=document.styleSheets,r=0;r<n.length;r++)try{if(null==n[r].cssRules)continue;for(var i=n[r].cssRules,o=0;o<i.length;o++){var s=i[o];if(void 0!==s.style){var a,c=void 0===s.selectorText?s.selectorText:s.selectorText.replace(`#${t[0].id} `,"");try{a=$(t).find(c)}catch(t){a=[]}a.length>0&&(e+=s.selectorText+" { "+s.style.cssText+" }\n")}}}catch(t){if("SecurityError"!==t.name)throw t;continue}var u=document.createElement("style");return u.setAttribute("type","text/css"),u.innerHTML="<![CDATA[\n"+e+"\n]]>",u}(r.get());i.prepend(o),$("#"+n).html("").hide();let s=$(`#${n}`).append(i).html(),a=new Blob([s],{type:"image/svg+xml"});saveAs(a,e),$(`#${n}`).html("").hide()}}function it(){return{checkSignedIn:ut,getUser:lt,signInButton:ot,signOut:at,grantScopes:ht}}function ot(){gapi.signin2.render("my-signin2",{scope:"profile email",width:130,height:30,longtitle:!1,theme:"dark",onsuccess:st,onfailure:ct})}function st(t){$("#g-signout").show()}function at(){gapi.auth2.getAuthInstance().signOut().then(function(){console.log("User signed out")}),$("#g-signout").hide()}function ct(t){console.error(t)}function ut(){return!!gapi.auth2&&lt().isSignedIn()}function lt(){return gapi.auth2.getAuthInstance().currentUser.get()}function ht(t){this.getUser().grant({scope:t}).then(function(t){console.log(JSON.stringify({message:"success",value:t}))},function(t){console.error(JSON>stringify({message:"fail",value:t}))})}function ft(t,e,n){const r=function(t){const n="tissueSiteDetailId";return e.filter(e=>{if(!e.hasOwnProperty("dataType"))throw console.error(e),"Parse Error: required attribute is missing: _type or dataType";return"RNA-Seq-WGS"==t?e._type==t:e.dataType==t}).reduce((t,e)=>{if(!e.hasOwnProperty(n))throw console.error(e),"Parse Error: required attribute is missing:"+n;return void 0===t[e[n]]&&(t[e[n]]=[]),t[e[n]].push(e),t},{})},i=[{label:"RNA-Seq",id:"RNA-Seq",data:r("RNA-Seq")},{label:"RNA-Seq With WGS",id:"RNA-Seq-WGS",data:r("RNA-Seq-WGS")},{label:"WES",id:"WES",data:r("WES")},{label:"WGS",id:"WGS",data:r("WGS")}];return{datasetId:t,X:n.map(t=>(["tissueSiteDetailId","tissueSiteDetail"].forEach(e=>{if(!t.hasOwnProperty(e))throw console.error(t),"Tissue parsing error: required attribute is missing: "+e}),t.id=t.tissueSiteDetailId,t.label=t.tissueSiteDetail,i.forEach(e=>{t[e.id]=e.data[t.id]||void 0}),t)),Y:i,data:e}}function dt(t,e,n,r){const i={gtex_v7:{label:"GTEX V7",bgcolor:"#2a718b"}},o=nt(`#${t}`);o.select("thead").selectAll("th").data([{label:"",id:""}].concat(e.Y)).enter().append("th").attr("scope","col").attr("class",(t,e)=>""==t.id?"":`y${e-1}`).text(t=>t.label),o.select(".table-label").selectAll("*").remove(),o.select(".table-label").append("th").attr("colspan",e.Y.length+1).text(i[e.datasetId].label).style("background-color",i[e.datasetId].bgcolor),function(t,e){t.selectAll(".data-row").remove();const n=t.selectAll(".data-row").data(e.X).enter().append("tr").classed("data-row",!0);n.append("th").attr("scope","row").attr("class",(t,e)=>`x${e}`).text(t=>t.label),e.Y.forEach((t,e)=>{n.append("td").attr("class",(n,r)=>void 0===n[t.id]?"":`x${r} y${e}`).text(e=>{let n=e[t.id]?e[t.id].length:"";return n})})}(o.select("tbody"),e),function(t){const e=nt(`#${t}`).select("tbody").selectAll("td");nt(`#${t}`).select("thead").selectAll("th").style("cursor","pointer").on("click",function(){const t=nt(this).attr("class");"col"==nt(this).attr("scope")?(nt(this).attr("scope","selected"),e.filter(`.${t}`).classed("selected",!0)):(nt(this).attr("scope","col"),e.filter(`.${t}`).classed("selected",!1))}),nt(`#${t}`).select("tbody").selectAll("th").style("cursor","pointer").on("click",function(){const t=nt(this).attr("class");"row"==nt(this).attr("scope")?(nt(this).attr("scope","selected"),e.filter(`.${t}`).classed("selected",!0)):(nt(this).attr("scope","row"),e.filter(`.${t}`).classed("selected",!1))}),e.style("cursor","pointer").on("click",function(){nt(this).classed("selected",!nt(this).classed("selected"))})}(t),function(t,e,n,r){nt("#matrix-table-toolbar").selectAll("*").remove(),new rt("matrix-table-toolbar",void 0,!0).createButton("sample-download"),function(t,e){const n=nt(`#${t}`).select("tbody").selectAll("td");nt("#sample-download").style("cursor","pointer").on("click",function(){let t=n.filter(".selected");if(t.empty())alert("You have not selected any samples to download.");else{let n=["Sample ID","Tissue Name","Data Type","CRAM File GCP","CRAM File AWS","CRAM File MD5","CRAM File Size","CRAM Index GCP","CRAM Index AWS"].join("\t")+"\n";t.each(function(t){const r=nt(this).attr("class").split(" ").filter(t=>"selected"!=t),i=e.X[parseInt(r[0].replace("x",""))],o=e.Y[parseInt(r[1].replace("y",""))],s=o.data[i.id].map(t=>{let e=["cram_file","cram_file_aws","cram_file_md5","cram_file_size","cram_index","cram_index_aws"].map(e=>t.cramFile[e]);["cramFile","tissueSiteDetail","dataType"].forEach(e=>{if(!t.hasOwnProperty(e))throw"Parse Error: required attribute is missing: "+e});let n=[t.cramFile.sample_id,t.tissueSiteDetail,t.dataType].concat(e);return n.join("\t")});n+=s.join("\n")});let r=new Blob([n],{type:"text/plain;charset=utf-8"});saveAs(r,"GTEx.cram.txt",!0)}})}(t,e)}(t,e)}return t.renderSignInButton=function(t=it().signInButton){t()},t.signOut=function(t=it().signOut){t()},t.launch=function(t,e="gtex_v7",n=it(),r=function(){const t="https://gtexportal.org/rest/v1/";return{singleTissueEqtl:t+"association/singleTissueEqtl?format=json&datasetId=gtex_v7&gencodeId=",ld:t+"dataset/ld?format=json&datasetId=gtex_v7&gencodeId=",dyneqtl:t+"association/dyneqtl",snp:t+"reference/variant?format=json&snpId=",variantId:t+"dataset/variant?format=json&variantId=",exonExp:t+"expression/medianExonExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",transcriptExp:t+"expression/medianTranscriptExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",junctionExp:t+"expression/medianJunctionExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",transcript:t+"reference/transcript?datasetId=gtex_v7&gencodeId=",exon:t+"reference/exon?datasetId=gtex_v7&gencodeId=",geneModel:t+"dataset/collapsedGeneModelExon?datasetId=gtex_v7&gencodeId=",geneModelUnfiltered:t+"dataset/fullCollapsedGeneModelExon?datasetId=gtex_v7&gencodeId=",geneExp:t+"expression/geneExpression?datasetId=gtex_v7&gencodeId=",medGeneExp:t+"expression/medianGeneExpression?datasetId=gtex_v7&hcluster=true&pageSize=10000",geneExpBoxplot:t+"expression/geneExpression?datasetId=gtex_v7&boxplotDetail=full&gencodeId=",topInTissueFiltered:t+"expression/topExpressedGene?datasetId=gtex_v7&filterMtGene=true&sortBy=median&sortDirection=desc&pageSize=50&tissueSiteDetailId=",topInTissue:t+"expression/topExpressedGene?datasetId=gtex_v7&sortBy=median&sortDirection=desc&pageSize=50&tissueSiteDetailId=",geneId:t+"reference/gene?format=json&gencodeVersion=v19&genomeBuild=GRCh37%2Fhg19&geneId=",tissue:t+"dataset/tissueInfo?format=json&datasetId=gtex_v7",sample:"/tmpSummaryData/gtex.Sample.csv",rnaseqCram:"/tmpSummaryData/rnaseq_cram_files_v7_dbGaP_011516.txt",wgsCram:"/tmpSummaryData/wgs_cram_files_v7_hg38_dbGaP_011516.txt",fcBilling:"https://api.firecloud.org/api/profile/billing",fcWorkSpace:"https://api.firecloud.org/api/workspaces",fcPortalWorkSpace:"https://portal.firecloud.org/#workspaces"}}()){const i=[g(r.tissue),d(r.rnaseqCram),d(r.wgsCram),d(r.sample)];Promise.all(i).then(function(n){let r=function(t){const e="tissueInfo";if(!t.hasOwnProperty(e))throw"Parsing Error: required json attr is missing: "+e;const n=t[e];return["tissueSiteDetailId","tissueSiteDetail","colorHex"].forEach(t=>{if(!n[0].hasOwnProperty(t))throw"Parsing Error: required json attr is missing: "+t}),n}(n[0]);const i={rnaseq:n[1].reduce((t,e)=>(t[e.sample_id.toUpperCase()]=e,t),{}),wgs:n[2].reduce((t,e)=>(t[e.sample_id.toUpperCase()]=e,t),{})};let o=n[3].filter(t=>t.datasetId==e).map(t=>{switch(t.dataType){case"WGS":if(!i.wgs.hasOwnProperty(t.sampleId))throw t.sampleId+" has no cram files";t.cramFile=i.wgs[t.sampleId];break;case"RNASEQ":if(!i.rnaseq.hasOwnProperty(t.sampleId))throw t.sampleId+" has no cram files";t.cramFile=i.rnaseq[t.sampleId],t.dataType="RNA-Seq"}return t});o=function(t){const e=t.filter(t=>{if(!t.hasOwnProperty("dataType"))throw console.error(t),"Parse Error: required attribute is missing: dataType";return"WGS"==t.dataType}).reduce((t,e)=>{if(!e.hasOwnProperty("subjectId"))throw"Parse Error: required attribute is missing.";return t[e.subjectId]=1,t},{});return t.map(t=>{if(!t.hasOwnProperty("dataType")||!t.hasOwnProperty("subjectId"))throw"Parse Error: required attribute is missing.";return"RNA-Seq"==t.dataType&&e.hasOwnProperty(t.subjectId)&&(t._type="RNA-Seq-WGS"),t})}(o);const s=ft(e,o,r);dt(t,s),function(t,e,n,r,i,o){const s=()=>{let i=$('input[name="sex"]:checked').val(),o=[];if($(".ageBox").each(function(){$(this).is(":checked")&&o.push($(this).val()),o.length<6&&$('input[name="allAges"]').prop("checked",!1),6==o.length&&$('input[name="allAges"][value="all"]').prop("checked",!0)}),"both"==i&&6==o.length)dt(t,ft(e.datasetId,n,r));else{let s=void 0;s="both"==i?ft(e.datasetId,n.filter(t=>o.indexOf(t.ageBracket)>=0),r):6==o.length?ft(e.datasetId,n.filter(t=>t.sex==i),r):ft(e.datasetId,n.filter(t=>t.sex==i&&o.indexOf(t.ageBracket)>=0),r),dt(t,s)}};$('input[name="sex"]').change(s),$(".ageBox").each(function(){$(this).change(s)}),$('input[name="allAges"]').change(function(){let t=$(this).val();switch(t){case"all":$(".ageBox").prop("checked",!0),s();break;case"reset":$(".ageBox").prop("checked",!1)}})}(t,s,o,r)}).catch(function(t){console.error(t)})},t}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JhbS1maWxlLXF1ZXJ5LmJ1bmRsZS5taW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL2Rzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL2Nzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL3Rzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mZXRjaC9zcmMvdGV4dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mZXRjaC9zcmMvZHN2LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZldGNoL3NyYy9qc29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdG9yQWxsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbWF0Y2hlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zcGFyc2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW50ZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9jb25zdGFudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9kYXRhLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NvcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vYXR0ci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3dpbmRvdy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9jbGFzc2VkLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3RleHQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaHRtbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9yYWlzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9sb3dlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9pbnNlcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmVtb3ZlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Nsb25lLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3RBbGwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2V4aXQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vbWVyZ2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vb3JkZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2FsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2Rlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2RlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NpemUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW1wdHkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZWFjaC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zdHlsZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9wcm9wZXJ0eS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hcHBlbmQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZGF0dW0uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3QuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9Ub29sYmFyLmpzIiwiLi4vLi4vc3JjL21vZHVsZXMvdXRpbHMuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9nb29nbGVVc2VyLmpzIiwiLi4vLi4vc3JjL0NyYW1GaWxlUXVlcnkuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9ndGV4RGF0YVBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRU9MID0ge30sXG4gICAgRU9GID0ge30sXG4gICAgUVVPVEUgPSAzNCxcbiAgICBORVdMSU5FID0gMTAsXG4gICAgUkVUVVJOID0gMTM7XG5cbmZ1bmN0aW9uIG9iamVjdENvbnZlcnRlcihjb2x1bW5zKSB7XG4gIHJldHVybiBuZXcgRnVuY3Rpb24oXCJkXCIsIFwicmV0dXJuIHtcIiArIGNvbHVtbnMubWFwKGZ1bmN0aW9uKG5hbWUsIGkpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobmFtZSkgKyBcIjogZFtcIiArIGkgKyBcIl1cIjtcbiAgfSkuam9pbihcIixcIikgKyBcIn1cIik7XG59XG5cbmZ1bmN0aW9uIGN1c3RvbUNvbnZlcnRlcihjb2x1bW5zLCBmKSB7XG4gIHZhciBvYmplY3QgPSBvYmplY3RDb252ZXJ0ZXIoY29sdW1ucyk7XG4gIHJldHVybiBmdW5jdGlvbihyb3csIGkpIHtcbiAgICByZXR1cm4gZihvYmplY3Qocm93KSwgaSwgY29sdW1ucyk7XG4gIH07XG59XG5cbi8vIENvbXB1dGUgdW5pcXVlIGNvbHVtbnMgaW4gb3JkZXIgb2YgZGlzY292ZXJ5LlxuZnVuY3Rpb24gaW5mZXJDb2x1bW5zKHJvd3MpIHtcbiAgdmFyIGNvbHVtblNldCA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBjb2x1bW5zID0gW107XG5cbiAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuICAgIGZvciAodmFyIGNvbHVtbiBpbiByb3cpIHtcbiAgICAgIGlmICghKGNvbHVtbiBpbiBjb2x1bW5TZXQpKSB7XG4gICAgICAgIGNvbHVtbnMucHVzaChjb2x1bW5TZXRbY29sdW1uXSA9IGNvbHVtbik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gY29sdW1ucztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZGVsaW1pdGVyKSB7XG4gIHZhciByZUZvcm1hdCA9IG5ldyBSZWdFeHAoXCJbXFxcIlwiICsgZGVsaW1pdGVyICsgXCJcXG5cXHJdXCIpLFxuICAgICAgREVMSU1JVEVSID0gZGVsaW1pdGVyLmNoYXJDb2RlQXQoMCk7XG5cbiAgZnVuY3Rpb24gcGFyc2UodGV4dCwgZikge1xuICAgIHZhciBjb252ZXJ0LCBjb2x1bW5zLCByb3dzID0gcGFyc2VSb3dzKHRleHQsIGZ1bmN0aW9uKHJvdywgaSkge1xuICAgICAgaWYgKGNvbnZlcnQpIHJldHVybiBjb252ZXJ0KHJvdywgaSAtIDEpO1xuICAgICAgY29sdW1ucyA9IHJvdywgY29udmVydCA9IGYgPyBjdXN0b21Db252ZXJ0ZXIocm93LCBmKSA6IG9iamVjdENvbnZlcnRlcihyb3cpO1xuICAgIH0pO1xuICAgIHJvd3MuY29sdW1ucyA9IGNvbHVtbnMgfHwgW107XG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVJvd3ModGV4dCwgZikge1xuICAgIHZhciByb3dzID0gW10sIC8vIG91dHB1dCByb3dzXG4gICAgICAgIE4gPSB0ZXh0Lmxlbmd0aCxcbiAgICAgICAgSSA9IDAsIC8vIGN1cnJlbnQgY2hhcmFjdGVyIGluZGV4XG4gICAgICAgIG4gPSAwLCAvLyBjdXJyZW50IGxpbmUgbnVtYmVyXG4gICAgICAgIHQsIC8vIGN1cnJlbnQgdG9rZW5cbiAgICAgICAgZW9mID0gTiA8PSAwLCAvLyBjdXJyZW50IHRva2VuIGZvbGxvd2VkIGJ5IEVPRj9cbiAgICAgICAgZW9sID0gZmFsc2U7IC8vIGN1cnJlbnQgdG9rZW4gZm9sbG93ZWQgYnkgRU9MP1xuXG4gICAgLy8gU3RyaXAgdGhlIHRyYWlsaW5nIG5ld2xpbmUuXG4gICAgaWYgKHRleHQuY2hhckNvZGVBdChOIC0gMSkgPT09IE5FV0xJTkUpIC0tTjtcbiAgICBpZiAodGV4dC5jaGFyQ29kZUF0KE4gLSAxKSA9PT0gUkVUVVJOKSAtLU47XG5cbiAgICBmdW5jdGlvbiB0b2tlbigpIHtcbiAgICAgIGlmIChlb2YpIHJldHVybiBFT0Y7XG4gICAgICBpZiAoZW9sKSByZXR1cm4gZW9sID0gZmFsc2UsIEVPTDtcblxuICAgICAgLy8gVW5lc2NhcGUgcXVvdGVzLlxuICAgICAgdmFyIGksIGogPSBJLCBjO1xuICAgICAgaWYgKHRleHQuY2hhckNvZGVBdChqKSA9PT0gUVVPVEUpIHtcbiAgICAgICAgd2hpbGUgKEkrKyA8IE4gJiYgdGV4dC5jaGFyQ29kZUF0KEkpICE9PSBRVU9URSB8fCB0ZXh0LmNoYXJDb2RlQXQoKytJKSA9PT0gUVVPVEUpO1xuICAgICAgICBpZiAoKGkgPSBJKSA+PSBOKSBlb2YgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgoYyA9IHRleHQuY2hhckNvZGVBdChJKyspKSA9PT0gTkVXTElORSkgZW9sID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gUkVUVVJOKSB7IGVvbCA9IHRydWU7IGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpICsrSTsgfVxuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqICsgMSwgaSAtIDEpLnJlcGxhY2UoL1wiXCIvZywgXCJcXFwiXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIG5leHQgZGVsaW1pdGVyIG9yIG5ld2xpbmUuXG4gICAgICB3aGlsZSAoSSA8IE4pIHtcbiAgICAgICAgaWYgKChjID0gdGV4dC5jaGFyQ29kZUF0KGkgPSBJKyspKSA9PT0gTkVXTElORSkgZW9sID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gUkVUVVJOKSB7IGVvbCA9IHRydWU7IGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpICsrSTsgfVxuICAgICAgICBlbHNlIGlmIChjICE9PSBERUxJTUlURVIpIGNvbnRpbnVlO1xuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqLCBpKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIGxhc3QgdG9rZW4gYmVmb3JlIEVPRi5cbiAgICAgIHJldHVybiBlb2YgPSB0cnVlLCB0ZXh0LnNsaWNlKGosIE4pO1xuICAgIH1cblxuICAgIHdoaWxlICgodCA9IHRva2VuKCkpICE9PSBFT0YpIHtcbiAgICAgIHZhciByb3cgPSBbXTtcbiAgICAgIHdoaWxlICh0ICE9PSBFT0wgJiYgdCAhPT0gRU9GKSByb3cucHVzaCh0KSwgdCA9IHRva2VuKCk7XG4gICAgICBpZiAoZiAmJiAocm93ID0gZihyb3csIG4rKykpID09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgcm93cy5wdXNoKHJvdyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXQocm93cywgY29sdW1ucykge1xuICAgIGlmIChjb2x1bW5zID09IG51bGwpIGNvbHVtbnMgPSBpbmZlckNvbHVtbnMocm93cyk7XG4gICAgcmV0dXJuIFtjb2x1bW5zLm1hcChmb3JtYXRWYWx1ZSkuam9pbihkZWxpbWl0ZXIpXS5jb25jYXQocm93cy5tYXAoZnVuY3Rpb24ocm93KSB7XG4gICAgICByZXR1cm4gY29sdW1ucy5tYXAoZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRWYWx1ZShyb3dbY29sdW1uXSk7XG4gICAgICB9KS5qb2luKGRlbGltaXRlcik7XG4gICAgfSkpLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRSb3dzKHJvd3MpIHtcbiAgICByZXR1cm4gcm93cy5tYXAoZm9ybWF0Um93KS5qb2luKFwiXFxuXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9ybWF0Um93KHJvdykge1xuICAgIHJldHVybiByb3cubWFwKGZvcm1hdFZhbHVlKS5qb2luKGRlbGltaXRlcik7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQgPT0gbnVsbCA/IFwiXCJcbiAgICAgICAgOiByZUZvcm1hdC50ZXN0KHRleHQgKz0gXCJcIikgPyBcIlxcXCJcIiArIHRleHQucmVwbGFjZSgvXCIvZywgXCJcXFwiXFxcIlwiKSArIFwiXFxcIlwiXG4gICAgICAgIDogdGV4dDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGFyc2U6IHBhcnNlLFxuICAgIHBhcnNlUm93czogcGFyc2VSb3dzLFxuICAgIGZvcm1hdDogZm9ybWF0LFxuICAgIGZvcm1hdFJvd3M6IGZvcm1hdFJvd3NcbiAgfTtcbn1cbiIsImltcG9ydCBkc3YgZnJvbSBcIi4vZHN2XCI7XG5cbnZhciBjc3YgPSBkc3YoXCIsXCIpO1xuXG5leHBvcnQgdmFyIGNzdlBhcnNlID0gY3N2LnBhcnNlO1xuZXhwb3J0IHZhciBjc3ZQYXJzZVJvd3MgPSBjc3YucGFyc2VSb3dzO1xuZXhwb3J0IHZhciBjc3ZGb3JtYXQgPSBjc3YuZm9ybWF0O1xuZXhwb3J0IHZhciBjc3ZGb3JtYXRSb3dzID0gY3N2LmZvcm1hdFJvd3M7XG4iLCJpbXBvcnQgZHN2IGZyb20gXCIuL2RzdlwiO1xuXG52YXIgdHN2ID0gZHN2KFwiXFx0XCIpO1xuXG5leHBvcnQgdmFyIHRzdlBhcnNlID0gdHN2LnBhcnNlO1xuZXhwb3J0IHZhciB0c3ZQYXJzZVJvd3MgPSB0c3YucGFyc2VSb3dzO1xuZXhwb3J0IHZhciB0c3ZGb3JtYXQgPSB0c3YuZm9ybWF0O1xuZXhwb3J0IHZhciB0c3ZGb3JtYXRSb3dzID0gdHN2LmZvcm1hdFJvd3M7XG4iLCJmdW5jdGlvbiByZXNwb25zZVRleHQocmVzcG9uc2UpIHtcbiAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBmZXRjaChpbnB1dCwgaW5pdCkudGhlbihyZXNwb25zZVRleHQpO1xufVxuIiwiaW1wb3J0IHtjc3ZQYXJzZSwgZHN2Rm9ybWF0LCB0c3ZQYXJzZX0gZnJvbSBcImQzLWRzdlwiO1xuaW1wb3J0IHRleHQgZnJvbSBcIi4vdGV4dFwiO1xuXG5mdW5jdGlvbiBkc3ZQYXJzZShwYXJzZSkge1xuICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIGluaXQsIHJvdykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBpbml0ID09PSBcImZ1bmN0aW9uXCIpIHJvdyA9IGluaXQsIGluaXQgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRleHQoaW5wdXQsIGluaXQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBwYXJzZShyZXNwb25zZSwgcm93KTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZHN2KGRlbGltaXRlciwgaW5wdXQsIGluaXQsIHJvdykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMyAmJiB0eXBlb2YgaW5pdCA9PT0gXCJmdW5jdGlvblwiKSByb3cgPSBpbml0LCBpbml0ID0gdW5kZWZpbmVkO1xuICB2YXIgZm9ybWF0ID0gZHN2Rm9ybWF0KGRlbGltaXRlcik7XG4gIHJldHVybiB0ZXh0KGlucHV0LCBpbml0KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGZvcm1hdC5wYXJzZShyZXNwb25zZSwgcm93KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB2YXIgY3N2ID0gZHN2UGFyc2UoY3N2UGFyc2UpO1xuZXhwb3J0IHZhciB0c3YgPSBkc3ZQYXJzZSh0c3ZQYXJzZSk7XG4iLCJmdW5jdGlvbiByZXNwb25zZUpzb24ocmVzcG9uc2UpIHtcbiAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBmZXRjaChpbnB1dCwgaW5pdCkudGhlbihyZXNwb25zZUpzb24pO1xufVxuIiwiZXhwb3J0IHZhciB4aHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogeGh0bWwsXG4gIHhsaW5rOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcbiAgeG1sOiBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG59O1xuIiwiaW1wb3J0IG5hbWVzcGFjZXMgZnJvbSBcIi4vbmFtZXNwYWNlc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBwcmVmaXggPSBuYW1lICs9IFwiXCIsIGkgPSBwcmVmaXguaW5kZXhPZihcIjpcIik7XG4gIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgcmV0dXJuIG5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogbmFtZXNwYWNlc1twcmVmaXhdLCBsb2NhbDogbmFtZX0gOiBuYW1lO1xufVxuIiwiaW1wb3J0IG5hbWVzcGFjZSBmcm9tIFwiLi9uYW1lc3BhY2VcIjtcbmltcG9ydCB7eGh0bWx9IGZyb20gXCIuL25hbWVzcGFjZXNcIjtcblxuZnVuY3Rpb24gY3JlYXRvckluaGVyaXQobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gdXJpID09PSB4aHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSB4aHRtbFxuICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSlcbiAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModXJpLCBuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRvckZpeGVkKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcbiAgcmV0dXJuIChmdWxsbmFtZS5sb2NhbFxuICAgICAgPyBjcmVhdG9yRml4ZWRcbiAgICAgIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIG5vbmUoKSB7fVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IG5vbmUgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsImZ1bmN0aW9uIGVtcHR5KCkge1xuICByZXR1cm4gW107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gZW1wdHkgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsInZhciBtYXRjaGVyID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9O1xufTtcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKCFlbGVtZW50Lm1hdGNoZXMpIHtcbiAgICB2YXIgdmVuZG9yTWF0Y2hlcyA9IGVsZW1lbnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yXG4gICAgICAgIHx8IGVsZW1lbnQubXNNYXRjaGVzU2VsZWN0b3JcbiAgICAgICAgfHwgZWxlbWVudC5tb3pNYXRjaGVzU2VsZWN0b3JcbiAgICAgICAgfHwgZWxlbWVudC5vTWF0Y2hlc1NlbGVjdG9yO1xuICAgIG1hdGNoZXIgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmVuZG9yTWF0Y2hlcy5jYWxsKHRoaXMsIHNlbGVjdG9yKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtYXRjaGVyO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odXBkYXRlKSB7XG4gIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7XG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZVwiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRW50ZXJOb2RlKHBhcmVudCwgZGF0dW0pIHtcbiAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG4gIHRoaXMubmFtZXNwYWNlVVJJID0gcGFyZW50Lm5hbWVzcGFjZVVSSTtcbiAgdGhpcy5fbmV4dCA9IG51bGw7XG4gIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5fX2RhdGFfXyA9IGRhdHVtO1xufVxuXG5FbnRlck5vZGUucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogRW50ZXJOb2RlLFxuICBhcHBlbmRDaGlsZDogZnVuY3Rpb24oY2hpbGQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHRoaXMuX25leHQpOyB9LFxuICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKGNoaWxkLCBuZXh0KSB7IHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBuZXh0KTsgfSxcbiAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsgfSxcbiAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsgfVxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQge0VudGVyTm9kZX0gZnJvbSBcIi4vZW50ZXJcIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi4vY29uc3RhbnRcIjtcblxudmFyIGtleVByZWZpeCA9IFwiJFwiOyAvLyBQcm90ZWN0IGFnYWluc3Qga2V5cyBsaWtlIOKAnF9fcHJvdG9fX+KAnS5cblxuZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHtcbiAgdmFyIGkgPSAwLFxuICAgICAgbm9kZSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBmaXQgaW50byB1cGRhdGUuXG4gIC8vIFB1dCBhbnkgbnVsbCBub2RlcyBpbnRvIGVudGVyLlxuICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuXG4gIGZvciAoOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZG9u4oCZdCBmaXQgaW50byBleGl0LlxuICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYmluZEtleShwYXJlbnQsIGdyb3VwLCBlbnRlciwgdXBkYXRlLCBleGl0LCBkYXRhLCBrZXkpIHtcbiAgdmFyIGksXG4gICAgICBub2RlLFxuICAgICAgbm9kZUJ5S2V5VmFsdWUgPSB7fSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAga2V5VmFsdWVzID0gbmV3IEFycmF5KGdyb3VwTGVuZ3RoKSxcbiAgICAgIGtleVZhbHVlO1xuXG4gIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBub2RlLlxuICAvLyBJZiBtdWx0aXBsZSBub2RlcyBoYXZlIHRoZSBzYW1lIGtleSwgdGhlIGR1cGxpY2F0ZXMgYXJlIGFkZGVkIHRvIGV4aXQuXG4gIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAga2V5VmFsdWVzW2ldID0ga2V5VmFsdWUgPSBrZXlQcmVmaXggKyBrZXkuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7XG4gICAgICBpZiAoa2V5VmFsdWUgaW4gbm9kZUJ5S2V5VmFsdWUpIHtcbiAgICAgICAgZXhpdFtpXSA9IG5vZGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlQnlLZXlWYWx1ZVtrZXlWYWx1ZV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBkYXR1bS5cbiAgLy8gSWYgdGhlcmUgYSBub2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleSwgam9pbiBhbmQgYWRkIGl0IHRvIHVwZGF0ZS5cbiAgLy8gSWYgdGhlcmUgaXMgbm90IChvciB0aGUga2V5IGlzIGEgZHVwbGljYXRlKSwgYWRkIGl0IHRvIGVudGVyLlxuICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAga2V5VmFsdWUgPSBrZXlQcmVmaXggKyBrZXkuY2FsbChwYXJlbnQsIGRhdGFbaV0sIGksIGRhdGEpO1xuICAgIGlmIChub2RlID0gbm9kZUJ5S2V5VmFsdWVba2V5VmFsdWVdKSB7XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICBub2RlQnlLZXlWYWx1ZVtrZXlWYWx1ZV0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKG5vZGVCeUtleVZhbHVlW2tleVZhbHVlc1tpXV0gPT09IG5vZGUpKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgZGF0YSA9IG5ldyBBcnJheSh0aGlzLnNpemUoKSksIGogPSAtMTtcbiAgICB0aGlzLmVhY2goZnVuY3Rpb24oZCkgeyBkYXRhWysral0gPSBkOyB9KTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHZhciBiaW5kID0ga2V5ID8gYmluZEtleSA6IGJpbmRJbmRleCxcbiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLFxuICAgICAgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdmFsdWUgPSBjb25zdGFudCh2YWx1ZSk7XG5cbiAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgdmFyIHBhcmVudCA9IHBhcmVudHNbal0sXG4gICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLFxuICAgICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgZGF0YSA9IHZhbHVlLmNhbGwocGFyZW50LCBwYXJlbnQgJiYgcGFyZW50Ll9fZGF0YV9fLCBqLCBwYXJlbnRzKSxcbiAgICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAgICBlbnRlckdyb3VwID0gZW50ZXJbal0gPSBuZXcgQXJyYXkoZGF0YUxlbmd0aCksXG4gICAgICAgIHVwZGF0ZUdyb3VwID0gdXBkYXRlW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLFxuICAgICAgICBleGl0R3JvdXAgPSBleGl0W2pdID0gbmV3IEFycmF5KGdyb3VwTGVuZ3RoKTtcblxuICAgIGJpbmQocGFyZW50LCBncm91cCwgZW50ZXJHcm91cCwgdXBkYXRlR3JvdXAsIGV4aXRHcm91cCwgZGF0YSwga2V5KTtcblxuICAgIC8vIE5vdyBjb25uZWN0IHRoZSBlbnRlciBub2RlcyB0byB0aGVpciBmb2xsb3dpbmcgdXBkYXRlIG5vZGUsIHN1Y2ggdGhhdFxuICAgIC8vIGFwcGVuZENoaWxkIGNhbiBpbnNlcnQgdGhlIG1hdGVyaWFsaXplZCBlbnRlciBub2RlIGJlZm9yZSB0aGlzIG5vZGUsXG4gICAgLy8gcmF0aGVyIHRoYW4gYXQgdGhlIGVuZCBvZiB0aGUgcGFyZW50IG5vZGUuXG4gICAgZm9yICh2YXIgaTAgPSAwLCBpMSA9IDAsIHByZXZpb3VzLCBuZXh0OyBpMCA8IGRhdGFMZW5ndGg7ICsraTApIHtcbiAgICAgIGlmIChwcmV2aW91cyA9IGVudGVyR3JvdXBbaTBdKSB7XG4gICAgICAgIGlmIChpMCA+PSBpMSkgaTEgPSBpMCArIDE7XG4gICAgICAgIHdoaWxlICghKG5leHQgPSB1cGRhdGVHcm91cFtpMV0pICYmICsraTEgPCBkYXRhTGVuZ3RoKTtcbiAgICAgICAgcHJldmlvdXMuX25leHQgPSBuZXh0IHx8IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlID0gbmV3IFNlbGVjdGlvbih1cGRhdGUsIHBhcmVudHMpO1xuICB1cGRhdGUuX2VudGVyID0gZW50ZXI7XG4gIHVwZGF0ZS5fZXhpdCA9IGV4aXQ7XG4gIHJldHVybiB1cGRhdGU7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29tcGFyZSkge1xuICBpZiAoIWNvbXBhcmUpIGNvbXBhcmUgPSBhc2NlbmRpbmc7XG5cbiAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJlKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfVxuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHNvcnRncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHNvcnRncm91cCA9IHNvcnRncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHNvcnRncm91cFtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHNvcnRncm91cC5zb3J0KGNvbXBhcmVOb2RlKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7XG59XG5cbmZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsImltcG9ydCBuYW1lc3BhY2UgZnJvbSBcIi4uL25hbWVzcGFjZVwiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHYpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKTtcbiAgICByZXR1cm4gZnVsbG5hbWUubG9jYWxcbiAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbClcbiAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJGdW5jdGlvbk5TIDogYXR0ckZ1bmN0aW9uKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpKShmdWxsbmFtZSwgdmFsdWUpKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUpIHtcbiAgcmV0dXJuIChub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSAvLyBub2RlIGlzIGEgTm9kZVxuICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG4iLCJmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7XG4gIHJldHVybiBub2RlLmNsYXNzTGlzdCB8fCBuZXcgQ2xhc3NMaXN0KG5vZGUpO1xufVxuXG5mdW5jdGlvbiBDbGFzc0xpc3Qobm9kZSkge1xuICB0aGlzLl9ub2RlID0gbm9kZTtcbiAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIik7XG59XG5cbkNsYXNzTGlzdC5wcm90b3R5cGUgPSB7XG4gIGFkZDogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA8IDApIHtcbiAgICAgIHRoaXMuX25hbWVzLnB1c2gobmFtZSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSkgPj0gMDtcbiAgfVxufTtcblxuZnVuY3Rpb24gY2xhc3NlZEFkZChub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5hZGQobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkUmVtb3ZlKG5vZGUsIG5hbWVzKSB7XG4gIHZhciBsaXN0ID0gY2xhc3NMaXN0KG5vZGUpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZhbHNlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkUmVtb3ZlKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZ1bmN0aW9uKG5hbWVzLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgKHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgPyBjbGFzc2VkQWRkIDogY2xhc3NlZFJlbW92ZSkodGhpcywgbmFtZXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgbmFtZXMgPSBjbGFzc0FycmF5KG5hbWUgKyBcIlwiKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbikgaWYgKCFsaXN0LmNvbnRhaW5zKG5hbWVzW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWVcbiAgICAgID8gY2xhc3NlZFRydWVcbiAgICAgIDogY2xhc3NlZEZhbHNlKShuYW1lcywgdmFsdWUpKTtcbn1cbiIsImZ1bmN0aW9uIHRleHRSZW1vdmUoKSB7XG4gIHRoaXMudGV4dENvbnRlbnQgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbFxuICAgICAgICAgID8gdGV4dFJlbW92ZSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gdGV4dEZ1bmN0aW9uXG4gICAgICAgICAgOiB0ZXh0Q29uc3RhbnQpKHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59XG4iLCJmdW5jdGlvbiBodG1sUmVtb3ZlKCkge1xuICB0aGlzLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaHRtbEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGh0bWxGdW5jdGlvblxuICAgICAgICAgIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLmlubmVySFRNTDtcbn1cbiIsImZ1bmN0aW9uIHJhaXNlKCkge1xuICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7XG59XG4iLCJmdW5jdGlvbiBsb3dlcigpIHtcbiAgaWYgKHRoaXMucHJldmlvdXNTaWJsaW5nKSB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gobG93ZXIpO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3JcIjtcbmltcG9ydCBzZWxlY3RvciBmcm9tIFwiLi4vc2VsZWN0b3JcIjtcblxuZnVuY3Rpb24gY29uc3RhbnROdWxsKCkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgYmVmb3JlKSB7XG4gIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZSA6IGNyZWF0b3IobmFtZSksXG4gICAgICBzZWxlY3QgPSBiZWZvcmUgPT0gbnVsbCA/IGNvbnN0YW50TnVsbCA6IHR5cGVvZiBiZWZvcmUgPT09IFwiZnVuY3Rpb25cIiA/IGJlZm9yZSA6IHNlbGVjdG9yKGJlZm9yZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IG51bGwpO1xuICB9KTtcbn1cbiIsImZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyZW1vdmUpO1xufVxuIiwiZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lU2hhbGxvdygpIHtcbiAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5jbG9uZU5vZGUoZmFsc2UpLCB0aGlzLm5leHRTaWJsaW5nKTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lRGVlcCgpIHtcbiAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5jbG9uZU5vZGUodHJ1ZSksIHRoaXMubmV4dFNpYmxpbmcpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihkZWVwKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdChkZWVwID8gc2VsZWN0aW9uX2Nsb25lRGVlcCA6IHNlbGVjdGlvbl9jbG9uZVNoYWxsb3cpO1xufVxuIiwidmFyIGZpbHRlckV2ZW50cyA9IHt9O1xuXG5leHBvcnQgdmFyIGV2ZW50ID0gbnVsbDtcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKCEoXCJvbm1vdXNlZW50ZXJcIiBpbiBlbGVtZW50KSkge1xuICAgIGZpbHRlckV2ZW50cyA9IHttb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLCBtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCJ9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbHRlckNvbnRleHRMaXN0ZW5lcihsaXN0ZW5lciwgaW5kZXgsIGdyb3VwKSB7XG4gIGxpc3RlbmVyID0gY29udGV4dExpc3RlbmVyKGxpc3RlbmVyLCBpbmRleCwgZ3JvdXApO1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgcmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7XG4gICAgaWYgKCFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0aGlzICYmICEocmVsYXRlZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzKSAmIDgpKSkge1xuICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjb250ZXh0TGlzdGVuZXIobGlzdGVuZXIsIGluZGV4LCBncm91cCkge1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQxKSB7XG4gICAgdmFyIGV2ZW50MCA9IGV2ZW50OyAvLyBFdmVudHMgY2FuIGJlIHJlZW50cmFudCAoZS5nLiwgZm9jdXMpLlxuICAgIGV2ZW50ID0gZXZlbnQxO1xuICAgIHRyeSB7XG4gICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIHRoaXMuX19kYXRhX18sIGluZGV4LCBncm91cCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGV2ZW50ID0gZXZlbnQwO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25SZW1vdmUodHlwZW5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbiA9IHRoaXMuX19vbjtcbiAgICBpZiAoIW9uKSByZXR1cm47XG4gICAgZm9yICh2YXIgaiA9IDAsIGkgPSAtMSwgbSA9IG9uLmxlbmd0aCwgbzsgaiA8IG07ICsraikge1xuICAgICAgaWYgKG8gPSBvbltqXSwgKCF0eXBlbmFtZS50eXBlIHx8IG8udHlwZSA9PT0gdHlwZW5hbWUudHlwZSkgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8uY2FwdHVyZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblsrK2ldID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCsraSkgb24ubGVuZ3RoID0gaTtcbiAgICBlbHNlIGRlbGV0ZSB0aGlzLl9fb247XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgY2FwdHVyZSkge1xuICB2YXIgd3JhcCA9IGZpbHRlckV2ZW50cy5oYXNPd25Qcm9wZXJ0eSh0eXBlbmFtZS50eXBlKSA/IGZpbHRlckNvbnRleHRMaXN0ZW5lciA6IGNvbnRleHRMaXN0ZW5lcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKGQsIGksIGdyb3VwKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uLCBvLCBsaXN0ZW5lciA9IHdyYXAodmFsdWUsIGksIGdyb3VwKTtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgICBpZiAoKG8gPSBvbltqXSkudHlwZSA9PT0gdHlwZW5hbWUudHlwZSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciwgby5jYXB0dXJlKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciA9IGxpc3RlbmVyLCBvLmNhcHR1cmUgPSBjYXB0dXJlKTtcbiAgICAgICAgby52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlbmFtZS50eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSk7XG4gICAgbyA9IHt0eXBlOiB0eXBlbmFtZS50eXBlLCBuYW1lOiB0eXBlbmFtZS5uYW1lLCB2YWx1ZTogdmFsdWUsIGxpc3RlbmVyOiBsaXN0ZW5lciwgY2FwdHVyZTogY2FwdHVyZX07XG4gICAgaWYgKCFvbikgdGhpcy5fX29uID0gW29dO1xuICAgIGVsc2Ugb24ucHVzaChvKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odHlwZW5hbWUsIHZhbHVlLCBjYXB0dXJlKSB7XG4gIHZhciB0eXBlbmFtZXMgPSBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZSArIFwiXCIpLCBpLCBuID0gdHlwZW5hbWVzLmxlbmd0aCwgdDtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgb24gPSB0aGlzLm5vZGUoKS5fX29uO1xuICAgIGlmIChvbikgZm9yICh2YXIgaiA9IDAsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHtcbiAgICAgIGZvciAoaSA9IDAsIG8gPSBvbltqXTsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoKHQgPSB0eXBlbmFtZXNbaV0pLnR5cGUgPT09IG8udHlwZSAmJiB0Lm5hbWUgPT09IG8ubmFtZSkge1xuICAgICAgICAgIHJldHVybiBvLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIG9uID0gdmFsdWUgPyBvbkFkZCA6IG9uUmVtb3ZlO1xuICBpZiAoY2FwdHVyZSA9PSBudWxsKSBjYXB0dXJlID0gZmFsc2U7XG4gIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHRoaXMuZWFjaChvbih0eXBlbmFtZXNbaV0sIHZhbHVlLCBjYXB0dXJlKSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3VzdG9tRXZlbnQoZXZlbnQxLCBsaXN0ZW5lciwgdGhhdCwgYXJncykge1xuICB2YXIgZXZlbnQwID0gZXZlbnQ7XG4gIGV2ZW50MS5zb3VyY2VFdmVudCA9IGV2ZW50O1xuICBldmVudCA9IGV2ZW50MTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbGlzdGVuZXIuYXBwbHkodGhhdCwgYXJncyk7XG4gIH0gZmluYWxseSB7XG4gICAgZXZlbnQgPSBldmVudDA7XG4gIH1cbn1cbiIsImltcG9ydCBkZWZhdWx0VmlldyBmcm9tIFwiLi4vd2luZG93XCI7XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQobm9kZSwgdHlwZSwgcGFyYW1zKSB7XG4gIHZhciB3aW5kb3cgPSBkZWZhdWx0Vmlldyhub2RlKSxcbiAgICAgIGV2ZW50ID0gd2luZG93LkN1c3RvbUV2ZW50O1xuXG4gIGlmICh0eXBlb2YgZXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGV2ZW50ID0gbmV3IGV2ZW50KHR5cGUsIHBhcmFtcyk7XG4gIH0gZWxzZSB7XG4gICAgZXZlbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICBpZiAocGFyYW1zKSBldmVudC5pbml0RXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlKSwgZXZlbnQuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgICBlbHNlIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UpO1xuICB9XG5cbiAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hDb25zdGFudCh0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRnVuY3Rpb24odHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gdGhpcy5lYWNoKCh0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZGlzcGF0Y2hGdW5jdGlvblxuICAgICAgOiBkaXNwYXRjaENvbnN0YW50KSh0eXBlLCBwYXJhbXMpKTtcbn1cbiIsImltcG9ydCBzZWxlY3Rpb25fc2VsZWN0IGZyb20gXCIuL3NlbGVjdFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RBbGwgZnJvbSBcIi4vc2VsZWN0QWxsXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2ZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcbmltcG9ydCBzZWxlY3Rpb25fZGF0YSBmcm9tIFwiLi9kYXRhXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2VudGVyIGZyb20gXCIuL2VudGVyXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2V4aXQgZnJvbSBcIi4vZXhpdFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9tZXJnZSBmcm9tIFwiLi9tZXJnZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9vcmRlciBmcm9tIFwiLi9vcmRlclwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zb3J0IGZyb20gXCIuL3NvcnRcIjtcbmltcG9ydCBzZWxlY3Rpb25fY2FsbCBmcm9tIFwiLi9jYWxsXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGVzIGZyb20gXCIuL25vZGVzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGUgZnJvbSBcIi4vbm9kZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zaXplIGZyb20gXCIuL3NpemVcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW1wdHkgZnJvbSBcIi4vZW1wdHlcIjtcbmltcG9ydCBzZWxlY3Rpb25fZWFjaCBmcm9tIFwiLi9lYWNoXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2F0dHIgZnJvbSBcIi4vYXR0clwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9wcm9wZXJ0eSBmcm9tIFwiLi9wcm9wZXJ0eVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbGFzc2VkIGZyb20gXCIuL2NsYXNzZWRcIjtcbmltcG9ydCBzZWxlY3Rpb25fdGV4dCBmcm9tIFwiLi90ZXh0XCI7XG5pbXBvcnQgc2VsZWN0aW9uX2h0bWwgZnJvbSBcIi4vaHRtbFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9yYWlzZSBmcm9tIFwiLi9yYWlzZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9sb3dlciBmcm9tIFwiLi9sb3dlclwiO1xuaW1wb3J0IHNlbGVjdGlvbl9hcHBlbmQgZnJvbSBcIi4vYXBwZW5kXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2luc2VydCBmcm9tIFwiLi9pbnNlcnRcIjtcbmltcG9ydCBzZWxlY3Rpb25fcmVtb3ZlIGZyb20gXCIuL3JlbW92ZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbG9uZSBmcm9tIFwiLi9jbG9uZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXR1bSBmcm9tIFwiLi9kYXR1bVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9vbiBmcm9tIFwiLi9vblwiO1xuaW1wb3J0IHNlbGVjdGlvbl9kaXNwYXRjaCBmcm9tIFwiLi9kaXNwYXRjaFwiO1xuXG5leHBvcnQgdmFyIHJvb3QgPSBbbnVsbF07XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWxlY3Rpb24oZ3JvdXBzLCBwYXJlbnRzKSB7XG4gIHRoaXMuX2dyb3VwcyA9IGdyb3VwcztcbiAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7XG59XG5cblNlbGVjdGlvbi5wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogU2VsZWN0aW9uLFxuICBzZWxlY3Q6IHNlbGVjdGlvbl9zZWxlY3QsXG4gIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCxcbiAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLFxuICBkYXRhOiBzZWxlY3Rpb25fZGF0YSxcbiAgZW50ZXI6IHNlbGVjdGlvbl9lbnRlcixcbiAgZXhpdDogc2VsZWN0aW9uX2V4aXQsXG4gIG1lcmdlOiBzZWxlY3Rpb25fbWVyZ2UsXG4gIG9yZGVyOiBzZWxlY3Rpb25fb3JkZXIsXG4gIHNvcnQ6IHNlbGVjdGlvbl9zb3J0LFxuICBjYWxsOiBzZWxlY3Rpb25fY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9ub2RlcyxcbiAgbm9kZTogc2VsZWN0aW9uX25vZGUsXG4gIHNpemU6IHNlbGVjdGlvbl9zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX2VtcHR5LFxuICBlYWNoOiBzZWxlY3Rpb25fZWFjaCxcbiAgYXR0cjogc2VsZWN0aW9uX2F0dHIsXG4gIHN0eWxlOiBzZWxlY3Rpb25fc3R5bGUsXG4gIHByb3BlcnR5OiBzZWxlY3Rpb25fcHJvcGVydHksXG4gIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLFxuICB0ZXh0OiBzZWxlY3Rpb25fdGV4dCxcbiAgaHRtbDogc2VsZWN0aW9uX2h0bWwsXG4gIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsXG4gIGxvd2VyOiBzZWxlY3Rpb25fbG93ZXIsXG4gIGFwcGVuZDogc2VsZWN0aW9uX2FwcGVuZCxcbiAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LFxuICByZW1vdmU6IHNlbGVjdGlvbl9yZW1vdmUsXG4gIGNsb25lOiBzZWxlY3Rpb25fY2xvbmUsXG4gIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sXG4gIG9uOiBzZWxlY3Rpb25fb24sXG4gIGRpc3BhdGNoOiBzZWxlY3Rpb25fZGlzcGF0Y2hcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGlvbjtcbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3RvclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHNlbGVjdG9yQWxsIGZyb20gXCIuLi9zZWxlY3RvckFsbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3JBbGwoc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBbXSwgcGFyZW50cyA9IFtdLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzdWJncm91cHMucHVzaChzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpO1xuICAgICAgICBwYXJlbnRzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCBwYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IG1hdGNoZXIgZnJvbSBcIi4uL21hdGNoZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gXCJmdW5jdGlvblwiKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBtYXRjaC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkge1xuICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZVwiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9leGl0IHx8IHRoaXMuX2dyb3Vwcy5tYXAoc3BhcnNlKSwgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0aW9uKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzMCA9IHRoaXMuX2dyb3VwcywgZ3JvdXBzMSA9IHNlbGVjdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gLTEsIG0gPSBncm91cHMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbmV4dCAhPT0gbm9kZS5uZXh0U2libGluZykgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTtcbiAgICAgICAgbmV4dCA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzBdO1xuICBhcmd1bWVudHNbMF0gPSB0aGlzO1xuICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICByZXR1cm4gdGhpcztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgbm9kZXMgPSBuZXcgQXJyYXkodGhpcy5zaXplKCkpLCBpID0gLTE7XG4gIHRoaXMuZWFjaChmdW5jdGlvbigpIHsgbm9kZXNbKytpXSA9IHRoaXM7IH0pO1xuICByZXR1cm4gbm9kZXM7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgdmFyIG5vZGUgPSBncm91cFtpXTtcbiAgICAgIGlmIChub2RlKSByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgc2l6ZSA9IDA7XG4gIHRoaXMuZWFjaChmdW5jdGlvbigpIHsgKytzaXplOyB9KTtcbiAgcmV0dXJuIHNpemU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICF0aGlzLm5vZGUoKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIGNhbGxiYWNrLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwiaW1wb3J0IGRlZmF1bHRWaWV3IGZyb20gXCIuLi93aW5kb3dcIjtcblxuZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVDb25zdGFudChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2LCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgICA/IHN0eWxlUmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gc3R5bGVGdW5jdGlvblxuICAgICAgICAgICAgOiBzdHlsZUNvbnN0YW50KShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpXG4gICAgICA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVWYWx1ZShub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSlcbiAgICAgIHx8IGRlZmF1bHRWaWV3KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIHByb3BlcnR5UmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5RnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBwcm9wZXJ0eUZ1bmN0aW9uXG4gICAgICAgICAgOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpW25hbWVdO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiLCB2YWx1ZSlcbiAgICAgIDogdGhpcy5ub2RlKCkuX19kYXRhX187XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbiwgcm9vdH0gZnJvbSBcIi4vc2VsZWN0aW9uL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCJcbiAgICAgID8gbmV3IFNlbGVjdGlvbihbW2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXV0sIFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdKVxuICAgICAgOiBuZXcgU2VsZWN0aW9uKFtbc2VsZWN0b3JdXSwgcm9vdCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCDCqSAyMDE1IC0gMjAxOCBUaGUgQnJvYWQgSW5zdGl0dXRlLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIDMtY2xhdXNlIGxpY2Vuc2UgKGh0dHBzOi8vZ2l0aHViLmNvbS9icm9hZGluc3RpdHV0ZS9ndGV4LXZpei9ibG9iL21hc3Rlci9MSUNFTlNFLm1kKVxuICovXG4vKipcbiAqIENyZWF0ZSBhIHRvb2xiYXJcbiAqIFRoaXMgY2xhc3MgdXNlcyBhIGxvdCBvZiBqUXVlcnkgZm9yIGRvbSBlbGVtZW50IG1hbmlwdWxhdGlvblxuICovXG5cbmltcG9ydCB7c2VsZWN0fSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge3BhcnNlQ3NzU3R5bGVzfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb29sYmFyIHtcbiAgICBjb25zdHJ1Y3Rvcihkb21JZCwgdG9vbHRpcD11bmRlZmluZWQsIHZlcnRpY2FsPWZhbHNlKXtcbiAgICAgICAgJChgIyR7ZG9tSWR9YCkuc2hvdygpOyAvLyBpZiBoaWRkZW5cblxuICAgICAgICAvLyBhZGQgYSBuZXcgYmFyZ3JvdXAgZGl2IHRvIGRvbUlEIHdpdGggYm9vdHN0cmFwIGJ1dHRvbiBjbGFzc2VzXG4gICAgICAgIGNvbnN0IGJ0bkNsYXNzZXMgPSB2ZXJ0aWNhbD8nYnRuLWdyb3VwLXZlcnRpY2FsIGJ0bi1ncm91cC1zbSc6ICdidG4tZ3JvdXAgYnRuLWdyb3VwLXNtJztcbiAgICAgICAgdGhpcy5iYXIgPSAkKCc8ZGl2Lz4nKS5hZGRDbGFzcyhidG5DbGFzc2VzKS5hcHBlbmRUbyhgIyR7ZG9tSWR9YCk7XG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xuICAgICAgICB0aGlzLnRvb2x0aXAgPSB0b29sdGlwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGRvd25sb2FkIGJ1dHRvbiBmb3IgU1ZHXG4gICAgICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBidXR0b24gZG9tIElEXG4gICAgICogQHBhcmFtIHN2Z0lkIHtTdHJpbmd9IHRoZSBTVkcgZG9tIElEIHRvIGdyYWIgYW5kIGRvd25sb2FkXG4gICAgICogQHBhcmFtIG91dGZpbGVOYW1lIHtTdHJpbmd9IHRoZSBkb3dubG9hZCBmaWxlIG5hbWVcbiAgICAgKiBAcGFyYW0gY2xvbmVJZCB7U3RyaW5nfSB0aGUgY2xvbmVkIFNWRyBkb20gSURcbiAgICAgKiBAcGFyYW0gaWNvbiB7U3RyaW5nfSBhIGZvbnRhd2Vzb21lJ3MgaWNvbiBjbGFzcyBuYW1lXG4gICAgICovXG4gICAgY3JlYXRlRG93bmxvYWRTdmdCdXR0b24oaWQsIHN2Z0lkLCBvdXRmaWxlTmFtZSwgY2xvbmVJZCwgaWNvbj0nZmEtZG93bmxvYWQnKXtcbiAgICAgICAgY29uc3QgJGJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKGlkLCBpY29uKTtcbiAgICAgICAgc2VsZWN0KGAjJHtpZH1gKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5kb3dubG9hZFN2ZyhzdmdJZCwgb3V0ZmlsZU5hbWUsIGNsb25lSWQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAuc2hvdyhcIkRvd25sb2FkXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcC5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVSZXNldEJ1dHRvbihpZCwgY2FsbGJhY2ssIGljb249J2ZhLWV4cGFuZC1hcnJvd3MtYWx0Jyl7XG4gICAgICAgIGNvbnN0ICRidXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbihpZCwgaWNvbik7XG4gICAgICAgIHNlbGVjdChgIyR7aWR9YClcbiAgICAgICAgICAgIC5vbignY2xpY2snLCBjYWxsYmFjaylcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAuc2hvdyhcIlJlc2V0IHRoZSBzY2FsZXNcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsICgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZSBhIGJ1dHRvbiB0byB0aGUgdG9vbGJhclxuICAgICAqIEBwYXJhbSBpZCB7U3RyaW5nfSB0aGUgYnV0dG9uJ3MgaWRcbiAgICAgKiBAcGFyYW0gaWNvbiB7U3RyaW5nfSBhIGZvbnRhd2Vzb21lIGljb24gY2xhc3NcbiAgICAgKiBEZXBlbmRlbmNpZXM6IEJvb3RzdHJhcCwgalF1ZXJ5LCBGb250YXdlc29tZVxuICAgICAqL1xuICAgIGNyZWF0ZUJ1dHRvbihpZCwgaWNvbj0nZmEtZG93bmxvYWQnKXtcbiAgICAgICAgY29uc3QgJGJ1dHRvbiA9ICQoJzxhLz4nKS5hdHRyKCdpZCcsIGlkKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdidG4gYnRuLWRlZmF1bHQnKS5hcHBlbmRUbyh0aGlzLmJhcik7XG4gICAgICAgICQoJzxpLz4nKS5hZGRDbGFzcyhgZmEgJHtpY29ufWApLmFwcGVuZFRvKCRidXR0b24pO1xuICAgICAgICB0aGlzLmJ1dHRvbnNbaWRdID0gJGJ1dHRvbjtcbiAgICAgICAgcmV0dXJuICRidXR0b247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYXR0YWNoIGEgdG9vbHRpcCBkb20gd2l0aCB0aGUgdG9vbGJhclxuICAgICAqIEBwYXJhbSB0b29sdGlwIHtUb29sdGlwfVxuICAgICAqL1xuICAgIGF0dGFjaFRvb2x0aXAodG9vbHRpcCl7XG4gICAgICAgIHRoaXMudG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgU1ZHIG9ialxuICAgICAqIEBwYXJhbSBzdmdJZCB7U3RyaW5nfSB0aGUgU1ZHIGRvbSBJRFxuICAgICAqIEBwYXJhbSBmaWxlTmFtZSB7U3RyaW5nfSB0aGUgb3V0cHV0IGZpbGUgbmFtZVxuICAgICAqIEBwYXJhbSBjbG9uZUlkIHtTdHJpbmd9IHRoZSB0ZW1wb3JhcnkgZG9tIElEIHRvIGNvcHkgdGhlIFNWRyB0b1xuICAgICAqIERlcGVuZGVuY2llczogRmlsZVNhdmVyXG4gICAgICovXG4gICAgZG93bmxvYWRTdmcoc3ZnSWQsIGZpbGVOYW1lLCBjbG9uZUlkKXtcbiAgICAgICAgLy8gbGV0IHN2Z09iaiA9ICQoJCgkKGAke1wiI1wiICtzdmdJZH0gc3ZnYCkpWzBdKTsgLy8gY29tcGxpY2F0ZWQgalF1ZXJ5IHRvIGdldCB0byB0aGUgU1ZHIG9iamVjdFxuICAgICAgICBsZXQgc3ZnT2JqID0gJCgkKCQoYCR7XCIjXCIgK3N2Z0lkfWApKVswXSk7XG4gICAgICAgIGxldCAkc3ZnQ29weSA9IHN2Z09iai5jbG9uZSgpXG4gICAgICAgIC5hdHRyKFwidmVyc2lvblwiLCBcIjEuMVwiKVxuICAgICAgICAuYXR0cihcInhtbG5zXCIsIFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIik7XG5cbiAgICAgICAgLy8gcGFyc2UgYW5kIGFkZCBhbGwgdGhlIENTUyBzdHlsaW5nIHVzZWQgYnkgdGhlIFNWR1xuICAgICAgICBsZXQgc3R5bGVzID0gcGFyc2VDc3NTdHlsZXMoc3ZnT2JqLmdldCgpKTtcbiAgICAgICAgJHN2Z0NvcHkucHJlcGVuZChzdHlsZXMpO1xuXG4gICAgICAgICQoXCIjXCIgKyBjbG9uZUlkKS5odG1sKCcnKS5oaWRlKCk7IC8vIG1ha2Ugc3VyZSB0aGUgY29weUlEIGlzIGludmlzaWJsZVxuICAgICAgICBsZXQgc3ZnSHRtbCA9ICQoYCMke2Nsb25lSWR9YCkuYXBwZW5kKCRzdmdDb3B5KS5odG1sKCk7XG5cbiAgICAgICAgbGV0IHN2Z0Jsb2IgPSBuZXcgQmxvYihbc3ZnSHRtbF0sIHt0eXBlOiBcImltYWdlL3N2Zyt4bWxcIn0pO1xuICAgICAgICBzYXZlQXMoc3ZnQmxvYiwgZmlsZU5hbWUpOyAvLyB0aGlzIGlzIGEgRmlsZVNhdmVyIGZ1bmN0aW9uLi4uLlxuXG4gICAgICAgIC8vIGNsZWFyIHRoZSB0ZW1wIGRvd25sb2FkIGRpdlxuICAgICAgICAkKGAjJHtjbG9uZUlkfWApLmh0bWwoJycpLmhpZGUoKTtcbiAgICB9XG59IiwiLyoqXG4gKiBDb3B5cmlnaHQgwqkgMjAxNSAtIDIwMTggVGhlIEJyb2FkIEluc3RpdHV0ZSwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEJTRCAzLWNsYXVzZSBsaWNlbnNlIChodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvZ3RleC12aXovYmxvYi9tYXN0ZXIvTElDRU5TRS5tZClcbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuIFNWR1xuICogQHBhcmFtIGlkIHtTdHJpbmd9IGEgRE9NIGVsZW1lbnQgSUQgdGhhdCBzdGFydHMgd2l0aCBhIFwiI1wiXG4gKiBAcGFyYW0gd2lkdGgge051bWVyaWN9XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1lcmljfVxuICogQHBhcmFtIG1hcmdpbiB7T2JqZWN0fSB3aXRoIHR3byBhdHRyaWJ1dGVzOiB3aWR0aCBhbmQgaGVpZ2h0XG4gKiBAcmV0dXJuIHtTZWxlY3Rpb259IHRoZSBkMyBzZWxlY3Rpb24gb2JqZWN0IG9mIHRoZSBTVkdcbiAqL1xuXG5pbXBvcnQge3NlbGVjdH0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtyYW5nZX0gZnJvbSBcImQzLWFycmF5XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0RvbUlkKGlkKXtcbiAgICAvLyB0ZXN0IGlucHV0IHBhcmFtc1xuICAgIGlmICgkKGAjJHtpZH1gKS5sZW5ndGggPT0gMCkge1xuICAgICAgICBsZXQgZXJyb3IgPSBgSW5wdXQgRXJyb3I6IERPTSBJRCAke2lkfSBpcyBub3QgZm91bmQuYDtcbiAgICAgICAgYWxlcnQoZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgQ2FudmFzIEQzIG9iamVjdFxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBwYXJlbnQgZG9tIElEXG4gKiBAcGFyYW0gd2lkdGgge051bWVyaWN9OiB0aGUgb3V0ZXIgd2lkdGhcbiAqIEBwYXJhbSBoZWlnaHQge051bWVyaWN9OiB0aGUgb3V0ZXIgaGVpZ2h0XG4gKiBAcGFyYW0gbWFyZ2luIHtPYmplY3R9IHdpdGggYXR0cjogbGVmdCwgdG9wXG4gKiBAcGFyYW0gY2FudmFzSWQge1N0cmluZ31cbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGlkLCB3aWR0aCwgaGVpZ2h0LCBtYXJnaW4sIGNhbnZhc0lkPXVuZGVmaW5lZCwgcG9zaXRpb249XCJhYnNvbHV0ZVwiKXtcbiAgICBjaGVja0RvbUlkKGlkKTtcbiAgICBpZihjYW52YXNJZD09PXVuZGVmaW5lZCkgY2FudmFzSWQ9YCR7aWR9LWNhbnZhc2A7XG4gICAgcmV0dXJuIHNlbGVjdChgIyR7aWR9YClcbiAgICAgICAgLmFwcGVuZChcImNhbnZhc1wiKVxuICAgICAgICAuYXR0cignaWQnLCBjYW52YXNJZClcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuc3R5bGUoXCJwb3NpdGlvblwiLCBwb3NpdGlvbikgLy8gVE9ETzogc2hvdWxkIHRoZSBwb3NpdGlvbiBiZSB1c2VyLWRlZmluZWQ/IHJlbGF0aXZlIHZzIGFic29sdXRlXG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIFNWRyBEMyBvYmplY3RcbiAqIEBwYXJhbSBpZCB7U3RyaW5nfSB0aGUgcGFyZW50IGRvbSBJRFxuICogQHBhcmFtIHdpZHRoIHtOdW1lcmljfTogdGhlIG91dGVyIHdpZHRoXG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1lcmljfTogdGhlIG91dGVyIGhlaWdodFxuICogQHBhcmFtIG1hcmdpbiB7T2JqZWN0fSB3aXRoIGF0dHI6IGxlZnQsIHRvcFxuICogQHBhcmFtIHN2Z0lkIHtTdHJpbmd9XG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN2ZyhpZCwgd2lkdGgsIGhlaWdodCwgbWFyZ2luLCBzdmdJZD11bmRlZmluZWQsIHBvc2l0aW9uPVwicmVsYXRpdmVcIil7XG4gICAgY2hlY2tEb21JZChpZCk7XG4gICAgaWYgKHN2Z0lkPT09dW5kZWZpbmVkKSBzdmdJZD1gJHtpZH0tc3ZnYDtcbiAgICByZXR1cm4gc2VsZWN0KFwiI1wiK2lkKS5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuYXR0cihcImlkXCIsIHN2Z0lkKVxuICAgICAgICAvLyAuc3R5bGUoXCJwb3NpdGlvblwiLCBwb3NpdGlvbilcbiAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke21hcmdpbi5sZWZ0fSwgJHttYXJnaW4udG9wfSlgKVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gc3ZnT2JqXG4gKiBAcGFyYW0gZG93bmxvYWRGaWxlTmFtZSB7U3RyaW5nfVxuICogQHBhcmFtIHRlbXBEb3dubG9hZERpdklkIHtTdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZFN2ZyhzdmdPYmosIGRvd25sb2FkRmlsZU5hbWUsIHRlbXBEb3dubG9hZERpdklkKXtcbiAgICBjb25zb2xlLmxvZyhzdmdPYmopO1xuICAgIHZhciAkc3ZnQ29weSA9IHN2Z09iai5jbG9uZSgpXG4gICAgLmF0dHIoXCJ2ZXJzaW9uXCIsIFwiMS4xXCIpXG4gICAgLmF0dHIoXCJ4bWxuc1wiLCBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIpO1xuXG4gICAgLy8gcGFyc2UgYW5kIGFkZCB0aGUgQ1NTIHN0eWxpbmcgdXNlZCBieSB0aGUgU1ZHXG4gICAgdmFyIHN0eWxlcyA9IHBhcnNlQ3NzU3R5bGVzKHN2Z09iai5nZXQoKSk7XG4gICAgJHN2Z0NvcHkucHJlcGVuZChzdHlsZXMpO1xuXG4gICAgJChcIiNcIiArIHRlbXBEb3dubG9hZERpdklkKS5odG1sKCcnKS5oaWRlKCk7XG4gICAgdmFyIHN2Z0h0bWwgPSAkKFwiI1wiICsgdGVtcERvd25sb2FkRGl2SWQpLmFwcGVuZCgkc3ZnQ29weSkuaHRtbCgpO1xuXG4gICAgdmFyIHN2Z0Jsb2IgPSBuZXcgQmxvYihbc3ZnSHRtbF0sIHt0eXBlOiBcImltYWdlL3N2Zyt4bWxcIn0pO1xuICAgIHNhdmVBcyhzdmdCbG9iLCBkb3dubG9hZEZpbGVOYW1lKTtcblxuICAgIC8vIGNsZWFyIHRoZSB0ZW1wIGRvd25sb2FkIGRpdlxuICAgICQoXCIjXCIgKyB0ZW1wRG93bmxvYWREaXZJZCkuaHRtbCgnJykuaGlkZSgpO1xufVxuLyoqXG4gKiBBIGZ1bmN0aW9uIGZvciBwYXJzaW5nIHRoZSBDU1Mgc3R5bGUgc2hlZXQgYW5kIGluY2x1ZGluZyB0aGUgc3R5bGUgcHJvcGVydGllcyBpbiB0aGUgZG93bmxvYWRhYmxlIFNWRy5cbiAqIEBwYXJhbSBkb21cbiAqIEByZXR1cm5zIHtFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDc3NTdHlsZXMgKGRvbSkge1xuICAgIHZhciB1c2VkID0gXCJcIjtcbiAgICB2YXIgc2hlZXRzID0gZG9jdW1lbnQuc3R5bGVTaGVldHM7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykgeyAvLyBUT0RPOiB3YWxrIHRocm91Z2ggdGhpcyBibG9jayBvZiBjb2RlXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChzaGVldHNbaV0uY3NzUnVsZXMgPT0gbnVsbCkgY29udGludWU7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBzaGVldHNbaV0uY3NzUnVsZXM7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHJ1bGVzW2pdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocnVsZS5zdHlsZSkgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXM7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIGFueSBzZWxlY3RvciB0ZXh0IGluY2x1ZGluZyBzdmcgZWxlbWVudCBJRCAtLSBkb20gYWxyZWFkeSBzZWxlY3RzIGZvciB0aGF0XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHJ1bGUuc2VsZWN0b3JUZXh0ID09PSB1bmRlZmluZWQ/IHJ1bGUuc2VsZWN0b3JUZXh0IDogcnVsZS5zZWxlY3RvclRleHQucmVwbGFjZShgIyR7ZG9tWzBdLmlkfSBgLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vU29tZSBzZWxlY3RvcnMgd29uJ3Qgd29yaywgYW5kIG1vc3Qgb2YgdGhlc2UgZG9uJ3QgbWF0dGVyLlxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbXMgPSAkKGRvbSkuZmluZChzZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1zID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlZCArPSBydWxlLnNlbGVjdG9yVGV4dCArIFwiIHsgXCIgKyBydWxlLnN0eWxlLmNzc1RleHQgKyBcIiB9XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEluIEZpcmVmb3gsIGlmIHN0eWxlc2hlZXQgb3JpZ2luYXRlcyBmcm9tIGEgZGlmZiBkb21haW4sXG4gICAgICAgICAgICAvLyB0cnlpbmcgdG8gYWNjZXNzIHRoZSBjc3NSdWxlcyB3aWxsIHRocm93IGEgU2VjdXJpdHlFcnJvci5cbiAgICAgICAgICAgIC8vIEhlbmNlLCB3ZSBtdXN0IHVzZSBhIHRyeS9jYXRjaCB0byBoYW5kbGUgdGhpcyBpbiBGaXJlZm94XG4gICAgICAgICAgICBpZiAoZS5uYW1lICE9PSAnU2VjdXJpdHlFcnJvcicpIHRocm93IGU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpO1xuICAgIHMuaW5uZXJIVE1MID0gXCI8IVtDREFUQVtcXG5cIiArIHVzZWQgKyBcIlxcbl1dPlwiO1xuXG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBsaXN0IG9mIHgqeSBkYXRhIG9iamVjdHMgd2l0aCByYW5kb20gdmFsdWVzXG4gKiBUaGUgZGF0YSBvYmplY3QgaGFzIHRoaXMgc3RydWN0dXJlOiB7eDogeGxhYmVsLCB5OiB5bGFiZWwsIHZhbHVlOiBzb21lIHZhbHVlLCBkaXNwbGF5VmFsdWU6IHNvbWUgdmFsdWV9XG4gKiBAcGFyYW0gcGFyXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbU1hdHJpeChwYXI9e3g6MjAsIHk6MjAsIHNjYWxlRmFjdG9yOjEsIGRpdmVyZ2luZzpmYWxzZSwgYnViYmxlOmZhbHNlfSl7XG4gICAgbGV0IFggPSByYW5nZSgxLCBwYXIueCsxKTsgLy8gZ2VuZXJhdGVzIGEgMS1iYXNlZCBsaXN0LlxuICAgIGxldCBZID0gcmFuZ2UoMSwgcGFyLnkrMSk7XG4gICAgbGV0IGRhdGEgPSBbXTtcbiAgICBYLmZvckVhY2goKHgpPT57XG4gICAgICAgIHggPSAneCcgKyB4LnRvU3RyaW5nKCk7XG4gICAgICAgIFkuZm9yRWFjaCgoeSk9PntcbiAgICAgICAgICAgIHkgPSAneScgKyB5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBsZXQgdiA9IE1hdGgucmFuZG9tKCkqcGFyLnNjYWxlRmFjdG9yO1xuICAgICAgICAgICAgdiA9IHBhci5kaXZlcmdpbmcmJk1hdGgucmFuZG9tKCkgPCAwLjUgPyAtdiA6IHY7IC8vIHJhbmRvbWx5IGFzc2lnbmluZyBuZWdhdGl2ZSBhbmQgcG9zaXRpdmUgdmFsdWVzXG4gICAgICAgICAgICBkYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdixcbiAgICAgICAgICAgICAgICBkaXNwbGF5VmFsdWU6IHBhcnNlRmxvYXQodi50b0V4cG9uZW50aWFsKCkpLnRvUHJlY2lzaW9uKDMpLFxuICAgICAgICAgICAgICAgIHI6IHBhci5idWJibGU/TWF0aC5yYW5kb20oKSozMDp1bmRlZmluZWQgLy8gb25seSByZWxldmFudCB0byBidWJibGUgbWFwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICByZXR1cm4gZGF0YTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIGxpc3Qgb2YgcmFuZG9tIHZhbHVlc1xuICogQHBhcmFtIHBhclxuICogQHJldHVybnMge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21MaXN0KHBhcj17bjoxMDAsIHNjYWxlRmFjdG9yOjF9KSB7XG4gICAgbGV0IFggPSByYW5nZSgwLCBwYXIubik7IC8vIGdlbmVyYXRlcyBhIDEtYmFzZWQgbGlzdC5cbiAgICBsZXQgZGF0YSA9IFtdO1xuICAgIHJldHVybiBYLm1hcCgoeCkgPT4gTWF0aC5yYW5kb20oKSAqIHBhci5zY2FsZUZhY3Rvcik7XG5cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IMKpIDIwMTUgLSAyMDE4IFRoZSBCcm9hZCBJbnN0aXR1dGUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1jbGF1c2UgbGljZW5zZSAoaHR0cHM6Ly9naXRodWIuY29tL2Jyb2FkaW5zdGl0dXRlL2d0ZXgtdml6L2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQpXG4gKi9cbi8qKioqKiogR29vZ2xlIFNpZ25JbiAqKioqKiovXG5leHBvcnQgZnVuY3Rpb24gZ29vZ2xlRnVuYygpe1xuICAgIHJldHVybiB7XG4gICAgICAgIGNoZWNrU2lnbmVkSW46IGNoZWNrU2lnbmVkSW4sXG4gICAgICAgIGdldFVzZXI6IGdldFVzZXIsXG4gICAgICAgIHNpZ25JbkJ1dHRvbjogcmVuZGVyU2lnbkluQnV0dG9uLFxuICAgICAgICBzaWduT3V0OiBzaWduT3V0LFxuICAgICAgICBncmFudFNjb3BlczogZ3JhbnRTY29wZXNcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlclNpZ25JbkJ1dHRvbigpe1xuICAgIGdhcGkuc2lnbmluMi5yZW5kZXIoJ215LXNpZ25pbjInLCB7XG4gICAgICAgICdzY29wZSc6ICdwcm9maWxlIGVtYWlsJyxcbiAgICAgICAgJ3dpZHRoJzogMTMwLFxuICAgICAgICAnaGVpZ2h0JzogMzAsXG4gICAgICAgICdsb25ndGl0bGUnOiBmYWxzZSxcbiAgICAgICAgJ3RoZW1lJzogJ2RhcmsnLFxuICAgICAgICAnb25zdWNjZXNzJzogb25TdWNjZXNzLFxuICAgICAgICAnb25mYWlsdXJlJzogb25GYWlsdXJlXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gb25TdWNjZXNzKGdvb2dsZVVzZXIpe1xuICAgICQoJyNnLXNpZ25vdXQnKS5zaG93KCk7XG59XG5cbmZ1bmN0aW9uIHNpZ25PdXQoKSB7XG4gICAgbGV0IGF1dGgyID0gZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKTtcbiAgICBhdXRoMi5zaWduT3V0KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgc2lnbmVkIG91dCcpO1xuICAgIH0pO1xuICAgICQoJyNnLXNpZ25vdXQnKS5oaWRlKCk7XG59XG5cbmZ1bmN0aW9uIG9uRmFpbHVyZShlcnJvcil7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcilcbn1cblxuZnVuY3Rpb24gY2hlY2tTaWduZWRJbigpe1xuICAgIGlmIChnYXBpLmF1dGgyKSB7XG4gICAgICAgIHJldHVybiBnZXRVc2VyKCkuaXNTaWduZWRJbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFVzZXIoKXtcbiAgICByZXR1cm4gZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5jdXJyZW50VXNlci5nZXQoKVxufVxuXG5mdW5jdGlvbiBncmFudFNjb3BlcyhzY29wZXMpe1xuICAgIHRoaXMuZ2V0VXNlcigpLmdyYW50KHtzY29wZTogc2NvcGVzfSkudGhlbihcbiAgICAgICAgZnVuY3Rpb24oc3VjY2Vzcyl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh7bWVzc2FnZTogXCJzdWNjZXNzXCIsIHZhbHVlOiBzdWNjZXNzfSkpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihmYWlsKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoSlNPTj5zdHJpbmdpZnkoe21lc3NhZ2U6IFwiZmFpbFwiLCB2YWx1ZTogZmFpbH0pKTtcbiAgICAgICAgfVxuICAgICk7XG59IiwiLyoqXG4gKiBDb3B5cmlnaHQgwqkgMjAxNSAtIDIwMTggVGhlIEJyb2FkIEluc3RpdHV0ZSwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEJTRCAzLWNsYXVzZSBsaWNlbnNlIChodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvZ3RleC12aXovYmxvYi9tYXN0ZXIvTElDRU5TRS5tZClcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHtqc29uLCB0c3Z9IGZyb20gJ2QzLWZldGNoJztcbmltcG9ydCB7c2VsZWN0LCBzZWxlY3RBbGx9IGZyb20gJ2QzLXNlbGVjdGlvbic7XG5pbXBvcnQge2dldEd0ZXhVcmxzLFxuICAgIHBhcnNlVGlzc3Vlc1xufSBmcm9tICcuL21vZHVsZXMvZ3RleERhdGFQYXJzZXInO1xuaW1wb3J0IFRvb2xiYXIgZnJvbSAnLi9tb2R1bGVzL1Rvb2xiYXInO1xuaW1wb3J0IHtnb29nbGVGdW5jfSBmcm9tICcuL21vZHVsZXMvZ29vZ2xlVXNlcic7XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnb29nbGUgc2lnLWluIGJ1dHRvblxuICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0sIHRoZSBkZWZhdWx0IGZ1bmN0aW9uIGlzIGdvb2dsZUZ1bmMoKS5zaWduSW5CdXR0b25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclNpZ25JbkJ1dHRvbihjYWxsYmFjaz1nb29nbGVGdW5jKCkuc2lnbkluQnV0dG9uKXtcbiAgICBjYWxsYmFjaygpO1xufVxuXG4vKipcbiAqIERlZmluZSB0aGUgR29vZ2xlIHNpZ24gb3V0IGZ1bmN0aW9uXG4gKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSwgdGhlIGRlZmF1bHQgaXMgZ29vZ2xlRnVuYygpLnNpZ25PdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpZ25PdXQoY2FsbGJhY2s9Z29vZ2xlRnVuYygpLnNpZ25PdXQpe1xuICAgIGNhbGxiYWNrKCk7XG59XG5cbi8qKlxuICogYnVpbGQgdGhlIHN1bW1hcnkgdGFibGVcbiAqIEBwYXJhbSB0YWJsZUlkIHtTdHJpbmd9OiBhIERPTSB0YWJsZSBJRFxuICogQHBhcmFtIGRhdGFzZXRJZCB7U3RyaW5nfTogYSBkYXRhc2V0IElEXG4gKiBAcGFyYW0gZ29vZ2xlRnVuYyB7T2JqZWN0fSB3aXRoIGZ1bmN0aW9uIGF0dHJpYnV0ZXM6IGNoZWNrU2lnbmVkSW4sIGdldFVzZXJcbiAqIEBwYXJhbSB1cmxzIHtPYmplY3R9OiBBUEkgVVJMc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsYXVuY2godGFibGVJZCwgZGF0YXNldElkPSdndGV4X3Y3JywgZ29vZ2xlRnVuY0RpY3Q9Z29vZ2xlRnVuYygpLCB1cmxzPWdldEd0ZXhVcmxzKCkpe1xuICAgIGNvbnN0IHByb21pc2VzID0gW1xuICAgICAgICBqc29uKHVybHMudGlzc3VlKSxcbiAgICAgICAgdHN2KHVybHMucm5hc2VxQ3JhbSksIC8vIHJuYXNlcSBjcmFtIGZpbGUgaW5mb1xuICAgICAgICB0c3YodXJscy53Z3NDcmFtKSwgLy8gd2dzIGNyYW0gZmlsZSBpbmZvXG4gICAgICAgIHRzdih1cmxzLnNhbXBsZSksIC8vIEdURXggc2FtcGxlIFRTViBmaWxlOiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgXTtcblxuICAgIFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgICAudGhlbihmdW5jdGlvbihhcmdzKXtcbiAgICAgICAgICAgIGxldCB0aXNzdWVzID0gcGFyc2VUaXNzdWVzKGFyZ3NbMF0pOyAvLyBnZXQgR1RFeCB0aXNzdWUgb2JqZWN0c1xuICAgICAgICAgICAgY29uc3QgY3JhbSA9IHtcbiAgICAgICAgICAgICAgICBybmFzZXE6IGFyZ3NbMV0ucmVkdWNlKChhLCBkKT0+e2FbZC5zYW1wbGVfaWQudG9VcHBlckNhc2UoKV09ZDsgcmV0dXJuIGE7fSwge30pLFxuICAgICAgICAgICAgICAgIHdnczogYXJnc1syXS5yZWR1Y2UoKGEsIGQpPT57YVtkLnNhbXBsZV9pZC50b1VwcGVyQ2FzZSgpXT1kOyByZXR1cm4gYTt9LCB7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBwYXJzZSBTYW1wbGVzXG4gICAgICAgICAgICBsZXQgc2FtcGxlcyA9IGFyZ3NbM11cbiAgICAgICAgICAgICAgICAuZmlsdGVyKChzKT0+cy5kYXRhc2V0SWQ9PWRhdGFzZXRJZClcbiAgICAgICAgICAgICAgICAubWFwKChzKT0+e1xuICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSByaWdodCBDUkFNIG1hbmlmZXN0IGZpbGVcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzLmRhdGFUeXBlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJXR1NcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3JhbS53Z3MuaGFzT3duUHJvcGVydHkocy5zYW1wbGVJZCkpIHRocm93IHMuc2FtcGxlSWQgKyAnIGhhcyBubyBjcmFtIGZpbGVzJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNyYW1GaWxlID0gY3JhbS53Z3Nbcy5zYW1wbGVJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUk5BU0VRXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNyYW0ucm5hc2VxLmhhc093blByb3BlcnR5KHMuc2FtcGxlSWQpKSB0aHJvdyBzLnNhbXBsZUlkICsgJyBoYXMgbm8gY3JhbSBmaWxlcyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5jcmFtRmlsZSA9IGNyYW0ucm5hc2VxW3Muc2FtcGxlSWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZGF0YVR5cGUgPSAnUk5BLVNlcSc7IC8vIGFsc28gcmVwbGFjZSB0aGUgdGVybSBSTkFTRVEgd2l0aCBSTkEtU2VxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIGZhciwgd2UgZG8gbm90IGhhdmUgY3JhbSBmaWxlcyBmb3Igb3RoZXIgZGF0YSB0eXBlcywgc28gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2FtcGxlcyA9IF9jaGVja1JuYVNlcVdpdGhHZW5vdHlwZShzYW1wbGVzKTtcbiAgICAgICAgICAgIGNvbnN0IHRoZU1hdHJpeCA9IF9idWlsZE1hdHJpeChkYXRhc2V0SWQsIHNhbXBsZXMsIHRpc3N1ZXMpO1xuICAgICAgICAgICAgX3JlbmRlck1hdHJpeFRhYmxlKHRhYmxlSWQsIHRoZU1hdHJpeCwgZ29vZ2xlRnVuY0RpY3QsIHVybHMpO1xuICAgICAgICAgICAgX2FkZEZpbHRlcnModGFibGVJZCwgdGhlTWF0cml4LCBzYW1wbGVzLCB0aXNzdWVzLCBnb29nbGVGdW5jRGljdCwgdXJscyk7XG5cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycil7Y29uc29sZS5lcnJvcihlcnIpfSk7XG59XG5cbi8qKlxuICogQ2hlY2sgUk5BLVNlcSBzYW1wbGVzIGZvciBzdWJqZWN0cyB3aXRoIGdlbm90eXBlIGRhdGEgYW5kIGFzc2lnbiBSTkEtU2VxLVdHUyB0byB0aGUgY3VzdG9tIHByaXZhdGUgc2FtcGxlIGF0dHJpYnV0ZTogX3R5cGUuXG4gKiBAcGFyYW0gc2FtcGxlczogYSBsaXN0IG9mIHNhbXBsZSBvYmplY3RzIHdpdGggcmVxdWlyZWQgYXR0cmlidXRlczogZGF0YVR5cGUsIHN1YmplY3RJZCwgdGlzc3VlU2l0ZURldGFpbElkXG4gKiBAcmV0dXJuczogYSBuZXcgbGlzdCBvZiBzYW1wbGVzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfY2hlY2tSbmFTZXFXaXRoR2Vub3R5cGUoc2FtcGxlcyl7XG4gICAgLy8gZmluZCBzdWJqZWN0cy9zYW1wbGVzIHRoYXQgaGF2ZSBnZW5vdHlwZSBkYXRhXG4gICAgY29uc3Qgd2dzSGFzaCA9IHNhbXBsZXMuZmlsdGVyKChzKSA9PiB7XG4gICAgICAgIGlmKCFzLmhhc093blByb3BlcnR5KCdkYXRhVHlwZScpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHMpO1xuICAgICAgICAgICAgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogZGF0YVR5cGUnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzLmRhdGFUeXBlID09ICdXR1MnO1xuICAgIH0pLnJlZHVjZSgoYSwgZCkgPT4ge1xuICAgICAgICBpZiAoIWQuaGFzT3duUHJvcGVydHkoJ3N1YmplY3RJZCcpKSB0aHJvdyAnUGFyc2UgRXJyb3I6IHJlcXVpcmVkIGF0dHJpYnV0ZSBpcyBtaXNzaW5nLic7XG4gICAgICAgIGFbZC5zdWJqZWN0SWRdID0gMTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfSwge30pO1xuICAgIGNvbnN0IGF0dHIgPSAndGlzc3VlU2l0ZURldGFpbElkJztcbiAgICByZXR1cm4gc2FtcGxlcy5tYXAoKHMpPT57XG4gICAgICAgIGlmKCFzLmhhc093blByb3BlcnR5KCdkYXRhVHlwZScpIHx8ICFzLmhhc093blByb3BlcnR5KCdzdWJqZWN0SWQnKSkgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZy4nO1xuICAgICAgICBpZiAocy5kYXRhVHlwZSA9PSAnUk5BLVNlcScgJiYgd2dzSGFzaC5oYXNPd25Qcm9wZXJ0eShzLnN1YmplY3RJZCkpe1xuICAgICAgICAgICAgcy5fdHlwZSA9ICdSTkEtU2VxLVdHUyc7IC8vIG1vZGlmaWVkIHRoZSBfdHlwZSB0byBSTkEtU2VxLVdHU1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH0pO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gZGF0YXNldElkIHtTdHJpbmd9XG4gKiBAcGFyYW0gc2FtcGxlcyB7TGlzdH0gYSBsaXN0IG9mIHNhbXBsZSBvYmplY3RzIGluIGRhdGFzZXQgSURcbiAqIEBwYXJhbSB0aXNzdWVzIHtMaXN0fVxuICogQHJldHVybnMge3tkYXRhc2V0SWQ6ICosIFg6ICosIFk6ICpbXSwgZGF0YTogKn19XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfYnVpbGRNYXRyaXgoZGF0YXNldElkLCBzYW1wbGVzLCB0aXNzdWVzKXtcbiAgICBjb25zdCBfX2J1aWxkSGFzaCA9IGZ1bmN0aW9uKGRhdGFUeXBlKXtcbiAgICAgICAgY29uc3QgYXR0ciA9ICd0aXNzdWVTaXRlRGV0YWlsSWQnO1xuICAgICAgICByZXR1cm4gc2FtcGxlcy5maWx0ZXIoKHMpPT57XG4gICAgICAgICAgICBpZighcy5oYXNPd25Qcm9wZXJ0eSgnZGF0YVR5cGUnKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Iocyk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogX3R5cGUgb3IgZGF0YVR5cGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGFUeXBlID09ICdSTkEtU2VxLVdHUycpIHJldHVybiBzLl90eXBlID09IGRhdGFUeXBlO1xuICAgICAgICAgICAgZWxzZSByZXR1cm4gcy5kYXRhVHlwZT09ZGF0YVR5cGU7XG4gICAgICAgIH0pLnJlZHVjZSgoYSwgcyk9PntcbiAgICAgICAgICAgIGlmKCFzLmhhc093blByb3BlcnR5KGF0dHIpKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHMpO1xuICAgICAgICAgICAgICAgIHRocm93ICdQYXJzZSBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3Npbmc6JyArIGF0dHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihhW3NbYXR0cl1dPT09dW5kZWZpbmVkKSBhW3NbYXR0cl1dID0gW107XG4gICAgICAgICAgICBhW3NbYXR0cl1dLnB1c2gocyk7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfSwge30pO1xuICAgIH07XG5cbiAgICBjb25zdCBjb2x1bW5zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ1JOQS1TZXEnLFxuICAgICAgICAgICAgaWQ6ICdSTkEtU2VxJyxcbiAgICAgICAgICAgIGRhdGE6IF9fYnVpbGRIYXNoKCdSTkEtU2VxJykgLy8gbGlzdHMgb2YgUk5BLVNlcSBzYW1wbGVzIGluZGV4ZWQgYnkgdGlzc3VlU2l0ZURldGFpbElkXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiAnUk5BLVNlcSBXaXRoIFdHUycsXG4gICAgICAgICAgICBpZDogJ1JOQS1TZXEtV0dTJyxcbiAgICAgICAgICAgIGRhdGE6IF9fYnVpbGRIYXNoKCdSTkEtU2VxLVdHUycpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiAnV0VTJyxcbiAgICAgICAgICAgIGlkOiAnV0VTJyxcbiAgICAgICAgICAgIGRhdGE6IF9fYnVpbGRIYXNoKCdXRVMnKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ1dHUycsXG4gICAgICAgICAgICBpZDogJ1dHUycsXG4gICAgICAgICAgICBkYXRhOiBfX2J1aWxkSGFzaCgnV0dTJylcbiAgICAgICAgfVxuICAgIF07XG4gICAgY29uc3Qgcm93cyA9IHRpc3N1ZXMubWFwKCh0KT0+e1xuICAgICAgICBbJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICd0aXNzdWVTaXRlRGV0YWlsJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgICAgIGlmICghdC5oYXNPd25Qcm9wZXJ0eShkKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IodCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1Rpc3N1ZSBwYXJzaW5nIGVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0LmlkID0gdC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIHQubGFiZWwgPSB0LnRpc3N1ZVNpdGVEZXRhaWw7XG4gICAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sKT0+e1xuICAgICAgICAgICAgdFtjb2wuaWRdID0gY29sLmRhdGFbdC5pZF0gfHwgdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkYXRhc2V0SWQ6IGRhdGFzZXRJZCxcbiAgICAgICAgWDogcm93cyxcbiAgICAgICAgWTogY29sdW1ucyxcbiAgICAgICAgZGF0YTogc2FtcGxlcyAvLyBub3Qgc3VyZSBpZiB0aGlzIGlzIG5lZWRlZC5cbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gdGFibGVJZCB7U3RyaW5nfVxuICogQHBhcmFtIG1hdCB7T2JqZWN0fTogZ2VuZXJhdGVkIGJ5IF9fYnVpbGRNYXRyaXgoKVxuICogQHBhcmFtIHNhbXBsZXMge0xpc3R9IGEgbGlzdCBvZiBzYW1wbGUgb2JqZWN0c1xuICogQHBhcmFtIHRpc3N1ZXMge0xpc3R9IGEgbGlzdCBvZiB0aXNzdWUgb2JqZWN0c1xuICogQHBhcmFtIGdvb2dsZUZ1bmNEaWN0IHtPYmplY3R9IHdpdGggZnVuY3Rpb24gYXR0cmlidXRlczogY2hlY2tTaWduZWRJbiwgZ2V0VXNlclxuICogQHBhcmFtIHVybHMge09iamVjdH06IEFQSSBVUkxzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfYWRkRmlsdGVycyh0YWJsZUlkLCBtYXQsIHNhbXBsZXMsIHRpc3N1ZXMsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKXtcbiAgICBjb25zdCBfX2ZpbHRlciA9ICgpPT57XG4gICAgICAgIGxldCBzZXggPSAkKCdpbnB1dFtuYW1lPVwic2V4XCJdOmNoZWNrZWQnKS52YWwoKTsgLy8galF1ZXJ5IHN5bnRheCBmb3IgRE9NIG1hbmlwdWxhdGlvbnNcbiAgICAgICAgbGV0IGFnZXMgPSBbXTtcbiAgICAgICAgJCgnLmFnZUJveCcpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpIGFnZXMucHVzaCgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmKGFnZXMubGVuZ3RoIDwgNikgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgaWYoYWdlcy5sZW5ndGggPT0gNikgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl1bdmFsdWU9XCJhbGxcIl0nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2V4ID09ICdib3RoJyAmJiBhZ2VzLmxlbmd0aCA9PSA2KXtcbiAgICAgICAgICAgIF9yZW5kZXJNYXRyaXhUYWJsZSh0YWJsZUlkLCBfYnVpbGRNYXRyaXgobWF0LmRhdGFzZXRJZCwgc2FtcGxlcywgdGlzc3VlcyksIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmaWx0ZXJlZE1hdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChzZXggPT0gJ2JvdGgnKSBmaWx0ZXJlZE1hdCA9IF9idWlsZE1hdHJpeChtYXQuZGF0YXNldElkLCBzYW1wbGVzLmZpbHRlcihzPT5hZ2VzLmluZGV4T2Yocy5hZ2VCcmFja2V0KT49MCksIHRpc3N1ZXMpO1xuICAgICAgICAgICAgZWxzZSBpZiAoYWdlcy5sZW5ndGggPT0gNikgZmlsdGVyZWRNYXQgPSBfYnVpbGRNYXRyaXgobWF0LmRhdGFzZXRJZCwgc2FtcGxlcy5maWx0ZXIocz0+cy5zZXg9PXNleCksIHRpc3N1ZXMpO1xuICAgICAgICAgICAgZWxzZSBmaWx0ZXJlZE1hdCA9IF9idWlsZE1hdHJpeChtYXQuZGF0YXNldElkLCBzYW1wbGVzLmZpbHRlcihzPT5zLnNleD09c2V4ICYmIGFnZXMuaW5kZXhPZihzLmFnZUJyYWNrZXQpPj0wKSwgdGlzc3Vlcyk7XG4gICAgICAgICAgICBfcmVuZGVyTWF0cml4VGFibGUodGFibGVJZCwgZmlsdGVyZWRNYXQsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBEZWZpbmUgaW5wdXQgY2hhbmdlIGV2ZW50czpcbiAgICAkKCdpbnB1dFtuYW1lPVwic2V4XCJdJykuY2hhbmdlKF9fZmlsdGVyKTtcbiAgICAkKCcuYWdlQm94JykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLmNoYW5nZShfX2ZpbHRlcik7XG4gICAgfSk7XG4gICAgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl0nKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgbGV0IHZhbCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgIHN3aXRjaCh2YWwpe1xuICAgICAgICAgICAgY2FzZSAnYWxsJzoge1xuICAgICAgICAgICAgICAgICQoJy5hZ2VCb3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgX19maWx0ZXIoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3Jlc2V0Jzoge1xuICAgICAgICAgICAgICAgICQoJy5hZ2VCb3gnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBSZW5kZXIgdGhlIG1hdHJpeCBpbiBhbiBIVE1MIHRhYmxlIGZvcm1hdFxuICogQHBhcmFtIHRhYmxlSWQge1N0cmluZ30gdGhlIERPTSBJRCBvZiB0aGUgdGFibGVcbiAqIEBwYXJhbSBtYXQge09iamVjdH0gb2YgYXR0cjogZGF0YXNldElkLCBYLS1hIGxpc3Qgb2YgeCBvYmplY3RzLCBZLS1hIGxpc3Qgb2YgeSBvYmplY3RzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfcmVuZGVyTWF0cml4VGFibGUodGFibGVJZCwgbWF0LCBnb29nbGVGdW5jRGljdCwgdXJscyl7XG4gICAgY29uc3QgZGF0YXNldCA9IHtcbiAgICAgICAgJ2d0ZXhfdjcnOiB7XG4gICAgICAgICAgICBsYWJlbDonR1RFWCBWNycsXG4gICAgICAgICAgICBiZ2NvbG9yOiAnIzJhNzE4YidcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gcmVuZGVyaW5nIHRoZSBjb2x1bW4gbGFiZWxzXG4gICAgY29uc3QgdGhlVGFibGUgPSBzZWxlY3QoYCMke3RhYmxlSWR9YCk7XG4gICAgdGhlVGFibGUuc2VsZWN0KCd0aGVhZCcpLnNlbGVjdEFsbCgndGgnKVxuICAgICAgICAuZGF0YShbe2xhYmVsOlwiXCIsIGlkOlwiXCJ9XS5jb25jYXQobWF0LlkpKVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKCd0aCcpXG4gICAgICAgIC5hdHRyKCdzY29wZScsICdjb2wnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAoZCwgaSk9PmQuaWQ9PVwiXCI/Jyc6YHkke2ktMX1gKVxuICAgICAgICAudGV4dCgoZCk9PmQubGFiZWwpO1xuXG4gICAgdGhlVGFibGUuc2VsZWN0KCcudGFibGUtbGFiZWwnKS5zZWxlY3RBbGwoJyonKS5yZW1vdmUoKTtcbiAgICB0aGVUYWJsZS5zZWxlY3QoJy50YWJsZS1sYWJlbCcpLmFwcGVuZCgndGgnKVxuICAgICAgICAuYXR0cignY29sc3BhbicsIG1hdC5ZLmxlbmd0aCArIDEpXG4gICAgICAgIC50ZXh0KGRhdGFzZXRbbWF0LmRhdGFzZXRJZF0ubGFiZWwpXG4gICAgICAgIC5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsZGF0YXNldFttYXQuZGF0YXNldElkXS5iZ2NvbG9yKTtcblxuICAgIF9yZW5kZXJDb3VudHModGhlVGFibGUuc2VsZWN0KCd0Ym9keScpLCBtYXQpO1xuICAgIF9hZGRDbGlja0V2ZW50cyh0YWJsZUlkKTtcbiAgICBfYWRkVG9vbGJhcih0YWJsZUlkLCBtYXQsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKTsgLy8gcmVidWlsZCB0aGUgdG9vbGJhciB3aXRoIHRoZSBuZXcgbWF0cml4XG59XG5cbi8qKlxuICogUmVuZGVyIHNhbXBsZSBjb3VudHMgaW4gdGhlIHN1bW1hcnkgdGFibGVcbiAqIEBwYXJhbSB0Ym9keSB7T2JqZWN0fSBhIEQzIHNlbGVjdCBvYmplY3RcbiAqIEBwYXJhbSBtYXQge09iamVjdH0gZ2VuZXJhdGVkIGJ5IF9idWlsZE1hdHJpeCgpXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfcmVuZGVyQ291bnRzKHRib2R5LCBtYXQpe1xuICAgIHRib2R5LnNlbGVjdEFsbCgnLmRhdGEtcm93JykucmVtb3ZlKCk7XG4gICAgY29uc3QgdGhlUm93cyA9IHRib2R5LnNlbGVjdEFsbCgnLmRhdGEtcm93JylcbiAgICAgICAgLmRhdGEobWF0LlgpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoJ3RyJylcbiAgICAgICAgLmNsYXNzZWQoJ2RhdGEtcm93JywgdHJ1ZSk7XG5cbiAgICAvLyByZW5kZXJpbmcgdGhlIHJvdyBsYWJlbFxuICAgIHRoZVJvd3MuYXBwZW5kKCd0aCcpXG4gICAgICAgIC5hdHRyKCdzY29wZScsICdyb3cnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAoZCwgaSk9PmB4JHtpfWApXG4gICAgICAgIC50ZXh0KChkKT0+e1xuICAgICAgICAgICAgcmV0dXJuIGQubGFiZWxcbiAgICAgICAgfSk7XG5cbiAgICAvLyByZW5kZXJpbmcgc2FtcGxlIGNvdW50c1xuICAgIG1hdC5ZLmZvckVhY2goKHksIGopPT57XG4gICAgICAgIHRoZVJvd3MuYXBwZW5kKCd0ZCcpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAoZCwgaSk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gZFt5LmlkXT09PXVuZGVmaW5lZD8nJzpgeCR7aX0geSR7an1gO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50ZXh0KChkKT0+e1xuICAgICAgICAgICAgICAgIGxldCBjb3VudHMgPSBkW3kuaWRdP2RbeS5pZF0ubGVuZ3RoIDogJyc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50cztcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xuXG59XG5cbi8qKlxuICogQWRkIGN1c3RvbWl6ZWQgY29sdW1uLCByb3cgYW5kIGNlbGwgY2xpY2sgZXZlbnRzXG4gKiBAcGFyYW0gdGFibGVJZCB7U3RyaW5nfSB0aGUgZG9tIElEIG9mIHRoZSB0YWJsZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2FkZENsaWNrRXZlbnRzKHRhYmxlSWQpe1xuICAgIGNvbnN0IHRoZUNlbGxzID0gc2VsZWN0KGAjJHt0YWJsZUlkfWApLnNlbGVjdCgndGJvZHknKS5zZWxlY3RBbGwoJ3RkJyk7XG5cbiAgICAvLyBjb2x1bW4gbGFiZWxzXG4gICAgc2VsZWN0KGAjJHt0YWJsZUlkfWApLnNlbGVjdCgndGhlYWQnKS5zZWxlY3RBbGwoJ3RoJylcbiAgICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gdG9nZ2xlIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgICAgY29uc3QgdGhlQ29sdW1uID0gc2VsZWN0KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XG4gICAgICAgICAgIGlmIChzZWxlY3QodGhpcykuYXR0cignc2NvcGUnKSA9PSAnY29sJykge1xuICAgICAgICAgICAgICAgc2VsZWN0KHRoaXMpLmF0dHIoJ3Njb3BlJywgJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICB0aGVDZWxscy5maWx0ZXIoYC4ke3RoZUNvbHVtbn1gKS5jbGFzc2VkKCdzZWxlY3RlZCcsIHRydWUpO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgc2VsZWN0KHRoaXMpLmF0dHIoJ3Njb3BlJywgJ2NvbCcpO1xuICAgICAgICAgICAgICAgdGhlQ2VsbHMuZmlsdGVyKGAuJHt0aGVDb2x1bW59YCkuY2xhc3NlZCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAvLyByb3cgbGFiZWxzXG4gICAgc2VsZWN0KGAjJHt0YWJsZUlkfWApLnNlbGVjdCgndGJvZHknKS5zZWxlY3RBbGwoJ3RoJylcbiAgICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICBjb25zdCB0aGVSb3cgPSBzZWxlY3QodGhpcykuYXR0cignY2xhc3MnKTtcbiAgICAgICAgICAgaWYgKHNlbGVjdCh0aGlzKS5hdHRyKCdzY29wZScpID09ICdyb3cnKSB7XG4gICAgICAgICAgICAgICBzZWxlY3QodGhpcykuYXR0cignc2NvcGUnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgIHRoZUNlbGxzLmZpbHRlcihgLiR7dGhlUm93fWApLmNsYXNzZWQoJ3NlbGVjdGVkJywgdHJ1ZSk7XG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICBzZWxlY3QodGhpcykuYXR0cignc2NvcGUnLCAncm93Jyk7XG4gICAgICAgICAgICAgICB0aGVDZWxscy5maWx0ZXIoYC4ke3RoZVJvd31gKS5jbGFzc2VkKCdzZWxlY3RlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgLy8gZGF0YSBjZWxsc1xuICAgIHRoZUNlbGxzLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gdG9nZ2xlIHRoZSBzZWxlY3RlZCBjbGFzcyBhc3NpZ25tZW50XG4gICAgICAgICAgICBzZWxlY3QodGhpcykuY2xhc3NlZCgnc2VsZWN0ZWQnLCAhc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ3NlbGVjdGVkJykpO1xuICAgICAgICB9KVxufVxuXG4vKipcbiAqIEFkZCBhIHRvb2wgYmFyXG4gKiBAcGFyYW0gdGFibGVJZFxuICogQHBhcmFtIG1hdFxuICogQHByaXZhdGVcbiAqIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzL1xuICogRGVwZW5kZW5jaWVzOiBnb29nbGVVc2VyLmpzXG4gKi9cbmZ1bmN0aW9uIF9hZGRUb29sYmFyKHRhYmxlSWQsIG1hdCwgZ29vZ2xlRnVuY0RpY3QsIHVybHMpe1xuICAgIC8vIFRPRE86IGRlY291cGxlIGRhdGEgZG93bmxvYWQgYW5kIGZpcmUgY2xvdWQgc3VibWlzc2lvblxuXG4gICAgLy8gY3JlYXRlIHRoZSB0b29sYmFyIGFuZCBidXR0b25zXG4gICAgc2VsZWN0KCcjbWF0cml4LXRhYmxlLXRvb2xiYXInKS5zZWxlY3RBbGwoJyonKS5yZW1vdmUoKTtcbiAgICBjb25zdCB0b29sYmFyID0gbmV3IFRvb2xiYXIoJ21hdHJpeC10YWJsZS10b29sYmFyJywgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICB0b29sYmFyLmNyZWF0ZUJ1dHRvbignc2FtcGxlLWRvd25sb2FkJyk7XG4gICAgLy8gdG9vbGJhci5jcmVhdGVCdXR0b24oJ3NlbmQtdG8tZmlyZWNsb3VkJywgJ2ZhLWNsb3VkLXVwbG9hZC1hbHQnKTsgLy8gRmlyZUNsb3VkIHJlbGF0ZWQsIG5vdCBpbiB1c2UgYXQgdGhpcyB0aW1lXG5cbiAgICBiaW5kRG93bmxvYWRDbGlja0V2ZW50KHRhYmxlSWQsIG1hdCk7XG4gICAgLy8gYmluZEZpcmVDbG91ZENsaWNrRXZlbnRzKHRhYmxlSWQsIGdvb2dsZUZ1bmNEaWN0KSAvLyBub3QgaW4gdXNlIGF0IHRoaXMgdGltZVxufVxuXG5mdW5jdGlvbiBiaW5kRG93bmxvYWRDbGlja0V2ZW50KHRhYmxlSWQsIG1hdCl7XG4gICAgY29uc3QgYWxsQ2VsbHMgPSBzZWxlY3QoYCMke3RhYmxlSWR9YCkuc2VsZWN0KCd0Ym9keScpLnNlbGVjdEFsbCgndGQnKTtcbiAgICBzZWxlY3QoJyNzYW1wbGUtZG93bmxvYWQnKVxuICAgICAgICAuc3R5bGUoJ2N1cnNvcicsICdwb2ludGVyJylcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyBmZXRjaCBzZWxlY3RlZCB0YWJsZSBjZWxsc1xuICAgICAgICAgICAgbGV0IGNlbGxzID0gYWxsQ2VsbHMuZmlsdGVyKGAuc2VsZWN0ZWRgKTtcbiAgICAgICAgICAgIGlmIChjZWxscy5lbXB0eSgpKSBhbGVydCgnWW91IGhhdmUgbm90IHNlbGVjdGVkIGFueSBzYW1wbGVzIHRvIGRvd25sb2FkLicpO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGRvd25sb2FkQ29udGVudCA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdTYW1wbGUgSUQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1Rpc3N1ZSBOYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdEYXRhIFR5cGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gRmlsZSBHQ1AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gRmlsZSBBV1MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gRmlsZSBNRDUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gRmlsZSBTaXplJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDUkFNIEluZGV4IEdDUCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnQ1JBTSBJbmRleCBBV1MnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbihcIlxcdFwiKSArICdcXG4nOyAvLyBpbml0aWF0ZSB0aGUgZG93bmxvYWQgY29udGVudCB3aXRoIHRoZSBjb2x1bW4gaGVhZGVyc1xuXG4gICAgICAgICAgICAgICAgLy8gZm9yIGVhY2ggc2VsZWN0ZWQgY2VsbFxuICAgICAgICAgICAgICAgIGNlbGxzLmVhY2goZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBjZWxsJ3MgeCBhbmQgeSBJRHNcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyID0gc2VsZWN0KHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKS5maWx0ZXIoKGMpPT57cmV0dXJuIGMhPSdzZWxlY3RlZCd9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IG1hdC5YW3BhcnNlSW50KG1hcmtlclswXS5yZXBsYWNlKCd4JywgJycpKV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBtYXQuWVtwYXJzZUludChtYXJrZXJbMV0ucmVwbGFjZSgneScsICcnKSldO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkU2FtcGxlcyA9IHkuZGF0YVt4LmlkXS5tYXAoKHMpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3JhbSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY3JhbV9maWxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY3JhbV9maWxlX2F3cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NyYW1fZmlsZV9tZDUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmFtX2ZpbGVfc2l6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NyYW1faW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmFtX2luZGV4X2F3cydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0ubWFwKChkKT0+cy5jcmFtRmlsZVtkXSk7IC8vIG9idGFpbiB0aGUgQ1JBTSBmaWxlIGluZm8gb2YgdGhlIHNhbXBsZSwgZFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFcnJvci1jaGVja2luZyBvZiBkYXRhIGludGVncml0eVxuICAgICAgICAgICAgICAgICAgICAgICAgWydjcmFtRmlsZScsICd0aXNzdWVTaXRlRGV0YWlsJywgJ2RhdGFUeXBlJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighcy5oYXNPd25Qcm9wZXJ0eShrKSkgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2J0YWluIHNhbXBsZSdzIG1ldGEgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSBbcy5jcmFtRmlsZS5zYW1wbGVfaWQsIHMudGlzc3VlU2l0ZURldGFpbCwgcy5kYXRhVHlwZV0uY29uY2F0KGNyYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnMuam9pbihcIlxcdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGRvd25sb2FkQ29udGVudCArPSBzZWxlY3RlZFNhbXBsZXMuam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IG5ldyBCbG9iKFtkb3dubG9hZENvbnRlbnRdLCB7dHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCd9KTtcbiAgICAgICAgICAgICAgICBzYXZlQXMoZmlsZSwgJ0dURXguY3JhbS50eHQnLCB0cnVlKTsgLy8gc2F2ZUFzKCkgaXMgYSBGaWxlU2F2ZXIgZnVuY3Rpb24sIGRpc2FibGUgYXV0byBCT01cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIGJpbmRGaXJlQ2xvdWRDbGlja0V2ZW50cyh0YWJsZUlkLCBnb29nbGVGdW5jRGljdCl7XG4gICAgLy8gVE9ETzogbm90IHlldCB0ZXN0ZWQgYWZ0ZXIgY29kZSByZXZpZXdcbiAgICAgY29uc3QgYWxsQ2VsbHMgPSBzZWxlY3QoYCMke3RhYmxlSWR9YCkuc2VsZWN0KCd0Ym9keScpLnNlbGVjdEFsbCgndGQnKTtcblxuICAgICBzZWxlY3QoJyNzZW5kLXRvLWZpcmVjbG91ZCcpXG4gICAgICAgIC5zdHlsZSgnY3Vyc29yJywgJ3BvaW50ZXInKVxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQoJyNmaXJlLWNsb3VkLXN0YXR1cycpLmVtcHR5KCk7XG4gICAgICAgICAgICBpZiAoIWdvb2dsZUZ1bmNEaWN0LmNoZWNrU2lnbmVkSW4oKSl7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgbmVlZCB0byBzaWduIGluIGZpcnN0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2NvcGVzID0gJ3Byb2ZpbGUgZW1haWwgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kZXZzdG9yYWdlLmZ1bGxfY29udHJvbCBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3BsdXMubWUnO1xuICAgICAgICAgICAgZ29vZ2xlRnVuY0RpY3QuZ3JhbnRTY29wZXMoc2NvcGVzKTtcbiAgICAgICAgICAgIF9yZXBvcnRCaWxsaW5nUHJvamVjdHMoZ29vZ2xlRnVuY0RpY3QuZ2V0VXNlcigpKTtcblxuICAgICAgICAgICAgbGV0IGNlbGxzID0gYWxsQ2VsbHMuZmlsdGVyKGAuc2VsZWN0ZWRgKTtcbiAgICAgICAgICAgIGlmIChjZWxscy5lbXB0eSgpKSBhbGVydCgnWW91IGhhdmUgbm90IHNlbGVjdGVkIGFueSBzYW1wbGVzIHRvIHN1Ym1pdC4nKTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGVjdCgnI2ZpcmUtY2xvdWQtZm9ybScpLnN0eWxlKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGNvbnN0IF9fc3VibWlzc2lvblByZXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAvLyBpbnB1dCB3b3Jrc3BhY2UgZXJyb3ItY2hlY2tpbmdcbiAgICAgICAgY29uc3Qgd3NJbnB1dCA9ICQoJ2lucHV0W25hbWU9XCJ3b3Jrc3BhY2VcIl0nKS52YWwoKTtcbiAgICAgICAgbGV0IGlucHV0U3RhdHVzID0gMTtcbiAgICAgICAgX2dldFdvcmtzcGFjZXMoZ29vZ2xlRnVuY0RpY3QuZ2V0VXNlcigpLCBmdW5jdGlvbih3cyl7XG4gICAgICAgICAgICB3cy5mb3JFYWNoKChkKT0+e1xuICAgICAgICAgICAgICAgIGlmIChkLndvcmtzcGFjZS5uYW1lID09IHdzSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIklucHV0IEVycm9yOiBXb3Jrc3BhY2UgYWxyZWFkeSBleGlzdHMuIFwiICsgd3NJbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAkKCcjZmlyZS1jbG91ZC1zdGF0dXMnKS5odG1sKFwiV29ya3NwYWNlIFwiICsgd3NJbnB1dCArIFwiIGFscmVhZHkgZXhpc3RzLiA8YnIvPiBQbGVhc2UgbmFtZSBhIG5ldyBvbmUuXCIpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dFN0YXR1cyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaW5wdXRTdGF0dXMgPT0gMSkge1xuICAgICAgICAgICAgICAgICQoJyNmaXJlLWNsb3VkLXN0YXR1cycpLmVtcHR5KCk7IC8vIGNsZWFyIGFueSBleGlzdGluZyBGaXJlQ2xvdWQgc3RhdHVzIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgbGV0IGNlbGxzID0gYWxsQ2VsbHMuZmlsdGVyKGAuc2VsZWN0ZWRgKTtcbiAgICAgICAgICAgICAgICBsZXQgYWxsU2VsZWN0ZWRTYW1wbGVzID0gW107XG4gICAgICAgICAgICAgICAgY2VsbHMuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlciA9IHNlbGVjdCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJykuZmlsdGVyKChjKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYyAhPSAnc2VsZWN0ZWQnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gbWF0LlhbcGFyc2VJbnQobWFya2VyWzBdLnJlcGxhY2UoJ3gnLCAnJykpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IG1hdC5ZW3BhcnNlSW50KG1hcmtlclsxXS5yZXBsYWNlKCd5JywgJycpKV07XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB5LmRhdGFbeC5pZF0ubWFwKGQ9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IGQuc2FtcGxlSWQuc3BsaXQoJy0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQuZG9ub3JJZCA9IHRlbXBbMF0gKyAnLScgKyB0ZW1wWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgICAgICAgICAgICAgIH0pOyAvLyBOT1RFOiBjdXJyZW50bHkgd2UgZG9uJ3QgaGF2ZSBXRVMgQ1JBTSBmaWxlIHBhdGhzXG4gICAgICAgICAgICAgICAgICAgIGFsbFNlbGVjdGVkU2FtcGxlcyA9IGFsbFNlbGVjdGVkU2FtcGxlcy5jb25jYXQoc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfc3VibWl0VG9GaXJlQ2xvdWQoZ29vZ2xlRnVuY0RpY3QsIGFsbFNlbGVjdGVkU2FtcGxlcywgdXJscyk7XG4gICAgICAgICAgICAgICAgc2VsZWN0KCcjZmlyZS1jbG91ZC1mb3JtJykuc3R5bGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICQoJ2lucHV0W25hbWU9XCJ3b3Jrc3BhY2VcIl0nKS5rZXlwcmVzcyhmdW5jdGlvbihlKXtcbiAgICAgICAgaWYoZS5rZXlDb2RlPT0xMyl7XG4gICAgICAgICAgICBfX3N1Ym1pc3Npb25QcmVwKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBzZWxlY3QoJyNzdWJtaXQtdG8tZmlyZWNsb3VkLWJ0bicpLm9uKCdjbGljaycsIF9fc3VibWlzc2lvblByZXApO1xuICAgIHNlbGVjdCgnI2NhbmNlbC1maXJlY2xvdWQtYnRuJylcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWxlY3QoJyNmaXJlLWNsb3VkLWZvcm0nKS5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgYWxlcnQoJ1N1Ym1pc3Npb24gQ2FuY2VsZWQhJyk7XG4gICAgICAgICAgICAkKCcjZmlyZS1jbG91ZC1zdGF0dXMnKS5lbXB0eSgpOyAvLyBjbGVhciBhbnkgZXhpc3RpbmcgRmlyZUNsb3VkIHN0YXR1cyBtZXNzYWdlc1xuXG4gICAgICAgIH0pXG59XG5cbi8qKioqKiBGaXJlQ2xvdWQgQVBJICoqKioqL1xuLy8gcmVmZXJlbmNlOiB1c2UgdGhpcyBVUkwsIGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS90b2tlbmluZm8/YWNjZXNzX3Rva2VuPU15QWNjZXNzVG9rZW4sIHRvIGNoZWNrIHRoZSBhY2Nlc3MgdG9rZW4gaW5mb1xuLy8gcmVmZXJlbmNlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9pZGVudGl0eS9zaWduLWluL3dlYi9idWlsZC1idXR0b25cbi8vIGRlcGVuZGVuY2llczogalF1ZXJ5XG4vKipcbiAqIEdldCB0aGUgdXNlcidzIEZpcmVDbG91ZCBiaWxsaW5nIHByb2plY3RzXG4gKiBAcGFyYW0gZ29vZ2xlVXNlciB7T2JqZWN0fSBHb29nbGUgQVBJIGN1cnJlbnQgdXNlciBvYmplY3RcbiAqIEBwYXJhbSBkb21JZCB7U3RyaW5nfSB0aGUgRE9NIElEIGZvciByZXBvcnRpbmcgdGhlIGJpbGxpbmcgcHJvamVjdHNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9yZXBvcnRCaWxsaW5nUHJvamVjdHMoZ29vZ2xlVXNlciwgZG9tSWQ9XCJiaWxsaW5nLXByb2plY3QtbGlzdFwiKSB7XG5cbiAgICAvLyBnZXQgdGhlIHVzZXIncyBhY2Nlc3MgdG9rZW5cbiAgICBsZXQgdG9rZW4gPSBnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSh0cnVlKS5hY2Nlc3NfdG9rZW47XG5cbiAgICAvLyBhamF4IGNhbGwgdG8gRmlyZUNsb3VkIGJpbGluZyBwcm9qZWN0IHdlYiBzZXJ2aWNlXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkuZmlyZWNsb3VkLm9yZy9hcGkvcHJvZmlsZS9iaWxsaW5nJyxcbiAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgLy8galF1ZXJ5XG4gICAgICAgICAgICAkKGAjJHtkb21JZH1gKS5lbXB0eSgpO1xuICAgICAgICAgICAgcmVzcG9uc2UuZm9yRWFjaCgoZCk9PntcbiAgICAgICAgICAgICAgICAkKCc8bGFiZWw+JyArXG4gICAgICAgICAgICAgICAgICAgIGA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImJpbGxpbmctcHJvamVjdFwiIHZhbHVlPVwiJHtkLnByb2plY3ROYW1lfVwiPiBgICtcbiAgICAgICAgICAgICAgICAgICAgZC5wcm9qZWN0TmFtZSArXG4gICAgICAgICAgICAgICAgICAgJzwvbGFiZWw+PGJyLz4nXG4gICAgICAgICAgICAgICAgKS5hcHBlbmRUbygkKGAjJHtkb21JZH1gKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdXNlcidzIGV4aXNpdG4gd29ya3NwYWNlcyBvbiBGaXJlQ2xvdWRcbiAqIEBwYXJhbSBnb29nbGVVc2VyIHtPYmplY3R9IEdvb2dsZSBBUEkgY3VycmVudCB1c2VyIG9iamVjdFxuICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9nZXRXb3Jrc3BhY2VzKGdvb2dsZVVzZXIsIGNhbGxiYWNrKXtcbiAgICBsZXQgdG9rZW4gPSBnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSh0cnVlKS5hY2Nlc3NfdG9rZW47XG4gICAgIC8vIGxpc3QgVXNlcidzIHdvcmtzcGFjZXNcbiAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6ICdodHRwczovL2FwaS5maXJlY2xvdWQub3JnL2FwaS93b3Jrc3BhY2VzJyxcbiAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBjb25zdCB3b3Jrc3BhY2VzID0gcmVzcG9uc2UuZmlsdGVyKChkKT0+IWQucHVibGljKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKHdvcmtzcGFjZXMpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGdvb2dsZUZ1bmNEaWN0IHtPYmplY3R9XG4gKiBAcGFyYW0gc2FtcGxlcyB7TGlzdH0gU2FtcGxlIE9iamVjdHNcbiAqIEBwYXJhbSB1cmxzIHtPYmplY3R9IEFQSSBVUkxzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfc3VibWl0VG9GaXJlQ2xvdWQoZ29vZ2xlRnVuY0RpY3QsIHNhbXBsZXMsIHVybHMpe1xuICAgIGNvbnN0IHRva2VuID0gZ29vZ2xlRnVuY0RpY3QuZ2V0VXNlcigpLmdldEF1dGhSZXNwb25zZSh0cnVlKS5hY2Nlc3NfdG9rZW47XG4gICAgY29uc3QgbmFtZXNwYWNlID0gJCgnaW5wdXRbbmFtZT1cImJpbGxpbmctcHJvamVjdFwiXScpLnZhbCgpO1xuICAgIGNvbnN0IHdvcmtzcGFjZSA9ICQoJ2lucHV0W25hbWU9XCJ3b3Jrc3BhY2VcIl0nKS52YWwoKTtcbiAgICBpZihuYW1lc3BhY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbGVydCgnWW91IG11c3QgcHJvdmlkZSBhIGJpbGxpbiBwcm9qZWN0Jyk7XG4gICAgICAgIHRocm93KFwiYmlsbGluZyBwcm9qZWN0IGlzIG5vdCBwcm92aWRlZFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod29ya3NwYWNlID09PSB1bmRlZmluZWQgfHwgd29ya3NwYWNlID09ICcnKXtcbiAgICAgICAgYWxlcnQoJ1lvdSBtdXN0IHByb3ZpZGUgYSBuZXcgd29ya3NwYWNlIG5hbWUnKTtcbiAgICAgICAgdGhyb3coJ3dvcmtzcGFjZSBuYW1lIGlzIG5vdCBwcm92aWRlZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgICQoJyNzcGlubmVyJykuc2hvdygpO1xuICAgIC8vIGNyZWF0ZSB0aGUgd29ya3NwYWNlXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiB1cmxzLmZjV29ya1NwYWNlLFxuICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgXCJuYW1lc3BhY2VcIjogbmFtZXNwYWNlLFxuICAgICAgICAgICAgXCJuYW1lXCI6IHdvcmtzcGFjZSxcbiAgICAgICAgICAgIFwiYXR0cmlidXRlc1wiOiB7fSxcbiAgICAgICAgICAgIFwiYXV0aG9yaXphdGlvbkRvbWFpblwiOiBbXVxuICAgICAgICB9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpeyAvLyBjYWxsYmFjayBmdW5jdGlvbiBhZnRlciB3b3Jrc3BhY2UgaXMgY3JlYXRlZFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJmaW5pc2hlZCBjcmVhdGluZyB3b3Jrc3BhY2UuLi5cIik7XG4gICAgICAgICAgICBjb25zdCBkb25vcnMgPSBzYW1wbGVzLm1hcChkPT57XG4gICAgICAgICAgICAgICAgaWYgKCFkLmhhc093blByb3BlcnR5KCdkb25vcklkJykpIHRocm93ICdTYW1wbGUgZG9lcyBub3QgY29udGFpbiBhdHRyIGRvbm9ySWQuJztcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5kb25vcklkO1xuICAgICAgICAgICAgfSkuZmlsdGVyKChkLCBpLCBhKSA9PiBhLmluZGV4T2YoZCkgPT09IGkpOyAvLyBvYnRhaW4gdW5pcXVlIGRvbm9yc1xuICAgICAgICAgICAgY29uc3QgZG9ub3JFbnRpdHlTdHJpbmcgPSBgZW50aXRpZXM9ZW50aXR5OnBhcnRpY2lwYW50X2lkXFxuJHtkb25vcnMuam9pbignXFxuJyl9XFxuYDtcbiAgICAgICAgICAgIGNvbnN0IGRvbm9yRW50aXR5VXJsRW5jb2RlID0gZW5jb2RlVVJJKGRvbm9yRW50aXR5U3RyaW5nKTtcblxuICAgICAgICAgICAgLy8gc3VibWl0dGluZyBwYXJ0aWNpcGFudCBJRHNcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiBgJHt1cmxzLmZjV29ya1NwYWNlfS8ke25hbWVzcGFjZX0vJHt3b3Jrc3BhY2V9L2ltcG9ydEVudGl0aWVzYCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgeGhyRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0b2tlbik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiBkb25vckVudGl0eVVybEVuY29kZSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgICAgICQoJyNzcGlubmVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBmaW5hbGx5LCBzdWJtaXR0aW5nIHNhbXBsZXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSB0aGUgc2FtcGxlRW50aXR5U3RyaW5nIGZvciBGaXJlQ2xvdWQgQVBJXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmluaXNoZWQgaW1wb3J0aW5nIHBhcnRpY2lwYW50IElEcy4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNhbXBsZUVudGl0eSA9IFtbJ2VudGl0eTpzYW1wbGVfaWQnLCAncGFydGljaXBhbnRfaWQnLCAnc2FtcGxlX3R5cGUnLCAnYmFtX2ZpbGUnLCAnYmFtX2luZGV4J10uam9pbignXFx0JyldO1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGVFbnRpdHkgPSBzYW1wbGVFbnRpdHkuY29uY2F0KHNhbXBsZXMubWFwKGQ9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmNyYW1GaWxlID09PSB1bmRlZmluZWQpIHRocm93IFwiRGF0YSBFcnJvcjogXCIgKyBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWQuY3JhbUZpbGUuaGFzT3duUHJvcGVydHkoJ2NyYW1fZmlsZScpKSB0aHJvdyBcIkRhdGEgRXJyb3I6IFwiICsgZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IHVzZSBjcmFtRmlsZS5zYW1wbGVfaWQgaW5zdGVhZCBvZiBkLnNhbXBsZUlkIHRvIHByZXNlcnZlIHRoZSBtaXhlZCBjYXNlIHNhbXBsZSBJRHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZC5jcmFtRmlsZS5zYW1wbGVfaWQsIGQuZG9ub3JJZCwgZC5kYXRhVHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZC5jcmFtRmlsZS5jcmFtX2ZpbGUsIGQuY3JhbUZpbGUuY3JhbV9pbmRleF0uam9pbignXFx0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtcGxlRW50aXR5U3RyaW5nID0gYGVudGl0aWVzPSR7c2FtcGxlRW50aXR5LmpvaW4oJ1xcbicpfVxcbmA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbXBsZUVudGl0eVVybEVuY29kZSA9IGVuY29kZVVSSShzYW1wbGVFbnRpdHlTdHJpbmcpO1xuXG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGAke3VybHMuZmNXb3JrU3BhY2V9LyR7bmFtZXNwYWNlfS8ke3dvcmtzcGFjZX0vaW1wb3J0RW50aXRpZXNgLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2FtcGxlRW50aXR5VXJsRW5jb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmluaXNoZWQgaW1wb3J0aW5nIHNhbXBsZXMuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmNVUkwgPSBgJHt1cmxzLmZjUG9ydGFsV29ya1NwYWNlfS8ke25hbWVzcGFjZX0vJHt3b3Jrc3BhY2V9L2RhdGFgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGZjVVJMLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2ZpcmUtY2xvdWQtc3RhdHVzJykuaHRtbChgU3VibWl0dGVkISA8YnIvPiBHbyB0byB5b3VyIDxici8+IDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIke2ZjVVJMfVwiPkZpcmVDbG91ZCB3b3Jrc3BhY2U8L2E+YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKXtjb25zb2xlLmVycm9yKGVycm9yKX1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3Ipe2NvbnNvbGUuZXJyb3IoZXJyb3IpfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvcil7Y29uc29sZS5lcnJvcihlcnJvcil9XG4gICAgfSk7XG59XG5cblxuXG5cbiIsIi8qKlxuICogQ29weXJpZ2h0IMKpIDIwMTUgLSAyMDE4IFRoZSBCcm9hZCBJbnN0aXR1dGUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1jbGF1c2UgbGljZW5zZSAoaHR0cHM6Ly9naXRodWIuY29tL2Jyb2FkaW5zdGl0dXRlL2d0ZXgtdml6L2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQpXG4gKi9cblwidXNlIHN0cmljdFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEd0ZXhVcmxzKCl7XG4gICAgY29uc3QgaG9zdCA9ICdodHRwczovL2d0ZXhwb3J0YWwub3JnL3Jlc3QvdjEvJztcbiAgICAvLyBjb25zdCBob3N0ID0gJ2xvY2FsLmd0ZXhwb3J0YWwub3JnL3Jlc3QvdjEvJ1xuICAgIHJldHVybiB7XG4gICAgICAgIC8vIGdlbmUtZXF0bCB2aXN1YWxpemVyIHNwZWNpZmljXG4gICAgICAgIHNpbmdsZVRpc3N1ZUVxdGw6IGhvc3QgKyAnYXNzb2NpYXRpb24vc2luZ2xlVGlzc3VlRXF0bD9mb3JtYXQ9anNvbiZkYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcbiAgICAgICAgbGQ6IGhvc3QgKyAnZGF0YXNldC9sZD9mb3JtYXQ9anNvbiZkYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcblxuICAgICAgICAvLyBlcXRsIERhc2hib2FyZCBzcGVjaWZpY1xuICAgICAgICBkeW5lcXRsOiBob3N0ICsgJ2Fzc29jaWF0aW9uL2R5bmVxdGwnLFxuICAgICAgICBzbnA6IGhvc3QgKyAncmVmZXJlbmNlL3ZhcmlhbnQ/Zm9ybWF0PWpzb24mc25wSWQ9JyxcbiAgICAgICAgdmFyaWFudElkOiBob3N0ICsgJ2RhdGFzZXQvdmFyaWFudD9mb3JtYXQ9anNvbiZ2YXJpYW50SWQ9JyxcblxuICAgICAgICAvLyB0cmFuc2NyaXB0LCBleG9uLCBqdW5jdGlvbiBleHByZXNzaW9uIHNwZWNpZmljXG4gICAgICAgIGV4b25FeHA6IGhvc3QgKyAnZXhwcmVzc2lvbi9tZWRpYW5FeG9uRXhwcmVzc2lvbj9kYXRhc2V0SWQ9Z3RleF92NyZoY2x1c3Rlcj10cnVlJmdlbmNvZGVJZD0nLFxuICAgICAgICB0cmFuc2NyaXB0RXhwOiBob3N0ICsgJ2V4cHJlc3Npb24vbWVkaWFuVHJhbnNjcmlwdEV4cHJlc3Npb24/ZGF0YXNldElkPWd0ZXhfdjcmaGNsdXN0ZXI9dHJ1ZSZnZW5jb2RlSWQ9JyxcbiAgICAgICAganVuY3Rpb25FeHA6IGhvc3QgKyAnZXhwcmVzc2lvbi9tZWRpYW5KdW5jdGlvbkV4cHJlc3Npb24/ZGF0YXNldElkPWd0ZXhfdjcmaGNsdXN0ZXI9dHJ1ZSZnZW5jb2RlSWQ9JyxcbiAgICAgICAgdHJhbnNjcmlwdDogaG9zdCArICdyZWZlcmVuY2UvdHJhbnNjcmlwdD9kYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcbiAgICAgICAgZXhvbjogaG9zdCArICdyZWZlcmVuY2UvZXhvbj9kYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcbiAgICAgICAgZ2VuZU1vZGVsOiBob3N0ICsgJ2RhdGFzZXQvY29sbGFwc2VkR2VuZU1vZGVsRXhvbj9kYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcbiAgICAgICAgZ2VuZU1vZGVsVW5maWx0ZXJlZDogaG9zdCArICdkYXRhc2V0L2Z1bGxDb2xsYXBzZWRHZW5lTW9kZWxFeG9uP2RhdGFzZXRJZD1ndGV4X3Y3JmdlbmNvZGVJZD0nLFxuXG4gICAgICAgIC8vIGdlbmUgZXhwcmVzc2lvbiB2aW9saW4gcGxvdCBzcGVjaWZpY1xuICAgICAgICBnZW5lRXhwOiBob3N0ICsgJ2V4cHJlc3Npb24vZ2VuZUV4cHJlc3Npb24/ZGF0YXNldElkPWd0ZXhfdjcmZ2VuY29kZUlkPScsXG5cbiAgICAgICAgLy8gZ2VuZSBleHByZXNzaW9uIGhlYXQgbWFwIHNwZWNpZmljXG4gICAgICAgIG1lZEdlbmVFeHA6IGhvc3QgKyAnZXhwcmVzc2lvbi9tZWRpYW5HZW5lRXhwcmVzc2lvbj9kYXRhc2V0SWQ9Z3RleF92NyZoY2x1c3Rlcj10cnVlJnBhZ2VTaXplPTEwMDAwJyxcblxuICAgICAgICAvLyBnZW5lIGV4cHJlc3Npb24gYm94cGxvdCBzcGVjaWZpY1xuICAgICAgICBnZW5lRXhwQm94cGxvdDogaG9zdCArICdleHByZXNzaW9uL2dlbmVFeHByZXNzaW9uP2RhdGFzZXRJZD1ndGV4X3Y3JmJveHBsb3REZXRhaWw9ZnVsbCZnZW5jb2RlSWQ9JyxcblxuICAgICAgICAvLyB0b3AgZXhwcmVzc2VkIGdlbmUgZXhwcmVzc2lvbiBzcGVjaWZpY1xuICAgICAgICB0b3BJblRpc3N1ZUZpbHRlcmVkOiBob3N0ICsgJ2V4cHJlc3Npb24vdG9wRXhwcmVzc2VkR2VuZT9kYXRhc2V0SWQ9Z3RleF92NyZmaWx0ZXJNdEdlbmU9dHJ1ZSZzb3J0Qnk9bWVkaWFuJnNvcnREaXJlY3Rpb249ZGVzYyZwYWdlU2l6ZT01MCZ0aXNzdWVTaXRlRGV0YWlsSWQ9JyxcbiAgICAgICAgdG9wSW5UaXNzdWU6IGhvc3QgKyAnZXhwcmVzc2lvbi90b3BFeHByZXNzZWRHZW5lP2RhdGFzZXRJZD1ndGV4X3Y3JnNvcnRCeT1tZWRpYW4mc29ydERpcmVjdGlvbj1kZXNjJnBhZ2VTaXplPTUwJnRpc3N1ZVNpdGVEZXRhaWxJZD0nLFxuXG4gICAgICAgIGdlbmVJZDogaG9zdCArICdyZWZlcmVuY2UvZ2VuZT9mb3JtYXQ9anNvbiZnZW5jb2RlVmVyc2lvbj12MTkmZ2Vub21lQnVpbGQ9R1JDaDM3JTJGaGcxOSZnZW5lSWQ9JyxcblxuICAgICAgICAvLyB0aXNzdWUgbWVudSBzcGVjaWZpY1xuICAgICAgICB0aXNzdWU6ICBob3N0ICsgJ2RhdGFzZXQvdGlzc3VlSW5mbz9mb3JtYXQ9anNvbiZkYXRhc2V0SWQ9Z3RleF92NycsXG5cbiAgICAgICAgLy8gbG9jYWwgc3RhdGljIGZpbGVzXG4gICAgICAgIHNhbXBsZTogJy90bXBTdW1tYXJ5RGF0YS9ndGV4LlNhbXBsZS5jc3YnLFxuICAgICAgICBybmFzZXFDcmFtOiAnL3RtcFN1bW1hcnlEYXRhL3JuYXNlcV9jcmFtX2ZpbGVzX3Y3X2RiR2FQXzAxMTUxNi50eHQnLFxuICAgICAgICB3Z3NDcmFtOiAnL3RtcFN1bW1hcnlEYXRhL3dnc19jcmFtX2ZpbGVzX3Y3X2hnMzhfZGJHYVBfMDExNTE2LnR4dCcsXG5cbiAgICAgICAgLy8gZmlyZUNsb3VkXG4gICAgICAgIGZjQmlsbGluZzogJ2h0dHBzOi8vYXBpLmZpcmVjbG91ZC5vcmcvYXBpL3Byb2ZpbGUvYmlsbGluZycsXG4gICAgICAgIGZjV29ya1NwYWNlOiAnaHR0cHM6Ly9hcGkuZmlyZWNsb3VkLm9yZy9hcGkvd29ya3NwYWNlcycsXG4gICAgICAgIGZjUG9ydGFsV29ya1NwYWNlOiAnaHR0cHM6Ly9wb3J0YWwuZmlyZWNsb3VkLm9yZy8jd29ya3NwYWNlcydcbiAgICB9XG59XG5cbi8qKlxuICogcGFyc2UgR1RFeCBkeW5lcXRsIGpzb25cbiAqIEBwYXJhbSBkYXRhIHtKU09OfSBmcm9tIEdURXggZHluZXF0bCB3ZWIgc2VydmljZVxuICogQHJldHVybnMgZGF0YSB7SlNPTn0gbW9kaWZpZWQgZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRHluRXF0bChqc29uKXtcbiAgICAvLyBjaGVjayByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZXNcbiAgICBbJ2RhdGEnLCAnZ2Vub3R5cGVzJywgJ3BWYWx1ZScsICdwVmFsdWVUaHJlc2hvbGQnLCAndGlzc3VlU2l0ZURldGFpbElkJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoZCkpe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihqc29uKTtcbiAgICAgICAgICAgIHRocm93ICdQYXJzZSBFcnJvcjogUmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGpzb24uZXhwcmVzc2lvbl92YWx1ZXMgPSBqc29uLmRhdGEubWFwKChkKT0+cGFyc2VGbG9hdChkKSk7XG4gICAganNvbi5nZW5vdHlwZXMgPSBqc29uLmdlbm90eXBlcy5tYXAoKGQpPT5wYXJzZUZsb2F0KGQpKTtcblxuICAgIGpzb24uaG9tb1JlZkV4cCA9IGpzb24uZXhwcmVzc2lvbl92YWx1ZXMuZmlsdGVyKChkLGkpID0+IHtcbiAgICAgICAgcmV0dXJuIGpzb24uZ2Vub3R5cGVzW2ldID09IDBcbiAgICB9KTtcbiAgICBqc29uLmhvbW9BbHRFeHAgPSBqc29uLmV4cHJlc3Npb25fdmFsdWVzLmZpbHRlcigoZCxpKSA9PiB7XG4gICAgICAgIHJldHVybiBqc29uLmdlbm90eXBlc1tpXSA9PSAyXG4gICAgfSk7XG4gICAganNvbi5oZXRlcm9FeHAgPSBqc29uLmV4cHJlc3Npb25fdmFsdWVzLmZpbHRlcigoZCxpKSA9PiB7XG4gICAgICAgIHJldHVybiBqc29uLmdlbm90eXBlc1tpXSA9PSAxXG4gICAgfSk7XG5cbiAgICAvLyBnZW5lcmF0ZSBnZW5vdHlwZSB0ZXh0IGxhYmVsc1xuICAgIGxldCByZWYgPSBqc29uLnZhcmlhbnRJZC5zcGxpdCgvXy8pWzJdO1xuICAgIGxldCBhbHQgPSBqc29uLnZhcmlhbnRJZC5zcGxpdCgvXy8pWzNdO1xuICAgIGpzb24uaGV0ID0gcmVmICsgYWx0O1xuICAgIGpzb24ucmVmID0gcmVmICsgcmVmO1xuICAgIGpzb24uYWx0ID0gYWx0ICsgYWx0O1xuXG4gICAgcmV0dXJuIGpzb247XG59XG5cblxuLyoqXG4gKiBQYXJzZSB0aGUgc2luZ2xlIHRpc3N1ZSBlcXRscyBmcm9tIEdURXggd2ViIHNlcnZpY2VcbiAqIEBwYXJhbSBkYXRhIHtKc29ufVxuICogQHBhcmFtIHRpc3N1ZVNpdGVUYWJsZSB7SnNvbn0gb3B0aW9uYWwgZm9yIG1hcHBpbmcgdGlzc3VlU2l0ZURldGFpbElkIHRvIHRpc3N1ZVNpdGVEZXRhaWwsIGEgZGljdGlvbmFyeSBvZiB0aXNzdWVTaXRlIG9iamVjdHMgKHdpdGggdGhlIGF0dHIgdGlzc3VlU2l0ZURldGFpbCkgaW5kZXhlZCBieSB0aXNzdWVTaXRlRGV0YWlsSWQsIGFuZFxuICogQHJldHVybnMge0xpc3R9IG9mIGVxdGxzIHdpdGggYXR0cmlidXRlcyByZXF1aXJlZCBmb3IgR0VWIHJlbmRlcmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTaW5nbGVUaXNzdWVFcXRscyhkYXRhLCB0aXNzdWVTaXRlVGFibGUgPSB1bmRlZmluZWQpe1xuICAgIGNvbnN0IGF0dHIgPSAnc2luZ2xlVGlzc3VlRXF0bCc7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93IFwiUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG5vdCBmb3VuZDogXCIgKyBhdHRyO1xuICAgIFsndmFyaWFudElkJywgJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICduZXMnLCAncFZhbHVlJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgaWYgKCFkYXRhW2F0dHJdWzBdLmhhc093blByb3BlcnR5KGspKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIH0pO1xuXG5cbiAgICByZXR1cm4gZGF0YVthdHRyXS5tYXAoKGQpPT57XG4gICAgICAgIGQueCA9IGQudmFyaWFudElkO1xuICAgICAgICBkLmRpc3BsYXlYID0gZ2VuZXJhdGVTaG9ydFZhcmlhbnRJZChkLnZhcmlhbnRJZCk7XG4gICAgICAgIGQueSA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBpZiAodGlzc3VlU2l0ZVRhYmxlKSBkLmRpc3BsYXlZID0gdGlzc3VlU2l0ZVRhYmxlW2QudGlzc3VlU2l0ZURldGFpbElkXS50aXNzdWVTaXRlRGV0YWlsO1xuICAgICAgICBkLnZhbHVlID0gZC5uZXM7XG4gICAgICAgIGQuZGlzcGxheVZhbHVlID0gZC5uZXMudG9QcmVjaXNpb24oMyk7XG4gICAgICAgIGQuciA9IC1NYXRoLmxvZzEwKGQucFZhbHVlKTsgLy8gc2V0IHIgdG8gYmUgdGhlIC1sb2cxMChwLXZhbHVlKVxuICAgICAgICBkLnJEaXNwbGF5VmFsdWUgPSBwYXJzZUZsb2F0KGQucFZhbHVlLnRvRXhwb25lbnRpYWwoKSkudG9QcmVjaXNpb24oMyk7XG4gICAgICAgIHJldHVybiBkO1xuICAgIH0pXG59XG5cbi8qKlxuICogUGFyc2UgdGhlIGdlbmVzIGZyb20gR1RFeCB3ZWIgc2VydmljZVxuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiBAcmV0dXJucyB7TGlzdH0gb2YgZ2VuZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlR2VuZXMoZGF0YSwgc2luZ2xlPWZhbHNlLCBnZW5lSWQ9bnVsbCl7XG4gICAgY29uc3QgYXR0ciA9ICdnZW5lJztcbiAgICBpZighZGF0YS5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3cgXCJQYXJzaW5nIEVycm9yOiBhdHRyaWJ1dGUgZ2VuZSBkb2Vzbid0IGV4aXN0LlwiO1xuICAgIGlmIChkYXRhLmdlbmUubGVuZ3RoPT0wKXtcbiAgICAgICAgIGFsZXJ0KFwiTm8gZ2VuZSBpcyBmb3VuZFwiKTtcbiAgICAgICAgIHRocm93IFwiRmF0YWwgRXJyb3I6IGdlbmUocykgbm90IGZvdW5kXCI7XG4gICAgIH1cbiAgICBpZiAoc2luZ2xlKXtcbiAgICAgICAgaWYgKGdlbmVJZCA9PT0gbnVsbCkgdGhyb3cgXCJQbGVhc2UgcHJvdmlkZSBhIGdlbmUgSUQgZm9yIHNlYXJjaCByZXN1bHRzIHZhbGlkYXRpb25cIjtcbiAgICAgICAgaWYgKGRhdGEuZ2VuZS5sZW5ndGg+MSkgeyAvLyB3aGVuIGEgc2luZ2xlIGdlbmUgSUQgaGFzIG11bHRpcGxlIG1hdGNoZXNcbiAgICAgICAgICAgICBsZXQgZmlsdGVyZWQgPSBkYXRhLmdlbmUuZmlsdGVyKChnKT0+e1xuICAgICAgICAgICAgICAgICByZXR1cm4gZy5nZW5lU3ltYm9sVXBwZXI9PWdlbmVJZC50b1VwcGVyQ2FzZSgpIHx8IGcuZ2VuY29kZUlkID09IGdlbmVJZC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgaWYgKGZpbHRlcmVkLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgYWxlcnQoXCJGYXRhbCBFcnJvcjogaW5wdXQgZ2VuZSBJRCBpcyBub3QgdW5pcXVlLlwiKTtcbiAgICAgICAgICAgICAgICAgdGhyb3cgXCJGYXRhbCBFcnJvcjogaW5wdXQgZ2VuZSBJRCBpcyBub3QgdW5pcXVlLlwiO1xuICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlcmVkLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgICAgICAgICAgYWxlcnQoXCJObyBnZW5lIGlzIGZvdW5kIHdpdGggXCIgKyBnZW5lSWQpO1xuICAgICAgICAgICAgICAgICB0aHJvdyBcIkZhdGFsIEVycm9yOiBnZW5lIG5vdCBmb3VuZFwiO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICBkYXRhLmdlbmUgPSBmaWx0ZXJlZFxuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBkYXRhLmdlbmVbMF1cbiAgICB9XG4gICAgZWxzZSByZXR1cm4gZGF0YVthdHRyXTtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgdGlzc3Vlc1xuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiBAcmV0dXJucyB7TGlzdH0gb2YgdGlzc3Vlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUaXNzdWVzKGpzb24pe1xuICAgIGNvbnN0IGF0dHIgPSAndGlzc3VlSW5mbyc7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHIgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgY29uc3QgdGlzc3VlcyA9IGpzb25bYXR0cl07XG5cbiAgICAvLyBzYW5pdHkgY2hlY2tcbiAgICBbJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICd0aXNzdWVTaXRlRGV0YWlsJywgJ2NvbG9ySGV4J10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKCF0aXNzdWVzWzBdLmhhc093blByb3BlcnR5KGQpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyIGlzIG1pc3Npbmc6ICcgKyBkO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRpc3N1ZXM7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHRpc3N1ZXMgYW5kIHJldHVybiBhIGxvb2t1cCB0YWJsZSBpbmRleGVkIGJ5IHRpc3N1ZVNpdGVEZXRhaWxJZFxuICogQHBhcmFtIGpzb24gZnJvbSB3ZWIgc2VydmljZSB0aXNzdWVTaXRlRGV0YWlsXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVGlzc3VlRGljdChqc29uKXtcbiAgICBjb25zdCBhdHRyID0gJ3Rpc3N1ZUluZm8nO1xuICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIGNvbnN0IHRpc3N1ZXMgPSBqc29uW2F0dHJdO1xuICAgIC8vIHNhbml0eSBjaGVja1xuICAgIFsndGlzc3VlU2l0ZURldGFpbElkJywgJ3Rpc3N1ZVNpdGVEZXRhaWwnLCAnY29sb3JIZXgnXS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBpZiAoIXRpc3N1ZXNbMF0uaGFzT3duUHJvcGVydHkoZCkpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHIgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRpc3N1ZXMucmVkdWNlKChhcnIsIGQpPT57YXJyW2QudGlzc3VlU2l0ZURldGFpbElkXSA9IGQ7IHJldHVybiBhcnI7fSx7fSk7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHRpc3N1ZXMgc2FtcGxlIGNvdW50cywgR1RFeCByZWxlYXNlIHNwZWNpZmljXG4gKiBAcGFyYW0ganNvbiBmcm9tIHdlYiBzZXJ2aWNlIHRpc3N1ZUluZm9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVGlzc3VlU2FtcGxlQ291bnRzKGpzb24pe1xuICAgIGNvbnN0IGF0dHIgPSAndGlzc3VlSW5mbyc7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHIgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgY29uc3QgdGlzc3VlcyA9IGpzb25bYXR0cl07XG5cbiAgICAvLyBjaGVjayBqc29uIHN0cnVjdHVyZVxuICAgIGNvbnN0IHRpc3N1ZSA9IHRpc3N1ZXNbMF07XG4gICAgaWYgKCF0aXNzdWUuaGFzT3duUHJvcGVydHkoJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgYXR0ciBpcyBtaXNzaW5nOiB0aXNzdWVTaXRlRGV0YWlsSWQnO1xuICAgIGlmICghdGlzc3VlLmhhc093blByb3BlcnR5KCdybmFTZXFBbmRHZW5vdHlwZVNhbXBsZUNvdW50JykpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBhdHRyIGlzIG1pc3Npbmc6IHJuYVNlcUFuZEdlbm90eXBlU2FtcGxlQ291bnQnO1xuICAgIHJldHVybiB0aXNzdWVzO1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSB0aXNzdWUgZ3JvdXBzXG4gKiBAcGFyYW0gZGF0YSB7SnNvbn1cbiAqIEBwYXJhbSBmb3JFcXRsIHtCb29sZWFufSByZXN0cmljdCB0byBlcXRsIHRpc3N1ZXNcbiAqIEByZXR1cm5zIHtEaWN0aW9uYXJ5fSBvZiBsaXN0cyBvZiB0aXNzdWVzIGluZGV4ZWQgYnkgdGhlIHRpc3N1ZSBncm91cCBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRpc3N1ZVNpdGVzKGRhdGEsIGZvckVxdGw9ZmFsc2Upe1xuICAgIC8vIHRoZSBsaXN0IG9mIGludmFsaWQgZXF0bCB0aXNzdWVzIGR1ZSB0byBzYW1wbGUgc2l6ZSA8IDcwXG4gICAgLy8gYSBoYXJkLWNvZGVkIGxpc3QgYmVjYXVzZSB0aGUgc2FtcGxlIHNpemUgaXMgbm90IGVhc3kgdG8gcmV0cmlldmVcbiAgICBjb25zdCBpbnZhbGlkVGlzc3VlcyA9IFsnQmxhZGRlcicsICdDZXJ2aXhfRWN0b2NlcnZpeCcsICdDZXJ2aXhfRW5kb2NlcnZpeCcsICdGYWxsb3BpYW5fVHViZScsICdLaWRuZXlfQ29ydGV4J107XG5cbiAgICBjb25zdCBhdHRyID0gJ3Rpc3N1ZUluZm8nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgbGV0IHRpc3N1ZXMgPSBkYXRhW2F0dHJdO1xuICAgIFsndGlzc3VlU2l0ZScsJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsJ3Rpc3N1ZVNpdGVEZXRhaWwnXS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBpZiAoIXRpc3N1ZXNbMF0uaGFzT3duUHJvcGVydHkoZCkpIHRocm93IGBwYXJzZVRpc3N1ZVNpdGVzIGF0dHIgZXJyb3IuICR7ZH0gaXMgbm90IGZvdW5kYDtcbiAgICB9KTtcbiAgICB0aXNzdWVzID0gZm9yRXF0bD09ZmFsc2U/dGlzc3Vlczp0aXNzdWVzLmZpbHRlcigoZCk9PntyZXR1cm4gIWludmFsaWRUaXNzdWVzLmluY2x1ZGVzKGQudGlzc3VlU2l0ZURldGFpbElkKX0pOyAvLyBhbiBhcnJheSBvZiB0aXNzdWVTaXRlRGV0YWlsSWQgb2JqZWN0c1xuXG4gICAgLy8gYnVpbGQgdGhlIHRpc3N1ZUdyb3VwcyBsb29rdXAgZGljdGlvbmFyeSBpbmRleGVkIGJ5IHRoZSB0aXNzdWUgZ3JvdXAgbmFtZSAoaS5lLiB0aGUgdGlzc3VlIG1haW4gc2l0ZSBuYW1lKVxuICAgIGxldCB0aXNzdWVHcm91cHMgPSB0aXNzdWVzLnJlZHVjZSgoYXJyLCBkKT0+e1xuICAgICAgICBsZXQgZ3JvdXBOYW1lID0gZC50aXNzdWVTaXRlO1xuICAgICAgICBsZXQgc2l0ZSA9IHtcbiAgICAgICAgICAgIGlkOiBkLnRpc3N1ZVNpdGVEZXRhaWxJZCxcbiAgICAgICAgICAgIG5hbWU6IGQudGlzc3VlU2l0ZURldGFpbFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWFyci5oYXNPd25Qcm9wZXJ0eShncm91cE5hbWUpKSBhcnJbZ3JvdXBOYW1lXSA9IFtdOyAvLyBpbml0aWF0ZSBhbiBhcnJheVxuICAgICAgICBhcnJbZ3JvdXBOYW1lXS5wdXNoKHNpdGUpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sIHt9KTtcblxuICAgIC8vIG1vZGlmeSB0aGUgdGlzc3VlIGdyb3VwcyB0aGF0IGhhdmUgb25seSBhIHNpbmdsZSBzaXRlXG4gICAgLy8gYnkgcmVwbGFjaW5nIHRoZSBncm91cCdzIG5hbWUgd2l0aCB0aGUgc2luZ2xlIHNpdGUncyBuYW1lIC0tIHJlc3VsdGluZyBhIGJldHRlciBBbHBoYWJldGljYWwgb3JkZXIgb2YgdGhlIHRpc3N1ZSBncm91cHNcblxuICAgIE9iamVjdC5rZXlzKHRpc3N1ZUdyb3VwcykuZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKHRpc3N1ZUdyb3Vwc1tkXS5sZW5ndGggPT0gMSl7IC8vIGEgc2luZ2xlLXNpdGUgZ3JvdXBcbiAgICAgICAgICAgIGxldCBzaXRlID0gdGlzc3VlR3JvdXBzW2RdWzBdOyAvLyB0aGUgc2luZ2xlIHNpdGVcbiAgICAgICAgICAgIGRlbGV0ZSB0aXNzdWVHcm91cHNbZF07IC8vIHJlbW92ZSB0aGUgb2xkIGdyb3VwIGluIHRoZSBkaWN0aW9uYXJ5XG4gICAgICAgICAgICB0aXNzdWVHcm91cHNbc2l0ZS5uYW1lXSA9IFtzaXRlXTsgLy8gY3JlYXRlIGEgbmV3IGdyb3VwIHdpdGggdGhlIHNpdGUncyBuYW1lXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGlzc3VlR3JvdXBzO1xufVxuXG4vKipcbiAqIHBhcnNlIHRoZSBleG9uc1xuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiBAcGFyYW0gZnVsbCB7Qm9vbGVhbn1cbiAqIEByZXR1cm5zIHtMaXN0fSBvZiBleG9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNb2RlbEV4b25zKGpzb24pe1xuICAgIGNvbnN0IGF0dHIgPSAnY29sbGFwc2VkR2VuZU1vZGVsRXhvbic7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpe1xuICAgICAgICBjb25zb2xlLmVycm9yKGpzb24pO1xuICAgICAgICB0aHJvdyAnUGFyc2luZyBFcnJvcjogUmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgfVxuICAgIC8vIHNhbml0eSBjaGVja1xuICAgIFsnc3RhcnQnLCAnZW5kJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKCFqc29uW2F0dHJdWzBdLmhhc093blByb3BlcnR5KGQpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogUmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIGpzb25bYXR0cl0ubWFwKChkKT0+e1xuICAgICAgICBkLmNocm9tU3RhcnQgPSBkLnN0YXJ0O1xuICAgICAgICBkLmNocm9tRW5kID0gZC5lbmQ7XG4gICAgICAgIHJldHVybiBkO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIHBhcnNlIHRoZSBqdW5jdGlvbnNcbiAqIEBwYXJhbSBkYXRhXG4gKiBAcmV0dXJucyB7TGlzdH0gb2YganVuY3Rpb25zXG4gKiAvLyBqdW5jdGlvbiBhbm5vdGF0aW9ucyBhcmUgbm90IHN0b3JlZCBpbiBNb25nb1xuICAgIC8vIHNvIGhlcmUgd2UgdXNlIHRoZSBqdW5jdGlvbiBleHByZXNzaW9uIHdlYiBzZXJ2aWNlIHRvIHBhcnNlIHRoZSBqdW5jdGlvbiBJRCBmb3IgaXRzIGdlbm9taWMgbG9jYXRpb25cbiAgICAvLyBhc3N1bWluZyB0aGF0IGVhY2ggdGlzc3VlIGhhcyB0aGUgc2FtZSBqdW5jdGlvbnMsXG4gICAgLy8gdG8gZ3JhYiBhbGwgdGhlIGtub3duIGp1bmN0aW9ucyBvZiBhIGdlbmUsIHdlIG9ubHkgbmVlZCB0byBxdWVyeSBvbmUgdGlzc3VlXG4gICAgLy8gaGVyZSB3ZSBhcmJpdHJhcmlseSBwaWNrIExpdmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKdW5jdGlvbnMoanNvbil7XG5cbiAgICBjb25zdCBhdHRyID0gJ21lZGlhbkp1bmN0aW9uRXhwcmVzc2lvbic7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiBwYXJzZUp1bmN0aW9ucyBpbnB1dCBlcnJvci4gJyArIGF0dHI7XG5cbiAgICAvLyBjaGVjayByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZXNcbiAgICBbJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICdqdW5jdGlvbklkJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgLy8gdXNlIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBqc29uIG9iamVjdHMgYXMgYSB0ZXN0IGNhc2VcbiAgICAgICAgaWYoIWpzb25bYXR0cl1bMF0uaGFzT3duUHJvcGVydHkoZCkpe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihqc29uW2F0dHJdWzBdKTtcbiAgICAgICAgICAgIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqdW5jdGlvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ganNvblthdHRyXS5maWx0ZXIoKGQpPT5kLnRpc3N1ZVNpdGVEZXRhaWxJZD09J0xpdmVyJylcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvcyA9IGQuanVuY3Rpb25JZC5zcGxpdCgnXycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbTogcG9zWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tU3RhcnQ6IHBvc1sxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbUVuZDogcG9zWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1bmN0aW9uSWQ6IGQuanVuY3Rpb25JZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbn1cblxuLyoqXG4gKiBwYXJzZSB0cmFuc2NyaXB0IGlzb2Zvcm1zIGZyb20gdGhlIEdURXggd2ViIHNlcnZpY2U6ICdyZWZlcmVuY2UvdHJhbnNjcmlwdD9yZWxlYXNlPXY3JmdlbmNvZGVfaWQ9J1xuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiByZXR1cm5zIGEgZGljdGlvbmFyeSBvZiB0cmFuc2NyaXB0IGV4b24gb2JqZWN0IGxpc3RzIGluZGV4ZWQgYnkgdHJhbnNjcmlwdCBJRHMgLS0gRU5TVCBJRHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRXhvbnMoanNvbil7XG4gICAgY29uc3QgYXR0ciA9ICdleG9uJztcbiAgICBpZighanNvbi5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6IGV4b24nO1xuICAgIHJldHVybiBqc29uW2F0dHJdLnJlZHVjZSgoYSwgZCk9PntcbiAgICAgICAgLy8gY2hlY2sgcmVxdWlyZWQgYXR0cmlidXRlc1xuICAgICAgICBbJ3RyYW5zY3JpcHRJZCcsICdjaHJvbW9zb21lJywgJ3N0YXJ0JywgJ2VuZCcsICdleG9uTnVtYmVyJywgJ2V4b25JZCddLmZvckVhY2goKGspPT57XG4gICAgICAgICAgICBpZighZC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBrXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYVtkLnRyYW5zY3JpcHRJZF0gPT09IHVuZGVmaW5lZCkgYVtkLnRyYW5zY3JpcHRJZF0gPSBbXTtcbiAgICAgICAgZC5jaHJvbSA9IGQuY2hyb21vc29tZTtcbiAgICAgICAgZC5jaHJvbVN0YXJ0ID0gZC5zdGFydDtcbiAgICAgICAgZC5jaHJvbUVuZCA9IGQuZW5kO1xuICAgICAgICBhW2QudHJhbnNjcmlwdElkXS5wdXNoKGQpO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9LCB7fSk7XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBpc29mb3JtcyBmcm9tIHRoZSBHVEV4IHdlYiBzZXJ2aWNlOiAncmVmZXJlbmNlL3RyYW5zY3JpcHQ/cmVsZWFzZT12NyZnZW5jb2RlX2lkPSdcbiAqIEBwYXJhbSBkYXRhIHtKc29ufSBmcm9tIHdlYiBzZXJ2aWNlIGV4b25cbiAqIHJldHVybnMgYSBsaXN0IG9mIGFsbCBFeG9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VFeG9uc1RvTGlzdChqc29uKXtcbiAgICBjb25zdCBhdHRyID0gJ2V4b24nO1xuICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogZXhvbic7XG4gICAgcmV0dXJuIGpzb25bYXR0cl07XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBpc29mb3Jtc1xuICogQHBhcmFtIGRhdGEge0pzb259IGZyb20gR1RFeCB3ZWIgc2VydmljZSAncmVmZXJlbmNlL3RyYW5zY3JpcHQ/cmVsZWFzZT12NyZnZW5jb2RlX2lkPSdcbiAqIHJldHVybnMgYSBsaXN0IG9mIGlzb2Zvcm0gb2JqZWN0cyBzb3J0ZWQgYnkgbGVuZ3RoIGluIGRlc2NlbmRpbmcgb3JkZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVHJhbnNjcmlwdHMoanNvbil7XG4gICAgY29uc3QgYXR0ciA9ICd0cmFuc2NyaXB0JztcbiAgICBpZighanNvbi5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3coJ3BhcnNlSXNvZm9ybXMgaW5wdXQgZXJyb3InKTtcblxuICAgIC8vIGNoZWNrIHJlcXVpcmVkIGF0dHJpYnV0ZXMsIHVzZSB0aGUgZmlyc3QgdHJhbnNjcmlwdCBhcyB0aGUgdGVzdCBjYXNlXG4gICAgWyd0cmFuc2NyaXB0SWQnLCAnc3RhcnQnLCAnZW5kJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgaWYoIWpzb25bYXR0cl1bMF0uaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGpzb25bYXR0cl0uc29ydCgoYSwgYik9PntcbiAgICAgICAgY29uc3QgbDEgPSBNYXRoLmFicyhhLmVuZCAtIGEuc3RhcnQpICsgMTtcbiAgICAgICAgY29uc3QgbDIgPSBNYXRoLmFicyhiLmVuZCAtIGIuc3RhcnQpICsgMTtcbiAgICAgICAgcmV0dXJuIC0obDEtbDIpOyAvLyBzb3J0IGJ5IGlzb2Zvcm0gbGVuZ3RoIGluIGRlc2NlbmRpbmcgb3JkZXJcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBwYXJzZSBmaW5hbCAobWFza2VkKSBnZW5lIG1vZGVsIGV4b24gZXhwcmVzc2lvblxuICogZXhwcmVzc2lvbiBpcyBub3JtYWxpemVkIHRvIHJlYWRzIHBlciBrYlxuICogQHBhcmFtIGRhdGEge0pTT059IG9mIGV4b24gZXhwcmVzc2lvbiB3ZWIgc2VydmljZVxuICogQHBhcmFtIGV4b25zIHtMaXN0fSBvZiBleG9ucyB3aXRoIHBvc2l0aW9uc1xuICogQHJldHVybnMge0xpc3R9IG9mIGV4b24gb2JqZWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VFeG9uRXhwcmVzc2lvbihkYXRhLCBleG9ucyl7XG4gICAgY29uc3QgZXhvbkRpY3QgPSBleG9ucy5yZWR1Y2UoKGEsIGQpPT57YVtkLmV4b25JZF0gPSBkOyByZXR1cm4gYTt9LCB7fSk7XG4gICAgY29uc3QgYXR0ciA9ICdtZWRpYW5FeG9uRXhwcmVzc2lvbic7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93KCdwYXJzZUV4b25FeHByZXNzaW9uIGlucHV0IGVycm9yJyk7XG5cbiAgICBjb25zdCBleG9uT2JqZWN0cyA9IGRhdGFbYXR0cl07XG4gICAgLy8gZXJyb3ItY2hlY2tpbmdcbiAgICBbJ21lZGlhbicsICdleG9uSWQnLCAndGlzc3VlU2l0ZURldGFpbElkJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKCFleG9uT2JqZWN0c1swXS5oYXNPd25Qcm9wZXJ0eShkKSkgdGhyb3cgJ0ZhdGFsIEVycm9yOiBwYXJzZUV4b25FeHByZXNzaW9uIGF0dHIgbm90IGZvdW5kOiAnICsgZDtcbiAgICB9KTtcbiAgICAvLyBwYXJzZSBHVEV4IG1lZGlhbiBleG9uIGNvdW50c1xuICAgIGV4b25PYmplY3RzLmZvckVhY2goKGQpID0+IHtcbiAgICAgICAgY29uc3QgZXhvbiA9IGV4b25EaWN0W2QuZXhvbklkXTsgLy8gZm9yIHJldHJpZXZpbmcgZXhvbiBwb3NpdGlvbnNcbiAgICAgICAgLy8gZXJyb3ItY2hlY2tpbmdcbiAgICAgICAgWydlbmQnLCAnc3RhcnQnXS5mb3JFYWNoKChwKT0+e1xuICAgICAgICAgICAgaWYgKCFleG9uLmhhc093blByb3BlcnR5KHApKSB0aHJvdyAnRmF0YWwgRXJyb3I6IHBhcnNlRXhvbkV4cHJlc3Npb24gcG9zaXRpb24gYXR0ciBub3QgZm91bmQ6ICcgKyBwO1xuICAgICAgICB9KTtcbiAgICAgICAgZC5sID0gZXhvbi5lbmQgLSBleG9uLnN0YXJ0ICsgMTtcbiAgICAgICAgZC52YWx1ZSA9IE51bWJlcihkLm1lZGlhbikvZC5sO1xuICAgICAgICBkLmRpc3BsYXlWYWx1ZSA9IE51bWJlcihkLm1lZGlhbikvZC5sO1xuICAgICAgICBkLnggPSBkLmV4b25JZDtcbiAgICAgICAgZC55ID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQuaWQgPSBkLmdlbmNvZGVJZDtcbiAgICAgICAgZC5jaHJvbVN0YXJ0ID0gZXhvbi5zdGFydDtcbiAgICAgICAgZC5jaHJvbUVuZCA9IGV4b24uZW5kO1xuICAgICAgICBkLnVuaXQgPSAnbWVkaWFuICcgKyBkLnVuaXQgKyAnIHBlciBiYXNlJztcbiAgICAgICAgZC50aXNzdWVJZCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgIH0pO1xuICAgIHJldHVybiBleG9uT2JqZWN0cy5zb3J0KChhLGIpPT57XG4gICAgICAgIGlmIChhLmNocm9tU3RhcnQ8Yi5jaHJvbVN0YXJ0KSByZXR1cm4gLTE7XG4gICAgICAgIGlmIChhLmNocm9tU3RhcnQ+Yi5jaHJvbVN0YXJ0KSByZXR1cm4gMTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSk7IC8vIHNvcnQgYnkgZ2Vub21pYyBsb2NhdGlvbiBpbiBhc2NlbmRpbmcgb3JkZXJcbn1cblxuLyoqXG4gKiBQYXJzZSBqdW5jdGlvbiBtZWRpYW4gcmVhZCBjb3VudCBkYXRhXG4gKiBAcGFyYW0gZGF0YSB7SlNPTn0gb2YgdGhlIGp1bmN0aW9uIGV4cHJlc3Npb24gd2ViIHNlcnZpY2VcbiAqIEByZXR1cm5zIHtMaXN0fSBvZiBqdW5jdGlvbiBvYmplY3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUp1bmN0aW9uRXhwcmVzc2lvbihkYXRhKXtcbiAgICBjb25zdCBhdHRyID0gJ21lZGlhbkp1bmN0aW9uRXhwcmVzc2lvbic7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93KCdwYXJzZUp1bmN0aW9uRXhwcmVzc2lvbiBpbnB1dCBlcnJvcicpO1xuXG4gICAgY29uc3QganVuY3Rpb25zID0gZGF0YVthdHRyXTtcblxuICAgIC8vIGVycm9yLWNoZWNraW5nXG4gICAgaWYgKGp1bmN0aW9ucyA9PT0gdW5kZWZpbmVkIHx8IGp1bmN0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ05vIGp1bmN0aW9uIGRhdGEgZm91bmQnKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cblxuICAgIC8vIHBhcnNlIEdURXggbWVkaWFuIGp1bmN0aW9uIHJlYWQgY291bnRzXG4gICAganVuY3Rpb25zLmZvckVhY2goKGQpID0+IHtcbiAgICAgICAgWyd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnanVuY3Rpb25JZCcsICdtZWRpYW4nLCAnZ2VuY29kZUlkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmICghZC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1BhcnNpbmdyIEVycm9yOiBwYXJzZUp1bmN0aW9uRXhwcmVzc2lvbiBhdHRyIG5vdCBmb3VuZDogJyArIGs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbWVkaWFuID0gZC5tZWRpYW47XG4gICAgICAgIGxldCB0aXNzdWVJZCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBkLnRpc3N1ZUlkID0gdGlzc3VlSWQ7XG4gICAgICAgIGQuaWQgPSBkLmdlbmNvZGVJZDtcbiAgICAgICAgZC54ID0gZC5qdW5jdGlvbklkO1xuICAgICAgICBkLnkgPSB0aXNzdWVJZDtcbiAgICAgICAgZC52YWx1ZSA9IE51bWJlcihtZWRpYW4pO1xuICAgICAgICBkLmRpc3BsYXlWYWx1ZSA9IE51bWJlcihtZWRpYW4pO1xuICAgIH0pO1xuXG4gICAgLy8gc29ydCBieSBnZW5vbWljIGxvY2F0aW9uIGluIGFzY2VuZGluZyBvcmRlclxuICAgIHJldHVybiBqdW5jdGlvbnMuc29ydCgoYSxiKT0+e1xuICAgICAgICBpZiAoYS5qdW5jdGlvbklkPmIuanVuY3Rpb25JZCkgcmV0dXJuIDE7XG4gICAgICAgIGVsc2UgaWYgKGEuanVuY3Rpb25JZDxiLmp1bmN0aW9uSWQpIHJldHVybiAtMTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSk7XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBleHByZXNzaW9uXG4gKiBAcGFyYW0gZGF0YVxuICogQHJldHVybnMgeyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRyYW5zY3JpcHRFeHByZXNzaW9uKGRhdGEpe1xuICAgIGNvbnN0IGF0dHIgPSAnbWVkaWFuVHJhbnNjcmlwdEV4cHJlc3Npb24nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdygnUGFyc2luZyBFcnJvcjogcGFyc2VUcmFuc2NyaXB0RXhwcmVzc2lvbiBpbnB1dCBlcnJvcicpO1xuICAgIC8vIHBhcnNlIEdURXggaXNvZm9ybSBtZWRpYW4gVFBNXG4gICAgZGF0YVthdHRyXS5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgIFsnbWVkaWFuJywgJ3RyYW5zY3JpcHRJZCcsICd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnZ2VuY29kZUlkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmKCFkLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihkKTtcbiAgICAgICAgICAgICAgICB0aHJvdygnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgdHJhbnNjaXB0IGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsgayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkLnZhbHVlID0gTnVtYmVyKGQubWVkaWFuKTtcbiAgICAgICAgZC5kaXNwbGF5VmFsdWUgPSBOdW1iZXIoZC5tZWRpYW4pO1xuICAgICAgICBkLnggPSBkLnRyYW5zY3JpcHRJZDtcbiAgICAgICAgZC55ID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQuaWQgPSBkLmdlbmNvZGVJZDtcbiAgICAgICAgZC50aXNzdWVJZCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRhdGFbYXR0cl07XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBleHByZXNzaW9uLCBhbmQgdHJhbnNwb3NlIHRoZSBtYXRyaXhcbiAqIEBwYXJhbSBkYXRhXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVHJhbnNjcmlwdEV4cHJlc3Npb25UcmFuc3Bvc2UoZGF0YSl7XG4gICAgY29uc3QgYXR0ciA9ICdtZWRpYW5UcmFuc2NyaXB0RXhwcmVzc2lvbic7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihkYXRhKTtcbiAgICAgICAgdGhyb3coJ1BhcnNpbmcgRXJyb3I6IHBhcnNlVHJhbnNjcmlwdEV4cHJlc3Npb25UcmFuc3Bvc2UgaW5wdXQgZXJyb3IuJyk7XG4gICAgfVxuICAgIC8vIHBhcnNlIEdURXggaXNvZm9ybSBtZWRpYW4gVFBNXG4gICAgZGF0YVthdHRyXS5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgIFsnbWVkaWFuJywgJ3RyYW5zY3JpcHRJZCcsICd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnZ2VuY29kZUlkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmKCFkLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihkKTtcbiAgICAgICAgICAgICAgICB0aHJvdygnUGFyc2luZyBFcnJvcjogUmVxdWlyZWQgdHJhbnNjcmlwdCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbWVkaWFuID0gZC5tZWRpYW47XG4gICAgICAgIGNvbnN0IHRpc3N1ZUlkID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQudmFsdWUgPSBOdW1iZXIobWVkaWFuKTtcbiAgICAgICAgZC5kaXNwbGF5VmFsdWUgPSBOdW1iZXIobWVkaWFuKTtcbiAgICAgICAgZC55ID0gZC50cmFuc2NyaXB0SWQ7XG4gICAgICAgIGQueCA9IHRpc3N1ZUlkO1xuICAgICAgICBkLmlkID0gZC5nZW5jb2RlSWQ7XG4gICAgICAgIGQudGlzc3VlSWQgPSB0aXNzdWVJZDtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhW2F0dHJdO1xufVxuXG4vKipcbiAqIHBhcnNlIG1lZGlhbiBnZW5lIGV4cHJlc3Npb25cbiAqIEBwYXJhbSBkYXRhIHtKc29ufSB3aXRoIGF0dHIgbWVkaWFuR2VuZUV4cHJlc3Npb25cbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNZWRpYW5FeHByZXNzaW9uKGRhdGEpe1xuICAgIGNvbnN0IGF0dHIgPSAnbWVkaWFuR2VuZUV4cHJlc3Npb24nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgY29uc3QgYWRqdXN0ID0gMTtcbiAgICAvLyBwYXJzZSBHVEV4IG1lZGlhbiBnZW5lIGV4cHJlc3Npb25cbiAgICAvLyBlcnJvci1jaGVja2luZyB0aGUgcmVxdWlyZWQgYXR0cmlidXRlczpcbiAgICBpZiAoZGF0YVthdHRyXS5sZW5ndGggPT0gMCkgdGhyb3cgJ3BhcnNlTWVkaWFuRXhwcmVzc2lvbiBmaW5kcyBubyBkYXRhLic7XG4gICAgWydtZWRpYW4nLCAndGlzc3VlU2l0ZURldGFpbElkJywgJ2dlbmNvZGVJZCddLmZvckVhY2goKGQpPT57XG4gICAgICAgIGlmICghZGF0YVthdHRyXVswXS5oYXNPd25Qcm9wZXJ0eShkKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihkYXRhW2F0dHJdWzBdKTtcbiAgICAgICAgICAgIHRocm93IGBQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5ncDogJHtkfWA7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0cyA9IGRhdGFbYXR0cl07XG4gICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uKGQpe1xuICAgICAgICBkLnZhbHVlID0gTnVtYmVyKGQubWVkaWFuKTtcbiAgICAgICAgZC54ID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQueSA9IGQuZ2VuY29kZUlkO1xuICAgICAgICBkLmRpc3BsYXlWYWx1ZSA9IE51bWJlcihkLm1lZGlhbik7XG4gICAgICAgIGQuaWQgPSBkLmdlbmNvZGVJZDtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHRzO1xufVxuXG4vKipcbiAqIHBhcnNlIHRoZSBleHByZXNzaW9uIGRhdGEgb2YgYSBnZW5lIGZvciBhIGdyb3VwZWQgdmlvbGluIHBsb3RcbiAqIEBwYXJhbSBkYXRhIHtKU09OfSBmcm9tIEdURXggZ2VuZSBleHByZXNzaW9uIHdlYiBzZXJ2aWNlXG4gKiBAcGFyYW0gY29sb3JzIHtEaWN0aW9uYXJ5fSB0aGUgdmlvbGluIGNvbG9yIGZvciBnZW5lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VHZW5lRXhwcmVzc2lvbkZvclZpb2xpbihkYXRhLCB1c2VMb2c9dHJ1ZSwgY29sb3JzPXVuZGVmaW5lZCl7XG4gICAgY29uc3QgYXR0ciA9ICdnZW5lRXhwcmVzc2lvbic7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsgYXR0cjtcbiAgICBkYXRhW2F0dHJdLmZvckVhY2goKGQpPT57XG4gICAgICAgIFsnZGF0YScsICd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnZ2VuZVN5bWJvbCcsICdnZW5jb2RlSWQnXS5mb3JFYWNoKChrKT0+e1xuICAgICAgICAgICAgaWYoIWQuaGFzT3duUHJvcGVydHkoaykpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZC52YWx1ZXMgPSB1c2VMb2c/ZC5kYXRhLm1hcCgoZGQpPT57cmV0dXJuIE1hdGgubG9nMTAoK2RkKzEpfSk6ZC5kYXRhO1xuICAgICAgICBkLmdyb3VwID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQubGFiZWwgPSBkLmdlbmVTeW1ib2w7XG4gICAgICAgIGQuY29sb3IgPSBjb2xvcnM9PT11bmRlZmluZWQ/JyM5MGMxYzEnOmNvbG9yc1tkLmdlbmNvZGVJZF07XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGFbYXR0cl07XG59XG5cbi8qKlxuICogcGFyc2UgdGhlIExEIChsaW5rYWdlIGRpc2VxdWlsaWJyaXVtIGRhdGEpXG4gKiBAcGFyYW0gZGF0YSB7SlNPTn0gZnJvbSBHVEV4IGxkIHdlYiBzZXJ2aWNlXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUxEKGRhdGEpIHtcbiAgICBjb25zdCBhdHRyID0gJ2xkJztcbiAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsgYXR0cjtcbiAgICBsZXQgcGFyc2VkID0gW107XG4gICAgbGV0IHVuaXF1ZSA9IHt9O1xuICAgIGRhdGFbYXR0cl0uZm9yRWFjaCgoZCkgPT4ge1xuICAgICAgICBsZXQgbGFiZWxzID0gZFswXS5zcGxpdChcIixcIikuc29ydCgpOyAvLyBzb3J0IHRoZSB2YXJpYW50IElEc1xuICAgICAgICB1bmlxdWVbbGFiZWxzWzBdXSA9IHRydWU7XG4gICAgICAgIHVuaXF1ZVtsYWJlbHNbMV1dID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VkLnB1c2goe1xuICAgICAgICAgICAgeDogbGFiZWxzWzBdLFxuICAgICAgICAgICAgZGlzcGxheVg6IGdlbmVyYXRlU2hvcnRWYXJpYW50SWQobGFiZWxzWzBdKSxcbiAgICAgICAgICAgIHk6IGxhYmVsc1sxXSxcbiAgICAgICAgICAgIGRpc3BsYXlZOiBnZW5lcmF0ZVNob3J0VmFyaWFudElkKGxhYmVsc1sxXSksXG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VGbG9hdChkWzFdKSxcbiAgICAgICAgICAgIGRpc3BsYXlWYWx1ZTogcGFyc2VGbG9hdChkWzFdKS50b1ByZWNpc2lvbigzKSAvLyB0b1ByZWNpc2lvbigpIHJldHVybnMgYSBzdHJpbmdcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICBPYmplY3Qua2V5cyh1bmlxdWUpLmZvckVhY2goKGQpPT57XG4gICAgICAgIHBhcnNlZC5wdXNoKHtcbiAgICAgICAgICAgIHg6IGQsXG4gICAgICAgICAgICBkaXNwbGF5WDogZ2VuZXJhdGVTaG9ydFZhcmlhbnRJZChkKSxcbiAgICAgICAgICAgIHk6IGQsXG4gICAgICAgICAgICBkaXNwbGF5WTogZ2VuZXJhdGVTaG9ydFZhcmlhbnRJZChkKSxcbiAgICAgICAgICAgIHZhbHVlOiAxLFxuICAgICAgICAgICAgZGlzcGxheVZhbHVlOiBcIjFcIlxuICAgICAgICB9KVxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5cbi8qIHBhcnNlIHRoZSBleHByZXNzaW9uIGRhdGEgb2YgYSBnZW5lIGZvciBib3hwbG90XG4gKiBAcGFyYW0gZGF0YSB7SlNPTn0gZnJvbSBHVEV4IGdlbmUgZXhwcmVzc2lvbiB3ZWIgc2VydmljZVxuICogQHBhcmFtIHRpc3N1ZXMge09iamVjdH0gbWFwcGluZyBvZiB0aXNzdWUgaWRzIHRvIGxhYmVscyAodGlzc3VlIG5hbWUpXG4gKiBAcGFyYW0gY29sb3JzIHtPYmplY3R9IG1hcHBpbmcgb2YgdGlzc3VlIGlkcyB0byBib3hwbG90IGNvbG9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VHZW5lRXhwcmVzc2lvbkZvckJveHBsb3QoZGF0YSwgdGlzc3Vlcz11bmRlZmluZWQsIGNvbG9ycz11bmRlZmluZWQpIHtcbiAgICBjb25zdCBhdHRyID0gJ2dlbmVFeHByZXNzaW9uJztcblxuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyhgUGFyc2luZyBlcnJvcjogcmVxdWlyZWQgSlNPTiBhdHRyaWJ1dGUgJHthdHRyfSBtaXNzaW5nLmApO1xuXG4gICAgZGF0YVthdHRyXS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBbJ2RhdGEnLCAnZ2VuY29kZUlkJywgJ2dlbmVTeW1ib2wnLCAndGlzc3VlU2l0ZURldGFpbElkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmICghZC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgYFBhcnNpbmcgZXJyb3I6IHJlcXVpcmVkIEpTT04gYXR0cmlidXRlICR7a30gaXMgbWlzc2luZyBmcm9tIGEgcmVjb3JkLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkLmxhYmVsID0gdGlzc3Vlcz09PXVuZGVmaW5lZD9kLnRpc3N1ZVNpdGVEZXRhaWxJZDp0aXNzdWVzW2QudGlzc3VlU2l0ZURldGFpbElkXTtcbiAgICAgICAgZC5jb2xvciA9IGNvbG9ycz09PXVuZGVmaW5lZD8nIzQ2ODJiNCc6Y29sb3JzW2QudGlzc3VlU2l0ZURldGFpbElkXTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhW2F0dHJdO1xufVxuXG4vKipcbiAqIGdlbmVyYXRlIHZhcmlhbnQgSUQgc2hvcnRoYW5kXG4gKiBAcGFyYW0gaWRcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVNob3J0VmFyaWFudElkKGlkKXtcbiAgICBsZXQgdGVtcCA9IGlkLnNwbGl0KFwiX1wiKTtcbiAgICBpZih0ZW1wWzJdLmxlbmd0aCA9PSAxICYmIHRlbXBbM10ubGVuZ3RoID09IDEpIHJldHVybiBpZDtcbiAgICBpZih0ZW1wWzJdLmxlbmd0aCA+IHRlbXBbM10ubGVuZ3RoKSB7XG4gICAgICAgIHRlbXBbMl0gPSBcImRlbFwiO1xuICAgICAgICB0ZW1wLnNwbGljZSgzLCAxKTsgLy8gZGVsZXRlIHRoZSBhbHRcbiAgICB9XG4gICAgZWxzZSBpZih0ZW1wWzNdLmxlbmd0aCA+IHRlbXBbMl0ubGVuZ3RoKSB7XG4gICAgICAgIHRlbXBbM10gPSBcImluc1wiO1xuICAgICAgICB0ZW1wLnNwbGljZSgyLCAxKTsgLy8gZGVsZXRlIHRoZSByZWZcbiAgICB9XG4gICAgZWxzZSB7IC8vIHRlbXBbM10ubGVuZ3RoID09IHRlbXBbMl0ubGVuZ3RoIGFuZCB0ZW1wWzNdLmxlbmd0aCA+IDFcbiAgICAgICAgdGVtcFszXSA9IFwic3ViXCI7XG4gICAgICAgIHRlbXAuc3BsaWNlKDIsIDEpOyAvLyBkZWxldGUgdGhlIHJlZlxuICAgIH1cbiAgICByZXR1cm4gdGVtcC5qb2luKFwiX1wiKTtcbn1cbiJdLCJuYW1lcyI6WyJFT0wiLCJFT0YiLCJRVU9URSIsIk5FV0xJTkUiLCJSRVRVUk4iLCJvYmplY3RDb252ZXJ0ZXIiLCJjb2x1bW5zIiwiRnVuY3Rpb24iLCJtYXAiLCJuYW1lIiwiaSIsIkpTT04iLCJzdHJpbmdpZnkiLCJqb2luIiwiZGVsaW1pdGVyIiwicmVGb3JtYXQiLCJSZWdFeHAiLCJERUxJTUlURVIiLCJjaGFyQ29kZUF0IiwicGFyc2VSb3dzIiwidGV4dCIsImYiLCJ0Iiwicm93cyIsIk4iLCJsZW5ndGgiLCJJIiwibiIsImVvZiIsImVvbCIsInRva2VuIiwiYyIsImoiLCJzbGljZSIsInJlcGxhY2UiLCJyb3ciLCJwdXNoIiwiZm9ybWF0Um93IiwiZm9ybWF0VmFsdWUiLCJ0ZXN0IiwicGFyc2UiLCJjb252ZXJ0Iiwib2JqZWN0IiwiY3VzdG9tQ29udmVydGVyIiwiZm9ybWF0IiwiY29sdW1uU2V0IiwiT2JqZWN0IiwiY3JlYXRlIiwiZm9yRWFjaCIsImNvbHVtbiIsImluZmVyQ29sdW1ucyIsImNvbmNhdCIsImZvcm1hdFJvd3MiLCJjc3ZQYXJzZSIsImRzdiIsInRzdlBhcnNlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImlucHV0IiwiaW5pdCIsImZldGNoIiwidGhlbiIsImRzdlBhcnNlIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwidHN2IiwicmVzcG9uc2VKc29uIiwianNvbiIsInhodG1sIiwic3ZnIiwieGxpbmsiLCJ4bWwiLCJ4bWxucyIsInByZWZpeCIsImluZGV4T2YiLCJuYW1lc3BhY2VzIiwiaGFzT3duUHJvcGVydHkiLCJzcGFjZSIsImxvY2FsIiwiZnVsbG5hbWUiLCJuYW1lc3BhY2UiLCJ0aGlzIiwib3duZXJEb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImRvY3VtZW50IiwidXJpIiwibmFtZXNwYWNlVVJJIiwiZG9jdW1lbnRFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsIm5vbmUiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJlbXB0eSIsIm1hdGNoZXIiLCJtYXRjaGVzIiwiZWxlbWVudCIsInZlbmRvck1hdGNoZXMiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm9NYXRjaGVzU2VsZWN0b3IiLCJjYWxsIiwidXBkYXRlIiwiQXJyYXkiLCJFbnRlck5vZGUiLCJwYXJlbnQiLCJkYXR1bSIsIl9uZXh0IiwiX3BhcmVudCIsIl9fZGF0YV9fIiwicHJvdG90eXBlIiwiY29uc3RydWN0b3IiLCJhcHBlbmRDaGlsZCIsImNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwibmV4dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJrZXlQcmVmaXgiLCJiaW5kSW5kZXgiLCJncm91cCIsImVudGVyIiwiZXhpdCIsImRhdGEiLCJub2RlIiwiZ3JvdXBMZW5ndGgiLCJkYXRhTGVuZ3RoIiwiYmluZEtleSIsImtleSIsImtleVZhbHVlIiwibm9kZUJ5S2V5VmFsdWUiLCJrZXlWYWx1ZXMiLCJhc2NlbmRpbmciLCJhIiwiYiIsIk5hTiIsImRlZmF1bHRWaWV3IiwiY2xhc3NBcnJheSIsInN0cmluZyIsInRyaW0iLCJzcGxpdCIsImNsYXNzTGlzdCIsIkNsYXNzTGlzdCIsIl9ub2RlIiwiX25hbWVzIiwiZ2V0QXR0cmlidXRlIiwiY2xhc3NlZEFkZCIsIm5hbWVzIiwibGlzdCIsImFkZCIsImNsYXNzZWRSZW1vdmUiLCJyZW1vdmUiLCJzZXRBdHRyaWJ1dGUiLCJzcGxpY2UiLCJjb250YWlucyIsInRleHRSZW1vdmUiLCJ0ZXh0Q29udGVudCIsImh0bWxSZW1vdmUiLCJpbm5lckhUTUwiLCJyYWlzZSIsIm5leHRTaWJsaW5nIiwicGFyZW50Tm9kZSIsImxvd2VyIiwicHJldmlvdXNTaWJsaW5nIiwiZmlyc3RDaGlsZCIsImNvbnN0YW50TnVsbCIsInJlbW92ZUNoaWxkIiwic2VsZWN0aW9uX2Nsb25lU2hhbGxvdyIsImNsb25lTm9kZSIsInNlbGVjdGlvbl9jbG9uZURlZXAiLCJmaWx0ZXJFdmVudHMiLCJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSIsImZpbHRlckNvbnRleHRMaXN0ZW5lciIsImxpc3RlbmVyIiwiaW5kZXgiLCJjb250ZXh0TGlzdGVuZXIiLCJldmVudCIsInJlbGF0ZWQiLCJyZWxhdGVkVGFyZ2V0IiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJldmVudDEiLCJvblJlbW92ZSIsInR5cGVuYW1lIiwib24iLCJfX29uIiwibyIsIm0iLCJ0eXBlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhcHR1cmUiLCJvbkFkZCIsInZhbHVlIiwid3JhcCIsImQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsInBhcmFtcyIsIndpbmRvdyIsIkN1c3RvbUV2ZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0RXZlbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRldGFpbCIsInJvb3QiLCJTZWxlY3Rpb24iLCJncm91cHMiLCJwYXJlbnRzIiwiX2dyb3VwcyIsIl9wYXJlbnRzIiwic2VsZWN0Iiwic3ViZ3JvdXBzIiwic3Vibm9kZSIsInN1Ymdyb3VwIiwic2VsZWN0QWxsIiwiZmlsdGVyIiwibWF0Y2giLCJzaXplIiwiZWFjaCIsIngiLCJiaW5kIiwiZW50ZXJHcm91cCIsInVwZGF0ZUdyb3VwIiwicHJldmlvdXMiLCJpMCIsImkxIiwiX2VudGVyIiwiX2V4aXQiLCJzcGFyc2UiLCJtZXJnZSIsInNlbGVjdGlvbiIsImdyb3VwczAiLCJncm91cHMxIiwibTAiLCJtMSIsIk1hdGgiLCJtaW4iLCJtZXJnZXMiLCJncm91cDAiLCJncm91cDEiLCJvcmRlciIsInNvcnQiLCJjb21wYXJlIiwiY29tcGFyZU5vZGUiLCJzb3J0Z3JvdXBzIiwic29ydGdyb3VwIiwiY2FsbGJhY2siLCJhcHBseSIsIm5vZGVzIiwiYXR0ciIsImdldEF0dHJpYnV0ZU5TIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ2Iiwic2V0QXR0cmlidXRlTlMiLCJzdHlsZSIsInByaW9yaXR5IiwicmVtb3ZlUHJvcGVydHkiLCJzZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5VmFsdWUiLCJnZXRDb21wdXRlZFN0eWxlIiwic3R5bGVWYWx1ZSIsInByb3BlcnR5IiwiY2xhc3NlZCIsImh0bWwiLCJhcHBlbmQiLCJjcmVhdG9yIiwiaW5zZXJ0IiwiYmVmb3JlIiwiY2xvbmUiLCJkZWVwIiwidHlwZW5hbWVzIiwicGFyc2VUeXBlbmFtZXMiLCJkaXNwYXRjaCIsIlRvb2xiYXIiLCJbb2JqZWN0IE9iamVjdF0iLCJkb21JZCIsInRvb2x0aXAiLCJ2ZXJ0aWNhbCIsIiQiLCJzaG93IiwiYnRuQ2xhc3NlcyIsImJhciIsImFkZENsYXNzIiwiYXBwZW5kVG8iLCJidXR0b25zIiwiaWQiLCJzdmdJZCIsIm91dGZpbGVOYW1lIiwiY2xvbmVJZCIsImljb24iLCJjcmVhdGVCdXR0b24iLCJkb3dubG9hZFN2ZyIsImhpZGUiLCIkYnV0dG9uIiwiZmlsZU5hbWUiLCJzdmdPYmoiLCIkc3ZnQ29weSIsInN0eWxlcyIsImRvbSIsInVzZWQiLCJzaGVldHMiLCJzdHlsZVNoZWV0cyIsImNzc1J1bGVzIiwicnVsZXMiLCJydWxlIiwiZWxlbXMiLCJzZWxlY3RvclRleHQiLCJmaW5kIiwiZSIsImNzc1RleHQiLCJzIiwicGFyc2VDc3NTdHlsZXMiLCJnZXQiLCJwcmVwZW5kIiwic3ZnSHRtbCIsInN2Z0Jsb2IiLCJCbG9iIiwic2F2ZUFzIiwiZ29vZ2xlRnVuYyIsImNoZWNrU2lnbmVkSW4iLCJnZXRVc2VyIiwic2lnbkluQnV0dG9uIiwicmVuZGVyU2lnbkluQnV0dG9uIiwic2lnbk91dCIsImdyYW50U2NvcGVzIiwiZ2FwaSIsInNpZ25pbjIiLCJyZW5kZXIiLCJzY29wZSIsIndpZHRoIiwiaGVpZ2h0IiwibG9uZ3RpdGxlIiwidGhlbWUiLCJvbnN1Y2Nlc3MiLCJvblN1Y2Nlc3MiLCJvbmZhaWx1cmUiLCJvbkZhaWx1cmUiLCJnb29nbGVVc2VyIiwiYXV0aDIiLCJnZXRBdXRoSW5zdGFuY2UiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJpc1NpZ25lZEluIiwiY3VycmVudFVzZXIiLCJzY29wZXMiLCJncmFudCIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZmFpbCIsIl9idWlsZE1hdHJpeCIsImRhdGFzZXRJZCIsInNhbXBsZXMiLCJ0aXNzdWVzIiwiX19idWlsZEhhc2giLCJkYXRhVHlwZSIsIl90eXBlIiwicmVkdWNlIiwibGFiZWwiLCJYIiwidGlzc3VlU2l0ZURldGFpbElkIiwidGlzc3VlU2l0ZURldGFpbCIsImNvbCIsIlkiLCJfcmVuZGVyTWF0cml4VGFibGUiLCJ0YWJsZUlkIiwibWF0IiwiZ29vZ2xlRnVuY0RpY3QiLCJ1cmxzIiwiZGF0YXNldCIsImd0ZXhfdjciLCJiZ2NvbG9yIiwidGhlVGFibGUiLCJ0Ym9keSIsInRoZVJvd3MiLCJ5IiwiY291bnRzIiwiX3JlbmRlckNvdW50cyIsInRoZUNlbGxzIiwidGhlQ29sdW1uIiwidGhlUm93IiwiX2FkZENsaWNrRXZlbnRzIiwiYWxsQ2VsbHMiLCJjZWxscyIsImFsZXJ0IiwiZG93bmxvYWRDb250ZW50IiwibWFya2VyIiwicGFyc2VJbnQiLCJzZWxlY3RlZFNhbXBsZXMiLCJjcmFtIiwiY3JhbUZpbGUiLCJrIiwic2FtcGxlX2lkIiwiZmlsZSIsImJpbmREb3dubG9hZENsaWNrRXZlbnQiLCJfYWRkVG9vbGJhciIsImhvc3QiLCJzaW5nbGVUaXNzdWVFcXRsIiwibGQiLCJkeW5lcXRsIiwic25wIiwidmFyaWFudElkIiwiZXhvbkV4cCIsInRyYW5zY3JpcHRFeHAiLCJqdW5jdGlvbkV4cCIsInRyYW5zY3JpcHQiLCJleG9uIiwiZ2VuZU1vZGVsIiwiZ2VuZU1vZGVsVW5maWx0ZXJlZCIsImdlbmVFeHAiLCJtZWRHZW5lRXhwIiwiZ2VuZUV4cEJveHBsb3QiLCJ0b3BJblRpc3N1ZUZpbHRlcmVkIiwidG9wSW5UaXNzdWUiLCJnZW5lSWQiLCJ0aXNzdWUiLCJzYW1wbGUiLCJybmFzZXFDcmFtIiwid2dzQ3JhbSIsImZjQmlsbGluZyIsImZjV29ya1NwYWNlIiwiZmNQb3J0YWxXb3JrU3BhY2UiLCJnZXRHdGV4VXJscyIsInByb21pc2VzIiwiUHJvbWlzZSIsImFsbCIsImFyZ3MiLCJwYXJzZVRpc3N1ZXMiLCJybmFzZXEiLCJ0b1VwcGVyQ2FzZSIsIndncyIsInNhbXBsZUlkIiwid2dzSGFzaCIsInN1YmplY3RJZCIsIl9jaGVja1JuYVNlcVdpdGhHZW5vdHlwZSIsInRoZU1hdHJpeCIsIl9fZmlsdGVyIiwic2V4IiwidmFsIiwiYWdlcyIsImlzIiwicHJvcCIsImZpbHRlcmVkTWF0IiwiYWdlQnJhY2tldCIsImNoYW5nZSIsIl9hZGRGaWx0ZXJzIiwiY2F0Y2giLCJlcnIiXSwibWFwcGluZ3MiOiIyQ0FBQSxJQUFJQSxLQUNBQyxLQUNBQyxFQUFRLEdBQ1JDLEVBQVUsR0FDVkMsRUFBUyxHQUViLFNBQVNDLEVBQWdCQyxHQUN2QixPQUFPLElBQUlDLFNBQVMsSUFBSyxXQUFhRCxFQUFRRSxJQUFJLFNBQVNDLEVBQU1DLEdBQy9ELE9BQU9DLEtBQUtDLFVBQVVILEdBQVEsT0FBU0MsRUFBSSxNQUMxQ0csS0FBSyxLQUFPLEtBMEJqQixNQUFlLFNBQVNDLEdBQ3RCLElBQUlDLEVBQVcsSUFBSUMsT0FBTyxLQUFRRixFQUFZLFNBQzFDRyxFQUFZSCxFQUFVSSxXQUFXLEdBV3JDLFNBQVNDLEVBQVVDLEVBQU1DLEdBQ3ZCLElBSUlDLEVBSkFDLEtBQ0FDLEVBQUlKLEVBQUtLLE9BQ1RDLEVBQUksRUFDSkMsRUFBSSxFQUVKQyxFQUFNSixHQUFLLEVBQ1hLLEdB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
