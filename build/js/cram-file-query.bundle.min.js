var CramFileQuery=function(t){"use strict";var e={},n={},r=34,o=10,i=13;function a(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}var s=function(t){var s=new RegExp('["'+t+"\n\r]"),c=t.charCodeAt(0);function l(t,a){var s,l=[],u=t.length,d=0,p=0,f=u<=0,h=!1;function m(){if(f)return n;if(h)return h=!1,e;var a,s,l=d;if(t.charCodeAt(l)===r){for(;d++<u&&t.charCodeAt(d)!==r||t.charCodeAt(++d)===r;);return(a=d)>=u?f=!0:(s=t.charCodeAt(d++))===o?h=!0:s===i&&(h=!0,t.charCodeAt(d)===o&&++d),t.slice(l+1,a-1).replace(/""/g,'"')}for(;d<u;){if((s=t.charCodeAt(a=d++))===o)h=!0;else if(s===i)h=!0,t.charCodeAt(d)===o&&++d;else if(s!==c)continue;return t.slice(l,a)}return f=!0,t.slice(l,u)}for(t.charCodeAt(u-1)===o&&--u,t.charCodeAt(u-1)===i&&--u;(s=m())!==n;){for(var g=[];s!==e&&s!==n;)g.push(s),s=m();a&&null==(g=a(g,p++))||l.push(g)}return l}function u(e){return e.map(d).join(t)}function d(t){return null==t?"":s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,o=l(t,function(t,o){if(n)return n(t,o-1);r=t,n=e?function(t,e){var n=a(t);return function(r,o){return e(n(r),o,t)}}(t,e):a(t)});return o.columns=r||[],o},parseRows:l,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(d).join(t)].concat(e.map(function(e){return n.map(function(t){return d(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(u).join("\n")}}},c=s(",").parse,l=s("\t").parse;function u(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var d=function(t,e){return fetch(t,e).then(u)};function p(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),d(e,n).then(function(e){return t(e,r)})}}p(c);var f=p(l);function h(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var m=function(t,e){return fetch(t,e).then(h)},g="http://www.w3.org/1999/xhtml",y={svg:"http://www.w3.org/2000/svg",xhtml:g,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},v=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),y.hasOwnProperty(e)?{space:y[e],local:t}:t};var _=function(t){var e=v(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===g&&e.documentElement.namespaceURI===g?e.createElement(t):e.createElementNS(n,t)}})(e)};function w(){}var x=function(t){return null==t?w:function(){return this.querySelector(t)}};function b(){return[]}var S=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var A=document.documentElement;if(!A.matches){var I=A.webkitMatchesSelector||A.msMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector;S=function(t){return function(){return I.call(this,t)}}}}var E=S,k=function(t){return new Array(t.length)};function T(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}T.prototype={constructor:T,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var C="$";function j(t,e,n,r,o,i){for(var a,s=0,c=e.length,l=i.length;s<l;++s)(a=e[s])?(a.__data__=i[s],r[s]=a):n[s]=new T(t,i[s]);for(;s<c;++s)(a=e[s])&&(o[s]=a)}function P(t,e,n,r,o,i,a){var s,c,l,u={},d=e.length,p=i.length,f=new Array(d);for(s=0;s<d;++s)(c=e[s])&&(f[s]=l=C+a.call(c,c.__data__,s,e),l in u?o[s]=c:u[l]=c);for(s=0;s<p;++s)(c=u[l=C+a.call(t,i[s],s,i)])?(r[s]=c,c.__data__=i[s],u[l]=null):n[s]=new T(t,i[s]);for(s=0;s<d;++s)(c=e[s])&&u[f[s]]===c&&(o[s]=c)}function q(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var R=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function O(t){return t.trim().split(/^|\s+/)}function B(t){return t.classList||new N(t)}function N(t){this._node=t,this._names=O(t.getAttribute("class")||"")}function D(t,e){for(var n=B(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function G(t,e){for(var n=B(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}N.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function F(){this.textContent=""}function W(){this.innerHTML=""}function M(){this.nextSibling&&this.parentNode.appendChild(this)}function U(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function z(){return null}function H(){var t=this.parentNode;t&&t.removeChild(this)}function L(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Y(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var V={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(V={mouseenter:"mouseover",mouseleave:"mouseout"}));function X(t,e,n){return t=J(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function J(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function Q(t){return function(){var e=this.__on;if(e){for(var n,r=0,o=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function K(t,e,n){var r=V.hasOwnProperty(t.type)?X:J;return function(o,i,a){var s,c=this.__on,l=r(e,i,a);if(c)for(var u=0,d=c.length;u<d;++u)if((s=c[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},c?c.push(s):this.__on=[s]}}function Z(t,e,n){var r=R(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}var tt=[null];function et(t,e){this._groups=t,this._parents=e}et.prototype=function(){return new et([[document.documentElement]],tt)}.prototype={constructor:et,select:function(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=e[o],c=s.length,l=r[o]=new Array(c),u=0;u<c;++u)(i=s[u])&&(a=t.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),l[u]=a);return new et(r,this._parents)},selectAll:function(t){var e;"function"!=typeof t&&(t=null==(e=t)?b:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,o=[],i=[],a=0;a<r;++a)for(var s,c=n[a],l=c.length,u=0;u<l;++u)(s=c[u])&&(o.push(t.call(s,s.__data__,u,c)),i.push(s));return new et(o,i)},filter:function(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],s=a.length,c=r[o]=[],l=0;l<s;++l)(i=a[l])&&t.call(i,i.__data__,l,a)&&c.push(i);return new et(r,this._parents)},data:function(t,e){if(!t)return h=new Array(this.size()),u=-1,this.each(function(t){h[++u]=t}),h;var n,r=e?P:j,o=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=i.length,s=new Array(a),c=new Array(a),l=new Array(a),u=0;u<a;++u){var d=o[u],p=i[u],f=p.length,h=t.call(d,d&&d.__data__,u,o),m=h.length,g=c[u]=new Array(m),y=s[u]=new Array(m);r(d,p,g,y,l[u]=new Array(f),h,e);for(var v,_,w=0,x=0;w<m;++w)if(v=g[w]){for(w>=x&&(x=w+1);!(_=y[x])&&++x<m;);v._next=_||null}}return(s=new et(s,o))._enter=c,s._exit=l,s},enter:function(){return new et(this._enter||this._groups.map(k),this._parents)},exit:function(){return new et(this._exit||this._groups.map(k),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var c,l=e[s],u=n[s],d=l.length,p=a[s]=new Array(d),f=0;f<d;++f)(c=l[f]||u[f])&&(p[f]=c);for(;s<r;++s)a[s]=e[s];return new et(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=q);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],c=s.length,l=o[i]=new Array(c),u=0;u<c;++u)(a=s[u])&&(l[u]=a);l.sort(e)}return new et(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,i=e[n],a=0,s=i.length;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,e){var n=v(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||R(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=O(t+"");if(arguments.length<2){for(var r=B(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?D:G)(this,t)}}:e?function(t){return function(){D(this,t)}}:function(t){return function(){G(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?F:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?W:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(M)},lower:function(){return this.each(U)},append:function(t){var e="function"==typeof t?t:_(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:_(t),r=null==e?z:"function"==typeof e?e:x(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(H)},clone:function(t){return this.select(t?Y:L)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,o,i=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=i.length;if(!(arguments.length<2)){for(s=e?K:Q,null==n&&(n=!1),r=0;r<a;++r)this.each(s(i[r],e,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<a;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Z(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Z(this,t,e)}})(t,e))}};var nt=function(t){return"string"==typeof t?new et([[document.querySelector(t)]],[document.documentElement]):new et([[t]],tt)};class rt{constructor(t,e,n=!1){$(`#${t}`).show();const r=n?"btn-group-vertical btn-group-sm":"btn-group btn-group-sm";this.bar=$("<div/>").addClass(r).appendTo(`#${t}`),this.buttons={},this.tooltip=e}createDownloadSvgButton(t,e,n,r,o="fa-download"){this.createButton(t,o);nt(`#${t}`).on("click",()=>{this.downloadSvg(e,n,r)}).on("mouseover",()=>{this.tooltip.show("Download")}).on("mouseout",()=>{this.tooltip.hide()})}createResetButton(t,e,n="fa-expand-arrows-alt"){this.createButton(t,n);nt(`#${t}`).on("click",e).on("mouseover",()=>{this.tooltip.show("Reset the scales")}).on("mouseout",()=>{this.tooltip.hide()})}createButton(t,e="fa-download"){const n=$("<a/>").attr("id",t).addClass("btn btn-default").appendTo(this.bar);return $("<i/>").addClass(`fa ${e}`).appendTo(n),this.buttons[t]=n,n}attachTooltip(t){this.tooltip=t}downloadSvg(t,e,n){let r=$($($(`${"#"+t}`))[0]),o=r.clone().attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg"),i=function(t){for(var e="",n=document.styleSheets,r=0;r<n.length;r++)try{if(null==n[r].cssRules)continue;for(var o=n[r].cssRules,i=0;i<o.length;i++){var a=o[i];if(void 0!==a.style){var s,c=void 0===a.selectorText?a.selectorText:a.selectorText.replace(`#${t[0].id} `,"");try{s=$(t).find(c)}catch(t){s=[]}s.length>0&&(e+=a.selectorText+" { "+a.style.cssText+" }\n")}}}catch(t){if("SecurityError"!==t.name)throw t;continue}var l=document.createElement("style");return l.setAttribute("type","text/css"),l.innerHTML="<![CDATA[\n"+e+"\n]]>",l}(r.get());o.prepend(i),$("#"+n).html("").hide();let a=$(`#${n}`).append(o).html(),s=new Blob([a],{type:"image/svg+xml"});saveAs(s,e),$(`#${n}`).html("").hide()}}function ot(){return{checkSignedIn:lt,getUser:ut,signInButton:it,signOut:st,grantScopes:dt}}function it(){gapi.signin2.render("my-signin2",{scope:"profile email",width:130,height:30,longtitle:!1,theme:"dark",onsuccess:at,onfailure:ct})}function at(t){$("#g-signout").show()}function st(){gapi.auth2.getAuthInstance().signOut().then(function(){console.log("User signed out")}),$("#g-signout").hide()}function ct(t){console.error(t)}function lt(){return!!gapi.auth2&&ut().isSignedIn()}function ut(){return gapi.auth2.getAuthInstance().currentUser.get()}function dt(t){this.getUser().grant({scope:t}).then(function(t){console.log(JSON.stringify({message:"success",value:t}))},function(t){console.error(JSON>stringify({message:"fail",value:t}))})}function pt(t,e,n){const r=function(t){const n="tissueSiteDetailId";return e.filter(e=>{if(!e.hasOwnProperty("dataType"))throw console.error(e),"Parse Error: required attribute is missing: _type or dataType";return"RNA-Seq-WGS"==t?e._type==t:e.dataType==t}).reduce((t,e)=>{if(!e.hasOwnProperty(n))throw console.error(e),"Parse Error: required attribute is missing:"+n;return void 0===t[e[n]]&&(t[e[n]]=[]),t[e[n]].push(e),t},{})},o=[{label:"RNA-Seq",id:"RNA-Seq",data:r("RNA-Seq")},{label:"RNA-Seq With WGS",id:"RNA-Seq-WGS",data:r("RNA-Seq-WGS")},{label:"WES",id:"WES",data:r("WES")},{label:"WGS",id:"WGS",data:r("WGS")}];return{datasetId:t,X:n.map(t=>(["tissueSiteDetailId","tissueSiteDetail"].forEach(e=>{if(!t.hasOwnProperty(e))throw console.error(t),"Tissue parsing error: required attribute is missing: "+e}),t.id=t.tissueSiteDetailId,t.label=t.tissueSiteDetail,o.forEach(e=>{t[e.id]=e.data[t.id]||void 0}),t)),Y:o,data:e}}function ft(t,e,n,r){const o={gtex_v7:{label:"GTEX V7",bgcolor:"#2a718b"}},i=nt(`#${t}`);i.select("thead").selectAll("th").data([{label:"",id:""}].concat(e.Y)).enter().append("th").attr("scope","col").attr("class",(t,e)=>""==t.id?"":`y${e-1}`).text(t=>t.label),i.select(".table-label").selectAll("*").remove(),i.select(".table-label").append("th").attr("colspan",e.Y.length+1).text(o[e.datasetId].label).style("background-color",o[e.datasetId].bgcolor),function(t,e){t.selectAll(".data-row").remove();const n=t.selectAll(".data-row").data(e.X).enter().append("tr").classed("data-row",!0);n.append("th").attr("scope","row").attr("class",(t,e)=>`x${e}`).text(t=>t.label),e.Y.forEach((t,e)=>{n.append("td").attr("class",(n,r)=>void 0===n[t.id]?"":`x${r} y${e}`).text(e=>{let n=e[t.id]?e[t.id].length:"";return n})})}(i.select("tbody"),e),function(t){const e=nt(`#${t}`).select("tbody").selectAll("td");nt(`#${t}`).select("thead").selectAll("th").style("cursor","pointer").on("click",function(){const t=nt(this).attr("class");"col"==nt(this).attr("scope")?(nt(this).attr("scope","selected"),e.filter(`.${t}`).classed("selected",!0)):(nt(this).attr("scope","col"),e.filter(`.${t}`).classed("selected",!1))}),nt(`#${t}`).select("tbody").selectAll("th").style("cursor","pointer").on("click",function(){const t=nt(this).attr("class");"row"==nt(this).attr("scope")?(nt(this).attr("scope","selected"),e.filter(`.${t}`).classed("selected",!0)):(nt(this).attr("scope","row"),e.filter(`.${t}`).classed("selected",!1))}),e.style("cursor","pointer").on("click",function(){nt(this).classed("selected",!nt(this).classed("selected"))})}(t),function(t,e,n,r){const o=nt(`#${t}`).select("tbody").selectAll("td");nt("#matrix-table-toolbar").selectAll("*").remove();const i=new rt("matrix-table-toolbar",void 0,!0);i.createButton("sample-download"),i.createButton("send-to-firecloud","fa-cloud-upload-alt"),nt("#sample-download").style("cursor","pointer").on("click",function(){let t=o.filter(".selected");if(t.empty())alert("You have not selected any samples to download.");else{let n=["Sample ID","Tissue Name","Data Type","CRAM File GCP","CRAM File AWS","CRAM File MD5","CRAM File Size","CRAM Index GCP","CRAM Index AWS"].join("\t")+"\n";t.each(function(t){const r=nt(this).attr("class").split(" ").filter(t=>"selected"!=t),o=e.X[parseInt(r[0].replace("x",""))],i=e.Y[parseInt(r[1].replace("y",""))],a=i.data[o.id].map(t=>{let e=["cram_file","cram_file_aws","cram_file_md5","cram_file_size","cram_index","cram_index_aws"].map(e=>t.cramFile[e]);["cramFile","tissueSiteDetail","dataType"].forEach(e=>{if(!t.hasOwnProperty(e))throw"Parse Error: required attribute is missing: "+e});let n=[t.cramFile.sample_id,t.tissueSiteDetail,t.dataType].concat(e);return n.join("\t")});n+=a.join("\n")});let r=new Blob([n],{type:"text/plain;charset=utf-8"});saveAs(r,"GTEx.cram.txt",!0)}}),nt("#send-to-firecloud").style("cursor","pointer").on("click",function(){$("#fire-cloud-status").empty(),n.checkSignedIn()||alert("You need to sign in first");n.grantScopes("profile email https://www.googleapis.com/auth/devstorage.full_control https://www.googleapis.com/auth/plus.me"),function(t,e="billing-project-list"){let n=t.getAuthResponse(!0).access_token;$.ajax({url:"https://api.firecloud.org/api/profile/billing",type:"GET",xhrFields:{withCredentials:!1},beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+n)},contentType:"application/json; charset=utf-8",success:function(t){$(`#${e}`).empty(),t.forEach(t=>{$("<label>"+`<input type="radio" name="billing-project" value="${t.projectName}"> `+t.projectName+"</label><br/>").appendTo($(`#${e}`))})}})}(n.getUser());let t=o.filter(".selected");t.empty()?alert("You have not selected any samples to submit."):nt("#fire-cloud-form").style("display","block")});const a=function(){const t=$('input[name="workspace"]').val();let i=1;!function(t,e){let n=t.getAuthResponse(!0).access_token;$.ajax({url:"https://api.firecloud.org/api/workspaces",type:"GET",xhrFields:{withCredentials:!1},beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+n)},success:function(t){const n=t.filter(t=>!t.public);e(n)},error:function(t){console.error(t)}})}(n.getUser(),function(a){if(a.forEach(e=>{e.workspace.name==t&&(console.error("Input Error: Workspace already exists. "+t),$("#fire-cloud-status").html("Workspace "+t+" already exists. <br/> Please name a new one."),i=0)}),1==i){$("#fire-cloud-status").empty();let t=o.filter(".selected"),i=[];t.each(function(t){const n=nt(this).attr("class").split(" ").filter(t=>"selected"!=t),r=e.X[parseInt(n[0].replace("x",""))],o=e.Y[parseInt(n[1].replace("y",""))],a=o.data[r.id].map(t=>{let e=t.sampleId.split("-");return t.donorId=e[0]+"-"+e[1],t});i=i.concat(a)}),function(t,e,n){const r=t.getUser().getAuthResponse(!0).access_token,o=$('input[name="billing-project"]').val(),i=$('input[name="workspace"]').val();if(void 0===o)throw alert("You must provide a billin project"),"billing project is not provided";if(void 0===i||""==i)throw alert("You must provide a new workspace name"),"workspace name is not provided";$("#spinner").show(),$.ajax({url:n.fcWorkSpace,type:"POST",xhrFields:{withCredentials:!1},beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+r)},contentType:"application/json; charset=utf-8",data:JSON.stringify({namespace:o,name:i,attributes:{},authorizationDomain:[]}),success:function(t){console.log("finished creating workspace...");const a=e.map(t=>{if(!t.hasOwnProperty("donorId"))throw"Sample does not contain attr donorId.";return t.donorId}).filter((t,e,n)=>n.indexOf(t)===e),s=`entities=entity:participant_id\n${a.join("\n")}\n`,c=encodeURI(s);$.ajax({url:`${n.fcWorkSpace}/${o}/${i}/importEntities`,type:"POST",xhrFields:{withCredentials:!1},beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+r)},contentType:"application/x-www-form-urlencoded",dataType:"text",data:c,success:function(t){$("#spinner").hide(),console.log("finished importing participant IDs...");let a=[["entity:sample_id","participant_id","sample_type","bam_file","bam_index"].join("\t")];const s=`entities=${(a=a.concat(e.map(t=>{if(void 0===t.cramFile)throw"Data Error: "+t;if(!t.cramFile.hasOwnProperty("cram_file"))throw"Data Error: "+t;return[t.cramFile.sample_id,t.donorId,t.dataType,t.cramFile.cram_file,t.cramFile.cram_index].join("\t")}))).join("\n")}\n`,c=encodeURI(s);$.ajax({url:`${n.fcWorkSpace}/${o}/${i}/importEntities`,type:"POST",xhrFields:{withCredentials:!1},beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+r)},contentType:"application/x-www-form-urlencoded",dataType:"text",data:c,success:function(t){console.log("finished importing samples...");const e=`${n.fcPortalWorkSpace}/${o}/${i}/data`;window.open(e,"_blank"),$("#fire-cloud-status").html(`Submitted! <br/> Go to your <br/> <a target="_blank" href="${e}">FireCloud workspace</a>`)},error:function(t){console.error(t)}})},error:function(t){console.error(t)}})},error:function(t){console.error(t)}})}(n,i,r),nt("#fire-cloud-form").style("display","none")}})};$('input[name="workspace"]').keypress(function(t){if(13==t.keyCode)return a(),!1}),nt("#submit-to-firecloud-btn").on("click",a),nt("#cancel-firecloud-btn").on("click",function(){nt("#fire-cloud-form").style("display","none"),alert("Submission Canceled!"),$("#fire-cloud-status").empty()})}(t,e,n,r)}return t.renderSignInButton=function(t=ot().signInButton){t()},t.signOut=function(t=ot().signOut){t()},t.launch=function(t,e="gtex_v7",n=ot(),r=function(){const t="https://gtexportal.org/rest/v1/";return{singleTissueEqtl:t+"association/singleTissueEqtl?format=json&datasetId=gtex_v7&gencodeId=",ld:t+"dataset/ld?format=json&datasetId=gtex_v7&gencodeId=",dyneqtl:t+"association/dyneqtl",snp:t+"reference/variant?format=json&snpId=",variantId:t+"dataset/variant?format=json&variantId=",exonExp:t+"expression/medianExonExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",transcriptExp:t+"expression/medianTranscriptExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",junctionExp:t+"expression/medianJunctionExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",transcript:t+"reference/transcript?datasetId=gtex_v7&gencodeId=",exon:t+"reference/exon?datasetId=gtex_v7&gencodeId=",geneModel:t+"dataset/collapsedGeneModelExon?datasetId=gtex_v7&gencodeId=",geneModelUnfiltered:t+"dataset/fullCollapsedGeneModelExon?datasetId=gtex_v7&gencodeId=",geneExp:t+"expression/geneExpression?datasetId=gtex_v7&gencodeId=",medGeneExp:t+"expression/medianGeneExpression?datasetId=gtex_v7&hcluster=true&pageSize=10000",geneExpBoxplot:t+"expression/geneExpression?datasetId=gtex_v7&boxplotDetail=full&gencodeId=",topInTissueFiltered:t+"expression/topExpressedGene?datasetId=gtex_v7&filterMtGene=true&sortBy=median&sortDirection=desc&pageSize=50&tissueSiteDetailId=",topInTissue:t+"expression/topExpressedGene?datasetId=gtex_v7&sortBy=median&sortDirection=desc&pageSize=50&tissueSiteDetailId=",geneId:t+"reference/gene?format=json&gencodeVersion=v19&genomeBuild=GRCh37%2Fhg19&geneId=",tissue:t+"dataset/tissueInfo?format=json&datasetId=gtex_v7",sample:"/tmpSummaryData/gtex.Sample.csv",rnaseqCram:"/tmpSummaryData/rnaseq_cram_files_v7_dbGaP_011516.txt",wgsCram:"/tmpSummaryData/wgs_cram_files_v7_hg38_dbGaP_011516.txt",fcBilling:"https://api.firecloud.org/api/profile/billing",fcWorkSpace:"https://api.firecloud.org/api/workspaces",fcPortalWorkSpace:"https://portal.firecloud.org/#workspaces"}}()){const o=[m(r.tissue),f(r.rnaseqCram),f(r.wgsCram),f(r.sample)];Promise.all(o).then(function(o){let i=function(t){const e="tissueInfo";if(!t.hasOwnProperty(e))throw"Parsing Error: required json attr is missing: "+e;const n=t[e];return["tissueSiteDetailId","tissueSiteDetail","colorHex"].forEach(t=>{if(!n[0].hasOwnProperty(t))throw"Parsing Error: required json attr is missing: "+t}),n}(o[0]);const a={rnaseq:o[1].reduce((t,e)=>(t[e.sample_id.toUpperCase()]=e,t),{}),wgs:o[2].reduce((t,e)=>(t[e.sample_id.toUpperCase()]=e,t),{})};let s=o[3].filter(t=>t.datasetId==e).map(t=>{switch(t.dataType){case"WGS":if(!a.wgs.hasOwnProperty(t.sampleId))throw t.sampleId+" has no cram files";t.cramFile=a.wgs[t.sampleId];break;case"RNASEQ":if(!a.rnaseq.hasOwnProperty(t.sampleId))throw t.sampleId+" has no cram files";t.cramFile=a.rnaseq[t.sampleId],t.dataType="RNA-Seq"}return t});s=function(t){const e=t.filter(t=>{if(!t.hasOwnProperty("dataType"))throw console.error(t),"Parse Error: required attribute is missing: dataType";return"WGS"==t.dataType}).reduce((t,e)=>{if(!e.hasOwnProperty("subjectId"))throw"Parse Error: required attribute is missing.";return t[e.subjectId]=1,t},{});return t.map(t=>{if(!t.hasOwnProperty("dataType")||!t.hasOwnProperty("subjectId"))throw"Parse Error: required attribute is missing.";return"RNA-Seq"==t.dataType&&e.hasOwnProperty(t.subjectId)&&(t._type="RNA-Seq-WGS"),t})}(s);const c=pt(e,s,i);ft(t,c,n,r),function(t,e,n,r,o,i){const a=()=>{let a=$('input[name="sex"]:checked').val(),s=[];if($(".ageBox").each(function(){$(this).is(":checked")&&s.push($(this).val()),s.length<6&&$('input[name="allAges"]').prop("checked",!1),6==s.length&&$('input[name="allAges"][value="all"]').prop("checked",!0)}),"both"==a&&6==s.length)ft(t,pt(e.datasetId,n,r),o,i);else{let c=void 0;c="both"==a?pt(e.datasetId,n.filter(t=>s.indexOf(t.ageBracket)>=0),r):6==s.length?pt(e.datasetId,n.filter(t=>t.sex==a),r):pt(e.datasetId,n.filter(t=>t.sex==a&&s.indexOf(t.ageBracket)>=0),r),ft(t,c,o,i)}};$('input[name="sex"]').change(a),$(".ageBox").each(function(){$(this).change(a)}),$('input[name="allAges"]').change(function(){let t=$(this).val();switch(t){case"all":$(".ageBox").prop("checked",!0),a();break;case"reset":$(".ageBox").prop("checked",!1)}})}(t,c,s,i,n,r)}).catch(function(t){console.error(t)})},t}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JhbS1maWxlLXF1ZXJ5LmJ1bmRsZS5taW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL2Rzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL2Nzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL3Rzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mZXRjaC9zcmMvdGV4dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mZXRjaC9zcmMvZHN2LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZldGNoL3NyYy9qc29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdG9yQWxsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbWF0Y2hlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zcGFyc2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW50ZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9jb25zdGFudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9kYXRhLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NvcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vYXR0ci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3dpbmRvdy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9jbGFzc2VkLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3RleHQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaHRtbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9yYWlzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9sb3dlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9pbnNlcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmVtb3ZlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Nsb25lLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3RBbGwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2V4aXQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vbWVyZ2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vb3JkZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2FsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2Rlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2RlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NpemUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW1wdHkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZWFjaC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zdHlsZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9wcm9wZXJ0eS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hcHBlbmQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZGF0dW0uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3QuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9Ub29sYmFyLmpzIiwiLi4vLi4vc3JjL21vZHVsZXMvdXRpbHMuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9nb29nbGVVc2VyLmpzIiwiLi4vLi4vc3JjL0NyYW1GaWxlUXVlcnkuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9ndGV4RGF0YVBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRU9MID0ge30sXG4gICAgRU9GID0ge30sXG4gICAgUVVPVEUgPSAzNCxcbiAgICBORVdMSU5FID0gMTAsXG4gICAgUkVUVVJOID0gMTM7XG5cbmZ1bmN0aW9uIG9iamVjdENvbnZlcnRlcihjb2x1bW5zKSB7XG4gIHJldHVybiBuZXcgRnVuY3Rpb24oXCJkXCIsIFwicmV0dXJuIHtcIiArIGNvbHVtbnMubWFwKGZ1bmN0aW9uKG5hbWUsIGkpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobmFtZSkgKyBcIjogZFtcIiArIGkgKyBcIl1cIjtcbiAgfSkuam9pbihcIixcIikgKyBcIn1cIik7XG59XG5cbmZ1bmN0aW9uIGN1c3RvbUNvbnZlcnRlcihjb2x1bW5zLCBmKSB7XG4gIHZhciBvYmplY3QgPSBvYmplY3RDb252ZXJ0ZXIoY29sdW1ucyk7XG4gIHJldHVybiBmdW5jdGlvbihyb3csIGkpIHtcbiAgICByZXR1cm4gZihvYmplY3Qocm93KSwgaSwgY29sdW1ucyk7XG4gIH07XG59XG5cbi8vIENvbXB1dGUgdW5pcXVlIGNvbHVtbnMgaW4gb3JkZXIgb2YgZGlzY292ZXJ5LlxuZnVuY3Rpb24gaW5mZXJDb2x1bW5zKHJvd3MpIHtcbiAgdmFyIGNvbHVtblNldCA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBjb2x1bW5zID0gW107XG5cbiAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuICAgIGZvciAodmFyIGNvbHVtbiBpbiByb3cpIHtcbiAgICAgIGlmICghKGNvbHVtbiBpbiBjb2x1bW5TZXQpKSB7XG4gICAgICAgIGNvbHVtbnMucHVzaChjb2x1bW5TZXRbY29sdW1uXSA9IGNvbHVtbik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gY29sdW1ucztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZGVsaW1pdGVyKSB7XG4gIHZhciByZUZvcm1hdCA9IG5ldyBSZWdFeHAoXCJbXFxcIlwiICsgZGVsaW1pdGVyICsgXCJcXG5cXHJdXCIpLFxuICAgICAgREVMSU1JVEVSID0gZGVsaW1pdGVyLmNoYXJDb2RlQXQoMCk7XG5cbiAgZnVuY3Rpb24gcGFyc2UodGV4dCwgZikge1xuICAgIHZhciBjb252ZXJ0LCBjb2x1bW5zLCByb3dzID0gcGFyc2VSb3dzKHRleHQsIGZ1bmN0aW9uKHJvdywgaSkge1xuICAgICAgaWYgKGNvbnZlcnQpIHJldHVybiBjb252ZXJ0KHJvdywgaSAtIDEpO1xuICAgICAgY29sdW1ucyA9IHJvdywgY29udmVydCA9IGYgPyBjdXN0b21Db252ZXJ0ZXIocm93LCBmKSA6IG9iamVjdENvbnZlcnRlcihyb3cpO1xuICAgIH0pO1xuICAgIHJvd3MuY29sdW1ucyA9IGNvbHVtbnMgfHwgW107XG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVJvd3ModGV4dCwgZikge1xuICAgIHZhciByb3dzID0gW10sIC8vIG91dHB1dCByb3dzXG4gICAgICAgIE4gPSB0ZXh0Lmxlbmd0aCxcbiAgICAgICAgSSA9IDAsIC8vIGN1cnJlbnQgY2hhcmFjdGVyIGluZGV4XG4gICAgICAgIG4gPSAwLCAvLyBjdXJyZW50IGxpbmUgbnVtYmVyXG4gICAgICAgIHQsIC8vIGN1cnJlbnQgdG9rZW5cbiAgICAgICAgZW9mID0gTiA8PSAwLCAvLyBjdXJyZW50IHRva2VuIGZvbGxvd2VkIGJ5IEVPRj9cbiAgICAgICAgZW9sID0gZmFsc2U7IC8vIGN1cnJlbnQgdG9rZW4gZm9sbG93ZWQgYnkgRU9MP1xuXG4gICAgLy8gU3RyaXAgdGhlIHRyYWlsaW5nIG5ld2xpbmUuXG4gICAgaWYgKHRleHQuY2hhckNvZGVBdChOIC0gMSkgPT09IE5FV0xJTkUpIC0tTjtcbiAgICBpZiAodGV4dC5jaGFyQ29kZUF0KE4gLSAxKSA9PT0gUkVUVVJOKSAtLU47XG5cbiAgICBmdW5jdGlvbiB0b2tlbigpIHtcbiAgICAgIGlmIChlb2YpIHJldHVybiBFT0Y7XG4gICAgICBpZiAoZW9sKSByZXR1cm4gZW9sID0gZmFsc2UsIEVPTDtcblxuICAgICAgLy8gVW5lc2NhcGUgcXVvdGVzLlxuICAgICAgdmFyIGksIGogPSBJLCBjO1xuICAgICAgaWYgKHRleHQuY2hhckNvZGVBdChqKSA9PT0gUVVPVEUpIHtcbiAgICAgICAgd2hpbGUgKEkrKyA8IE4gJiYgdGV4dC5jaGFyQ29kZUF0KEkpICE9PSBRVU9URSB8fCB0ZXh0LmNoYXJDb2RlQXQoKytJKSA9PT0gUVVPVEUpO1xuICAgICAgICBpZiAoKGkgPSBJKSA+PSBOKSBlb2YgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgoYyA9IHRleHQuY2hhckNvZGVBdChJKyspKSA9PT0gTkVXTElORSkgZW9sID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gUkVUVVJOKSB7IGVvbCA9IHRydWU7IGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpICsrSTsgfVxuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqICsgMSwgaSAtIDEpLnJlcGxhY2UoL1wiXCIvZywgXCJcXFwiXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIG5leHQgZGVsaW1pdGVyIG9yIG5ld2xpbmUuXG4gICAgICB3aGlsZSAoSSA8IE4pIHtcbiAgICAgICAgaWYgKChjID0gdGV4dC5jaGFyQ29kZUF0KGkgPSBJKyspKSA9PT0gTkVXTElORSkgZW9sID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gUkVUVVJOKSB7IGVvbCA9IHRydWU7IGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpICsrSTsgfVxuICAgICAgICBlbHNlIGlmIChjICE9PSBERUxJTUlURVIpIGNvbnRpbnVlO1xuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqLCBpKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIGxhc3QgdG9rZW4gYmVmb3JlIEVPRi5cbiAgICAgIHJldHVybiBlb2YgPSB0cnVlLCB0ZXh0LnNsaWNlKGosIE4pO1xuICAgIH1cblxuICAgIHdoaWxlICgodCA9IHRva2VuKCkpICE9PSBFT0YpIHtcbiAgICAgIHZhciByb3cgPSBbXTtcbiAgICAgIHdoaWxlICh0ICE9PSBFT0wgJiYgdCAhPT0gRU9GKSByb3cucHVzaCh0KSwgdCA9IHRva2VuKCk7XG4gICAgICBpZiAoZiAmJiAocm93ID0gZihyb3csIG4rKykpID09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgcm93cy5wdXNoKHJvdyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXQocm93cywgY29sdW1ucykge1xuICAgIGlmIChjb2x1bW5zID09IG51bGwpIGNvbHVtbnMgPSBpbmZlckNvbHVtbnMocm93cyk7XG4gICAgcmV0dXJuIFtjb2x1bW5zLm1hcChmb3JtYXRWYWx1ZSkuam9pbihkZWxpbWl0ZXIpXS5jb25jYXQocm93cy5tYXAoZnVuY3Rpb24ocm93KSB7XG4gICAgICByZXR1cm4gY29sdW1ucy5tYXAoZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRWYWx1ZShyb3dbY29sdW1uXSk7XG4gICAgICB9KS5qb2luKGRlbGltaXRlcik7XG4gICAgfSkpLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRSb3dzKHJvd3MpIHtcbiAgICByZXR1cm4gcm93cy5tYXAoZm9ybWF0Um93KS5qb2luKFwiXFxuXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9ybWF0Um93KHJvdykge1xuICAgIHJldHVybiByb3cubWFwKGZvcm1hdFZhbHVlKS5qb2luKGRlbGltaXRlcik7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQgPT0gbnVsbCA/IFwiXCJcbiAgICAgICAgOiByZUZvcm1hdC50ZXN0KHRleHQgKz0gXCJcIikgPyBcIlxcXCJcIiArIHRleHQucmVwbGFjZSgvXCIvZywgXCJcXFwiXFxcIlwiKSArIFwiXFxcIlwiXG4gICAgICAgIDogdGV4dDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGFyc2U6IHBhcnNlLFxuICAgIHBhcnNlUm93czogcGFyc2VSb3dzLFxuICAgIGZvcm1hdDogZm9ybWF0LFxuICAgIGZvcm1hdFJvd3M6IGZvcm1hdFJvd3NcbiAgfTtcbn1cbiIsImltcG9ydCBkc3YgZnJvbSBcIi4vZHN2XCI7XG5cbnZhciBjc3YgPSBkc3YoXCIsXCIpO1xuXG5leHBvcnQgdmFyIGNzdlBhcnNlID0gY3N2LnBhcnNlO1xuZXhwb3J0IHZhciBjc3ZQYXJzZVJvd3MgPSBjc3YucGFyc2VSb3dzO1xuZXhwb3J0IHZhciBjc3ZGb3JtYXQgPSBjc3YuZm9ybWF0O1xuZXhwb3J0IHZhciBjc3ZGb3JtYXRSb3dzID0gY3N2LmZvcm1hdFJvd3M7XG4iLCJpbXBvcnQgZHN2IGZyb20gXCIuL2RzdlwiO1xuXG52YXIgdHN2ID0gZHN2KFwiXFx0XCIpO1xuXG5leHBvcnQgdmFyIHRzdlBhcnNlID0gdHN2LnBhcnNlO1xuZXhwb3J0IHZhciB0c3ZQYXJzZVJvd3MgPSB0c3YucGFyc2VSb3dzO1xuZXhwb3J0IHZhciB0c3ZGb3JtYXQgPSB0c3YuZm9ybWF0O1xuZXhwb3J0IHZhciB0c3ZGb3JtYXRSb3dzID0gdHN2LmZvcm1hdFJvd3M7XG4iLCJmdW5jdGlvbiByZXNwb25zZVRleHQocmVzcG9uc2UpIHtcbiAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBmZXRjaChpbnB1dCwgaW5pdCkudGhlbihyZXNwb25zZVRleHQpO1xufVxuIiwiaW1wb3J0IHtjc3ZQYXJzZSwgZHN2Rm9ybWF0LCB0c3ZQYXJzZX0gZnJvbSBcImQzLWRzdlwiO1xuaW1wb3J0IHRleHQgZnJvbSBcIi4vdGV4dFwiO1xuXG5mdW5jdGlvbiBkc3ZQYXJzZShwYXJzZSkge1xuICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIGluaXQsIHJvdykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBpbml0ID09PSBcImZ1bmN0aW9uXCIpIHJvdyA9IGluaXQsIGluaXQgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRleHQoaW5wdXQsIGluaXQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBwYXJzZShyZXNwb25zZSwgcm93KTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZHN2KGRlbGltaXRlciwgaW5wdXQsIGluaXQsIHJvdykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMyAmJiB0eXBlb2YgaW5pdCA9PT0gXCJmdW5jdGlvblwiKSByb3cgPSBpbml0LCBpbml0ID0gdW5kZWZpbmVkO1xuICB2YXIgZm9ybWF0ID0gZHN2Rm9ybWF0KGRlbGltaXRlcik7XG4gIHJldHVybiB0ZXh0KGlucHV0LCBpbml0KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGZvcm1hdC5wYXJzZShyZXNwb25zZSwgcm93KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB2YXIgY3N2ID0gZHN2UGFyc2UoY3N2UGFyc2UpO1xuZXhwb3J0IHZhciB0c3YgPSBkc3ZQYXJzZSh0c3ZQYXJzZSk7XG4iLCJmdW5jdGlvbiByZXNwb25zZUpzb24ocmVzcG9uc2UpIHtcbiAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBmZXRjaChpbnB1dCwgaW5pdCkudGhlbihyZXNwb25zZUpzb24pO1xufVxuIiwiZXhwb3J0IHZhciB4aHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogeGh0bWwsXG4gIHhsaW5rOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcbiAgeG1sOiBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG59O1xuIiwiaW1wb3J0IG5hbWVzcGFjZXMgZnJvbSBcIi4vbmFtZXNwYWNlc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBwcmVmaXggPSBuYW1lICs9IFwiXCIsIGkgPSBwcmVmaXguaW5kZXhPZihcIjpcIik7XG4gIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgcmV0dXJuIG5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogbmFtZXNwYWNlc1twcmVmaXhdLCBsb2NhbDogbmFtZX0gOiBuYW1lO1xufVxuIiwiaW1wb3J0IG5hbWVzcGFjZSBmcm9tIFwiLi9uYW1lc3BhY2VcIjtcbmltcG9ydCB7eGh0bWx9IGZyb20gXCIuL25hbWVzcGFjZXNcIjtcblxuZnVuY3Rpb24gY3JlYXRvckluaGVyaXQobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gdXJpID09PSB4aHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSB4aHRtbFxuICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSlcbiAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModXJpLCBuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRvckZpeGVkKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcbiAgcmV0dXJuIChmdWxsbmFtZS5sb2NhbFxuICAgICAgPyBjcmVhdG9yRml4ZWRcbiAgICAgIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIG5vbmUoKSB7fVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IG5vbmUgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsImZ1bmN0aW9uIGVtcHR5KCkge1xuICByZXR1cm4gW107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gZW1wdHkgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsInZhciBtYXRjaGVyID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9O1xufTtcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKCFlbGVtZW50Lm1hdGNoZXMpIHtcbiAgICB2YXIgdmVuZG9yTWF0Y2hlcyA9IGVsZW1lbnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yXG4gICAgICAgIHx8IGVsZW1lbnQubXNNYXRjaGVzU2VsZWN0b3JcbiAgICAgICAgfHwgZWxlbWVudC5tb3pNYXRjaGVzU2VsZWN0b3JcbiAgICAgICAgfHwgZWxlbWVudC5vTWF0Y2hlc1NlbGVjdG9yO1xuICAgIG1hdGNoZXIgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmVuZG9yTWF0Y2hlcy5jYWxsKHRoaXMsIHNlbGVjdG9yKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtYXRjaGVyO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odXBkYXRlKSB7XG4gIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7XG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZVwiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRW50ZXJOb2RlKHBhcmVudCwgZGF0dW0pIHtcbiAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG4gIHRoaXMubmFtZXNwYWNlVVJJID0gcGFyZW50Lm5hbWVzcGFjZVVSSTtcbiAgdGhpcy5fbmV4dCA9IG51bGw7XG4gIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5fX2RhdGFfXyA9IGRhdHVtO1xufVxuXG5FbnRlck5vZGUucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogRW50ZXJOb2RlLFxuICBhcHBlbmRDaGlsZDogZnVuY3Rpb24oY2hpbGQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHRoaXMuX25leHQpOyB9LFxuICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKGNoaWxkLCBuZXh0KSB7IHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBuZXh0KTsgfSxcbiAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsgfSxcbiAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsgfVxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQge0VudGVyTm9kZX0gZnJvbSBcIi4vZW50ZXJcIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi4vY29uc3RhbnRcIjtcblxudmFyIGtleVByZWZpeCA9IFwiJFwiOyAvLyBQcm90ZWN0IGFnYWluc3Qga2V5cyBsaWtlIOKAnF9fcHJvdG9fX+KAnS5cblxuZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHtcbiAgdmFyIGkgPSAwLFxuICAgICAgbm9kZSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBmaXQgaW50byB1cGRhdGUuXG4gIC8vIFB1dCBhbnkgbnVsbCBub2RlcyBpbnRvIGVudGVyLlxuICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuXG4gIGZvciAoOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZG9u4oCZdCBmaXQgaW50byBleGl0LlxuICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYmluZEtleShwYXJlbnQsIGdyb3VwLCBlbnRlciwgdXBkYXRlLCBleGl0LCBkYXRhLCBrZXkpIHtcbiAgdmFyIGksXG4gICAgICBub2RlLFxuICAgICAgbm9kZUJ5S2V5VmFsdWUgPSB7fSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAga2V5VmFsdWVzID0gbmV3IEFycmF5KGdyb3VwTGVuZ3RoKSxcbiAgICAgIGtleVZhbHVlO1xuXG4gIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBub2RlLlxuICAvLyBJZiBtdWx0aXBsZSBub2RlcyBoYXZlIHRoZSBzYW1lIGtleSwgdGhlIGR1cGxpY2F0ZXMgYXJlIGFkZGVkIHRvIGV4aXQuXG4gIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAga2V5VmFsdWVzW2ldID0ga2V5VmFsdWUgPSBrZXlQcmVmaXggKyBrZXkuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7XG4gICAgICBpZiAoa2V5VmFsdWUgaW4gbm9kZUJ5S2V5VmFsdWUpIHtcbiAgICAgICAgZXhpdFtpXSA9IG5vZGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlQnlLZXlWYWx1ZVtrZXlWYWx1ZV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBkYXR1bS5cbiAgLy8gSWYgdGhlcmUgYSBub2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleSwgam9pbiBhbmQgYWRkIGl0IHRvIHVwZGF0ZS5cbiAgLy8gSWYgdGhlcmUgaXMgbm90IChvciB0aGUga2V5IGlzIGEgZHVwbGljYXRlKSwgYWRkIGl0IHRvIGVudGVyLlxuICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAga2V5VmFsdWUgPSBrZXlQcmVmaXggKyBrZXkuY2FsbChwYXJlbnQsIGRhdGFbaV0sIGksIGRhdGEpO1xuICAgIGlmIChub2RlID0gbm9kZUJ5S2V5VmFsdWVba2V5VmFsdWVdKSB7XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICBub2RlQnlLZXlWYWx1ZVtrZXlWYWx1ZV0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKG5vZGVCeUtleVZhbHVlW2tleVZhbHVlc1tpXV0gPT09IG5vZGUpKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgZGF0YSA9IG5ldyBBcnJheSh0aGlzLnNpemUoKSksIGogPSAtMTtcbiAgICB0aGlzLmVhY2goZnVuY3Rpb24oZCkgeyBkYXRhWysral0gPSBkOyB9KTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHZhciBiaW5kID0ga2V5ID8gYmluZEtleSA6IGJpbmRJbmRleCxcbiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLFxuICAgICAgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdmFsdWUgPSBjb25zdGFudCh2YWx1ZSk7XG5cbiAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgdmFyIHBhcmVudCA9IHBhcmVudHNbal0sXG4gICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLFxuICAgICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgZGF0YSA9IHZhbHVlLmNhbGwocGFyZW50LCBwYXJlbnQgJiYgcGFyZW50Ll9fZGF0YV9fLCBqLCBwYXJlbnRzKSxcbiAgICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAgICBlbnRlckdyb3VwID0gZW50ZXJbal0gPSBuZXcgQXJyYXkoZGF0YUxlbmd0aCksXG4gICAgICAgIHVwZGF0ZUdyb3VwID0gdXBkYXRlW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLFxuICAgICAgICBleGl0R3JvdXAgPSBleGl0W2pdID0gbmV3IEFycmF5KGdyb3VwTGVuZ3RoKTtcblxuICAgIGJpbmQocGFyZW50LCBncm91cCwgZW50ZXJHcm91cCwgdXBkYXRlR3JvdXAsIGV4aXRHcm91cCwgZGF0YSwga2V5KTtcblxuICAgIC8vIE5vdyBjb25uZWN0IHRoZSBlbnRlciBub2RlcyB0byB0aGVpciBmb2xsb3dpbmcgdXBkYXRlIG5vZGUsIHN1Y2ggdGhhdFxuICAgIC8vIGFwcGVuZENoaWxkIGNhbiBpbnNlcnQgdGhlIG1hdGVyaWFsaXplZCBlbnRlciBub2RlIGJlZm9yZSB0aGlzIG5vZGUsXG4gICAgLy8gcmF0aGVyIHRoYW4gYXQgdGhlIGVuZCBvZiB0aGUgcGFyZW50IG5vZGUuXG4gICAgZm9yICh2YXIgaTAgPSAwLCBpMSA9IDAsIHByZXZpb3VzLCBuZXh0OyBpMCA8IGRhdGFMZW5ndGg7ICsraTApIHtcbiAgICAgIGlmIChwcmV2aW91cyA9IGVudGVyR3JvdXBbaTBdKSB7XG4gICAgICAgIGlmIChpMCA+PSBpMSkgaTEgPSBpMCArIDE7XG4gICAgICAgIHdoaWxlICghKG5leHQgPSB1cGRhdGVHcm91cFtpMV0pICYmICsraTEgPCBkYXRhTGVuZ3RoKTtcbiAgICAgICAgcHJldmlvdXMuX25leHQgPSBuZXh0IHx8IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlID0gbmV3IFNlbGVjdGlvbih1cGRhdGUsIHBhcmVudHMpO1xuICB1cGRhdGUuX2VudGVyID0gZW50ZXI7XG4gIHVwZGF0ZS5fZXhpdCA9IGV4aXQ7XG4gIHJldHVybiB1cGRhdGU7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29tcGFyZSkge1xuICBpZiAoIWNvbXBhcmUpIGNvbXBhcmUgPSBhc2NlbmRpbmc7XG5cbiAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJlKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfVxuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHNvcnRncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHNvcnRncm91cCA9IHNvcnRncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHNvcnRncm91cFtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHNvcnRncm91cC5zb3J0KGNvbXBhcmVOb2RlKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7XG59XG5cbmZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsImltcG9ydCBuYW1lc3BhY2UgZnJvbSBcIi4uL25hbWVzcGFjZVwiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHYpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKTtcbiAgICByZXR1cm4gZnVsbG5hbWUubG9jYWxcbiAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbClcbiAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJGdW5jdGlvbk5TIDogYXR0ckZ1bmN0aW9uKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpKShmdWxsbmFtZSwgdmFsdWUpKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUpIHtcbiAgcmV0dXJuIChub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSAvLyBub2RlIGlzIGEgTm9kZVxuICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG4iLCJmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7XG4gIHJldHVybiBub2RlLmNsYXNzTGlzdCB8fCBuZXcgQ2xhc3NMaXN0KG5vZGUpO1xufVxuXG5mdW5jdGlvbiBDbGFzc0xpc3Qobm9kZSkge1xuICB0aGlzLl9ub2RlID0gbm9kZTtcbiAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIik7XG59XG5cbkNsYXNzTGlzdC5wcm90b3R5cGUgPSB7XG4gIGFkZDogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA8IDApIHtcbiAgICAgIHRoaXMuX25hbWVzLnB1c2gobmFtZSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSkgPj0gMDtcbiAgfVxufTtcblxuZnVuY3Rpb24gY2xhc3NlZEFkZChub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5hZGQobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkUmVtb3ZlKG5vZGUsIG5hbWVzKSB7XG4gIHZhciBsaXN0ID0gY2xhc3NMaXN0KG5vZGUpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZhbHNlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkUmVtb3ZlKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZ1bmN0aW9uKG5hbWVzLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgKHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgPyBjbGFzc2VkQWRkIDogY2xhc3NlZFJlbW92ZSkodGhpcywgbmFtZXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgbmFtZXMgPSBjbGFzc0FycmF5KG5hbWUgKyBcIlwiKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbikgaWYgKCFsaXN0LmNvbnRhaW5zKG5hbWVzW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWVcbiAgICAgID8gY2xhc3NlZFRydWVcbiAgICAgIDogY2xhc3NlZEZhbHNlKShuYW1lcywgdmFsdWUpKTtcbn1cbiIsImZ1bmN0aW9uIHRleHRSZW1vdmUoKSB7XG4gIHRoaXMudGV4dENvbnRlbnQgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbFxuICAgICAgICAgID8gdGV4dFJlbW92ZSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gdGV4dEZ1bmN0aW9uXG4gICAgICAgICAgOiB0ZXh0Q29uc3RhbnQpKHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59XG4iLCJmdW5jdGlvbiBodG1sUmVtb3ZlKCkge1xuICB0aGlzLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaHRtbEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGh0bWxGdW5jdGlvblxuICAgICAgICAgIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLmlubmVySFRNTDtcbn1cbiIsImZ1bmN0aW9uIHJhaXNlKCkge1xuICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7XG59XG4iLCJmdW5jdGlvbiBsb3dlcigpIHtcbiAgaWYgKHRoaXMucHJldmlvdXNTaWJsaW5nKSB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gobG93ZXIpO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3JcIjtcbmltcG9ydCBzZWxlY3RvciBmcm9tIFwiLi4vc2VsZWN0b3JcIjtcblxuZnVuY3Rpb24gY29uc3RhbnROdWxsKCkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgYmVmb3JlKSB7XG4gIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZSA6IGNyZWF0b3IobmFtZSksXG4gICAgICBzZWxlY3QgPSBiZWZvcmUgPT0gbnVsbCA/IGNvbnN0YW50TnVsbCA6IHR5cGVvZiBiZWZvcmUgPT09IFwiZnVuY3Rpb25cIiA/IGJlZm9yZSA6IHNlbGVjdG9yKGJlZm9yZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IG51bGwpO1xuICB9KTtcbn1cbiIsImZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyZW1vdmUpO1xufVxuIiwiZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lU2hhbGxvdygpIHtcbiAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5jbG9uZU5vZGUoZmFsc2UpLCB0aGlzLm5leHRTaWJsaW5nKTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lRGVlcCgpIHtcbiAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5jbG9uZU5vZGUodHJ1ZSksIHRoaXMubmV4dFNpYmxpbmcpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihkZWVwKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdChkZWVwID8gc2VsZWN0aW9uX2Nsb25lRGVlcCA6IHNlbGVjdGlvbl9jbG9uZVNoYWxsb3cpO1xufVxuIiwidmFyIGZpbHRlckV2ZW50cyA9IHt9O1xuXG5leHBvcnQgdmFyIGV2ZW50ID0gbnVsbDtcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKCEoXCJvbm1vdXNlZW50ZXJcIiBpbiBlbGVtZW50KSkge1xuICAgIGZpbHRlckV2ZW50cyA9IHttb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLCBtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCJ9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbHRlckNvbnRleHRMaXN0ZW5lcihsaXN0ZW5lciwgaW5kZXgsIGdyb3VwKSB7XG4gIGxpc3RlbmVyID0gY29udGV4dExpc3RlbmVyKGxpc3RlbmVyLCBpbmRleCwgZ3JvdXApO1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgcmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7XG4gICAgaWYgKCFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0aGlzICYmICEocmVsYXRlZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzKSAmIDgpKSkge1xuICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjb250ZXh0TGlzdGVuZXIobGlzdGVuZXIsIGluZGV4LCBncm91cCkge1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQxKSB7XG4gICAgdmFyIGV2ZW50MCA9IGV2ZW50OyAvLyBFdmVudHMgY2FuIGJlIHJlZW50cmFudCAoZS5nLiwgZm9jdXMpLlxuICAgIGV2ZW50ID0gZXZlbnQxO1xuICAgIHRyeSB7XG4gICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIHRoaXMuX19kYXRhX18sIGluZGV4LCBncm91cCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGV2ZW50ID0gZXZlbnQwO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25SZW1vdmUodHlwZW5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbiA9IHRoaXMuX19vbjtcbiAgICBpZiAoIW9uKSByZXR1cm47XG4gICAgZm9yICh2YXIgaiA9IDAsIGkgPSAtMSwgbSA9IG9uLmxlbmd0aCwgbzsgaiA8IG07ICsraikge1xuICAgICAgaWYgKG8gPSBvbltqXSwgKCF0eXBlbmFtZS50eXBlIHx8IG8udHlwZSA9PT0gdHlwZW5hbWUudHlwZSkgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8uY2FwdHVyZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblsrK2ldID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCsraSkgb24ubGVuZ3RoID0gaTtcbiAgICBlbHNlIGRlbGV0ZSB0aGlzLl9fb247XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgY2FwdHVyZSkge1xuICB2YXIgd3JhcCA9IGZpbHRlckV2ZW50cy5oYXNPd25Qcm9wZXJ0eSh0eXBlbmFtZS50eXBlKSA/IGZpbHRlckNvbnRleHRMaXN0ZW5lciA6IGNvbnRleHRMaXN0ZW5lcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKGQsIGksIGdyb3VwKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uLCBvLCBsaXN0ZW5lciA9IHdyYXAodmFsdWUsIGksIGdyb3VwKTtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgICBpZiAoKG8gPSBvbltqXSkudHlwZSA9PT0gdHlwZW5hbWUudHlwZSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciwgby5jYXB0dXJlKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciA9IGxpc3RlbmVyLCBvLmNhcHR1cmUgPSBjYXB0dXJlKTtcbiAgICAgICAgby52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlbmFtZS50eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSk7XG4gICAgbyA9IHt0eXBlOiB0eXBlbmFtZS50eXBlLCBuYW1lOiB0eXBlbmFtZS5uYW1lLCB2YWx1ZTogdmFsdWUsIGxpc3RlbmVyOiBsaXN0ZW5lciwgY2FwdHVyZTogY2FwdHVyZX07XG4gICAgaWYgKCFvbikgdGhpcy5fX29uID0gW29dO1xuICAgIGVsc2Ugb24ucHVzaChvKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odHlwZW5hbWUsIHZhbHVlLCBjYXB0dXJlKSB7XG4gIHZhciB0eXBlbmFtZXMgPSBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZSArIFwiXCIpLCBpLCBuID0gdHlwZW5hbWVzLmxlbmd0aCwgdDtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgb24gPSB0aGlzLm5vZGUoKS5fX29uO1xuICAgIGlmIChvbikgZm9yICh2YXIgaiA9IDAsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHtcbiAgICAgIGZvciAoaSA9IDAsIG8gPSBvbltqXTsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoKHQgPSB0eXBlbmFtZXNbaV0pLnR5cGUgPT09IG8udHlwZSAmJiB0Lm5hbWUgPT09IG8ubmFtZSkge1xuICAgICAgICAgIHJldHVybiBvLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIG9uID0gdmFsdWUgPyBvbkFkZCA6IG9uUmVtb3ZlO1xuICBpZiAoY2FwdHVyZSA9PSBudWxsKSBjYXB0dXJlID0gZmFsc2U7XG4gIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHRoaXMuZWFjaChvbih0eXBlbmFtZXNbaV0sIHZhbHVlLCBjYXB0dXJlKSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3VzdG9tRXZlbnQoZXZlbnQxLCBsaXN0ZW5lciwgdGhhdCwgYXJncykge1xuICB2YXIgZXZlbnQwID0gZXZlbnQ7XG4gIGV2ZW50MS5zb3VyY2VFdmVudCA9IGV2ZW50O1xuICBldmVudCA9IGV2ZW50MTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbGlzdGVuZXIuYXBwbHkodGhhdCwgYXJncyk7XG4gIH0gZmluYWxseSB7XG4gICAgZXZlbnQgPSBldmVudDA7XG4gIH1cbn1cbiIsImltcG9ydCBkZWZhdWx0VmlldyBmcm9tIFwiLi4vd2luZG93XCI7XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQobm9kZSwgdHlwZSwgcGFyYW1zKSB7XG4gIHZhciB3aW5kb3cgPSBkZWZhdWx0Vmlldyhub2RlKSxcbiAgICAgIGV2ZW50ID0gd2luZG93LkN1c3RvbUV2ZW50O1xuXG4gIGlmICh0eXBlb2YgZXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGV2ZW50ID0gbmV3IGV2ZW50KHR5cGUsIHBhcmFtcyk7XG4gIH0gZWxzZSB7XG4gICAgZXZlbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICBpZiAocGFyYW1zKSBldmVudC5pbml0RXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlKSwgZXZlbnQuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgICBlbHNlIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UpO1xuICB9XG5cbiAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hDb25zdGFudCh0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRnVuY3Rpb24odHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gdGhpcy5lYWNoKCh0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZGlzcGF0Y2hGdW5jdGlvblxuICAgICAgOiBkaXNwYXRjaENvbnN0YW50KSh0eXBlLCBwYXJhbXMpKTtcbn1cbiIsImltcG9ydCBzZWxlY3Rpb25fc2VsZWN0IGZyb20gXCIuL3NlbGVjdFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RBbGwgZnJvbSBcIi4vc2VsZWN0QWxsXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2ZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcbmltcG9ydCBzZWxlY3Rpb25fZGF0YSBmcm9tIFwiLi9kYXRhXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2VudGVyIGZyb20gXCIuL2VudGVyXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2V4aXQgZnJvbSBcIi4vZXhpdFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9tZXJnZSBmcm9tIFwiLi9tZXJnZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9vcmRlciBmcm9tIFwiLi9vcmRlclwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zb3J0IGZyb20gXCIuL3NvcnRcIjtcbmltcG9ydCBzZWxlY3Rpb25fY2FsbCBmcm9tIFwiLi9jYWxsXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGVzIGZyb20gXCIuL25vZGVzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGUgZnJvbSBcIi4vbm9kZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zaXplIGZyb20gXCIuL3NpemVcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW1wdHkgZnJvbSBcIi4vZW1wdHlcIjtcbmltcG9ydCBzZWxlY3Rpb25fZWFjaCBmcm9tIFwiLi9lYWNoXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2F0dHIgZnJvbSBcIi4vYXR0clwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9wcm9wZXJ0eSBmcm9tIFwiLi9wcm9wZXJ0eVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbGFzc2VkIGZyb20gXCIuL2NsYXNzZWRcIjtcbmltcG9ydCBzZWxlY3Rpb25fdGV4dCBmcm9tIFwiLi90ZXh0XCI7XG5pbXBvcnQgc2VsZWN0aW9uX2h0bWwgZnJvbSBcIi4vaHRtbFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9yYWlzZSBmcm9tIFwiLi9yYWlzZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9sb3dlciBmcm9tIFwiLi9sb3dlclwiO1xuaW1wb3J0IHNlbGVjdGlvbl9hcHBlbmQgZnJvbSBcIi4vYXBwZW5kXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2luc2VydCBmcm9tIFwiLi9pbnNlcnRcIjtcbmltcG9ydCBzZWxlY3Rpb25fcmVtb3ZlIGZyb20gXCIuL3JlbW92ZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbG9uZSBmcm9tIFwiLi9jbG9uZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXR1bSBmcm9tIFwiLi9kYXR1bVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9vbiBmcm9tIFwiLi9vblwiO1xuaW1wb3J0IHNlbGVjdGlvbl9kaXNwYXRjaCBmcm9tIFwiLi9kaXNwYXRjaFwiO1xuXG5leHBvcnQgdmFyIHJvb3QgPSBbbnVsbF07XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWxlY3Rpb24oZ3JvdXBzLCBwYXJlbnRzKSB7XG4gIHRoaXMuX2dyb3VwcyA9IGdyb3VwcztcbiAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7XG59XG5cblNlbGVjdGlvbi5wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogU2VsZWN0aW9uLFxuICBzZWxlY3Q6IHNlbGVjdGlvbl9zZWxlY3QsXG4gIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCxcbiAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLFxuICBkYXRhOiBzZWxlY3Rpb25fZGF0YSxcbiAgZW50ZXI6IHNlbGVjdGlvbl9lbnRlcixcbiAgZXhpdDogc2VsZWN0aW9uX2V4aXQsXG4gIG1lcmdlOiBzZWxlY3Rpb25fbWVyZ2UsXG4gIG9yZGVyOiBzZWxlY3Rpb25fb3JkZXIsXG4gIHNvcnQ6IHNlbGVjdGlvbl9zb3J0LFxuICBjYWxsOiBzZWxlY3Rpb25fY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9ub2RlcyxcbiAgbm9kZTogc2VsZWN0aW9uX25vZGUsXG4gIHNpemU6IHNlbGVjdGlvbl9zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX2VtcHR5LFxuICBlYWNoOiBzZWxlY3Rpb25fZWFjaCxcbiAgYXR0cjogc2VsZWN0aW9uX2F0dHIsXG4gIHN0eWxlOiBzZWxlY3Rpb25fc3R5bGUsXG4gIHByb3BlcnR5OiBzZWxlY3Rpb25fcHJvcGVydHksXG4gIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLFxuICB0ZXh0OiBzZWxlY3Rpb25fdGV4dCxcbiAgaHRtbDogc2VsZWN0aW9uX2h0bWwsXG4gIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsXG4gIGxvd2VyOiBzZWxlY3Rpb25fbG93ZXIsXG4gIGFwcGVuZDogc2VsZWN0aW9uX2FwcGVuZCxcbiAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LFxuICByZW1vdmU6IHNlbGVjdGlvbl9yZW1vdmUsXG4gIGNsb25lOiBzZWxlY3Rpb25fY2xvbmUsXG4gIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sXG4gIG9uOiBzZWxlY3Rpb25fb24sXG4gIGRpc3BhdGNoOiBzZWxlY3Rpb25fZGlzcGF0Y2hcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGlvbjtcbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3RvclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHNlbGVjdG9yQWxsIGZyb20gXCIuLi9zZWxlY3RvckFsbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3JBbGwoc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBbXSwgcGFyZW50cyA9IFtdLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzdWJncm91cHMucHVzaChzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpO1xuICAgICAgICBwYXJlbnRzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCBwYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IG1hdGNoZXIgZnJvbSBcIi4uL21hdGNoZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gXCJmdW5jdGlvblwiKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBtYXRjaC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkge1xuICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZVwiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9leGl0IHx8IHRoaXMuX2dyb3Vwcy5tYXAoc3BhcnNlKSwgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0aW9uKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzMCA9IHRoaXMuX2dyb3VwcywgZ3JvdXBzMSA9IHNlbGVjdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gLTEsIG0gPSBncm91cHMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbmV4dCAhPT0gbm9kZS5uZXh0U2libGluZykgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTtcbiAgICAgICAgbmV4dCA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzBdO1xuICBhcmd1bWVudHNbMF0gPSB0aGlzO1xuICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICByZXR1cm4gdGhpcztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgbm9kZXMgPSBuZXcgQXJyYXkodGhpcy5zaXplKCkpLCBpID0gLTE7XG4gIHRoaXMuZWFjaChmdW5jdGlvbigpIHsgbm9kZXNbKytpXSA9IHRoaXM7IH0pO1xuICByZXR1cm4gbm9kZXM7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgdmFyIG5vZGUgPSBncm91cFtpXTtcbiAgICAgIGlmIChub2RlKSByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgc2l6ZSA9IDA7XG4gIHRoaXMuZWFjaChmdW5jdGlvbigpIHsgKytzaXplOyB9KTtcbiAgcmV0dXJuIHNpemU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICF0aGlzLm5vZGUoKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIGNhbGxiYWNrLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwiaW1wb3J0IGRlZmF1bHRWaWV3IGZyb20gXCIuLi93aW5kb3dcIjtcblxuZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVDb25zdGFudChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2LCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgICA/IHN0eWxlUmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gc3R5bGVGdW5jdGlvblxuICAgICAgICAgICAgOiBzdHlsZUNvbnN0YW50KShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpXG4gICAgICA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVWYWx1ZShub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSlcbiAgICAgIHx8IGRlZmF1bHRWaWV3KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIHByb3BlcnR5UmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5RnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBwcm9wZXJ0eUZ1bmN0aW9uXG4gICAgICAgICAgOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpW25hbWVdO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiLCB2YWx1ZSlcbiAgICAgIDogdGhpcy5ub2RlKCkuX19kYXRhX187XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbiwgcm9vdH0gZnJvbSBcIi4vc2VsZWN0aW9uL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCJcbiAgICAgID8gbmV3IFNlbGVjdGlvbihbW2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXV0sIFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdKVxuICAgICAgOiBuZXcgU2VsZWN0aW9uKFtbc2VsZWN0b3JdXSwgcm9vdCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCDCqSAyMDE1IC0gMjAxOCBUaGUgQnJvYWQgSW5zdGl0dXRlLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIDMtY2xhdXNlIGxpY2Vuc2UgKGh0dHBzOi8vZ2l0aHViLmNvbS9icm9hZGluc3RpdHV0ZS9ndGV4LXZpei9ibG9iL21hc3Rlci9MSUNFTlNFLm1kKVxuICovXG4vKipcbiAqIENyZWF0ZSBhIHRvb2xiYXJcbiAqIFRoaXMgY2xhc3MgdXNlcyBhIGxvdCBvZiBqUXVlcnkgZm9yIGRvbSBlbGVtZW50IG1hbmlwdWxhdGlvblxuICovXG5cbmltcG9ydCB7c2VsZWN0fSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge3BhcnNlQ3NzU3R5bGVzfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb29sYmFyIHtcbiAgICBjb25zdHJ1Y3Rvcihkb21JZCwgdG9vbHRpcD11bmRlZmluZWQsIHZlcnRpY2FsPWZhbHNlKXtcbiAgICAgICAgJChgIyR7ZG9tSWR9YCkuc2hvdygpOyAvLyBpZiBoaWRkZW5cblxuICAgICAgICAvLyBhZGQgYSBuZXcgYmFyZ3JvdXAgZGl2IHRvIGRvbUlEIHdpdGggYm9vdHN0cmFwIGJ1dHRvbiBjbGFzc2VzXG4gICAgICAgIGNvbnN0IGJ0bkNsYXNzZXMgPSB2ZXJ0aWNhbD8nYnRuLWdyb3VwLXZlcnRpY2FsIGJ0bi1ncm91cC1zbSc6ICdidG4tZ3JvdXAgYnRuLWdyb3VwLXNtJztcbiAgICAgICAgdGhpcy5iYXIgPSAkKCc8ZGl2Lz4nKS5hZGRDbGFzcyhidG5DbGFzc2VzKS5hcHBlbmRUbyhgIyR7ZG9tSWR9YCk7XG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xuICAgICAgICB0aGlzLnRvb2x0aXAgPSB0b29sdGlwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGRvd25sb2FkIGJ1dHRvbiBmb3IgU1ZHXG4gICAgICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBidXR0b24gZG9tIElEXG4gICAgICogQHBhcmFtIHN2Z0lkIHtTdHJpbmd9IHRoZSBTVkcgZG9tIElEIHRvIGdyYWIgYW5kIGRvd25sb2FkXG4gICAgICogQHBhcmFtIG91dGZpbGVOYW1lIHtTdHJpbmd9IHRoZSBkb3dubG9hZCBmaWxlIG5hbWVcbiAgICAgKiBAcGFyYW0gY2xvbmVJZCB7U3RyaW5nfSB0aGUgY2xvbmVkIFNWRyBkb20gSURcbiAgICAgKiBAcGFyYW0gaWNvbiB7U3RyaW5nfSBhIGZvbnRhd2Vzb21lJ3MgaWNvbiBjbGFzcyBuYW1lXG4gICAgICovXG4gICAgY3JlYXRlRG93bmxvYWRTdmdCdXR0b24oaWQsIHN2Z0lkLCBvdXRmaWxlTmFtZSwgY2xvbmVJZCwgaWNvbj0nZmEtZG93bmxvYWQnKXtcbiAgICAgICAgY29uc3QgJGJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKGlkLCBpY29uKTtcbiAgICAgICAgc2VsZWN0KGAjJHtpZH1gKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5kb3dubG9hZFN2ZyhzdmdJZCwgb3V0ZmlsZU5hbWUsIGNsb25lSWQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAuc2hvdyhcIkRvd25sb2FkXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcC5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVSZXNldEJ1dHRvbihpZCwgY2FsbGJhY2ssIGljb249J2ZhLWV4cGFuZC1hcnJvd3MtYWx0Jyl7XG4gICAgICAgIGNvbnN0ICRidXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbihpZCwgaWNvbik7XG4gICAgICAgIHNlbGVjdChgIyR7aWR9YClcbiAgICAgICAgICAgIC5vbignY2xpY2snLCBjYWxsYmFjaylcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAuc2hvdyhcIlJlc2V0IHRoZSBzY2FsZXNcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsICgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZSBhIGJ1dHRvbiB0byB0aGUgdG9vbGJhclxuICAgICAqIEBwYXJhbSBpZCB7U3RyaW5nfSB0aGUgYnV0dG9uJ3MgaWRcbiAgICAgKiBAcGFyYW0gaWNvbiB7U3RyaW5nfSBhIGZvbnRhd2Vzb21lIGljb24gY2xhc3NcbiAgICAgKiBEZXBlbmRlbmNpZXM6IEJvb3RzdHJhcCwgalF1ZXJ5LCBGb250YXdlc29tZVxuICAgICAqL1xuICAgIGNyZWF0ZUJ1dHRvbihpZCwgaWNvbj0nZmEtZG93bmxvYWQnKXtcbiAgICAgICAgY29uc3QgJGJ1dHRvbiA9ICQoJzxhLz4nKS5hdHRyKCdpZCcsIGlkKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdidG4gYnRuLWRlZmF1bHQnKS5hcHBlbmRUbyh0aGlzLmJhcik7XG4gICAgICAgICQoJzxpLz4nKS5hZGRDbGFzcyhgZmEgJHtpY29ufWApLmFwcGVuZFRvKCRidXR0b24pO1xuICAgICAgICB0aGlzLmJ1dHRvbnNbaWRdID0gJGJ1dHRvbjtcbiAgICAgICAgcmV0dXJuICRidXR0b247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYXR0YWNoIGEgdG9vbHRpcCBkb20gd2l0aCB0aGUgdG9vbGJhclxuICAgICAqIEBwYXJhbSB0b29sdGlwIHtUb29sdGlwfVxuICAgICAqL1xuICAgIGF0dGFjaFRvb2x0aXAodG9vbHRpcCl7XG4gICAgICAgIHRoaXMudG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgU1ZHIG9ialxuICAgICAqIEBwYXJhbSBzdmdJZCB7U3RyaW5nfSB0aGUgU1ZHIGRvbSBJRFxuICAgICAqIEBwYXJhbSBmaWxlTmFtZSB7U3RyaW5nfSB0aGUgb3V0cHV0IGZpbGUgbmFtZVxuICAgICAqIEBwYXJhbSBjbG9uZUlkIHtTdHJpbmd9IHRoZSB0ZW1wb3JhcnkgZG9tIElEIHRvIGNvcHkgdGhlIFNWRyB0b1xuICAgICAqIERlcGVuZGVuY2llczogRmlsZVNhdmVyXG4gICAgICovXG4gICAgZG93bmxvYWRTdmcoc3ZnSWQsIGZpbGVOYW1lLCBjbG9uZUlkKXtcbiAgICAgICAgLy8gbGV0IHN2Z09iaiA9ICQoJCgkKGAke1wiI1wiICtzdmdJZH0gc3ZnYCkpWzBdKTsgLy8gY29tcGxpY2F0ZWQgalF1ZXJ5IHRvIGdldCB0byB0aGUgU1ZHIG9iamVjdFxuICAgICAgICBsZXQgc3ZnT2JqID0gJCgkKCQoYCR7XCIjXCIgK3N2Z0lkfWApKVswXSk7XG4gICAgICAgIGxldCAkc3ZnQ29weSA9IHN2Z09iai5jbG9uZSgpXG4gICAgICAgIC5hdHRyKFwidmVyc2lvblwiLCBcIjEuMVwiKVxuICAgICAgICAuYXR0cihcInhtbG5zXCIsIFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIik7XG5cbiAgICAgICAgLy8gcGFyc2UgYW5kIGFkZCBhbGwgdGhlIENTUyBzdHlsaW5nIHVzZWQgYnkgdGhlIFNWR1xuICAgICAgICBsZXQgc3R5bGVzID0gcGFyc2VDc3NTdHlsZXMoc3ZnT2JqLmdldCgpKTtcbiAgICAgICAgJHN2Z0NvcHkucHJlcGVuZChzdHlsZXMpO1xuXG4gICAgICAgICQoXCIjXCIgKyBjbG9uZUlkKS5odG1sKCcnKS5oaWRlKCk7IC8vIG1ha2Ugc3VyZSB0aGUgY29weUlEIGlzIGludmlzaWJsZVxuICAgICAgICBsZXQgc3ZnSHRtbCA9ICQoYCMke2Nsb25lSWR9YCkuYXBwZW5kKCRzdmdDb3B5KS5odG1sKCk7XG5cbiAgICAgICAgbGV0IHN2Z0Jsb2IgPSBuZXcgQmxvYihbc3ZnSHRtbF0sIHt0eXBlOiBcImltYWdlL3N2Zyt4bWxcIn0pO1xuICAgICAgICBzYXZlQXMoc3ZnQmxvYiwgZmlsZU5hbWUpOyAvLyB0aGlzIGlzIGEgRmlsZVNhdmVyIGZ1bmN0aW9uLi4uLlxuXG4gICAgICAgIC8vIGNsZWFyIHRoZSB0ZW1wIGRvd25sb2FkIGRpdlxuICAgICAgICAkKGAjJHtjbG9uZUlkfWApLmh0bWwoJycpLmhpZGUoKTtcbiAgICB9XG59IiwiLyoqXG4gKiBDb3B5cmlnaHQgwqkgMjAxNSAtIDIwMTggVGhlIEJyb2FkIEluc3RpdHV0ZSwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEJTRCAzLWNsYXVzZSBsaWNlbnNlIChodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvZ3RleC12aXovYmxvYi9tYXN0ZXIvTElDRU5TRS5tZClcbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuIFNWR1xuICogQHBhcmFtIGlkIHtTdHJpbmd9IGEgRE9NIGVsZW1lbnQgSUQgdGhhdCBzdGFydHMgd2l0aCBhIFwiI1wiXG4gKiBAcGFyYW0gd2lkdGgge051bWVyaWN9XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1lcmljfVxuICogQHBhcmFtIG1hcmdpbiB7T2JqZWN0fSB3aXRoIHR3byBhdHRyaWJ1dGVzOiB3aWR0aCBhbmQgaGVpZ2h0XG4gKiBAcmV0dXJuIHtTZWxlY3Rpb259IHRoZSBkMyBzZWxlY3Rpb24gb2JqZWN0IG9mIHRoZSBTVkdcbiAqL1xuXG5pbXBvcnQge3NlbGVjdH0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtyYW5nZX0gZnJvbSBcImQzLWFycmF5XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0RvbUlkKGlkKXtcbiAgICAvLyB0ZXN0IGlucHV0IHBhcmFtc1xuICAgIGlmICgkKGAjJHtpZH1gKS5sZW5ndGggPT0gMCkge1xuICAgICAgICBsZXQgZXJyb3IgPSBgSW5wdXQgRXJyb3I6IERPTSBJRCAke2lkfSBpcyBub3QgZm91bmQuYDtcbiAgICAgICAgYWxlcnQoZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgQ2FudmFzIEQzIG9iamVjdFxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBwYXJlbnQgZG9tIElEXG4gKiBAcGFyYW0gd2lkdGgge051bWVyaWN9OiB0aGUgb3V0ZXIgd2lkdGhcbiAqIEBwYXJhbSBoZWlnaHQge051bWVyaWN9OiB0aGUgb3V0ZXIgaGVpZ2h0XG4gKiBAcGFyYW0gbWFyZ2luIHtPYmplY3R9IHdpdGggYXR0cjogbGVmdCwgdG9wXG4gKiBAcGFyYW0gY2FudmFzSWQge1N0cmluZ31cbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGlkLCB3aWR0aCwgaGVpZ2h0LCBtYXJnaW4sIGNhbnZhc0lkPXVuZGVmaW5lZCwgcG9zaXRpb249XCJhYnNvbHV0ZVwiKXtcbiAgICBjaGVja0RvbUlkKGlkKTtcbiAgICBpZihjYW52YXNJZD09PXVuZGVmaW5lZCkgY2FudmFzSWQ9YCR7aWR9LWNhbnZhc2A7XG4gICAgcmV0dXJuIHNlbGVjdChgIyR7aWR9YClcbiAgICAgICAgLmFwcGVuZChcImNhbnZhc1wiKVxuICAgICAgICAuYXR0cignaWQnLCBjYW52YXNJZClcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuc3R5bGUoXCJwb3NpdGlvblwiLCBwb3NpdGlvbikgLy8gVE9ETzogc2hvdWxkIHRoZSBwb3NpdGlvbiBiZSB1c2VyLWRlZmluZWQ/IHJlbGF0aXZlIHZzIGFic29sdXRlXG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIFNWRyBEMyBvYmplY3RcbiAqIEBwYXJhbSBpZCB7U3RyaW5nfSB0aGUgcGFyZW50IGRvbSBJRFxuICogQHBhcmFtIHdpZHRoIHtOdW1lcmljfTogdGhlIG91dGVyIHdpZHRoXG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1lcmljfTogdGhlIG91dGVyIGhlaWdodFxuICogQHBhcmFtIG1hcmdpbiB7T2JqZWN0fSB3aXRoIGF0dHI6IGxlZnQsIHRvcFxuICogQHBhcmFtIHN2Z0lkIHtTdHJpbmd9XG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN2ZyhpZCwgd2lkdGgsIGhlaWdodCwgbWFyZ2luLCBzdmdJZD11bmRlZmluZWQsIHBvc2l0aW9uPVwicmVsYXRpdmVcIil7XG4gICAgY2hlY2tEb21JZChpZCk7XG4gICAgaWYgKHN2Z0lkPT09dW5kZWZpbmVkKSBzdmdJZD1gJHtpZH0tc3ZnYDtcbiAgICByZXR1cm4gc2VsZWN0KFwiI1wiK2lkKS5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuYXR0cihcImlkXCIsIHN2Z0lkKVxuICAgICAgICAvLyAuc3R5bGUoXCJwb3NpdGlvblwiLCBwb3NpdGlvbilcbiAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke21hcmdpbi5sZWZ0fSwgJHttYXJnaW4udG9wfSlgKVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gc3ZnT2JqXG4gKiBAcGFyYW0gZG93bmxvYWRGaWxlTmFtZSB7U3RyaW5nfVxuICogQHBhcmFtIHRlbXBEb3dubG9hZERpdklkIHtTdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZFN2ZyhzdmdPYmosIGRvd25sb2FkRmlsZU5hbWUsIHRlbXBEb3dubG9hZERpdklkKXtcbiAgICBjb25zb2xlLmxvZyhzdmdPYmopO1xuICAgIHZhciAkc3ZnQ29weSA9IHN2Z09iai5jbG9uZSgpXG4gICAgLmF0dHIoXCJ2ZXJzaW9uXCIsIFwiMS4xXCIpXG4gICAgLmF0dHIoXCJ4bWxuc1wiLCBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIpO1xuXG4gICAgLy8gcGFyc2UgYW5kIGFkZCB0aGUgQ1NTIHN0eWxpbmcgdXNlZCBieSB0aGUgU1ZHXG4gICAgdmFyIHN0eWxlcyA9IHBhcnNlQ3NzU3R5bGVzKHN2Z09iai5nZXQoKSk7XG4gICAgJHN2Z0NvcHkucHJlcGVuZChzdHlsZXMpO1xuXG4gICAgJChcIiNcIiArIHRlbXBEb3dubG9hZERpdklkKS5odG1sKCcnKS5oaWRlKCk7XG4gICAgdmFyIHN2Z0h0bWwgPSAkKFwiI1wiICsgdGVtcERvd25sb2FkRGl2SWQpLmFwcGVuZCgkc3ZnQ29weSkuaHRtbCgpO1xuXG4gICAgdmFyIHN2Z0Jsb2IgPSBuZXcgQmxvYihbc3ZnSHRtbF0sIHt0eXBlOiBcImltYWdlL3N2Zyt4bWxcIn0pO1xuICAgIHNhdmVBcyhzdmdCbG9iLCBkb3dubG9hZEZpbGVOYW1lKTtcblxuICAgIC8vIGNsZWFyIHRoZSB0ZW1wIGRvd25sb2FkIGRpdlxuICAgICQoXCIjXCIgKyB0ZW1wRG93bmxvYWREaXZJZCkuaHRtbCgnJykuaGlkZSgpO1xufVxuLyoqXG4gKiBBIGZ1bmN0aW9uIGZvciBwYXJzaW5nIHRoZSBDU1Mgc3R5bGUgc2hlZXQgYW5kIGluY2x1ZGluZyB0aGUgc3R5bGUgcHJvcGVydGllcyBpbiB0aGUgZG93bmxvYWRhYmxlIFNWRy5cbiAqIEBwYXJhbSBkb21cbiAqIEByZXR1cm5zIHtFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDc3NTdHlsZXMgKGRvbSkge1xuICAgIHZhciB1c2VkID0gXCJcIjtcbiAgICB2YXIgc2hlZXRzID0gZG9jdW1lbnQuc3R5bGVTaGVldHM7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykgeyAvLyBUT0RPOiB3YWxrIHRocm91Z2ggdGhpcyBibG9jayBvZiBjb2RlXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChzaGVldHNbaV0uY3NzUnVsZXMgPT0gbnVsbCkgY29udGludWU7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBzaGVldHNbaV0uY3NzUnVsZXM7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHJ1bGVzW2pdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocnVsZS5zdHlsZSkgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXM7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIGFueSBzZWxlY3RvciB0ZXh0IGluY2x1ZGluZyBzdmcgZWxlbWVudCBJRCAtLSBkb20gYWxyZWFkeSBzZWxlY3RzIGZvciB0aGF0XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHJ1bGUuc2VsZWN0b3JUZXh0ID09PSB1bmRlZmluZWQ/IHJ1bGUuc2VsZWN0b3JUZXh0IDogcnVsZS5zZWxlY3RvclRleHQucmVwbGFjZShgIyR7ZG9tWzBdLmlkfSBgLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vU29tZSBzZWxlY3RvcnMgd29uJ3Qgd29yaywgYW5kIG1vc3Qgb2YgdGhlc2UgZG9uJ3QgbWF0dGVyLlxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbXMgPSAkKGRvbSkuZmluZChzZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1zID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlZCArPSBydWxlLnNlbGVjdG9yVGV4dCArIFwiIHsgXCIgKyBydWxlLnN0eWxlLmNzc1RleHQgKyBcIiB9XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEluIEZpcmVmb3gsIGlmIHN0eWxlc2hlZXQgb3JpZ2luYXRlcyBmcm9tIGEgZGlmZiBkb21haW4sXG4gICAgICAgICAgICAvLyB0cnlpbmcgdG8gYWNjZXNzIHRoZSBjc3NSdWxlcyB3aWxsIHRocm93IGEgU2VjdXJpdHlFcnJvci5cbiAgICAgICAgICAgIC8vIEhlbmNlLCB3ZSBtdXN0IHVzZSBhIHRyeS9jYXRjaCB0byBoYW5kbGUgdGhpcyBpbiBGaXJlZm94XG4gICAgICAgICAgICBpZiAoZS5uYW1lICE9PSAnU2VjdXJpdHlFcnJvcicpIHRocm93IGU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpO1xuICAgIHMuaW5uZXJIVE1MID0gXCI8IVtDREFUQVtcXG5cIiArIHVzZWQgKyBcIlxcbl1dPlwiO1xuXG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBsaXN0IG9mIHgqeSBkYXRhIG9iamVjdHMgd2l0aCByYW5kb20gdmFsdWVzXG4gKiBUaGUgZGF0YSBvYmplY3QgaGFzIHRoaXMgc3RydWN0dXJlOiB7eDogeGxhYmVsLCB5OiB5bGFiZWwsIHZhbHVlOiBzb21lIHZhbHVlLCBkaXNwbGF5VmFsdWU6IHNvbWUgdmFsdWV9XG4gKiBAcGFyYW0gcGFyXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbU1hdHJpeChwYXI9e3g6MjAsIHk6MjAsIHNjYWxlRmFjdG9yOjEsIGRpdmVyZ2luZzpmYWxzZSwgYnViYmxlOmZhbHNlfSl7XG4gICAgbGV0IFggPSByYW5nZSgxLCBwYXIueCsxKTsgLy8gZ2VuZXJhdGVzIGEgMS1iYXNlZCBsaXN0LlxuICAgIGxldCBZID0gcmFuZ2UoMSwgcGFyLnkrMSk7XG4gICAgbGV0IGRhdGEgPSBbXTtcbiAgICBYLmZvckVhY2goKHgpPT57XG4gICAgICAgIHggPSAneCcgKyB4LnRvU3RyaW5nKCk7XG4gICAgICAgIFkuZm9yRWFjaCgoeSk9PntcbiAgICAgICAgICAgIHkgPSAneScgKyB5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBsZXQgdiA9IE1hdGgucmFuZG9tKCkqcGFyLnNjYWxlRmFjdG9yO1xuICAgICAgICAgICAgdiA9IHBhci5kaXZlcmdpbmcmJk1hdGgucmFuZG9tKCkgPCAwLjUgPyAtdiA6IHY7IC8vIHJhbmRvbWx5IGFzc2lnbmluZyBuZWdhdGl2ZSBhbmQgcG9zaXRpdmUgdmFsdWVzXG4gICAgICAgICAgICBkYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdixcbiAgICAgICAgICAgICAgICBkaXNwbGF5VmFsdWU6IHBhcnNlRmxvYXQodi50b0V4cG9uZW50aWFsKCkpLnRvUHJlY2lzaW9uKDMpLFxuICAgICAgICAgICAgICAgIHI6IHBhci5idWJibGU/TWF0aC5yYW5kb20oKSozMDp1bmRlZmluZWQgLy8gb25seSByZWxldmFudCB0byBidWJibGUgbWFwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICByZXR1cm4gZGF0YTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIGxpc3Qgb2YgcmFuZG9tIHZhbHVlc1xuICogQHBhcmFtIHBhclxuICogQHJldHVybnMge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21MaXN0KHBhcj17bjoxMDAsIHNjYWxlRmFjdG9yOjF9KSB7XG4gICAgbGV0IFggPSByYW5nZSgwLCBwYXIubik7IC8vIGdlbmVyYXRlcyBhIDEtYmFzZWQgbGlzdC5cbiAgICBsZXQgZGF0YSA9IFtdO1xuICAgIHJldHVybiBYLm1hcCgoeCkgPT4gTWF0aC5yYW5kb20oKSAqIHBhci5zY2FsZUZhY3Rvcik7XG5cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IMKpIDIwMTUgLSAyMDE4IFRoZSBCcm9hZCBJbnN0aXR1dGUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1jbGF1c2UgbGljZW5zZSAoaHR0cHM6Ly9naXRodWIuY29tL2Jyb2FkaW5zdGl0dXRlL2d0ZXgtdml6L2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQpXG4gKi9cbi8qKioqKiogR29vZ2xlIFNpZ25JbiAqKioqKiovXG5leHBvcnQgZnVuY3Rpb24gZ29vZ2xlRnVuYygpe1xuICAgIHJldHVybiB7XG4gICAgICAgIGNoZWNrU2lnbmVkSW46IGNoZWNrU2lnbmVkSW4sXG4gICAgICAgIGdldFVzZXI6IGdldFVzZXIsXG4gICAgICAgIHNpZ25JbkJ1dHRvbjogcmVuZGVyU2lnbkluQnV0dG9uLFxuICAgICAgICBzaWduT3V0OiBzaWduT3V0LFxuICAgICAgICBncmFudFNjb3BlczogZ3JhbnRTY29wZXNcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlclNpZ25JbkJ1dHRvbigpe1xuICAgIGdhcGkuc2lnbmluMi5yZW5kZXIoJ215LXNpZ25pbjInLCB7XG4gICAgICAgICdzY29wZSc6ICdwcm9maWxlIGVtYWlsJyxcbiAgICAgICAgJ3dpZHRoJzogMTMwLFxuICAgICAgICAnaGVpZ2h0JzogMzAsXG4gICAgICAgICdsb25ndGl0bGUnOiBmYWxzZSxcbiAgICAgICAgJ3RoZW1lJzogJ2RhcmsnLFxuICAgICAgICAnb25zdWNjZXNzJzogb25TdWNjZXNzLFxuICAgICAgICAnb25mYWlsdXJlJzogb25GYWlsdXJlXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gb25TdWNjZXNzKGdvb2dsZVVzZXIpe1xuICAgICQoJyNnLXNpZ25vdXQnKS5zaG93KCk7XG59XG5cbmZ1bmN0aW9uIHNpZ25PdXQoKSB7XG4gICAgbGV0IGF1dGgyID0gZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKTtcbiAgICBhdXRoMi5zaWduT3V0KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgc2lnbmVkIG91dCcpO1xuICAgIH0pO1xuICAgICQoJyNnLXNpZ25vdXQnKS5oaWRlKCk7XG59XG5cbmZ1bmN0aW9uIG9uRmFpbHVyZShlcnJvcil7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcilcbn1cblxuZnVuY3Rpb24gY2hlY2tTaWduZWRJbigpe1xuICAgIGlmIChnYXBpLmF1dGgyKSB7XG4gICAgICAgIHJldHVybiBnZXRVc2VyKCkuaXNTaWduZWRJbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFVzZXIoKXtcbiAgICByZXR1cm4gZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5jdXJyZW50VXNlci5nZXQoKVxufVxuXG5mdW5jdGlvbiBncmFudFNjb3BlcyhzY29wZXMpe1xuICAgIHRoaXMuZ2V0VXNlcigpLmdyYW50KHtzY29wZTogc2NvcGVzfSkudGhlbihcbiAgICAgICAgZnVuY3Rpb24oc3VjY2Vzcyl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh7bWVzc2FnZTogXCJzdWNjZXNzXCIsIHZhbHVlOiBzdWNjZXNzfSkpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihmYWlsKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoSlNPTj5zdHJpbmdpZnkoe21lc3NhZ2U6IFwiZmFpbFwiLCB2YWx1ZTogZmFpbH0pKTtcbiAgICAgICAgfVxuICAgICk7XG59IiwiLyoqXG4gKiBDb3B5cmlnaHQgwqkgMjAxNSAtIDIwMTggVGhlIEJyb2FkIEluc3RpdHV0ZSwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEJTRCAzLWNsYXVzZSBsaWNlbnNlIChodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvZ3RleC12aXovYmxvYi9tYXN0ZXIvTElDRU5TRS5tZClcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHtqc29uLCB0c3Z9IGZyb20gJ2QzLWZldGNoJztcbmltcG9ydCB7c2VsZWN0LCBzZWxlY3RBbGx9IGZyb20gJ2QzLXNlbGVjdGlvbic7XG5pbXBvcnQge2dldEd0ZXhVcmxzLFxuICAgIHBhcnNlVGlzc3Vlc1xufSBmcm9tICcuL21vZHVsZXMvZ3RleERhdGFQYXJzZXInO1xuaW1wb3J0IFRvb2xiYXIgZnJvbSAnLi9tb2R1bGVzL1Rvb2xiYXInO1xuaW1wb3J0IHtnb29nbGVGdW5jfSBmcm9tICcuL21vZHVsZXMvZ29vZ2xlVXNlcic7XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnb29nbGUgc2lnLWluIGJ1dHRvblxuICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0sIHRoZSBkZWZhdWx0IGZ1bmN0aW9uIGlzIGdvb2dsZUZ1bmMoKS5zaWduSW5CdXR0b25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclNpZ25JbkJ1dHRvbihjYWxsYmFjaz1nb29nbGVGdW5jKCkuc2lnbkluQnV0dG9uKXtcbiAgICBjYWxsYmFjaygpO1xufVxuXG4vKipcbiAqIERlZmluZSB0aGUgR29vZ2xlIHNpZ24gb3V0IGZ1bmN0aW9uXG4gKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSwgdGhlIGRlZmF1bHQgaXMgZ29vZ2xlRnVuYygpLnNpZ25PdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpZ25PdXQoY2FsbGJhY2s9Z29vZ2xlRnVuYygpLnNpZ25PdXQpe1xuICAgIGNhbGxiYWNrKCk7XG59XG5cbi8qKlxuICogYnVpbGQgdGhlIHN1bW1hcnkgdGFibGVcbiAqIEBwYXJhbSB0YWJsZUlkIHtTdHJpbmd9OiBhIERPTSB0YWJsZSBJRFxuICogQHBhcmFtIGRhdGFzZXRJZCB7U3RyaW5nfTogYSBkYXRhc2V0IElEXG4gKiBAcGFyYW0gZ29vZ2xlRnVuYyB7T2JqZWN0fSB3aXRoIGZ1bmN0aW9uIGF0dHJpYnV0ZXM6IGNoZWNrU2lnbmVkSW4sIGdldFVzZXJcbiAqIEBwYXJhbSB1cmxzIHtPYmplY3R9OiBBUEkgVVJMc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsYXVuY2godGFibGVJZCwgZGF0YXNldElkPSdndGV4X3Y3JywgZ29vZ2xlRnVuY0RpY3Q9Z29vZ2xlRnVuYygpLCB1cmxzPWdldEd0ZXhVcmxzKCkpe1xuICAgIGNvbnN0IHByb21pc2VzID0gW1xuICAgICAgICBqc29uKHVybHMudGlzc3VlKSxcbiAgICAgICAgdHN2KHVybHMucm5hc2VxQ3JhbSksIC8vIHJuYXNlcSBjcmFtIGZpbGUgaW5mb1xuICAgICAgICB0c3YodXJscy53Z3NDcmFtKSwgLy8gd2dzIGNyYW0gZmlsZSBpbmZvXG4gICAgICAgIHRzdih1cmxzLnNhbXBsZSksIC8vIEdURXggc2FtcGxlIFRTViBmaWxlOiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgXTtcblxuICAgIFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgICAudGhlbihmdW5jdGlvbihhcmdzKXtcbiAgICAgICAgICAgIGxldCB0aXNzdWVzID0gcGFyc2VUaXNzdWVzKGFyZ3NbMF0pOyAvLyBnZXQgR1RFeCB0aXNzdWUgb2JqZWN0c1xuICAgICAgICAgICAgY29uc3QgY3JhbSA9IHtcbiAgICAgICAgICAgICAgICBybmFzZXE6IGFyZ3NbMV0ucmVkdWNlKChhLCBkKT0+e2FbZC5zYW1wbGVfaWQudG9VcHBlckNhc2UoKV09ZDsgcmV0dXJuIGE7fSwge30pLFxuICAgICAgICAgICAgICAgIHdnczogYXJnc1syXS5yZWR1Y2UoKGEsIGQpPT57YVtkLnNhbXBsZV9pZC50b1VwcGVyQ2FzZSgpXT1kOyByZXR1cm4gYTt9LCB7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBwYXJzZSBTYW1wbGVzXG4gICAgICAgICAgICBsZXQgc2FtcGxlcyA9IGFyZ3NbM11cbiAgICAgICAgICAgICAgICAuZmlsdGVyKChzKT0+cy5kYXRhc2V0SWQ9PWRhdGFzZXRJZClcbiAgICAgICAgICAgICAgICAubWFwKChzKT0+e1xuICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSByaWdodCBDUkFNIG1hbmlmZXN0IGZpbGVcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzLmRhdGFUeXBlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJXR1NcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3JhbS53Z3MuaGFzT3duUHJvcGVydHkocy5zYW1wbGVJZCkpIHRocm93IHMuc2FtcGxlSWQgKyAnIGhhcyBubyBjcmFtIGZpbGVzJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNyYW1GaWxlID0gY3JhbS53Z3Nbcy5zYW1wbGVJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUk5BU0VRXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNyYW0ucm5hc2VxLmhhc093blByb3BlcnR5KHMuc2FtcGxlSWQpKSB0aHJvdyBzLnNhbXBsZUlkICsgJyBoYXMgbm8gY3JhbSBmaWxlcyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5jcmFtRmlsZSA9IGNyYW0ucm5hc2VxW3Muc2FtcGxlSWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZGF0YVR5cGUgPSAnUk5BLVNlcSc7IC8vIGFsc28gcmVwbGFjZSB0aGUgdGVybSBSTkFTRVEgd2l0aCBSTkEtU2VxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIGZhciwgd2UgZG8gbm90IGhhdmUgY3JhbSBmaWxlcyBmb3Igb3RoZXIgZGF0YSB0eXBlcywgc28gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2FtcGxlcyA9IF9jaGVja1JuYVNlcVdpdGhHZW5vdHlwZShzYW1wbGVzKTtcbiAgICAgICAgICAgIGNvbnN0IHRoZU1hdHJpeCA9IF9idWlsZE1hdHJpeChkYXRhc2V0SWQsIHNhbXBsZXMsIHRpc3N1ZXMpO1xuICAgICAgICAgICAgX3JlbmRlck1hdHJpeFRhYmxlKHRhYmxlSWQsIHRoZU1hdHJpeCwgZ29vZ2xlRnVuY0RpY3QsIHVybHMpO1xuICAgICAgICAgICAgX2FkZEZpbHRlcnModGFibGVJZCwgdGhlTWF0cml4LCBzYW1wbGVzLCB0aXNzdWVzLCBnb29nbGVGdW5jRGljdCwgdXJscyk7XG5cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycil7Y29uc29sZS5lcnJvcihlcnIpfSk7XG59XG5cbi8qKlxuICogQ2hlY2sgUk5BLVNlcSBzYW1wbGVzIGZvciBzdWJqZWN0cyB3aXRoIGdlbm90eXBlIGRhdGEgYW5kIGFzc2lnbiBSTkEtU2VxLVdHUyB0byB0aGUgY3VzdG9tIHByaXZhdGUgc2FtcGxlIGF0dHJpYnV0ZTogX3R5cGUuXG4gKiBAcGFyYW0gc2FtcGxlczogYSBsaXN0IG9mIHNhbXBsZSBvYmplY3RzIHdpdGggcmVxdWlyZWQgYXR0cmlidXRlczogZGF0YVR5cGUsIHN1YmplY3RJZCwgdGlzc3VlU2l0ZURldGFpbElkXG4gKiBAcmV0dXJuczogYSBuZXcgbGlzdCBvZiBzYW1wbGVzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfY2hlY2tSbmFTZXFXaXRoR2Vub3R5cGUoc2FtcGxlcyl7XG4gICAgLy8gZmluZCBzdWJqZWN0cy9zYW1wbGVzIHRoYXQgaGF2ZSBnZW5vdHlwZSBkYXRhXG4gICAgY29uc3Qgd2dzSGFzaCA9IHNhbXBsZXMuZmlsdGVyKChzKSA9PiB7XG4gICAgICAgIGlmKCFzLmhhc093blByb3BlcnR5KCdkYXRhVHlwZScpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHMpO1xuICAgICAgICAgICAgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogZGF0YVR5cGUnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzLmRhdGFUeXBlID09ICdXR1MnO1xuICAgIH0pLnJlZHVjZSgoYSwgZCkgPT4ge1xuICAgICAgICBpZiAoIWQuaGFzT3duUHJvcGVydHkoJ3N1YmplY3RJZCcpKSB0aHJvdyAnUGFyc2UgRXJyb3I6IHJlcXVpcmVkIGF0dHJpYnV0ZSBpcyBtaXNzaW5nLic7XG4gICAgICAgIGFbZC5zdWJqZWN0SWRdID0gMTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfSwge30pO1xuICAgIGNvbnN0IGF0dHIgPSAndGlzc3VlU2l0ZURldGFpbElkJztcbiAgICByZXR1cm4gc2FtcGxlcy5tYXAoKHMpPT57XG4gICAgICAgIGlmKCFzLmhhc093blByb3BlcnR5KCdkYXRhVHlwZScpIHx8ICFzLmhhc093blByb3BlcnR5KCdzdWJqZWN0SWQnKSkgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZy4nO1xuICAgICAgICBpZiAocy5kYXRhVHlwZSA9PSAnUk5BLVNlcScgJiYgd2dzSGFzaC5oYXNPd25Qcm9wZXJ0eShzLnN1YmplY3RJZCkpe1xuICAgICAgICAgICAgcy5fdHlwZSA9ICdSTkEtU2VxLVdHUyc7IC8vIG1vZGlmaWVkIHRoZSBfdHlwZSB0byBSTkEtU2VxLVdHU1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH0pO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gZGF0YXNldElkIHtTdHJpbmd9XG4gKiBAcGFyYW0gc2FtcGxlcyB7TGlzdH0gYSBsaXN0IG9mIHNhbXBsZSBvYmplY3RzIGluIGRhdGFzZXQgSURcbiAqIEBwYXJhbSB0aXNzdWVzIHtMaXN0fVxuICogQHJldHVybnMge3tkYXRhc2V0SWQ6ICosIFg6ICosIFk6ICpbXSwgZGF0YTogKn19XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfYnVpbGRNYXRyaXgoZGF0YXNldElkLCBzYW1wbGVzLCB0aXNzdWVzKXtcbiAgICBjb25zdCBfX2J1aWxkSGFzaCA9IGZ1bmN0aW9uKGRhdGFUeXBlKXtcbiAgICAgICAgY29uc3QgYXR0ciA9ICd0aXNzdWVTaXRlRGV0YWlsSWQnO1xuICAgICAgICByZXR1cm4gc2FtcGxlcy5maWx0ZXIoKHMpPT57XG4gICAgICAgICAgICBpZighcy5oYXNPd25Qcm9wZXJ0eSgnZGF0YVR5cGUnKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Iocyk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogX3R5cGUgb3IgZGF0YVR5cGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGFUeXBlID09ICdSTkEtU2VxLVdHUycpIHJldHVybiBzLl90eXBlID09IGRhdGFUeXBlO1xuICAgICAgICAgICAgZWxzZSByZXR1cm4gcy5kYXRhVHlwZT09ZGF0YVR5cGU7XG4gICAgICAgIH0pLnJlZHVjZSgoYSwgcyk9PntcbiAgICAgICAgICAgIGlmKCFzLmhhc093blByb3BlcnR5KGF0dHIpKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHMpO1xuICAgICAgICAgICAgICAgIHRocm93ICdQYXJzZSBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3Npbmc6JyArIGF0dHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihhW3NbYXR0cl1dPT09dW5kZWZpbmVkKSBhW3NbYXR0cl1dID0gW107XG4gICAgICAgICAgICBhW3NbYXR0cl1dLnB1c2gocyk7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfSwge30pO1xuICAgIH07XG5cbiAgICBjb25zdCBjb2x1bW5zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ1JOQS1TZXEnLFxuICAgICAgICAgICAgaWQ6ICdSTkEtU2VxJyxcbiAgICAgICAgICAgIGRhdGE6IF9fYnVpbGRIYXNoKCdSTkEtU2VxJykgLy8gbGlzdHMgb2YgUk5BLVNlcSBzYW1wbGVzIGluZGV4ZWQgYnkgdGlzc3VlU2l0ZURldGFpbElkXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiAnUk5BLVNlcSBXaXRoIFdHUycsXG4gICAgICAgICAgICBpZDogJ1JOQS1TZXEtV0dTJyxcbiAgICAgICAgICAgIGRhdGE6IF9fYnVpbGRIYXNoKCdSTkEtU2VxLVdHUycpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiAnV0VTJyxcbiAgICAgICAgICAgIGlkOiAnV0VTJyxcbiAgICAgICAgICAgIGRhdGE6IF9fYnVpbGRIYXNoKCdXRVMnKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ1dHUycsXG4gICAgICAgICAgICBpZDogJ1dHUycsXG4gICAgICAgICAgICBkYXRhOiBfX2J1aWxkSGFzaCgnV0dTJylcbiAgICAgICAgfVxuICAgIF07XG4gICAgY29uc3Qgcm93cyA9IHRpc3N1ZXMubWFwKCh0KT0+e1xuICAgICAgICBbJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICd0aXNzdWVTaXRlRGV0YWlsJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgICAgIGlmICghdC5oYXNPd25Qcm9wZXJ0eShkKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IodCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1Rpc3N1ZSBwYXJzaW5nIGVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0LmlkID0gdC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIHQubGFiZWwgPSB0LnRpc3N1ZVNpdGVEZXRhaWw7XG4gICAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sKT0+e1xuICAgICAgICAgICAgdFtjb2wuaWRdID0gY29sLmRhdGFbdC5pZF0gfHwgdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkYXRhc2V0SWQ6IGRhdGFzZXRJZCxcbiAgICAgICAgWDogcm93cyxcbiAgICAgICAgWTogY29sdW1ucyxcbiAgICAgICAgZGF0YTogc2FtcGxlcyAvLyBub3Qgc3VyZSBpZiB0aGlzIGlzIG5lZWRlZC5cbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gdGFibGVJZCB7U3RyaW5nfVxuICogQHBhcmFtIG1hdCB7T2JqZWN0fTogZ2VuZXJhdGVkIGJ5IF9fYnVpbGRNYXRyaXgoKVxuICogQHBhcmFtIHNhbXBsZXMge0xpc3R9IGEgbGlzdCBvZiBzYW1wbGUgb2JqZWN0c1xuICogQHBhcmFtIHRpc3N1ZXMge0xpc3R9IGEgbGlzdCBvZiB0aXNzdWUgb2JqZWN0c1xuICogQHBhcmFtIGdvb2dsZUZ1bmNEaWN0IHtPYmplY3R9IHdpdGggZnVuY3Rpb24gYXR0cmlidXRlczogY2hlY2tTaWduZWRJbiwgZ2V0VXNlclxuICogQHBhcmFtIHVybHMge09iamVjdH06IEFQSSBVUkxzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfYWRkRmlsdGVycyh0YWJsZUlkLCBtYXQsIHNhbXBsZXMsIHRpc3N1ZXMsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKXtcbiAgICBjb25zdCBfX2ZpbHRlciA9ICgpPT57XG4gICAgICAgIGxldCBzZXggPSAkKCdpbnB1dFtuYW1lPVwic2V4XCJdOmNoZWNrZWQnKS52YWwoKTsgLy8galF1ZXJ5IHN5bnRheCBmb3IgRE9NIG1hbmlwdWxhdGlvbnNcbiAgICAgICAgbGV0IGFnZXMgPSBbXTtcbiAgICAgICAgJCgnLmFnZUJveCcpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpIGFnZXMucHVzaCgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmKGFnZXMubGVuZ3RoIDwgNikgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgaWYoYWdlcy5sZW5ndGggPT0gNikgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl1bdmFsdWU9XCJhbGxcIl0nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2V4ID09ICdib3RoJyAmJiBhZ2VzLmxlbmd0aCA9PSA2KXtcbiAgICAgICAgICAgIF9yZW5kZXJNYXRyaXhUYWJsZSh0YWJsZUlkLCBfYnVpbGRNYXRyaXgobWF0LmRhdGFzZXRJZCwgc2FtcGxlcywgdGlzc3VlcyksIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmaWx0ZXJlZE1hdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChzZXggPT0gJ2JvdGgnKSBmaWx0ZXJlZE1hdCA9IF9idWlsZE1hdHJpeChtYXQuZGF0YXNldElkLCBzYW1wbGVzLmZpbHRlcihzPT5hZ2VzLmluZGV4T2Yocy5hZ2VCcmFja2V0KT49MCksIHRpc3N1ZXMpO1xuICAgICAgICAgICAgZWxzZSBpZiAoYWdlcy5sZW5ndGggPT0gNikgZmlsdGVyZWRNYXQgPSBfYnVpbGRNYXRyaXgobWF0LmRhdGFzZXRJZCwgc2FtcGxlcy5maWx0ZXIocz0+cy5zZXg9PXNleCksIHRpc3N1ZXMpO1xuICAgICAgICAgICAgZWxzZSBmaWx0ZXJlZE1hdCA9IF9idWlsZE1hdHJpeChtYXQuZGF0YXNldElkLCBzYW1wbGVzLmZpbHRlcihzPT5zLnNleD09c2V4ICYmIGFnZXMuaW5kZXhPZihzLmFnZUJyYWNrZXQpPj0wKSwgdGlzc3Vlcyk7XG4gICAgICAgICAgICBfcmVuZGVyTWF0cml4VGFibGUodGFibGVJZCwgZmlsdGVyZWRNYXQsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBEZWZpbmUgaW5wdXQgY2hhbmdlIGV2ZW50czpcbiAgICAkKCdpbnB1dFtuYW1lPVwic2V4XCJdJykuY2hhbmdlKF9fZmlsdGVyKTtcbiAgICAkKCcuYWdlQm94JykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLmNoYW5nZShfX2ZpbHRlcik7XG4gICAgfSk7XG4gICAgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl0nKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgbGV0IHZhbCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgIHN3aXRjaCh2YWwpe1xuICAgICAgICAgICAgY2FzZSAnYWxsJzoge1xuICAgICAgICAgICAgICAgICQoJy5hZ2VCb3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgX19maWx0ZXIoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3Jlc2V0Jzoge1xuICAgICAgICAgICAgICAgICQoJy5hZ2VCb3gnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBSZW5kZXIgdGhlIG1hdHJpeCBpbiBhbiBIVE1MIHRhYmxlIGZvcm1hdFxuICogQHBhcmFtIHRhYmxlSWQge1N0cmluZ30gdGhlIERPTSBJRCBvZiB0aGUgdGFibGVcbiAqIEBwYXJhbSBtYXQge09iamVjdH0gb2YgYXR0cjogZGF0YXNldElkLCBYLS1hIGxpc3Qgb2YgeCBvYmplY3RzLCBZLS1hIGxpc3Qgb2YgeSBvYmplY3RzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfcmVuZGVyTWF0cml4VGFibGUodGFibGVJZCwgbWF0LCBnb29nbGVGdW5jRGljdCwgdXJscyl7XG4gICAgY29uc3QgZGF0YXNldCA9IHtcbiAgICAgICAgJ2d0ZXhfdjcnOiB7XG4gICAgICAgICAgICBsYWJlbDonR1RFWCBWNycsXG4gICAgICAgICAgICBiZ2NvbG9yOiAnIzJhNzE4YidcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gcmVuZGVyaW5nIHRoZSBjb2x1bW4gbGFiZWxzXG4gICAgY29uc3QgdGhlVGFibGUgPSBzZWxlY3QoYCMke3RhYmxlSWR9YCk7XG4gICAgdGhlVGFibGUuc2VsZWN0KCd0aGVhZCcpLnNlbGVjdEFsbCgndGgnKVxuICAgICAgICAuZGF0YShbe2xhYmVsOlwiXCIsIGlkOlwiXCJ9XS5jb25jYXQobWF0LlkpKVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKCd0aCcpXG4gICAgICAgIC5hdHRyKCdzY29wZScsICdjb2wnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAoZCwgaSk9PmQuaWQ9PVwiXCI/Jyc6YHkke2ktMX1gKVxuICAgICAgICAudGV4dCgoZCk9PmQubGFiZWwpO1xuXG4gICAgdGhlVGFibGUuc2VsZWN0KCcudGFibGUtbGFiZWwnKS5zZWxlY3RBbGwoJyonKS5yZW1vdmUoKTtcbiAgICB0aGVUYWJsZS5zZWxlY3QoJy50YWJsZS1sYWJlbCcpLmFwcGVuZCgndGgnKVxuICAgICAgICAuYXR0cignY29sc3BhbicsIG1hdC5ZLmxlbmd0aCArIDEpXG4gICAgICAgIC50ZXh0KGRhdGFzZXRbbWF0LmRhdGFzZXRJZF0ubGFiZWwpXG4gICAgICAgIC5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsZGF0YXNldFttYXQuZGF0YXNldElkXS5iZ2NvbG9yKTtcblxuICAgIF9yZW5kZXJDb3VudHModGhlVGFibGUuc2VsZWN0KCd0Ym9keScpLCBtYXQpO1xuICAgIF9hZGRDbGlja0V2ZW50cyh0YWJsZUlkKTtcbiAgICBfYWRkVG9vbGJhcih0YWJsZUlkLCBtYXQsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKTsgLy8gcmVidWlsZCB0aGUgdG9vbGJhciB3aXRoIHRoZSBuZXcgbWF0cml4XG59XG5cbi8qKlxuICogUmVuZGVyIHNhbXBsZSBjb3VudHMgaW4gdGhlIHN1bW1hcnkgdGFibGVcbiAqIEBwYXJhbSB0Ym9keSB7T2JqZWN0fSBhIEQzIHNlbGVjdCBvYmplY3RcbiAqIEBwYXJhbSBtYXQge09iamVjdH0gZ2VuZXJhdGVkIGJ5IF9idWlsZE1hdHJpeCgpXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfcmVuZGVyQ291bnRzKHRib2R5LCBtYXQpe1xuICAgIHRib2R5LnNlbGVjdEFsbCgnLmRhdGEtcm93JykucmVtb3ZlKCk7XG4gICAgY29uc3QgdGhlUm93cyA9IHRib2R5LnNlbGVjdEFsbCgnLmRhdGEtcm93JylcbiAgICAgICAgLmRhdGEobWF0LlgpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoJ3RyJylcbiAgICAgICAgLmNsYXNzZWQoJ2RhdGEtcm93JywgdHJ1ZSk7XG5cbiAgICAvLyByZW5kZXJpbmcgdGhlIHJvdyBsYWJlbFxuICAgIHRoZVJvd3MuYXBwZW5kKCd0aCcpXG4gICAgICAgIC5hdHRyKCdzY29wZScsICdyb3cnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAoZCwgaSk9PmB4JHtpfWApXG4gICAgICAgIC50ZXh0KChkKT0+e1xuICAgICAgICAgICAgcmV0dXJuIGQubGFiZWxcbiAgICAgICAgfSk7XG5cbiAgICAvLyByZW5kZXJpbmcgc2FtcGxlIGNvdW50c1xuICAgIG1hdC5ZLmZvckVhY2goKHksIGopPT57XG4gICAgICAgIHRoZVJvd3MuYXBwZW5kKCd0ZCcpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAoZCwgaSk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gZFt5LmlkXT09PXVuZGVmaW5lZD8nJzpgeCR7aX0geSR7an1gO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50ZXh0KChkKT0+e1xuICAgICAgICAgICAgICAgIGxldCBjb3VudHMgPSBkW3kuaWRdP2RbeS5pZF0ubGVuZ3RoIDogJyc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50cztcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xuXG59XG5cbi8qKlxuICogQWRkIGN1c3RvbWl6ZWQgY29sdW1uLCByb3cgYW5kIGNlbGwgY2xpY2sgZXZlbnRzXG4gKiBAcGFyYW0gdGFibGVJZCB7U3RyaW5nfSB0aGUgZG9tIElEIG9mIHRoZSB0YWJsZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2FkZENsaWNrRXZlbnRzKHRhYmxlSWQpe1xuICAgIGNvbnN0IHRoZUNlbGxzID0gc2VsZWN0KGAjJHt0YWJsZUlkfWApLnNlbGVjdCgndGJvZHknKS5zZWxlY3RBbGwoJ3RkJyk7XG5cbiAgICAvLyBjb2x1bW4gbGFiZWxzXG4gICAgc2VsZWN0KGAjJHt0YWJsZUlkfWApLnNlbGVjdCgndGhlYWQnKS5zZWxlY3RBbGwoJ3RoJylcbiAgICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gdG9nZ2xlIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgICAgY29uc3QgdGhlQ29sdW1uID0gc2VsZWN0KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XG4gICAgICAgICAgIGlmIChzZWxlY3QodGhpcykuYXR0cignc2NvcGUnKSA9PSAnY29sJykge1xuICAgICAgICAgICAgICAgc2VsZWN0KHRoaXMpLmF0dHIoJ3Njb3BlJywgJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICB0aGVDZWxscy5maWx0ZXIoYC4ke3RoZUNvbHVtbn1gKS5jbGFzc2VkKCdzZWxlY3RlZCcsIHRydWUpO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgc2VsZWN0KHRoaXMpLmF0dHIoJ3Njb3BlJywgJ2NvbCcpO1xuICAgICAgICAgICAgICAgdGhlQ2VsbHMuZmlsdGVyKGAuJHt0aGVDb2x1bW59YCkuY2xhc3NlZCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAvLyByb3cgbGFiZWxzXG4gICAgc2VsZWN0KGAjJHt0YWJsZUlkfWApLnNlbGVjdCgndGJvZHknKS5zZWxlY3RBbGwoJ3RoJylcbiAgICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICBjb25zdCB0aGVSb3cgPSBzZWxlY3QodGhpcykuYXR0cignY2xhc3MnKTtcbiAgICAgICAgICAgaWYgKHNlbGVjdCh0aGlzKS5hdHRyKCdzY29wZScpID09ICdyb3cnKSB7XG4gICAgICAgICAgICAgICBzZWxlY3QodGhpcykuYXR0cignc2NvcGUnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgIHRoZUNlbGxzLmZpbHRlcihgLiR7dGhlUm93fWApLmNsYXNzZWQoJ3NlbGVjdGVkJywgdHJ1ZSk7XG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICBzZWxlY3QodGhpcykuYXR0cignc2NvcGUnLCAncm93Jyk7XG4gICAgICAgICAgICAgICB0aGVDZWxscy5maWx0ZXIoYC4ke3RoZVJvd31gKS5jbGFzc2VkKCdzZWxlY3RlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgLy8gZGF0YSBjZWxsc1xuICAgIHRoZUNlbGxzLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gdG9nZ2xlIHRoZSBzZWxlY3RlZCBjbGFzcyBhc3NpZ25tZW50XG4gICAgICAgICAgICBzZWxlY3QodGhpcykuY2xhc3NlZCgnc2VsZWN0ZWQnLCAhc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ3NlbGVjdGVkJykpO1xuICAgICAgICB9KVxufVxuXG4vKipcbiAqIEFkZCBhIHRvb2wgYmFyXG4gKiBAcGFyYW0gdGFibGVJZFxuICogQHBhcmFtIG1hdFxuICogQHByaXZhdGVcbiAqIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzL1xuICogRGVwZW5kZW5jaWVzOiBnb29nbGVVc2VyLmpzXG4gKi9cbmZ1bmN0aW9uIF9hZGRUb29sYmFyKHRhYmxlSWQsIG1hdCwgZ29vZ2xlRnVuY0RpY3QsIHVybHMpe1xuICAgIC8vIFRPRE86IGdldCByaWQgb2YgaGFyZC1jb2RlZCBkb20gSURzXG4gICAgY29uc3QgdGhlQ2VsbHMgPSBzZWxlY3QoYCMke3RhYmxlSWR9YCkuc2VsZWN0KCd0Ym9keScpLnNlbGVjdEFsbCgndGQnKTtcblxuICAgIC8vIGNyZWF0ZSB0aGUgdG9vbGJhciBhbmQgYnV0dG9uc1xuICAgIHNlbGVjdCgnI21hdHJpeC10YWJsZS10b29sYmFyJykuc2VsZWN0QWxsKCcqJykucmVtb3ZlKCk7XG4gICAgY29uc3QgdG9vbGJhciA9IG5ldyBUb29sYmFyKCdtYXRyaXgtdGFibGUtdG9vbGJhcicsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgdG9vbGJhci5jcmVhdGVCdXR0b24oJ3NhbXBsZS1kb3dubG9hZCcpO1xuICAgIHRvb2xiYXIuY3JlYXRlQnV0dG9uKCdzZW5kLXRvLWZpcmVjbG91ZCcsICdmYS1jbG91ZC11cGxvYWQtYWx0Jyk7XG5cbiAgICBzZWxlY3QoJyNzYW1wbGUtZG93bmxvYWQnKVxuICAgICAgICAuc3R5bGUoJ2N1cnNvcicsICdwb2ludGVyJylcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyBmZXRjaCBzZWxlY3RlZCB0YWJsZSBjZWxsc1xuICAgICAgICAgICAgbGV0IGNlbGxzID0gdGhlQ2VsbHMuZmlsdGVyKGAuc2VsZWN0ZWRgKTtcbiAgICAgICAgICAgIGlmIChjZWxscy5lbXB0eSgpKSBhbGVydCgnWW91IGhhdmUgbm90IHNlbGVjdGVkIGFueSBzYW1wbGVzIHRvIGRvd25sb2FkLicpO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGRvd25sb2FkQ29udGVudCA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdTYW1wbGUgSUQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1Rpc3N1ZSBOYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdEYXRhIFR5cGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gRmlsZSBHQ1AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gRmlsZSBBV1MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gRmlsZSBNRDUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gRmlsZSBTaXplJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDUkFNIEluZGV4IEdDUCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnQ1JBTSBJbmRleCBBV1MnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbihcIlxcdFwiKSArICdcXG4nO1xuICAgICAgICAgICAgICAgIGNlbGxzLmVhY2goZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBjZWxsJ3MgeCBhbmQgeSBJRHNcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyID0gc2VsZWN0KHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKS5maWx0ZXIoKGMpPT57cmV0dXJuIGMhPSdzZWxlY3RlZCd9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IG1hdC5YW3BhcnNlSW50KG1hcmtlclswXS5yZXBsYWNlKCd4JywgJycpKV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBtYXQuWVtwYXJzZUludChtYXJrZXJbMV0ucmVwbGFjZSgneScsICcnKSldO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHNlbGVjdGVkU2FtcGxlcyA9IG1hdC5kYXRhLmZpbHRlcigocyk9Pl9fZmlsdGVyU2FtcGxlKHMsIHgsIHkpKS5tYXAoKHMpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkU2FtcGxlcyA9IHkuZGF0YVt4LmlkXS5tYXAoKHMpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNyYW0gPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmFtX2ZpbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY3JhbV9maWxlX2F3cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmFtX2ZpbGVfbWQ1JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NyYW1fZmlsZV9zaXplJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NyYW1faW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY3JhbV9pbmRleF9hd3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5tYXAoKGQpPT5zLmNyYW1GaWxlW2RdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2NyYW1GaWxlJywgJ3Rpc3N1ZVNpdGVEZXRhaWwnLCAnZGF0YVR5cGUnXS5mb3JFYWNoKChrKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighcy5oYXNPd25Qcm9wZXJ0eShrKSkgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSBbcy5jcmFtRmlsZS5zYW1wbGVfaWQsIHMudGlzc3VlU2l0ZURldGFpbCwgcy5kYXRhVHlwZV0uY29uY2F0KGNyYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW5zLmpvaW4oXCJcXHRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRDb250ZW50ICs9IHNlbGVjdGVkU2FtcGxlcy5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxldCBmaWxlID0gbmV3IEJsb2IoW2Rvd25sb2FkQ29udGVudF0sIHt0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J30pO1xuICAgICAgICAgICAgICAgIHNhdmVBcyhmaWxlLCAnR1RFeC5jcmFtLnR4dCcsIHRydWUpOyAvLyBzYXZlQXMoKSBpcyBhIEZpbGVTYXZlciBmaWxlLCBkaXNhYmxlIGF1dG8gQk9NXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIHNlbGVjdCgnI3NlbmQtdG8tZmlyZWNsb3VkJylcbiAgICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJCgnI2ZpcmUtY2xvdWQtc3RhdHVzJykuZW1wdHkoKTtcbiAgICAgICAgICAgICBpZiAoIWdvb2dsZUZ1bmNEaWN0LmNoZWNrU2lnbmVkSW4oKSl7XG4gICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IG5lZWQgdG8gc2lnbiBpbiBmaXJzdFwiKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgY29uc3Qgc2NvcGVzID0gJ3Byb2ZpbGUgZW1haWwgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kZXZzdG9yYWdlLmZ1bGxfY29udHJvbCBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3BsdXMubWUnO1xuICAgICAgICAgICAgZ29vZ2xlRnVuY0RpY3QuZ3JhbnRTY29wZXMoc2NvcGVzKTtcbiAgICAgICAgICAgIF9yZXBvcnRCaWxsaW5nUHJvamVjdHMoZ29vZ2xlRnVuY0RpY3QuZ2V0VXNlcigpKTtcblxuICAgICAgICAgICAgbGV0IGNlbGxzID0gdGhlQ2VsbHMuZmlsdGVyKGAuc2VsZWN0ZWRgKTtcbiAgICAgICAgICAgIGlmIChjZWxscy5lbXB0eSgpKSBhbGVydCgnWW91IGhhdmUgbm90IHNlbGVjdGVkIGFueSBzYW1wbGVzIHRvIHN1Ym1pdC4nKTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGVjdCgnI2ZpcmUtY2xvdWQtZm9ybScpLnN0eWxlKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGNvbnN0IF9fc3VibWlzc2lvblByZXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAvLyBpbnB1dCB3b3Jrc3BhY2UgZXJyb3ItY2hlY2tpbmdcbiAgICAgICAgY29uc3Qgd3NJbnB1dCA9ICQoJ2lucHV0W25hbWU9XCJ3b3Jrc3BhY2VcIl0nKS52YWwoKTtcbiAgICAgICAgbGV0IGlucHV0U3RhdHVzID0gMTtcbiAgICAgICAgX2dldFdvcmtzcGFjZXMoZ29vZ2xlRnVuY0RpY3QuZ2V0VXNlcigpLCBmdW5jdGlvbih3cyl7XG4gICAgICAgICAgICB3cy5mb3JFYWNoKChkKT0+e1xuICAgICAgICAgICAgICAgIGlmIChkLndvcmtzcGFjZS5uYW1lID09IHdzSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIklucHV0IEVycm9yOiBXb3Jrc3BhY2UgYWxyZWFkeSBleGlzdHMuIFwiICsgd3NJbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAkKCcjZmlyZS1jbG91ZC1zdGF0dXMnKS5odG1sKFwiV29ya3NwYWNlIFwiICsgd3NJbnB1dCArIFwiIGFscmVhZHkgZXhpc3RzLiA8YnIvPiBQbGVhc2UgbmFtZSBhIG5ldyBvbmUuXCIpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dFN0YXR1cyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaW5wdXRTdGF0dXMgPT0gMSkge1xuICAgICAgICAgICAgICAgICQoJyNmaXJlLWNsb3VkLXN0YXR1cycpLmVtcHR5KCk7IC8vIGNsZWFyIGFueSBleGlzdGluZyBGaXJlQ2xvdWQgc3RhdHVzIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgbGV0IGNlbGxzID0gdGhlQ2VsbHMuZmlsdGVyKGAuc2VsZWN0ZWRgKTtcbiAgICAgICAgICAgICAgICBsZXQgYWxsU2VsZWN0ZWRTYW1wbGVzID0gW107XG4gICAgICAgICAgICAgICAgY2VsbHMuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlciA9IHNlbGVjdCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJykuZmlsdGVyKChjKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYyAhPSAnc2VsZWN0ZWQnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gbWF0LlhbcGFyc2VJbnQobWFya2VyWzBdLnJlcGxhY2UoJ3gnLCAnJykpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IG1hdC5ZW3BhcnNlSW50KG1hcmtlclsxXS5yZXBsYWNlKCd5JywgJycpKV07XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB5LmRhdGFbeC5pZF0ubWFwKGQ9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IGQuc2FtcGxlSWQuc3BsaXQoJy0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQuZG9ub3JJZCA9IHRlbXBbMF0gKyAnLScgKyB0ZW1wWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgICAgICAgICAgICAgIH0pOyAvLyBOT1RFOiBjdXJyZW50bHkgd2UgZG9uJ3QgaGF2ZSBXRVMgQ1JBTSBmaWxlIHBhdGhzXG4gICAgICAgICAgICAgICAgICAgIGFsbFNlbGVjdGVkU2FtcGxlcyA9IGFsbFNlbGVjdGVkU2FtcGxlcy5jb25jYXQoc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfc3VibWl0VG9GaXJlQ2xvdWQoZ29vZ2xlRnVuY0RpY3QsIGFsbFNlbGVjdGVkU2FtcGxlcywgdXJscyk7XG4gICAgICAgICAgICAgICAgc2VsZWN0KCcjZmlyZS1jbG91ZC1mb3JtJykuc3R5bGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICQoJ2lucHV0W25hbWU9XCJ3b3Jrc3BhY2VcIl0nKS5rZXlwcmVzcyhmdW5jdGlvbihlKXtcbiAgICAgICAgaWYoZS5rZXlDb2RlPT0xMyl7XG4gICAgICAgICAgICBfX3N1Ym1pc3Npb25QcmVwKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBzZWxlY3QoJyNzdWJtaXQtdG8tZmlyZWNsb3VkLWJ0bicpLm9uKCdjbGljaycsIF9fc3VibWlzc2lvblByZXApO1xuICAgIHNlbGVjdCgnI2NhbmNlbC1maXJlY2xvdWQtYnRuJylcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWxlY3QoJyNmaXJlLWNsb3VkLWZvcm0nKS5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgYWxlcnQoJ1N1Ym1pc3Npb24gQ2FuY2VsZWQhJyk7XG4gICAgICAgICAgICAkKCcjZmlyZS1jbG91ZC1zdGF0dXMnKS5lbXB0eSgpOyAvLyBjbGVhciBhbnkgZXhpc3RpbmcgRmlyZUNsb3VkIHN0YXR1cyBtZXNzYWdlc1xuXG4gICAgICAgIH0pXG59XG5cbi8qKioqKiBGaXJlQ2xvdWQgQVBJICoqKioqL1xuLy8gcmVmZXJlbmNlOiB1c2UgdGhpcyBVUkwsIGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS90b2tlbmluZm8/YWNjZXNzX3Rva2VuPU15QWNjZXNzVG9rZW4sIHRvIGNoZWNrIHRoZSBhY2Nlc3MgdG9rZW4gaW5mb1xuLy8gcmVmZXJlbmNlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9pZGVudGl0eS9zaWduLWluL3dlYi9idWlsZC1idXR0b25cbi8vIGRlcGVuZGVuY2llczogalF1ZXJ5XG4vKipcbiAqIEdldCB0aGUgdXNlcidzIEZpcmVDbG91ZCBiaWxsaW5nIHByb2plY3RzXG4gKiBAcGFyYW0gZ29vZ2xlVXNlciB7T2JqZWN0fSBHb29nbGUgQVBJIGN1cnJlbnQgdXNlciBvYmplY3RcbiAqIEBwYXJhbSBkb21JZCB7U3RyaW5nfSB0aGUgRE9NIElEIGZvciByZXBvcnRpbmcgdGhlIGJpbGxpbmcgcHJvamVjdHNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9yZXBvcnRCaWxsaW5nUHJvamVjdHMoZ29vZ2xlVXNlciwgZG9tSWQ9XCJiaWxsaW5nLXByb2plY3QtbGlzdFwiKSB7XG5cbiAgICAvLyBnZXQgdGhlIHVzZXIncyBhY2Nlc3MgdG9rZW5cbiAgICBsZXQgdG9rZW4gPSBnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSh0cnVlKS5hY2Nlc3NfdG9rZW47XG5cbiAgICAvLyBhamF4IGNhbGwgdG8gRmlyZUNsb3VkIGJpbGluZyBwcm9qZWN0IHdlYiBzZXJ2aWNlXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkuZmlyZWNsb3VkLm9yZy9hcGkvcHJvZmlsZS9iaWxsaW5nJyxcbiAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgLy8galF1ZXJ5XG4gICAgICAgICAgICAkKGAjJHtkb21JZH1gKS5lbXB0eSgpO1xuICAgICAgICAgICAgcmVzcG9uc2UuZm9yRWFjaCgoZCk9PntcbiAgICAgICAgICAgICAgICAkKCc8bGFiZWw+JyArXG4gICAgICAgICAgICAgICAgICAgIGA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImJpbGxpbmctcHJvamVjdFwiIHZhbHVlPVwiJHtkLnByb2plY3ROYW1lfVwiPiBgICtcbiAgICAgICAgICAgICAgICAgICAgZC5wcm9qZWN0TmFtZSArXG4gICAgICAgICAgICAgICAgICAgJzwvbGFiZWw+PGJyLz4nXG4gICAgICAgICAgICAgICAgKS5hcHBlbmRUbygkKGAjJHtkb21JZH1gKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdXNlcidzIGV4aXNpdG4gd29ya3NwYWNlcyBvbiBGaXJlQ2xvdWRcbiAqIEBwYXJhbSBnb29nbGVVc2VyIHtPYmplY3R9IEdvb2dsZSBBUEkgY3VycmVudCB1c2VyIG9iamVjdFxuICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9nZXRXb3Jrc3BhY2VzKGdvb2dsZVVzZXIsIGNhbGxiYWNrKXtcbiAgICBsZXQgdG9rZW4gPSBnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSh0cnVlKS5hY2Nlc3NfdG9rZW47XG4gICAgIC8vIGxpc3QgVXNlcidzIHdvcmtzcGFjZXNcbiAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6ICdodHRwczovL2FwaS5maXJlY2xvdWQub3JnL2FwaS93b3Jrc3BhY2VzJyxcbiAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBjb25zdCB3b3Jrc3BhY2VzID0gcmVzcG9uc2UuZmlsdGVyKChkKT0+IWQucHVibGljKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKHdvcmtzcGFjZXMpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGdvb2dsZUZ1bmNEaWN0IHtPYmplY3R9XG4gKiBAcGFyYW0gc2FtcGxlcyB7TGlzdH0gU2FtcGxlIE9iamVjdHNcbiAqIEBwYXJhbSB1cmxzIHtPYmplY3R9IEFQSSBVUkxzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfc3VibWl0VG9GaXJlQ2xvdWQoZ29vZ2xlRnVuY0RpY3QsIHNhbXBsZXMsIHVybHMpe1xuICAgIGNvbnN0IHRva2VuID0gZ29vZ2xlRnVuY0RpY3QuZ2V0VXNlcigpLmdldEF1dGhSZXNwb25zZSh0cnVlKS5hY2Nlc3NfdG9rZW47XG4gICAgY29uc3QgbmFtZXNwYWNlID0gJCgnaW5wdXRbbmFtZT1cImJpbGxpbmctcHJvamVjdFwiXScpLnZhbCgpO1xuICAgIGNvbnN0IHdvcmtzcGFjZSA9ICQoJ2lucHV0W25hbWU9XCJ3b3Jrc3BhY2VcIl0nKS52YWwoKTtcbiAgICBpZihuYW1lc3BhY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbGVydCgnWW91IG11c3QgcHJvdmlkZSBhIGJpbGxpbiBwcm9qZWN0Jyk7XG4gICAgICAgIHRocm93KFwiYmlsbGluZyBwcm9qZWN0IGlzIG5vdCBwcm92aWRlZFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod29ya3NwYWNlID09PSB1bmRlZmluZWQgfHwgd29ya3NwYWNlID09ICcnKXtcbiAgICAgICAgYWxlcnQoJ1lvdSBtdXN0IHByb3ZpZGUgYSBuZXcgd29ya3NwYWNlIG5hbWUnKTtcbiAgICAgICAgdGhyb3coJ3dvcmtzcGFjZSBuYW1lIGlzIG5vdCBwcm92aWRlZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgICQoJyNzcGlubmVyJykuc2hvdygpO1xuICAgIC8vIGNyZWF0ZSB0aGUgd29ya3NwYWNlXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiB1cmxzLmZjV29ya1NwYWNlLFxuICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgXCJuYW1lc3BhY2VcIjogbmFtZXNwYWNlLFxuICAgICAgICAgICAgXCJuYW1lXCI6IHdvcmtzcGFjZSxcbiAgICAgICAgICAgIFwiYXR0cmlidXRlc1wiOiB7fSxcbiAgICAgICAgICAgIFwiYXV0aG9yaXphdGlvbkRvbWFpblwiOiBbXVxuICAgICAgICB9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpeyAvLyBjYWxsYmFjayBmdW5jdGlvbiBhZnRlciB3b3Jrc3BhY2UgaXMgY3JlYXRlZFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJmaW5pc2hlZCBjcmVhdGluZyB3b3Jrc3BhY2UuLi5cIik7XG4gICAgICAgICAgICBjb25zdCBkb25vcnMgPSBzYW1wbGVzLm1hcChkPT57XG4gICAgICAgICAgICAgICAgaWYgKCFkLmhhc093blByb3BlcnR5KCdkb25vcklkJykpIHRocm93ICdTYW1wbGUgZG9lcyBub3QgY29udGFpbiBhdHRyIGRvbm9ySWQuJztcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5kb25vcklkO1xuICAgICAgICAgICAgfSkuZmlsdGVyKChkLCBpLCBhKSA9PiBhLmluZGV4T2YoZCkgPT09IGkpOyAvLyBvYnRhaW4gdW5pcXVlIGRvbm9yc1xuICAgICAgICAgICAgY29uc3QgZG9ub3JFbnRpdHlTdHJpbmcgPSBgZW50aXRpZXM9ZW50aXR5OnBhcnRpY2lwYW50X2lkXFxuJHtkb25vcnMuam9pbignXFxuJyl9XFxuYDtcbiAgICAgICAgICAgIGNvbnN0IGRvbm9yRW50aXR5VXJsRW5jb2RlID0gZW5jb2RlVVJJKGRvbm9yRW50aXR5U3RyaW5nKTtcblxuICAgICAgICAgICAgLy8gc3VibWl0dGluZyBwYXJ0aWNpcGFudCBJRHNcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiBgJHt1cmxzLmZjV29ya1NwYWNlfS8ke25hbWVzcGFjZX0vJHt3b3Jrc3BhY2V9L2ltcG9ydEVudGl0aWVzYCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgeGhyRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0b2tlbik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiBkb25vckVudGl0eVVybEVuY29kZSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgICAgICQoJyNzcGlubmVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBmaW5hbGx5LCBzdWJtaXR0aW5nIHNhbXBsZXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSB0aGUgc2FtcGxlRW50aXR5U3RyaW5nIGZvciBGaXJlQ2xvdWQgQVBJXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmluaXNoZWQgaW1wb3J0aW5nIHBhcnRpY2lwYW50IElEcy4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNhbXBsZUVudGl0eSA9IFtbJ2VudGl0eTpzYW1wbGVfaWQnLCAncGFydGljaXBhbnRfaWQnLCAnc2FtcGxlX3R5cGUnLCAnYmFtX2ZpbGUnLCAnYmFtX2luZGV4J10uam9pbignXFx0JyldO1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGVFbnRpdHkgPSBzYW1wbGVFbnRpdHkuY29uY2F0KHNhbXBsZXMubWFwKGQ9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmNyYW1GaWxlID09PSB1bmRlZmluZWQpIHRocm93IFwiRGF0YSBFcnJvcjogXCIgKyBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWQuY3JhbUZpbGUuaGFzT3duUHJvcGVydHkoJ2NyYW1fZmlsZScpKSB0aHJvdyBcIkRhdGEgRXJyb3I6IFwiICsgZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IHVzZSBjcmFtRmlsZS5zYW1wbGVfaWQgaW5zdGVhZCBvZiBkLnNhbXBsZUlkIHRvIHByZXNlcnZlIHRoZSBtaXhlZCBjYXNlIHNhbXBsZSBJRHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZC5jcmFtRmlsZS5zYW1wbGVfaWQsIGQuZG9ub3JJZCwgZC5kYXRhVHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZC5jcmFtRmlsZS5jcmFtX2ZpbGUsIGQuY3JhbUZpbGUuY3JhbV9pbmRleF0uam9pbignXFx0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtcGxlRW50aXR5U3RyaW5nID0gYGVudGl0aWVzPSR7c2FtcGxlRW50aXR5LmpvaW4oJ1xcbicpfVxcbmA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbXBsZUVudGl0eVVybEVuY29kZSA9IGVuY29kZVVSSShzYW1wbGVFbnRpdHlTdHJpbmcpO1xuXG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGAke3VybHMuZmNXb3JrU3BhY2V9LyR7bmFtZXNwYWNlfS8ke3dvcmtzcGFjZX0vaW1wb3J0RW50aXRpZXNgLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2FtcGxlRW50aXR5VXJsRW5jb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmluaXNoZWQgaW1wb3J0aW5nIHNhbXBsZXMuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmNVUkwgPSBgJHt1cmxzLmZjUG9ydGFsV29ya1NwYWNlfS8ke25hbWVzcGFjZX0vJHt3b3Jrc3BhY2V9L2RhdGFgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGZjVVJMLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2ZpcmUtY2xvdWQtc3RhdHVzJykuaHRtbChgU3VibWl0dGVkISA8YnIvPiBHbyB0byB5b3VyIDxici8+IDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIke2ZjVVJMfVwiPkZpcmVDbG91ZCB3b3Jrc3BhY2U8L2E+YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKXtjb25zb2xlLmVycm9yKGVycm9yKX1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3Ipe2NvbnNvbGUuZXJyb3IoZXJyb3IpfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvcil7Y29uc29sZS5lcnJvcihlcnJvcil9XG4gICAgfSk7XG59XG5cblxuXG5cbiIsIi8qKlxuICogQ29weXJpZ2h0IMKpIDIwMTUgLSAyMDE4IFRoZSBCcm9hZCBJbnN0aXR1dGUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1jbGF1c2UgbGljZW5zZSAoaHR0cHM6Ly9naXRodWIuY29tL2Jyb2FkaW5zdGl0dXRlL2d0ZXgtdml6L2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQpXG4gKi9cblwidXNlIHN0cmljdFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEd0ZXhVcmxzKCl7XG4gICAgY29uc3QgaG9zdCA9ICdodHRwczovL2d0ZXhwb3J0YWwub3JnL3Jlc3QvdjEvJztcbiAgICAvLyBjb25zdCBob3N0ID0gJ2xvY2FsLmd0ZXhwb3J0YWwub3JnL3Jlc3QvdjEvJ1xuICAgIHJldHVybiB7XG4gICAgICAgIC8vIGdlbmUtZXF0bCB2aXN1YWxpemVyIHNwZWNpZmljXG4gICAgICAgIHNpbmdsZVRpc3N1ZUVxdGw6IGhvc3QgKyAnYXNzb2NpYXRpb24vc2luZ2xlVGlzc3VlRXF0bD9mb3JtYXQ9anNvbiZkYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcbiAgICAgICAgbGQ6IGhvc3QgKyAnZGF0YXNldC9sZD9mb3JtYXQ9anNvbiZkYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcblxuICAgICAgICAvLyBlcXRsIERhc2hib2FyZCBzcGVjaWZpY1xuICAgICAgICBkeW5lcXRsOiBob3N0ICsgJ2Fzc29jaWF0aW9uL2R5bmVxdGwnLFxuICAgICAgICBzbnA6IGhvc3QgKyAncmVmZXJlbmNlL3ZhcmlhbnQ/Zm9ybWF0PWpzb24mc25wSWQ9JyxcbiAgICAgICAgdmFyaWFudElkOiBob3N0ICsgJ2RhdGFzZXQvdmFyaWFudD9mb3JtYXQ9anNvbiZ2YXJpYW50SWQ9JyxcblxuICAgICAgICAvLyB0cmFuc2NyaXB0LCBleG9uLCBqdW5jdGlvbiBleHByZXNzaW9uIHNwZWNpZmljXG4gICAgICAgIGV4b25FeHA6IGhvc3QgKyAnZXhwcmVzc2lvbi9tZWRpYW5FeG9uRXhwcmVzc2lvbj9kYXRhc2V0SWQ9Z3RleF92NyZoY2x1c3Rlcj10cnVlJmdlbmNvZGVJZD0nLFxuICAgICAgICB0cmFuc2NyaXB0RXhwOiBob3N0ICsgJ2V4cHJlc3Npb24vbWVkaWFuVHJhbnNjcmlwdEV4cHJlc3Npb24/ZGF0YXNldElkPWd0ZXhfdjcmaGNsdXN0ZXI9dHJ1ZSZnZW5jb2RlSWQ9JyxcbiAgICAgICAganVuY3Rpb25FeHA6IGhvc3QgKyAnZXhwcmVzc2lvbi9tZWRpYW5KdW5jdGlvbkV4cHJlc3Npb24/ZGF0YXNldElkPWd0ZXhfdjcmaGNsdXN0ZXI9dHJ1ZSZnZW5jb2RlSWQ9JyxcbiAgICAgICAgdHJhbnNjcmlwdDogaG9zdCArICdyZWZlcmVuY2UvdHJhbnNjcmlwdD9kYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcbiAgICAgICAgZXhvbjogaG9zdCArICdyZWZlcmVuY2UvZXhvbj9kYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcbiAgICAgICAgZ2VuZU1vZGVsOiBob3N0ICsgJ2RhdGFzZXQvY29sbGFwc2VkR2VuZU1vZGVsRXhvbj9kYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcbiAgICAgICAgZ2VuZU1vZGVsVW5maWx0ZXJlZDogaG9zdCArICdkYXRhc2V0L2Z1bGxDb2xsYXBzZWRHZW5lTW9kZWxFeG9uP2RhdGFzZXRJZD1ndGV4X3Y3JmdlbmNvZGVJZD0nLFxuXG4gICAgICAgIC8vIGdlbmUgZXhwcmVzc2lvbiB2aW9saW4gcGxvdCBzcGVjaWZpY1xuICAgICAgICBnZW5lRXhwOiBob3N0ICsgJ2V4cHJlc3Npb24vZ2VuZUV4cHJlc3Npb24/ZGF0YXNldElkPWd0ZXhfdjcmZ2VuY29kZUlkPScsXG5cbiAgICAgICAgLy8gZ2VuZSBleHByZXNzaW9uIGhlYXQgbWFwIHNwZWNpZmljXG4gICAgICAgIG1lZEdlbmVFeHA6IGhvc3QgKyAnZXhwcmVzc2lvbi9tZWRpYW5HZW5lRXhwcmVzc2lvbj9kYXRhc2V0SWQ9Z3RleF92NyZoY2x1c3Rlcj10cnVlJnBhZ2VTaXplPTEwMDAwJyxcblxuICAgICAgICAvLyBnZW5lIGV4cHJlc3Npb24gYm94cGxvdCBzcGVjaWZpY1xuICAgICAgICBnZW5lRXhwQm94cGxvdDogaG9zdCArICdleHByZXNzaW9uL2dlbmVFeHByZXNzaW9uP2RhdGFzZXRJZD1ndGV4X3Y3JmJveHBsb3REZXRhaWw9ZnVsbCZnZW5jb2RlSWQ9JyxcblxuICAgICAgICAvLyB0b3AgZXhwcmVzc2VkIGdlbmUgZXhwcmVzc2lvbiBzcGVjaWZpY1xuICAgICAgICB0b3BJblRpc3N1ZUZpbHRlcmVkOiBob3N0ICsgJ2V4cHJlc3Npb24vdG9wRXhwcmVzc2VkR2VuZT9kYXRhc2V0SWQ9Z3RleF92NyZmaWx0ZXJNdEdlbmU9dHJ1ZSZzb3J0Qnk9bWVkaWFuJnNvcnREaXJlY3Rpb249ZGVzYyZwYWdlU2l6ZT01MCZ0aXNzdWVTaXRlRGV0YWlsSWQ9JyxcbiAgICAgICAgdG9wSW5UaXNzdWU6IGhvc3QgKyAnZXhwcmVzc2lvbi90b3BFeHByZXNzZWRHZW5lP2RhdGFzZXRJZD1ndGV4X3Y3JnNvcnRCeT1tZWRpYW4mc29ydERpcmVjdGlvbj1kZXNjJnBhZ2VTaXplPTUwJnRpc3N1ZVNpdGVEZXRhaWxJZD0nLFxuXG4gICAgICAgIGdlbmVJZDogaG9zdCArICdyZWZlcmVuY2UvZ2VuZT9mb3JtYXQ9anNvbiZnZW5jb2RlVmVyc2lvbj12MTkmZ2Vub21lQnVpbGQ9R1JDaDM3JTJGaGcxOSZnZW5lSWQ9JyxcblxuICAgICAgICAvLyB0aXNzdWUgbWVudSBzcGVjaWZpY1xuICAgICAgICB0aXNzdWU6ICBob3N0ICsgJ2RhdGFzZXQvdGlzc3VlSW5mbz9mb3JtYXQ9anNvbiZkYXRhc2V0SWQ9Z3RleF92NycsXG5cbiAgICAgICAgLy8gbG9jYWwgc3RhdGljIGZpbGVzXG4gICAgICAgIHNhbXBsZTogJy90bXBTdW1tYXJ5RGF0YS9ndGV4LlNhbXBsZS5jc3YnLFxuICAgICAgICBybmFzZXFDcmFtOiAnL3RtcFN1bW1hcnlEYXRhL3JuYXNlcV9jcmFtX2ZpbGVzX3Y3X2RiR2FQXzAxMTUxNi50eHQnLFxuICAgICAgICB3Z3NDcmFtOiAnL3RtcFN1bW1hcnlEYXRhL3dnc19jcmFtX2ZpbGVzX3Y3X2hnMzhfZGJHYVBfMDExNTE2LnR4dCcsXG5cbiAgICAgICAgLy8gZmlyZUNsb3VkXG4gICAgICAgIGZjQmlsbGluZzogJ2h0dHBzOi8vYXBpLmZpcmVjbG91ZC5vcmcvYXBpL3Byb2ZpbGUvYmlsbGluZycsXG4gICAgICAgIGZjV29ya1NwYWNlOiAnaHR0cHM6Ly9hcGkuZmlyZWNsb3VkLm9yZy9hcGkvd29ya3NwYWNlcycsXG4gICAgICAgIGZjUG9ydGFsV29ya1NwYWNlOiAnaHR0cHM6Ly9wb3J0YWwuZmlyZWNsb3VkLm9yZy8jd29ya3NwYWNlcydcbiAgICB9XG59XG5cbi8qKlxuICogcGFyc2UgR1RFeCBkeW5lcXRsIGpzb25cbiAqIEBwYXJhbSBkYXRhIHtKU09OfSBmcm9tIEdURXggZHluZXF0bCB3ZWIgc2VydmljZVxuICogQHJldHVybnMgZGF0YSB7SlNPTn0gbW9kaWZpZWQgZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRHluRXF0bChqc29uKXtcbiAgICAvLyBjaGVjayByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZXNcbiAgICBbJ2RhdGEnLCAnZ2Vub3R5cGVzJywgJ3BWYWx1ZScsICdwVmFsdWVUaHJlc2hvbGQnLCAndGlzc3VlU2l0ZURldGFpbElkJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoZCkpe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihqc29uKTtcbiAgICAgICAgICAgIHRocm93ICdQYXJzZSBFcnJvcjogUmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGpzb24uZXhwcmVzc2lvbl92YWx1ZXMgPSBqc29uLmRhdGEubWFwKChkKT0+cGFyc2VGbG9hdChkKSk7XG4gICAganNvbi5nZW5vdHlwZXMgPSBqc29uLmdlbm90eXBlcy5tYXAoKGQpPT5wYXJzZUZsb2F0KGQpKTtcblxuICAgIGpzb24uaG9tb1JlZkV4cCA9IGpzb24uZXhwcmVzc2lvbl92YWx1ZXMuZmlsdGVyKChkLGkpID0+IHtcbiAgICAgICAgcmV0dXJuIGpzb24uZ2Vub3R5cGVzW2ldID09IDBcbiAgICB9KTtcbiAgICBqc29uLmhvbW9BbHRFeHAgPSBqc29uLmV4cHJlc3Npb25fdmFsdWVzLmZpbHRlcigoZCxpKSA9PiB7XG4gICAgICAgIHJldHVybiBqc29uLmdlbm90eXBlc1tpXSA9PSAyXG4gICAgfSk7XG4gICAganNvbi5oZXRlcm9FeHAgPSBqc29uLmV4cHJlc3Npb25fdmFsdWVzLmZpbHRlcigoZCxpKSA9PiB7XG4gICAgICAgIHJldHVybiBqc29uLmdlbm90eXBlc1tpXSA9PSAxXG4gICAgfSk7XG5cbiAgICAvLyBnZW5lcmF0ZSBnZW5vdHlwZSB0ZXh0IGxhYmVsc1xuICAgIGxldCByZWYgPSBqc29uLnZhcmlhbnRJZC5zcGxpdCgvXy8pWzJdO1xuICAgIGxldCBhbHQgPSBqc29uLnZhcmlhbnRJZC5zcGxpdCgvXy8pWzNdO1xuICAgIGpzb24uaGV0ID0gcmVmICsgYWx0O1xuICAgIGpzb24ucmVmID0gcmVmICsgcmVmO1xuICAgIGpzb24uYWx0ID0gYWx0ICsgYWx0O1xuXG4gICAgcmV0dXJuIGpzb247XG59XG5cblxuLyoqXG4gKiBQYXJzZSB0aGUgc2luZ2xlIHRpc3N1ZSBlcXRscyBmcm9tIEdURXggd2ViIHNlcnZpY2VcbiAqIEBwYXJhbSBkYXRhIHtKc29ufVxuICogQHBhcmFtIHRpc3N1ZVNpdGVUYWJsZSB7SnNvbn0gb3B0aW9uYWwgZm9yIG1hcHBpbmcgdGlzc3VlU2l0ZURldGFpbElkIHRvIHRpc3N1ZVNpdGVEZXRhaWwsIGEgZGljdGlvbmFyeSBvZiB0aXNzdWVTaXRlIG9iamVjdHMgKHdpdGggdGhlIGF0dHIgdGlzc3VlU2l0ZURldGFpbCkgaW5kZXhlZCBieSB0aXNzdWVTaXRlRGV0YWlsSWQsIGFuZFxuICogQHJldHVybnMge0xpc3R9IG9mIGVxdGxzIHdpdGggYXR0cmlidXRlcyByZXF1aXJlZCBmb3IgR0VWIHJlbmRlcmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTaW5nbGVUaXNzdWVFcXRscyhkYXRhLCB0aXNzdWVTaXRlVGFibGUgPSB1bmRlZmluZWQpe1xuICAgIGNvbnN0IGF0dHIgPSAnc2luZ2xlVGlzc3VlRXF0bCc7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93IFwiUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG5vdCBmb3VuZDogXCIgKyBhdHRyO1xuICAgIFsndmFyaWFudElkJywgJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICduZXMnLCAncFZhbHVlJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgaWYgKCFkYXRhW2F0dHJdWzBdLmhhc093blByb3BlcnR5KGspKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIH0pO1xuXG5cbiAgICByZXR1cm4gZGF0YVthdHRyXS5tYXAoKGQpPT57XG4gICAgICAgIGQueCA9IGQudmFyaWFudElkO1xuICAgICAgICBkLmRpc3BsYXlYID0gZ2VuZXJhdGVTaG9ydFZhcmlhbnRJZChkLnZhcmlhbnRJZCk7XG4gICAgICAgIGQueSA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBpZiAodGlzc3VlU2l0ZVRhYmxlKSBkLmRpc3BsYXlZID0gdGlzc3VlU2l0ZVRhYmxlW2QudGlzc3VlU2l0ZURldGFpbElkXS50aXNzdWVTaXRlRGV0YWlsO1xuICAgICAgICBkLnZhbHVlID0gZC5uZXM7XG4gICAgICAgIGQuZGlzcGxheVZhbHVlID0gZC5uZXMudG9QcmVjaXNpb24oMyk7XG4gICAgICAgIGQuciA9IC1NYXRoLmxvZzEwKGQucFZhbHVlKTsgLy8gc2V0IHIgdG8gYmUgdGhlIC1sb2cxMChwLXZhbHVlKVxuICAgICAgICBkLnJEaXNwbGF5VmFsdWUgPSBwYXJzZUZsb2F0KGQucFZhbHVlLnRvRXhwb25lbnRpYWwoKSkudG9QcmVjaXNpb24oMyk7XG4gICAgICAgIHJldHVybiBkO1xuICAgIH0pXG59XG5cbi8qKlxuICogUGFyc2UgdGhlIGdlbmVzIGZyb20gR1RFeCB3ZWIgc2VydmljZVxuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiBAcmV0dXJucyB7TGlzdH0gb2YgZ2VuZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlR2VuZXMoZGF0YSwgc2luZ2xlPWZhbHNlLCBnZW5lSWQ9bnVsbCl7XG4gICAgY29uc3QgYXR0ciA9ICdnZW5lJztcbiAgICBpZighZGF0YS5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3cgXCJQYXJzaW5nIEVycm9yOiBhdHRyaWJ1dGUgZ2VuZSBkb2Vzbid0IGV4aXN0LlwiO1xuICAgIGlmIChkYXRhLmdlbmUubGVuZ3RoPT0wKXtcbiAgICAgICAgIGFsZXJ0KFwiTm8gZ2VuZSBpcyBmb3VuZFwiKTtcbiAgICAgICAgIHRocm93IFwiRmF0YWwgRXJyb3I6IGdlbmUocykgbm90IGZvdW5kXCI7XG4gICAgIH1cbiAgICBpZiAoc2luZ2xlKXtcbiAgICAgICAgaWYgKGdlbmVJZCA9PT0gbnVsbCkgdGhyb3cgXCJQbGVhc2UgcHJvdmlkZSBhIGdlbmUgSUQgZm9yIHNlYXJjaCByZXN1bHRzIHZhbGlkYXRpb25cIjtcbiAgICAgICAgaWYgKGRhdGEuZ2VuZS5sZW5ndGg+MSkgeyAvLyB3aGVuIGEgc2luZ2xlIGdlbmUgSUQgaGFzIG11bHRpcGxlIG1hdGNoZXNcbiAgICAgICAgICAgICBsZXQgZmlsdGVyZWQgPSBkYXRhLmdlbmUuZmlsdGVyKChnKT0+e1xuICAgICAgICAgICAgICAgICByZXR1cm4gZy5nZW5lU3ltYm9sVXBwZXI9PWdlbmVJZC50b1VwcGVyQ2FzZSgpIHx8IGcuZ2VuY29kZUlkID09IGdlbmVJZC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgaWYgKGZpbHRlcmVkLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgYWxlcnQoXCJGYXRhbCBFcnJvcjogaW5wdXQgZ2VuZSBJRCBpcyBub3QgdW5pcXVlLlwiKTtcbiAgICAgICAgICAgICAgICAgdGhyb3cgXCJGYXRhbCBFcnJvcjogaW5wdXQgZ2VuZSBJRCBpcyBub3QgdW5pcXVlLlwiO1xuICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlcmVkLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgICAgICAgICAgYWxlcnQoXCJObyBnZW5lIGlzIGZvdW5kIHdpdGggXCIgKyBnZW5lSWQpO1xuICAgICAgICAgICAgICAgICB0aHJvdyBcIkZhdGFsIEVycm9yOiBnZW5lIG5vdCBmb3VuZFwiO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICBkYXRhLmdlbmUgPSBmaWx0ZXJlZFxuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBkYXRhLmdlbmVbMF1cbiAgICB9XG4gICAgZWxzZSByZXR1cm4gZGF0YVthdHRyXTtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgdGlzc3Vlc1xuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiBAcmV0dXJucyB7TGlzdH0gb2YgdGlzc3Vlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUaXNzdWVzKGpzb24pe1xuICAgIGNvbnN0IGF0dHIgPSAndGlzc3VlSW5mbyc7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHIgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgY29uc3QgdGlzc3VlcyA9IGpzb25bYXR0cl07XG5cbiAgICAvLyBzYW5pdHkgY2hlY2tcbiAgICBbJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICd0aXNzdWVTaXRlRGV0YWlsJywgJ2NvbG9ySGV4J10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKCF0aXNzdWVzWzBdLmhhc093blByb3BlcnR5KGQpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyIGlzIG1pc3Npbmc6ICcgKyBkO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRpc3N1ZXM7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHRpc3N1ZXMgYW5kIHJldHVybiBhIGxvb2t1cCB0YWJsZSBpbmRleGVkIGJ5IHRpc3N1ZVNpdGVEZXRhaWxJZFxuICogQHBhcmFtIGpzb24gZnJvbSB3ZWIgc2VydmljZSB0aXNzdWVTaXRlRGV0YWlsXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVGlzc3VlRGljdChqc29uKXtcbiAgICBjb25zdCBhdHRyID0gJ3Rpc3N1ZUluZm8nO1xuICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIGNvbnN0IHRpc3N1ZXMgPSBqc29uW2F0dHJdO1xuICAgIC8vIHNhbml0eSBjaGVja1xuICAgIFsndGlzc3VlU2l0ZURldGFpbElkJywgJ3Rpc3N1ZVNpdGVEZXRhaWwnLCAnY29sb3JIZXgnXS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBpZiAoIXRpc3N1ZXNbMF0uaGFzT3duUHJvcGVydHkoZCkpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHIgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRpc3N1ZXMucmVkdWNlKChhcnIsIGQpPT57YXJyW2QudGlzc3VlU2l0ZURldGFpbElkXSA9IGQ7IHJldHVybiBhcnI7fSx7fSk7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHRpc3N1ZXMgc2FtcGxlIGNvdW50cywgR1RFeCByZWxlYXNlIHNwZWNpZmljXG4gKiBAcGFyYW0ganNvbiBmcm9tIHdlYiBzZXJ2aWNlIHRpc3N1ZUluZm9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVGlzc3VlU2FtcGxlQ291bnRzKGpzb24pe1xuICAgIGNvbnN0IGF0dHIgPSAndGlzc3VlSW5mbyc7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHIgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgY29uc3QgdGlzc3VlcyA9IGpzb25bYXR0cl07XG5cbiAgICAvLyBjaGVjayBqc29uIHN0cnVjdHVyZVxuICAgIGNvbnN0IHRpc3N1ZSA9IHRpc3N1ZXNbMF07XG4gICAgaWYgKCF0aXNzdWUuaGFzT3duUHJvcGVydHkoJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgYXR0ciBpcyBtaXNzaW5nOiB0aXNzdWVTaXRlRGV0YWlsSWQnO1xuICAgIGlmICghdGlzc3VlLmhhc093blByb3BlcnR5KCdybmFTZXFBbmRHZW5vdHlwZVNhbXBsZUNvdW50JykpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBhdHRyIGlzIG1pc3Npbmc6IHJuYVNlcUFuZEdlbm90eXBlU2FtcGxlQ291bnQnO1xuICAgIHJldHVybiB0aXNzdWVzO1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSB0aXNzdWUgZ3JvdXBzXG4gKiBAcGFyYW0gZGF0YSB7SnNvbn1cbiAqIEBwYXJhbSBmb3JFcXRsIHtCb29sZWFufSByZXN0cmljdCB0byBlcXRsIHRpc3N1ZXNcbiAqIEByZXR1cm5zIHtEaWN0aW9uYXJ5fSBvZiBsaXN0cyBvZiB0aXNzdWVzIGluZGV4ZWQgYnkgdGhlIHRpc3N1ZSBncm91cCBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRpc3N1ZVNpdGVzKGRhdGEsIGZvckVxdGw9ZmFsc2Upe1xuICAgIC8vIHRoZSBsaXN0IG9mIGludmFsaWQgZXF0bCB0aXNzdWVzIGR1ZSB0byBzYW1wbGUgc2l6ZSA8IDcwXG4gICAgLy8gYSBoYXJkLWNvZGVkIGxpc3QgYmVjYXVzZSB0aGUgc2FtcGxlIHNpemUgaXMgbm90IGVhc3kgdG8gcmV0cmlldmVcbiAgICBjb25zdCBpbnZhbGlkVGlzc3VlcyA9IFsnQmxhZGRlcicsICdDZXJ2aXhfRWN0b2NlcnZpeCcsICdDZXJ2aXhfRW5kb2NlcnZpeCcsICdGYWxsb3BpYW5fVHViZScsICdLaWRuZXlfQ29ydGV4J107XG5cbiAgICBjb25zdCBhdHRyID0gJ3Rpc3N1ZUluZm8nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgbGV0IHRpc3N1ZXMgPSBkYXRhW2F0dHJdO1xuICAgIFsndGlzc3VlU2l0ZScsJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsJ3Rpc3N1ZVNpdGVEZXRhaWwnXS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBpZiAoIXRpc3N1ZXNbMF0uaGFzT3duUHJvcGVydHkoZCkpIHRocm93IGBwYXJzZVRpc3N1ZVNpdGVzIGF0dHIgZXJyb3IuICR7ZH0gaXMgbm90IGZvdW5kYDtcbiAgICB9KTtcbiAgICB0aXNzdWVzID0gZm9yRXF0bD09ZmFsc2U/dGlzc3Vlczp0aXNzdWVzLmZpbHRlcigoZCk9PntyZXR1cm4gIWludmFsaWRUaXNzdWVzLmluY2x1ZGVzKGQudGlzc3VlU2l0ZURldGFpbElkKX0pOyAvLyBhbiBhcnJheSBvZiB0aXNzdWVTaXRlRGV0YWlsSWQgb2JqZWN0c1xuXG4gICAgLy8gYnVpbGQgdGhlIHRpc3N1ZUdyb3VwcyBsb29rdXAgZGljdGlvbmFyeSBpbmRleGVkIGJ5IHRoZSB0aXNzdWUgZ3JvdXAgbmFtZSAoaS5lLiB0aGUgdGlzc3VlIG1haW4gc2l0ZSBuYW1lKVxuICAgIGxldCB0aXNzdWVHcm91cHMgPSB0aXNzdWVzLnJlZHVjZSgoYXJyLCBkKT0+e1xuICAgICAgICBsZXQgZ3JvdXBOYW1lID0gZC50aXNzdWVTaXRlO1xuICAgICAgICBsZXQgc2l0ZSA9IHtcbiAgICAgICAgICAgIGlkOiBkLnRpc3N1ZVNpdGVEZXRhaWxJZCxcbiAgICAgICAgICAgIG5hbWU6IGQudGlzc3VlU2l0ZURldGFpbFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWFyci5oYXNPd25Qcm9wZXJ0eShncm91cE5hbWUpKSBhcnJbZ3JvdXBOYW1lXSA9IFtdOyAvLyBpbml0aWF0ZSBhbiBhcnJheVxuICAgICAgICBhcnJbZ3JvdXBOYW1lXS5wdXNoKHNpdGUpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sIHt9KTtcblxuICAgIC8vIG1vZGlmeSB0aGUgdGlzc3VlIGdyb3VwcyB0aGF0IGhhdmUgb25seSBhIHNpbmdsZSBzaXRlXG4gICAgLy8gYnkgcmVwbGFjaW5nIHRoZSBncm91cCdzIG5hbWUgd2l0aCB0aGUgc2luZ2xlIHNpdGUncyBuYW1lIC0tIHJlc3VsdGluZyBhIGJldHRlciBBbHBoYWJldGljYWwgb3JkZXIgb2YgdGhlIHRpc3N1ZSBncm91cHNcblxuICAgIE9iamVjdC5rZXlzKHRpc3N1ZUdyb3VwcykuZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKHRpc3N1ZUdyb3Vwc1tkXS5sZW5ndGggPT0gMSl7IC8vIGEgc2luZ2xlLXNpdGUgZ3JvdXBcbiAgICAgICAgICAgIGxldCBzaXRlID0gdGlzc3VlR3JvdXBzW2RdWzBdOyAvLyB0aGUgc2luZ2xlIHNpdGVcbiAgICAgICAgICAgIGRlbGV0ZSB0aXNzdWVHcm91cHNbZF07IC8vIHJlbW92ZSB0aGUgb2xkIGdyb3VwIGluIHRoZSBkaWN0aW9uYXJ5XG4gICAgICAgICAgICB0aXNzdWVHcm91cHNbc2l0ZS5uYW1lXSA9IFtzaXRlXTsgLy8gY3JlYXRlIGEgbmV3IGdyb3VwIHdpdGggdGhlIHNpdGUncyBuYW1lXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGlzc3VlR3JvdXBzO1xufVxuXG4vKipcbiAqIHBhcnNlIHRoZSBleG9uc1xuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiBAcGFyYW0gZnVsbCB7Qm9vbGVhbn1cbiAqIEByZXR1cm5zIHtMaXN0fSBvZiBleG9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNb2RlbEV4b25zKGpzb24pe1xuICAgIGNvbnN0IGF0dHIgPSAnY29sbGFwc2VkR2VuZU1vZGVsRXhvbic7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpe1xuICAgICAgICBjb25zb2xlLmVycm9yKGpzb24pO1xuICAgICAgICB0aHJvdyAnUGFyc2luZyBFcnJvcjogUmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgfVxuICAgIC8vIHNhbml0eSBjaGVja1xuICAgIFsnc3RhcnQnLCAnZW5kJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKCFqc29uW2F0dHJdWzBdLmhhc093blByb3BlcnR5KGQpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogUmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIGpzb25bYXR0cl0ubWFwKChkKT0+e1xuICAgICAgICBkLmNocm9tU3RhcnQgPSBkLnN0YXJ0O1xuICAgICAgICBkLmNocm9tRW5kID0gZC5lbmQ7XG4gICAgICAgIHJldHVybiBkO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIHBhcnNlIHRoZSBqdW5jdGlvbnNcbiAqIEBwYXJhbSBkYXRhXG4gKiBAcmV0dXJucyB7TGlzdH0gb2YganVuY3Rpb25zXG4gKiAvLyBqdW5jdGlvbiBhbm5vdGF0aW9ucyBhcmUgbm90IHN0b3JlZCBpbiBNb25nb1xuICAgIC8vIHNvIGhlcmUgd2UgdXNlIHRoZSBqdW5jdGlvbiBleHByZXNzaW9uIHdlYiBzZXJ2aWNlIHRvIHBhcnNlIHRoZSBqdW5jdGlvbiBJRCBmb3IgaXRzIGdlbm9taWMgbG9jYXRpb25cbiAgICAvLyBhc3N1bWluZyB0aGF0IGVhY2ggdGlzc3VlIGhhcyB0aGUgc2FtZSBqdW5jdGlvbnMsXG4gICAgLy8gdG8gZ3JhYiBhbGwgdGhlIGtub3duIGp1bmN0aW9ucyBvZiBhIGdlbmUsIHdlIG9ubHkgbmVlZCB0byBxdWVyeSBvbmUgdGlzc3VlXG4gICAgLy8gaGVyZSB3ZSBhcmJpdHJhcmlseSBwaWNrIExpdmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKdW5jdGlvbnMoanNvbil7XG5cbiAgICBjb25zdCBhdHRyID0gJ21lZGlhbkp1bmN0aW9uRXhwcmVzc2lvbic7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiBwYXJzZUp1bmN0aW9ucyBpbnB1dCBlcnJvci4gJyArIGF0dHI7XG5cbiAgICAvLyBjaGVjayByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZXNcbiAgICBbJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICdqdW5jdGlvbklkJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgLy8gdXNlIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBqc29uIG9iamVjdHMgYXMgYSB0ZXN0IGNhc2VcbiAgICAgICAgaWYoIWpzb25bYXR0cl1bMF0uaGFzT3duUHJvcGVydHkoZCkpe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihqc29uW2F0dHJdWzBdKTtcbiAgICAgICAgICAgIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqdW5jdGlvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ganNvblthdHRyXS5maWx0ZXIoKGQpPT5kLnRpc3N1ZVNpdGVEZXRhaWxJZD09J0xpdmVyJylcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvcyA9IGQuanVuY3Rpb25JZC5zcGxpdCgnXycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbTogcG9zWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tU3RhcnQ6IHBvc1sxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbUVuZDogcG9zWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1bmN0aW9uSWQ6IGQuanVuY3Rpb25JZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbn1cblxuLyoqXG4gKiBwYXJzZSB0cmFuc2NyaXB0IGlzb2Zvcm1zIGZyb20gdGhlIEdURXggd2ViIHNlcnZpY2U6ICdyZWZlcmVuY2UvdHJhbnNjcmlwdD9yZWxlYXNlPXY3JmdlbmNvZGVfaWQ9J1xuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiByZXR1cm5zIGEgZGljdGlvbmFyeSBvZiB0cmFuc2NyaXB0IGV4b24gb2JqZWN0IGxpc3RzIGluZGV4ZWQgYnkgdHJhbnNjcmlwdCBJRHMgLS0gRU5TVCBJRHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRXhvbnMoanNvbil7XG4gICAgY29uc3QgYXR0ciA9ICdleG9uJztcbiAgICBpZighanNvbi5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6IGV4b24nO1xuICAgIHJldHVybiBqc29uW2F0dHJdLnJlZHVjZSgoYSwgZCk9PntcbiAgICAgICAgLy8gY2hlY2sgcmVxdWlyZWQgYXR0cmlidXRlc1xuICAgICAgICBbJ3RyYW5zY3JpcHRJZCcsICdjaHJvbW9zb21lJywgJ3N0YXJ0JywgJ2VuZCcsICdleG9uTnVtYmVyJywgJ2V4b25JZCddLmZvckVhY2goKGspPT57XG4gICAgICAgICAgICBpZighZC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBrXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYVtkLnRyYW5zY3JpcHRJZF0gPT09IHVuZGVmaW5lZCkgYVtkLnRyYW5zY3JpcHRJZF0gPSBbXTtcbiAgICAgICAgZC5jaHJvbSA9IGQuY2hyb21vc29tZTtcbiAgICAgICAgZC5jaHJvbVN0YXJ0ID0gZC5zdGFydDtcbiAgICAgICAgZC5jaHJvbUVuZCA9IGQuZW5kO1xuICAgICAgICBhW2QudHJhbnNjcmlwdElkXS5wdXNoKGQpO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9LCB7fSk7XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBpc29mb3JtcyBmcm9tIHRoZSBHVEV4IHdlYiBzZXJ2aWNlOiAncmVmZXJlbmNlL3RyYW5zY3JpcHQ/cmVsZWFzZT12NyZnZW5jb2RlX2lkPSdcbiAqIEBwYXJhbSBkYXRhIHtKc29ufSBmcm9tIHdlYiBzZXJ2aWNlIGV4b25cbiAqIHJldHVybnMgYSBsaXN0IG9mIGFsbCBFeG9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VFeG9uc1RvTGlzdChqc29uKXtcbiAgICBjb25zdCBhdHRyID0gJ2V4b24nO1xuICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogZXhvbic7XG4gICAgcmV0dXJuIGpzb25bYXR0cl07XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBpc29mb3Jtc1xuICogQHBhcmFtIGRhdGEge0pzb259IGZyb20gR1RFeCB3ZWIgc2VydmljZSAncmVmZXJlbmNlL3RyYW5zY3JpcHQ/cmVsZWFzZT12NyZnZW5jb2RlX2lkPSdcbiAqIHJldHVybnMgYSBsaXN0IG9mIGlzb2Zvcm0gb2JqZWN0cyBzb3J0ZWQgYnkgbGVuZ3RoIGluIGRlc2NlbmRpbmcgb3JkZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVHJhbnNjcmlwdHMoanNvbil7XG4gICAgY29uc3QgYXR0ciA9ICd0cmFuc2NyaXB0JztcbiAgICBpZighanNvbi5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3coJ3BhcnNlSXNvZm9ybXMgaW5wdXQgZXJyb3InKTtcblxuICAgIC8vIGNoZWNrIHJlcXVpcmVkIGF0dHJpYnV0ZXMsIHVzZSB0aGUgZmlyc3QgdHJhbnNjcmlwdCBhcyB0aGUgdGVzdCBjYXNlXG4gICAgWyd0cmFuc2NyaXB0SWQnLCAnc3RhcnQnLCAnZW5kJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgaWYoIWpzb25bYXR0cl1bMF0uaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGpzb25bYXR0cl0uc29ydCgoYSwgYik9PntcbiAgICAgICAgY29uc3QgbDEgPSBNYXRoLmFicyhhLmVuZCAtIGEuc3RhcnQpICsgMTtcbiAgICAgICAgY29uc3QgbDIgPSBNYXRoLmFicyhiLmVuZCAtIGIuc3RhcnQpICsgMTtcbiAgICAgICAgcmV0dXJuIC0obDEtbDIpOyAvLyBzb3J0IGJ5IGlzb2Zvcm0gbGVuZ3RoIGluIGRlc2NlbmRpbmcgb3JkZXJcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBwYXJzZSBmaW5hbCAobWFza2VkKSBnZW5lIG1vZGVsIGV4b24gZXhwcmVzc2lvblxuICogZXhwcmVzc2lvbiBpcyBub3JtYWxpemVkIHRvIHJlYWRzIHBlciBrYlxuICogQHBhcmFtIGRhdGEge0pTT059IG9mIGV4b24gZXhwcmVzc2lvbiB3ZWIgc2VydmljZVxuICogQHBhcmFtIGV4b25zIHtMaXN0fSBvZiBleG9ucyB3aXRoIHBvc2l0aW9uc1xuICogQHJldHVybnMge0xpc3R9IG9mIGV4b24gb2JqZWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VFeG9uRXhwcmVzc2lvbihkYXRhLCBleG9ucyl7XG4gICAgY29uc3QgZXhvbkRpY3QgPSBleG9ucy5yZWR1Y2UoKGEsIGQpPT57YVtkLmV4b25JZF0gPSBkOyByZXR1cm4gYTt9LCB7fSk7XG4gICAgY29uc3QgYXR0ciA9ICdtZWRpYW5FeG9uRXhwcmVzc2lvbic7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93KCdwYXJzZUV4b25FeHByZXNzaW9uIGlucHV0IGVycm9yJyk7XG5cbiAgICBjb25zdCBleG9uT2JqZWN0cyA9IGRhdGFbYXR0cl07XG4gICAgLy8gZXJyb3ItY2hlY2tpbmdcbiAgICBbJ21lZGlhbicsICdleG9uSWQnLCAndGlzc3VlU2l0ZURldGFpbElkJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKCFleG9uT2JqZWN0c1swXS5oYXNPd25Qcm9wZXJ0eShkKSkgdGhyb3cgJ0ZhdGFsIEVycm9yOiBwYXJzZUV4b25FeHByZXNzaW9uIGF0dHIgbm90IGZvdW5kOiAnICsgZDtcbiAgICB9KTtcbiAgICAvLyBwYXJzZSBHVEV4IG1lZGlhbiBleG9uIGNvdW50c1xuICAgIGV4b25PYmplY3RzLmZvckVhY2goKGQpID0+IHtcbiAgICAgICAgY29uc3QgZXhvbiA9IGV4b25EaWN0W2QuZXhvbklkXTsgLy8gZm9yIHJldHJpZXZpbmcgZXhvbiBwb3NpdGlvbnNcbiAgICAgICAgLy8gZXJyb3ItY2hlY2tpbmdcbiAgICAgICAgWydlbmQnLCAnc3RhcnQnXS5mb3JFYWNoKChwKT0+e1xuICAgICAgICAgICAgaWYgKCFleG9uLmhhc093blByb3BlcnR5KHApKSB0aHJvdyAnRmF0YWwgRXJyb3I6IHBhcnNlRXhvbkV4cHJlc3Npb24gcG9zaXRpb24gYXR0ciBub3QgZm91bmQ6ICcgKyBwO1xuICAgICAgICB9KTtcbiAgICAgICAgZC5sID0gZXhvbi5lbmQgLSBleG9uLnN0YXJ0ICsgMTtcbiAgICAgICAgZC52YWx1ZSA9IE51bWJlcihkLm1lZGlhbikvZC5sO1xuICAgICAgICBkLmRpc3BsYXlWYWx1ZSA9IE51bWJlcihkLm1lZGlhbikvZC5sO1xuICAgICAgICBkLnggPSBkLmV4b25JZDtcbiAgICAgICAgZC55ID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQuaWQgPSBkLmdlbmNvZGVJZDtcbiAgICAgICAgZC5jaHJvbVN0YXJ0ID0gZXhvbi5zdGFydDtcbiAgICAgICAgZC5jaHJvbUVuZCA9IGV4b24uZW5kO1xuICAgICAgICBkLnVuaXQgPSAnbWVkaWFuICcgKyBkLnVuaXQgKyAnIHBlciBiYXNlJztcbiAgICAgICAgZC50aXNzdWVJZCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgIH0pO1xuICAgIHJldHVybiBleG9uT2JqZWN0cy5zb3J0KChhLGIpPT57XG4gICAgICAgIGlmIChhLmNocm9tU3RhcnQ8Yi5jaHJvbVN0YXJ0KSByZXR1cm4gLTE7XG4gICAgICAgIGlmIChhLmNocm9tU3RhcnQ+Yi5jaHJvbVN0YXJ0KSByZXR1cm4gMTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSk7IC8vIHNvcnQgYnkgZ2Vub21pYyBsb2NhdGlvbiBpbiBhc2NlbmRpbmcgb3JkZXJcbn1cblxuLyoqXG4gKiBQYXJzZSBqdW5jdGlvbiBtZWRpYW4gcmVhZCBjb3VudCBkYXRhXG4gKiBAcGFyYW0gZGF0YSB7SlNPTn0gb2YgdGhlIGp1bmN0aW9uIGV4cHJlc3Npb24gd2ViIHNlcnZpY2VcbiAqIEByZXR1cm5zIHtMaXN0fSBvZiBqdW5jdGlvbiBvYmplY3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUp1bmN0aW9uRXhwcmVzc2lvbihkYXRhKXtcbiAgICBjb25zdCBhdHRyID0gJ21lZGlhbkp1bmN0aW9uRXhwcmVzc2lvbic7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93KCdwYXJzZUp1bmN0aW9uRXhwcmVzc2lvbiBpbnB1dCBlcnJvcicpO1xuXG4gICAgY29uc3QganVuY3Rpb25zID0gZGF0YVthdHRyXTtcblxuICAgIC8vIGVycm9yLWNoZWNraW5nXG4gICAgaWYgKGp1bmN0aW9ucyA9PT0gdW5kZWZpbmVkIHx8IGp1bmN0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ05vIGp1bmN0aW9uIGRhdGEgZm91bmQnKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cblxuICAgIC8vIHBhcnNlIEdURXggbWVkaWFuIGp1bmN0aW9uIHJlYWQgY291bnRzXG4gICAganVuY3Rpb25zLmZvckVhY2goKGQpID0+IHtcbiAgICAgICAgWyd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnanVuY3Rpb25JZCcsICdtZWRpYW4nLCAnZ2VuY29kZUlkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmICghZC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1BhcnNpbmdyIEVycm9yOiBwYXJzZUp1bmN0aW9uRXhwcmVzc2lvbiBhdHRyIG5vdCBmb3VuZDogJyArIGs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbWVkaWFuID0gZC5tZWRpYW47XG4gICAgICAgIGxldCB0aXNzdWVJZCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBkLnRpc3N1ZUlkID0gdGlzc3VlSWQ7XG4gICAgICAgIGQuaWQgPSBkLmdlbmNvZGVJZDtcbiAgICAgICAgZC54ID0gZC5qdW5jdGlvbklkO1xuICAgICAgICBkLnkgPSB0aXNzdWVJZDtcbiAgICAgICAgZC52YWx1ZSA9IE51bWJlcihtZWRpYW4pO1xuICAgICAgICBkLmRpc3BsYXlWYWx1ZSA9IE51bWJlcihtZWRpYW4pO1xuICAgIH0pO1xuXG4gICAgLy8gc29ydCBieSBnZW5vbWljIGxvY2F0aW9uIGluIGFzY2VuZGluZyBvcmRlclxuICAgIHJldHVybiBqdW5jdGlvbnMuc29ydCgoYSxiKT0+e1xuICAgICAgICBpZiAoYS5qdW5jdGlvbklkPmIuanVuY3Rpb25JZCkgcmV0dXJuIDE7XG4gICAgICAgIGVsc2UgaWYgKGEuanVuY3Rpb25JZDxiLmp1bmN0aW9uSWQpIHJldHVybiAtMTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSk7XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBleHByZXNzaW9uXG4gKiBAcGFyYW0gZGF0YVxuICogQHJldHVybnMgeyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRyYW5zY3JpcHRFeHByZXNzaW9uKGRhdGEpe1xuICAgIGNvbnN0IGF0dHIgPSAnbWVkaWFuVHJhbnNjcmlwdEV4cHJlc3Npb24nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdygnUGFyc2luZyBFcnJvcjogcGFyc2VUcmFuc2NyaXB0RXhwcmVzc2lvbiBpbnB1dCBlcnJvcicpO1xuICAgIC8vIHBhcnNlIEdURXggaXNvZm9ybSBtZWRpYW4gVFBNXG4gICAgZGF0YVthdHRyXS5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgIFsnbWVkaWFuJywgJ3RyYW5zY3JpcHRJZCcsICd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnZ2VuY29kZUlkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmKCFkLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihkKTtcbiAgICAgICAgICAgICAgICB0aHJvdygnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgdHJhbnNjaXB0IGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsgayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkLnZhbHVlID0gTnVtYmVyKGQubWVkaWFuKTtcbiAgICAgICAgZC5kaXNwbGF5VmFsdWUgPSBOdW1iZXIoZC5tZWRpYW4pO1xuICAgICAgICBkLnggPSBkLnRyYW5zY3JpcHRJZDtcbiAgICAgICAgZC55ID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQuaWQgPSBkLmdlbmNvZGVJZDtcbiAgICAgICAgZC50aXNzdWVJZCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRhdGFbYXR0cl07XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBleHByZXNzaW9uLCBhbmQgdHJhbnNwb3NlIHRoZSBtYXRyaXhcbiAqIEBwYXJhbSBkYXRhXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVHJhbnNjcmlwdEV4cHJlc3Npb25UcmFuc3Bvc2UoZGF0YSl7XG4gICAgY29uc3QgYXR0ciA9ICdtZWRpYW5UcmFuc2NyaXB0RXhwcmVzc2lvbic7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihkYXRhKTtcbiAgICAgICAgdGhyb3coJ1BhcnNpbmcgRXJyb3I6IHBhcnNlVHJhbnNjcmlwdEV4cHJlc3Npb25UcmFuc3Bvc2UgaW5wdXQgZXJyb3IuJyk7XG4gICAgfVxuICAgIC8vIHBhcnNlIEdURXggaXNvZm9ybSBtZWRpYW4gVFBNXG4gICAgZGF0YVthdHRyXS5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgIFsnbWVkaWFuJywgJ3RyYW5zY3JpcHRJZCcsICd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnZ2VuY29kZUlkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmKCFkLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihkKTtcbiAgICAgICAgICAgICAgICB0aHJvdygnUGFyc2luZyBFcnJvcjogUmVxdWlyZWQgdHJhbnNjcmlwdCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbWVkaWFuID0gZC5tZWRpYW47XG4gICAgICAgIGNvbnN0IHRpc3N1ZUlkID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQudmFsdWUgPSBOdW1iZXIobWVkaWFuKTtcbiAgICAgICAgZC5kaXNwbGF5VmFsdWUgPSBOdW1iZXIobWVkaWFuKTtcbiAgICAgICAgZC55ID0gZC50cmFuc2NyaXB0SWQ7XG4gICAgICAgIGQueCA9IHRpc3N1ZUlkO1xuICAgICAgICBkLmlkID0gZC5nZW5jb2RlSWQ7XG4gICAgICAgIGQudGlzc3VlSWQgPSB0aXNzdWVJZDtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhW2F0dHJdO1xufVxuXG4vKipcbiAqIHBhcnNlIG1lZGlhbiBnZW5lIGV4cHJlc3Npb25cbiAqIEBwYXJhbSBkYXRhIHtKc29ufSB3aXRoIGF0dHIgbWVkaWFuR2VuZUV4cHJlc3Npb25cbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNZWRpYW5FeHByZXNzaW9uKGRhdGEpe1xuICAgIGNvbnN0IGF0dHIgPSAnbWVkaWFuR2VuZUV4cHJlc3Npb24nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgY29uc3QgYWRqdXN0ID0gMTtcbiAgICAvLyBwYXJzZSBHVEV4IG1lZGlhbiBnZW5lIGV4cHJlc3Npb25cbiAgICAvLyBlcnJvci1jaGVja2luZyB0aGUgcmVxdWlyZWQgYXR0cmlidXRlczpcbiAgICBpZiAoZGF0YVthdHRyXS5sZW5ndGggPT0gMCkgdGhyb3cgJ3BhcnNlTWVkaWFuRXhwcmVzc2lvbiBmaW5kcyBubyBkYXRhLic7XG4gICAgWydtZWRpYW4nLCAndGlzc3VlU2l0ZURldGFpbElkJywgJ2dlbmNvZGVJZCddLmZvckVhY2goKGQpPT57XG4gICAgICAgIGlmICghZGF0YVthdHRyXVswXS5oYXNPd25Qcm9wZXJ0eShkKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihkYXRhW2F0dHJdWzBdKTtcbiAgICAgICAgICAgIHRocm93IGBQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5ncDogJHtkfWA7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0cyA9IGRhdGFbYXR0cl07XG4gICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uKGQpe1xuICAgICAgICBkLnZhbHVlID0gTnVtYmVyKGQubWVkaWFuKTtcbiAgICAgICAgZC54ID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQueSA9IGQuZ2VuY29kZUlkO1xuICAgICAgICBkLmRpc3BsYXlWYWx1ZSA9IE51bWJlcihkLm1lZGlhbik7XG4gICAgICAgIGQuaWQgPSBkLmdlbmNvZGVJZDtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHRzO1xufVxuXG4vKipcbiAqIHBhcnNlIHRoZSBleHByZXNzaW9uIGRhdGEgb2YgYSBnZW5lIGZvciBhIGdyb3VwZWQgdmlvbGluIHBsb3RcbiAqIEBwYXJhbSBkYXRhIHtKU09OfSBmcm9tIEdURXggZ2VuZSBleHByZXNzaW9uIHdlYiBzZXJ2aWNlXG4gKiBAcGFyYW0gY29sb3JzIHtEaWN0aW9uYXJ5fSB0aGUgdmlvbGluIGNvbG9yIGZvciBnZW5lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VHZW5lRXhwcmVzc2lvbkZvclZpb2xpbihkYXRhLCB1c2VMb2c9dHJ1ZSwgY29sb3JzPXVuZGVmaW5lZCl7XG4gICAgY29uc3QgYXR0ciA9ICdnZW5lRXhwcmVzc2lvbic7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsgYXR0cjtcbiAgICBkYXRhW2F0dHJdLmZvckVhY2goKGQpPT57XG4gICAgICAgIFsnZGF0YScsICd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnZ2VuZVN5bWJvbCcsICdnZW5jb2RlSWQnXS5mb3JFYWNoKChrKT0+e1xuICAgICAgICAgICAgaWYoIWQuaGFzT3duUHJvcGVydHkoaykpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZC52YWx1ZXMgPSB1c2VMb2c/ZC5kYXRhLm1hcCgoZGQpPT57cmV0dXJuIE1hdGgubG9nMTAoK2RkKzEpfSk6ZC5kYXRhO1xuICAgICAgICBkLmdyb3VwID0gZC50aXNzdWVTaXRlRGV0YWlsSWQ7XG4gICAgICAgIGQubGFiZWwgPSBkLmdlbmVTeW1ib2w7XG4gICAgICAgIGQuY29sb3IgPSBjb2xvcnM9PT11bmRlZmluZWQ/JyM5MGMxYzEnOmNvbG9yc1tkLmdlbmNvZGVJZF07XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGFbYXR0cl07XG59XG5cbi8qKlxuICogcGFyc2UgdGhlIExEIChsaW5rYWdlIGRpc2VxdWlsaWJyaXVtIGRhdGEpXG4gKiBAcGFyYW0gZGF0YSB7SlNPTn0gZnJvbSBHVEV4IGxkIHdlYiBzZXJ2aWNlXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUxEKGRhdGEpIHtcbiAgICBjb25zdCBhdHRyID0gJ2xkJztcbiAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsgYXR0cjtcbiAgICBsZXQgcGFyc2VkID0gW107XG4gICAgbGV0IHVuaXF1ZSA9IHt9O1xuICAgIGRhdGFbYXR0cl0uZm9yRWFjaCgoZCkgPT4ge1xuICAgICAgICBsZXQgbGFiZWxzID0gZFswXS5zcGxpdChcIixcIikuc29ydCgpOyAvLyBzb3J0IHRoZSB2YXJpYW50IElEc1xuICAgICAgICB1bmlxdWVbbGFiZWxzWzBdXSA9IHRydWU7XG4gICAgICAgIHVuaXF1ZVtsYWJlbHNbMV1dID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VkLnB1c2goe1xuICAgICAgICAgICAgeDogbGFiZWxzWzBdLFxuICAgICAgICAgICAgZGlzcGxheVg6IGdlbmVyYXRlU2hvcnRWYXJpYW50SWQobGFiZWxzWzBdKSxcbiAgICAgICAgICAgIHk6IGxhYmVsc1sxXSxcbiAgICAgICAgICAgIGRpc3BsYXlZOiBnZW5lcmF0ZVNob3J0VmFyaWFudElkKGxhYmVsc1sxXSksXG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VGbG9hdChkWzFdKSxcbiAgICAgICAgICAgIGRpc3BsYXlWYWx1ZTogcGFyc2VGbG9hdChkWzFdKS50b1ByZWNpc2lvbigzKSAvLyB0b1ByZWNpc2lvbigpIHJldHVybnMgYSBzdHJpbmdcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICBPYmplY3Qua2V5cyh1bmlxdWUpLmZvckVhY2goKGQpPT57XG4gICAgICAgIHBhcnNlZC5wdXNoKHtcbiAgICAgICAgICAgIHg6IGQsXG4gICAgICAgICAgICBkaXNwbGF5WDogZ2VuZXJhdGVTaG9ydFZhcmlhbnRJZChkKSxcbiAgICAgICAgICAgIHk6IGQsXG4gICAgICAgICAgICBkaXNwbGF5WTogZ2VuZXJhdGVTaG9ydFZhcmlhbnRJZChkKSxcbiAgICAgICAgICAgIHZhbHVlOiAxLFxuICAgICAgICAgICAgZGlzcGxheVZhbHVlOiBcIjFcIlxuICAgICAgICB9KVxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5cbi8qIHBhcnNlIHRoZSBleHByZXNzaW9uIGRhdGEgb2YgYSBnZW5lIGZvciBib3hwbG90XG4gKiBAcGFyYW0gZGF0YSB7SlNPTn0gZnJvbSBHVEV4IGdlbmUgZXhwcmVzc2lvbiB3ZWIgc2VydmljZVxuICogQHBhcmFtIHRpc3N1ZXMge09iamVjdH0gbWFwcGluZyBvZiB0aXNzdWUgaWRzIHRvIGxhYmVscyAodGlzc3VlIG5hbWUpXG4gKiBAcGFyYW0gY29sb3JzIHtPYmplY3R9IG1hcHBpbmcgb2YgdGlzc3VlIGlkcyB0byBib3hwbG90IGNvbG9yc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VHZW5lRXhwcmVzc2lvbkZvckJveHBsb3QoZGF0YSwgdGlzc3Vlcz11bmRlZmluZWQsIGNvbG9ycz11bmRlZmluZWQpIHtcbiAgICBjb25zdCBhdHRyID0gJ2dlbmVFeHByZXNzaW9uJztcblxuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyhgUGFyc2luZyBlcnJvcjogcmVxdWlyZWQgSlNPTiBhdHRyaWJ1dGUgJHthdHRyfSBtaXNzaW5nLmApO1xuXG4gICAgZGF0YVthdHRyXS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBbJ2RhdGEnLCAnZ2VuY29kZUlkJywgJ2dlbmVTeW1ib2wnLCAndGlzc3VlU2l0ZURldGFpbElkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmICghZC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgYFBhcnNpbmcgZXJyb3I6IHJlcXVpcmVkIEpTT04gYXR0cmlidXRlICR7a30gaXMgbWlzc2luZyBmcm9tIGEgcmVjb3JkLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkLmxhYmVsID0gdGlzc3Vlcz09PXVuZGVmaW5lZD9kLnRpc3N1ZVNpdGVEZXRhaWxJZDp0aXNzdWVzW2QudGlzc3VlU2l0ZURldGFpbElkXTtcbiAgICAgICAgZC5jb2xvciA9IGNvbG9ycz09PXVuZGVmaW5lZD8nIzQ2ODJiNCc6Y29sb3JzW2QudGlzc3VlU2l0ZURldGFpbElkXTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhW2F0dHJdO1xufVxuXG4vKipcbiAqIGdlbmVyYXRlIHZhcmlhbnQgSUQgc2hvcnRoYW5kXG4gKiBAcGFyYW0gaWRcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVNob3J0VmFyaWFudElkKGlkKXtcbiAgICBsZXQgdGVtcCA9IGlkLnNwbGl0KFwiX1wiKTtcbiAgICBpZih0ZW1wWzJdLmxlbmd0aCA9PSAxICYmIHRlbXBbM10ubGVuZ3RoID09IDEpIHJldHVybiBpZDtcbiAgICBpZih0ZW1wWzJdLmxlbmd0aCA+IHRlbXBbM10ubGVuZ3RoKSB7XG4gICAgICAgIHRlbXBbMl0gPSBcImRlbFwiO1xuICAgICAgICB0ZW1wLnNwbGljZSgzLCAxKTsgLy8gZGVsZXRlIHRoZSBhbHRcbiAgICB9XG4gICAgZWxzZSBpZih0ZW1wWzNdLmxlbmd0aCA+IHRlbXBbMl0ubGVuZ3RoKSB7XG4gICAgICAgIHRlbXBbM10gPSBcImluc1wiO1xuICAgICAgICB0ZW1wLnNwbGljZSgyLCAxKTsgLy8gZGVsZXRlIHRoZSByZWZcbiAgICB9XG4gICAgZWxzZSB7IC8vIHRlbXBbM10ubGVuZ3RoID09IHRlbXBbMl0ubGVuZ3RoIGFuZCB0ZW1wWzNdLmxlbmd0aCA+IDFcbiAgICAgICAgdGVtcFszXSA9IFwic3ViXCI7XG4gICAgICAgIHRlbXAuc3BsaWNlKDIsIDEpOyAvLyBkZWxldGUgdGhlIHJlZlxuICAgIH1cbiAgICByZXR1cm4gdGVtcC5qb2luKFwiX1wiKTtcbn1cbiJdLCJuYW1lcyI6WyJFT0wiLCJFT0YiLCJRVU9URSIsIk5FV0xJTkUiLCJSRVRVUk4iLCJvYmplY3RDb252ZXJ0ZXIiLCJjb2x1bW5zIiwiRnVuY3Rpb24iLCJtYXAiLCJuYW1lIiwiaSIsIkpTT04iLCJzdHJpbmdpZnkiLCJqb2luIiwiZGVsaW1pdGVyIiwicmVGb3JtYXQiLCJSZWdFeHAiLCJERUxJTUlURVIiLCJjaGFyQ29kZUF0IiwicGFyc2VSb3dzIiwidGV4dCIsImYiLCJ0Iiwicm93cyIsIk4iLCJsZW5ndGgiLCJJIiwibiIsImVvZiIsImVvbCIsInRva2VuIiwiYyIsImoiLCJzbGljZSIsInJlcGxhY2UiLCJyb3ciLCJwdXNoIiwiZm9ybWF0Um93IiwiZm9ybWF0VmFsdWUiLCJ0ZXN0IiwicGFyc2UiLCJjb252ZXJ0Iiwib2JqZWN0IiwiY3VzdG9tQ29udmVydGVyIiwiZm9ybWF0IiwiY29sdW1uU2V0IiwiT2JqZWN0IiwiY3JlYXRlIiwiZm9yRWFjaCIsImNvbHVtbiIsImluZmVyQ29sdW1ucyIsImNvbmNhdCIsImZvcm1hdFJvd3MiLCJjc3ZQYXJzZSIsImRzdiIsInRzdlBhcnNlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImlucHV0IiwiaW5pdCIsImZldGNoIiwidGhlbiIsImRzdlBhcnNlIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwidHN2IiwicmVzcG9uc2VKc29uIiwianNvbiIsInhodG1sIiwic3ZnIiwieGxpbmsiLCJ4bWwiLCJ4bWxucyIsInByZWZpeCIsImluZGV4T2YiLCJuYW1lc3BhY2VzIiwiaGFzT3duUHJvcGVydHkiLCJzcGFjZSIsImxvY2FsIiwiZnVsbG5hbWUiLCJuYW1lc3BhY2UiLCJ0aGlzIiwib3duZXJEb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImRvY3VtZW50IiwidXJpIiwibmFtZXNwYWNlVVJJIiwiZG9jdW1lbnRFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsIm5vbmUiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJlbXB0eSIsIm1hdGNoZXIiLCJtYXRjaGVzIiwiZWxlbWVudCIsInZlbmRvck1hdGNoZXMiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm9NYXRjaGVzU2VsZWN0b3IiLCJjYWxsIiwidXBkYXRlIiwiQXJyYXkiLCJFbnRlck5vZGUiLCJwYXJlbnQiLCJkYXR1bSIsIl9uZXh0IiwiX3BhcmVudCIsIl9fZGF0YV9fIiwicHJvdG90eXBlIiwiY29uc3RydWN0b3IiLCJhcHBlbmRDaGlsZCIsImNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwibmV4dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJrZXlQcmVmaXgiLCJiaW5kSW5kZXgiLCJncm91cCIsImVudGVyIiwiZXhpdCIsImRhdGEiLCJub2RlIiwiZ3JvdXBMZW5ndGgiLCJkYXRhTGVuZ3RoIiwiYmluZEtleSIsImtleSIsImtleVZhbHVlIiwibm9kZUJ5S2V5VmFsdWUiLCJrZXlWYWx1ZXMiLCJhc2NlbmRpbmciLCJhIiwiYiIsIk5hTiIsImRlZmF1bHRWaWV3IiwiY2xhc3NBcnJheSIsInN0cmluZyIsInRyaW0iLCJzcGxpdCIsImNsYXNzTGlzdCIsIkNsYXNzTGlzdCIsIl9ub2RlIiwiX25hbWVzIiwiZ2V0QXR0cmlidXRlIiwiY2xhc3NlZEFkZCIsIm5hbWVzIiwibGlzdCIsImFkZCIsImNsYXNzZWRSZW1vdmUiLCJyZW1vdmUiLCJzZXRBdHRyaWJ1dGUiLCJzcGxpY2UiLCJjb250YWlucyIsInRleHRSZW1vdmUiLCJ0ZXh0Q29udGVudCIsImh0bWxSZW1vdmUiLCJpbm5lckhUTUwiLCJyYWlzZSIsIm5leHRTaWJsaW5nIiwicGFyZW50Tm9kZSIsImxvd2VyIiwicHJldmlvdXNTaWJsaW5nIiwiZmlyc3RDaGlsZCIsImNvbnN0YW50TnVsbCIsInJlbW92ZUNoaWxkIiwic2VsZWN0aW9uX2Nsb25lU2hhbGxvdyIsImNsb25lTm9kZSIsInNlbGVjdGlvbl9jbG9uZURlZXAiLCJmaWx0ZXJFdmVudHMiLCJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSIsImZpbHRlckNvbnRleHRMaXN0ZW5lciIsImxpc3RlbmVyIiwiaW5kZXgiLCJjb250ZXh0TGlzdGVuZXIiLCJldmVudCIsInJlbGF0ZWQiLCJyZWxhdGVkVGFyZ2V0IiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJldmVudDEiLCJvblJlbW92ZSIsInR5cGVuYW1lIiwib24iLCJfX29uIiwibyIsIm0iLCJ0eXBlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhcHR1cmUiLCJvbkFkZCIsInZhbHVlIiwid3JhcCIsImQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsInBhcmFtcyIsIndpbmRvdyIsIkN1c3RvbUV2ZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0RXZlbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRldGFpbCIsInJvb3QiLCJTZWxlY3Rpb24iLCJncm91cHMiLCJwYXJlbnRzIiwiX2dyb3VwcyIsIl9wYXJlbnRzIiwic2VsZWN0Iiwic3ViZ3JvdXBzIiwic3Vibm9kZSIsInN1Ymdyb3VwIiwic2VsZWN0QWxsIiwiZmlsdGVyIiwibWF0Y2giLCJzaXplIiwiZWFjaCIsIngiLCJiaW5kIiwiZW50ZXJHcm91cCIsInVwZGF0ZUdyb3VwIiwicHJldmlvdXMiLCJpMCIsImkxIiwiX2VudGVyIiwiX2V4aXQiLCJzcGFyc2UiLCJtZXJnZSIsInNlbGVjdGlvbiIsImdyb3VwczAiLCJncm91cHMxIiwibTAiLCJtMSIsIk1hdGgiLCJtaW4iLCJtZXJnZXMiLCJncm91cDAiLCJncm91cDEiLCJvcmRlciIsInNvcnQiLCJjb21wYXJlIiwiY29tcGFyZU5vZGUiLCJzb3J0Z3JvdXBzIiwic29ydGdyb3VwIiwiY2FsbGJhY2siLCJhcHBseSIsIm5vZGVzIiwiYXR0ciIsImdldEF0dHJpYnV0ZU5TIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ2Iiwic2V0QXR0cmlidXRlTlMiLCJzdHlsZSIsInByaW9yaXR5IiwicmVtb3ZlUHJvcGVydHkiLCJzZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5VmFsdWUiLCJnZXRDb21wdXRlZFN0eWxlIiwic3R5bGVWYWx1ZSIsInByb3BlcnR5IiwiY2xhc3NlZCIsImh0bWwiLCJhcHBlbmQiLCJjcmVhdG9yIiwiaW5zZXJ0IiwiYmVmb3JlIiwiY2xvbmUiLCJkZWVwIiwidHlwZW5hbWVzIiwicGFyc2VUeXBlbmFtZXMiLCJkaXNwYXRjaCIsIlRvb2xiYXIiLCJbb2JqZWN0IE9iamVjdF0iLCJkb21JZCIsInRvb2x0aXAiLCJ2ZXJ0aWNhbCIsIiQiLCJzaG93IiwiYnRuQ2xhc3NlcyIsImJhciIsImFkZENsYXNzIiwiYXBwZW5kVG8iLCJidXR0b25zIiwiaWQiLCJzdmdJZCIsIm91dGZpbGVOYW1lIiwiY2xvbmVJZCIsImljb24iLCJjcmVhdGVCdXR0b24iLCJkb3dubG9hZFN2ZyIsImhpZGUiLCIkYnV0dG9uIiwiZmlsZU5hbWUiLCJzdmdPYmoiLCIkc3ZnQ29weSIsInN0eWxlcyIsImRvbSIsInVzZWQiLCJzaGVldHMiLCJzdHlsZVNoZWV0cyIsImNzc1J1bGVzIiwicnVsZXMiLCJydWxlIiwiZWxlbXMiLCJzZWxlY3RvclRleHQiLCJmaW5kIiwiZSIsImNzc1RleHQiLCJzIiwicGFyc2VDc3NTdHlsZXMiLCJnZXQiLCJwcmVwZW5kIiwic3ZnSHRtbCIsInN2Z0Jsb2IiLCJCbG9iIiwic2F2ZUFzIiwiZ29vZ2xlRnVuYyIsImNoZWNrU2lnbmVkSW4iLCJnZXRVc2VyIiwic2lnbkluQnV0dG9uIiwicmVuZGVyU2lnbkluQnV0dG9uIiwic2lnbk91dCIsImdyYW50U2NvcGVzIiwiZ2FwaSIsInNpZ25pbjIiLCJyZW5kZXIiLCJzY29wZSIsIndpZHRoIiwiaGVpZ2h0IiwibG9uZ3RpdGxlIiwidGhlbWUiLCJvbnN1Y2Nlc3MiLCJvblN1Y2Nlc3MiLCJvbmZhaWx1cmUiLCJvbkZhaWx1cmUiLCJnb29nbGVVc2VyIiwiYXV0aDIiLCJnZXRBdXRoSW5zdGFuY2UiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJpc1NpZ25lZEluIiwiY3VycmVudFVzZXIiLCJzY29wZXMiLCJncmFudCIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZmFpbCIsIl9idWlsZE1hdHJpeCIsImRhdGFzZXRJZCIsInNhbXBsZXMiLCJ0aXNzdWVzIiwiX19idWlsZEhhc2giLCJkYXRhVHlwZSIsIl90eXBlIiwicmVkdWNlIiwibGFiZWwiLCJYIiwidGlzc3VlU2l0ZURldGFpbElkIiwidGlzc3VlU2l0ZURldGFpbCIsImNvbCIsIlkiLCJfcmVuZGVyTWF0cml4VGFibGUiLCJ0YWJsZUlkIiwibWF0IiwiZ29vZ2xlRnVuY0RpY3QiLCJ1cmxzIiwiZGF0YXNldCIsImd0ZXhfdjciLCJiZ2NvbG9yIiwidGhlVGFibGUiLCJ0Ym9keSIsInRoZVJvd3MiLCJ5IiwiY291bnRzIiwiX3JlbmRlckNvdW50cyIsInRoZUNlbGxzIiwidGhlQ29sdW1uIiwidGhlUm93IiwiX2FkZENsaWNrRXZlbnRzIiwidG9vbGJhciIsImNlbGxzIiwiYWxlcnQiLCJkb3dubG9hZENvbnRlbnQiLCJtYXJrZXIiLCJwYXJzZUludCIsInNlbGVjdGVkU2FtcGxlcyIsImNyYW0iLCJjcmFtRmlsZSIsImsiLCJzYW1wbGVfaWQiLCJmaWxlIiwiZ2V0QXV0aFJlc3BvbnNlIiwiYWNjZXNzX3Rva2VuIiwiYWpheCIsInVybCIsInhockZpZWxkcyIsIndpdGhDcmVkZW50aWFscyIsImJlZm9yZVNlbmQiLCJ4aHIiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiY29udGVudFR5cGUiLCJwcm9qZWN0TmFtZSIsIl9yZXBvcnRCaWxsaW5nUHJvamVjdHMiLCJfX3N1Ym1pc3Npb25QcmVwIiwid3NJbnB1dCIsInZhbCIsImlucHV0U3RhdHVzIiwid29ya3NwYWNlcyIsInB1YmxpYyIsIl9nZXRXb3Jrc3BhY2VzIiwid3MiLCJ3b3Jrc3BhY2UiLCJhbGxTZWxlY3RlZFNhbXBsZXMiLCJzZWxlY3RlZCIsInRlbXAiLCJzYW1wbGVJZCIsImRvbm9ySWQiLCJmY1dvcmtTcGFjZSIsImF0dHJpYnV0ZXMiLCJhdXRob3JpemF0aW9uRG9tYWluIiwiZG9ub3JzIiwiZG9ub3JFbnRpdHlTdHJpbmciLCJkb25vckVudGl0eVVybEVuY29kZSIsImVuY29kZVVSSSIsInNhbXBsZUVudGl0eSIsInNhbXBsZUVudGl0eVN0cmluZyIsImNyYW1fZmlsZSIsImNyYW1faW5kZXgiLCJzYW1wbGVFbnRpdHlVcmxFbmNvZGUiLCJmY1VSTCIsImZjUG9ydGFsV29ya1NwYWNlIiwib3BlbiIsIl9zdWJtaXRUb0ZpcmVDbG91ZCIsImtleXByZXNzIiwia2V5Q29kZSIsIl9hZGRUb29sYmFyIiwiaG9zdCIsInNpbmdsZVRpc3N1ZUVxdGwiLCJsZCIsImR5bmVxdGwiLCJzbnAiLCJ2YXJpYW50SWQiLCJleG9uRXhwIiwidHJhbnNjcmlwdEV4cCIsImp1bmN0aW9uRXhwIiwidHJhbnNjcmlwdCIsImV4b24iLCJnZW5lTW9kZWwiLCJnZW5lTW9kZWxVbmZpbHRlcmVkIiwiZ2VuZUV4cCIsIm1lZEdlbmVFeHAiLCJnZW5lRXhwQm94cGxvdCIsInRvcEluVGlzc3VlRmlsdGVyZWQiLCJ0b3BJblRpc3N1ZSIsImdlbmVJZCIsInRpc3N1ZSIsInNhbXBsZSIsInJuYXNlcUNyYW0iLCJ3Z3NDcmFtIiwiZmNCaWxsaW5nIiwiZ2V0R3RleFVybHMiLCJwcm9taXNlcyIsIlByb21pc2UiLCJhbGwiLCJhcmdzIiwicGFyc2VUaXNzdWVzIiwicm5hc2VxIiwidG9VcHBlckNhc2UiLCJ3Z3MiLCJ3Z3NIYXNoIiwic3ViamVjdElkIiwiX2NoZWNrUm5hU2VxV2l0aEdlbm90eXBlIiwidGhlTWF0cml4IiwiX19maWx0ZXIiLCJzZXgiLCJhZ2VzIiwiaXMiLCJwcm9wIiwiZmlsdGVyZWRNYXQiLCJhZ2VCcmFja2V0IiwiY2hhbmdlIiwiX2FkZEZpbHRlcnMiLCJjYXRjaCIsImVyciJdLCJtYXBwaW5ncyI6IjJDQUFBLElBQUlBLEtBQ0FDLEtBQ0FDLEVBQVEsR0FDUkMsRUFBVSxHQUNWQyxFQUFTLEdBRWIsU0FBU0MsRUFBZ0JDLEdBQ3ZCLE9BQU8sSUFBSUMsU0FBUyxJQUFLLFdBQWFELEVBQVFFLElBQUksU0FBU0MsRUFBTUMsR0FDL0QsT0FBT0MsS0FBS0MsVUFBVUgsR0FBUSxPQUFTQyxFQUFJLE1BQzFDRyxLQUFLLEtBQU8sS0EwQmpCLE1BQWUsU0FBU0MsR0FDdEIsSUFBSUMsRUFBVyxJQUFJQyxPQUFPLEtBQVFGLEVBQVksU0FDMUNHLEVBQVlILEVBQVVJLFdBQVcsR0FXckMsU0FBU0MsRUFBVUMsRUFBTUMsR0FDdkIsSUFJSUMsRUFKQUMsS0FDQUMsRUFBSUosRUFBS0ssT0FDVEMsRUFBSSxFQUNKQyxFQUFJLEVBRUpDLEVBQU1KLEdBQUssRUFDWEssR0FBTSxFQU1WLFNBQVND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
