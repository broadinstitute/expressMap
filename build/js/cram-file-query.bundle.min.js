var CramFileQuery=function(t){"use strict";var e={},n={},r=34,i=10,o=13;function s(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}var a=function(t){var a=new RegExp('["'+t+"\n\r]"),c=t.charCodeAt(0);function u(t,s){var a,u=[],l=t.length,h=0,f=0,d=l<=0,p=!1;function g(){if(d)return n;if(p)return p=!1,e;var s,a,u=h;if(t.charCodeAt(u)===r){for(;h++<l&&t.charCodeAt(h)!==r||t.charCodeAt(++h)===r;);return(s=h)>=l?d=!0:(a=t.charCodeAt(h++))===i?p=!0:a===o&&(p=!0,t.charCodeAt(h)===i&&++h),t.slice(u+1,s-1).replace(/""/g,'"')}for(;h<l;){if((a=t.charCodeAt(s=h++))===i)p=!0;else if(a===o)p=!0,t.charCodeAt(h)===i&&++h;else if(a!==c)continue;return t.slice(u,s)}return d=!0,t.slice(u,l)}for(t.charCodeAt(l-1)===i&&--l,t.charCodeAt(l-1)===o&&--l;(a=g())!==n;){for(var m=[];a!==e&&a!==n;)m.push(a),a=g();s&&null==(m=s(m,f++))||u.push(m)}return u}function l(e){return e.map(h).join(t)}function h(t){return null==t?"":a.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,i=u(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=s(t);return function(r,i){return e(n(r),i,t)}}(t,e):s(t)});return i.columns=r||[],i},parseRows:u,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(h).join(t)].concat(e.map(function(e){return n.map(function(t){return h(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(l).join("\n")}}},c=a(",").parse,u=a("\t").parse;function l(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var h=function(t,e){return fetch(t,e).then(l)};function f(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),h(e,n).then(function(e){return t(e,r)})}}f(c);var d=f(u);function p(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var g=function(t,e){return fetch(t,e).then(p)},m="http://www.w3.org/1999/xhtml",v={svg:"http://www.w3.org/2000/svg",xhtml:m,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},y=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),v.hasOwnProperty(e)?{space:v[e],local:t}:t};var _=function(t){var e=y(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===m&&e.documentElement.namespaceURI===m?e.createElement(t):e.createElementNS(n,t)}})(e)};function w(){}var x=function(t){return null==t?w:function(){return this.querySelector(t)}};function S(){return[]}var A=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var b=document.documentElement;if(!b.matches){var I=b.webkitMatchesSelector||b.msMatchesSelector||b.mozMatchesSelector||b.oMatchesSelector;A=function(t){return function(){return I.call(this,t)}}}}var E=A,C=function(t){return new Array(t.length)};function T(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}T.prototype={constructor:T,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var q="$";function P(t,e,n,r,i,o){for(var s,a=0,c=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new T(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function k(t,e,n,r,i,o,s){var a,c,u,l={},h=e.length,f=o.length,d=new Array(h);for(a=0;a<h;++a)(c=e[a])&&(d[a]=u=q+s.call(c,c.__data__,a,e),u in l?i[a]=c:l[u]=c);for(a=0;a<f;++a)(c=l[u=q+s.call(t,o[a],a,o)])?(r[a]=c,c.__data__=o[a],l[u]=null):n[a]=new T(t,o[a]);for(a=0;a<h;++a)(c=e[a])&&l[d[a]]===c&&(i[a]=c)}function N(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var D=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function O(t){return t.trim().split(/^|\s+/)}function R(t){return t.classList||new B(t)}function B(t){this._node=t,this._names=O(t.getAttribute("class")||"")}function G(t,e){for(var n=R(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function j(t,e){for(var n=R(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}B.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function M(){this.textContent=""}function W(){this.innerHTML=""}function F(){this.nextSibling&&this.parentNode.appendChild(this)}function L(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U(){return null}function z(){var t=this.parentNode;t&&t.removeChild(this)}function H(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function V(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var Y={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Y={mouseenter:"mouseover",mouseleave:"mouseout"}));function X(t,e,n){return t=J(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function J(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function Q(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function K(t,e,n){var r=Y.hasOwnProperty(t.type)?X:J;return function(i,o,s){var a,c=this.__on,u=r(e,o,s);if(c)for(var l=0,h=c.length;l<h;++l)if((a=c[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=n),void(a.value=e);this.addEventListener(t.type,u,n),a={type:t.type,name:t.name,value:e,listener:u,capture:n},c?c.push(a):this.__on=[a]}}function Z(t,e,n){var r=D(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var tt=[null];function et(t,e){this._groups=t,this._parents=e}et.prototype=function(){return new et([[document.documentElement]],tt)}.prototype={constructor:et,select:function(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],c=a.length,u=r[i]=new Array(c),l=0;l<c;++l)(o=a[l])&&(s=t.call(o,o.__data__,l,a))&&("__data__"in o&&(s.__data__=o.__data__),u[l]=s);return new et(r,this._parents)},selectAll:function(t){var e;"function"!=typeof t&&(t=null==(e=t)?S:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,i=[],o=[],s=0;s<r;++s)for(var a,c=n[s],u=c.length,l=0;l<u;++l)(a=c[l])&&(i.push(t.call(a,a.__data__,l,c)),o.push(a));return new et(i,o)},filter:function(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,c=r[i]=[],u=0;u<a;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&c.push(o);return new et(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each(function(t){p[++l]=t}),p;var n,r=e?k:P,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=o.length,a=new Array(s),c=new Array(s),u=new Array(s),l=0;l<s;++l){var h=i[l],f=o[l],d=f.length,p=t.call(h,h&&h.__data__,l,i),g=p.length,m=c[l]=new Array(g),v=a[l]=new Array(g);r(h,f,m,v,u[l]=new Array(d),p,e);for(var y,_,w=0,x=0;w<g;++w)if(y=m[w]){for(w>=x&&(x=w+1);!(_=v[x])&&++x<g;);y._next=_||null}}return(a=new et(a,i))._enter=c,a._exit=u,a},enter:function(){return new et(this._enter||this._groups.map(C),this._parents)},exit:function(){return new et(this._exit||this._groups.map(C),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c,u=e[a],l=n[a],h=u.length,f=s[a]=new Array(h),d=0;d<h;++d)(c=u[d]||l[d])&&(f[d]=c);for(;a<r;++a)s[a]=e[a];return new et(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&s!==r.nextSibling&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=N);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],c=a.length,u=i[o]=new Array(c),l=0;l<c;++l)(s=a[l])&&(u[l]=s);u.sort(e)}return new et(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=y(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||D(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=O(t+"");if(arguments.length<2){for(var r=R(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?G:j)(this,t)}}:e?function(t){return function(){G(this,t)}}:function(t){return function(){j(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?M:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?W:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(F)},lower:function(){return this.each(L)},append:function(t){var e="function"==typeof t?t:_(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:_(t),r=null==e?U:"function"==typeof e?e:x(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(z)},clone:function(t){return this.select(t?V:H)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?K:Q,null==n&&(n=!1),r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var c,u=0,l=a.length;u<l;++u)for(r=0,c=a[u];r<s;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Z(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Z(this,t,e)}})(t,e))}};var nt=function(t){return"string"==typeof t?new et([[document.querySelector(t)]],[document.documentElement]):new et([[t]],tt)};class rt{constructor(t,e,n=!1){$(`#${t}`).show();const r=n?"btn-group-vertical btn-group-sm":"btn-group btn-group-sm";this.bar=$("<div/>").addClass(r).appendTo(`#${t}`),this.buttons={},this.tooltip=e}createDownloadSvgButton(t,e,n,r,i="fa-download"){this.createButton(t,i);nt(`#${t}`).on("click",()=>{this.downloadSvg(e,n,r)}).on("mouseover",()=>{this.tooltip.show("Download")}).on("mouseout",()=>{this.tooltip.hide()})}createResetButton(t,e,n="fa-expand-arrows-alt"){this.createButton(t,n);nt(`#${t}`).on("click",e).on("mouseover",()=>{this.tooltip.show("Reset the scales")}).on("mouseout",()=>{this.tooltip.hide()})}createButton(t,e="fa-download"){const n=$("<a/>").attr("id",t).addClass("btn btn-default").appendTo(this.bar);return $("<i/>").addClass(`fa ${e}`).appendTo(n),this.buttons[t]=n,n}attachTooltip(t){this.tooltip=t}downloadSvg(t,e,n){let r=$($($(`${"#"+t}`))[0]),i=r.clone().attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg"),o=function(t){for(var e="",n=document.styleSheets,r=0;r<n.length;r++)try{if(null==n[r].cssRules)continue;for(var i=n[r].cssRules,o=0;o<i.length;o++){var s=i[o];if(void 0!==s.style){var a,c=void 0===s.selectorText?s.selectorText:s.selectorText.replace(`#${t[0].id} `,"");try{a=$(t).find(c)}catch(t){a=[]}a.length>0&&(e+=s.selectorText+" { "+s.style.cssText+" }\n")}}}catch(t){if("SecurityError"!==t.name)throw t;continue}var u=document.createElement("style");return u.setAttribute("type","text/css"),u.innerHTML="<![CDATA[\n"+e+"\n]]>",u}(r.get());i.prepend(o),$("#"+n).html("").hide();let s=$(`#${n}`).append(i).html(),a=new Blob([s],{type:"image/svg+xml"});saveAs(a,e),$(`#${n}`).html("").hide()}}function it(){return{checkSignedIn:ut,getUser:lt,signInButton:ot,signOut:at,grantScopes:ht}}function ot(){gapi.signin2.render("my-signin2",{scope:"profile email",width:130,height:30,longtitle:!1,theme:"dark",onsuccess:st,onfailure:ct})}function st(t){$("#g-signout").show()}function at(){gapi.auth2.getAuthInstance().signOut().then(function(){console.log("User signed out")}),$("#g-signout").hide()}function ct(t){console.error(t)}function ut(){return!!gapi.auth2&&lt().isSignedIn()}function lt(){return gapi.auth2.getAuthInstance().currentUser.get()}function ht(t){this.getUser().grant({scope:t}).then(function(t){console.log(JSON.stringify({message:"success",value:t}))},function(t){console.error(JSON>stringify({message:"fail",value:t}))})}function ft(t,e,n){const r=function(t){const n="tissueSiteDetailId";return e.filter(e=>{if(!e.hasOwnProperty("dataType"))throw console.error(e),"Parse Error: required attribute is missing: _type or dataType";return"RNA-Seq-WGS"==t?e._type==t:e.dataType==t}).reduce((t,e)=>{if(!e.hasOwnProperty(n))throw console.error(e),"Parse Error: required attribute is missing:"+n;return void 0===t[e[n]]&&(t[e[n]]=[]),t[e[n]].push(e),t},{})},i=[{label:"RNA-Seq",id:"RNA-Seq",data:r("RNA-Seq")},{label:"RNA-Seq With WGS",id:"RNA-Seq-WGS",data:r("RNA-Seq-WGS")},{label:"WES",id:"WES",data:r("WES")},{label:"WGS",id:"WGS",data:r("WGS")}];return{datasetId:t,X:n.map(t=>(["tissueSiteDetailId","tissueSiteDetail"].forEach(e=>{if(!t.hasOwnProperty(e))throw console.error(t),"Tissue parsing error: required attribute is missing: "+e}),t.id=t.tissueSiteDetailId,t.label=t.tissueSiteDetail,i.forEach(e=>{t[e.id]=e.data[t.id]||void 0}),t)),Y:i,data:e}}function dt(t,e,n,r,i){const o={gtex_v7:{label:"GTEX V7",bgcolor:"#2a718b"}},s=nt(`#${t}`);s.select("thead").selectAll("th").data([{label:"",id:""}].concat(e.Y)).enter().append("th").attr("scope","col").attr("class",(t,e)=>""==t.id?"":`y${e-1}`).text(t=>t.label),s.select(".table-label").selectAll("*").remove(),s.select(".table-label").append("th").attr("colspan",e.Y.length+1).text(o[e.datasetId].label).style("background-color",o[e.datasetId].bgcolor),function(t,e,n){t.selectAll(".data-row").remove();const r=t.selectAll(".data-row").data(e.X).enter().append("tr").classed("data-row",!0);r.append("th").attr("scope","row").attr("class",(t,e)=>`x${e}`).text(t=>t.label).style("text-decoration",t=>{if(console.log(t),n&&!t.hasEGenes)return"line-through"}),e.Y.forEach((t,e)=>{r.append("td").attr("class",(n,r)=>void 0===n[t.id]?"":`x${r} y${e}`).text(e=>{let n=e[t.id]?e[t.id].length:"";return n})})}(s.select("tbody"),e,n),function(t){const e=nt(`#${t}`).select("tbody").selectAll("td");nt(`#${t}`).select("thead").selectAll("th").style("cursor","pointer").on("click",function(){const t=nt(this).attr("class");"col"==nt(this).attr("scope")?(nt(this).attr("scope","selected"),e.filter(`.${t}`).classed("selected",!0)):(nt(this).attr("scope","col"),e.filter(`.${t}`).classed("selected",!1))}),nt(`#${t}`).select("tbody").selectAll("th").style("cursor","pointer").on("click",function(){const t=nt(this).attr("class");"row"==nt(this).attr("scope")?(nt(this).attr("scope","selected"),e.filter(`.${t}`).classed("selected",!0)):(nt(this).attr("scope","row"),e.filter(`.${t}`).classed("selected",!1))}),e.style("cursor","pointer").on("click",function(){nt(this).classed("selected",!nt(this).classed("selected"))})}(t),function(t,e,n,r){nt("#matrix-table-toolbar").selectAll("*").remove(),new rt("matrix-table-toolbar",void 0,!0).createButton("sample-download"),function(t,e){const n=nt(`#${t}`).select("tbody").selectAll("td");nt("#sample-download").style("cursor","pointer").on("click",function(){let t=n.filter(".selected");if(t.empty())alert("You have not selected any samples to download.");else{let n=["Sample ID","Tissue Name","Data Type","CRAM File GCP","CRAM File AWS","CRAM File MD5","CRAM File Size","CRAM Index GCP","CRAM Index AWS"].join("\t")+"\n";t.each(function(t){const r=nt(this).attr("class").split(" ").filter(t=>"selected"!=t),i=e.X[parseInt(r[0].replace("x",""))],o=e.Y[parseInt(r[1].replace("y",""))],s=o.data[i.id].map(t=>{let e=["cram_file","cram_file_aws","cram_file_md5","cram_file_size","cram_index","cram_index_aws"].map(e=>t.cramFile[e]);["cramFile","tissueSiteDetail","dataType"].forEach(e=>{if(!t.hasOwnProperty(e))throw"Parse Error: required attribute is missing: "+e});let n=[t.cramFile.sample_id,t.tissueSiteDetail,t.dataType].concat(e);return n.join("\t")});n+=s.join("\n")});let r=new Blob([n],{type:"text/plain;charset=utf-8"});saveAs(r,"GTEx.cram.txt",!0)}})}(t,e)}(t,e)}return t.renderSignInButton=function(t=it().signInButton){t()},t.signOut=function(t=it().signOut){t()},t.launch=function(t,e="gtex_v7",n=it(),r=function(){const t="https://gtexportal.org/rest/v1/";return{singleTissueEqtl:t+"association/singleTissueEqtl?format=json&datasetId=gtex_v7&gencodeId=",ld:t+"dataset/ld?format=json&datasetId=gtex_v7&gencodeId=",dyneqtl:t+"association/dyneqtl",snp:t+"reference/variant?format=json&snpId=",variantId:t+"dataset/variant?format=json&variantId=",exonExp:t+"expression/medianExonExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",transcriptExp:t+"expression/medianTranscriptExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",junctionExp:t+"expression/medianJunctionExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",transcript:t+"reference/transcript?datasetId=gtex_v7&gencodeId=",exon:t+"reference/exon?datasetId=gtex_v7&gencodeId=",geneModel:t+"dataset/collapsedGeneModelExon?datasetId=gtex_v7&gencodeId=",geneModelUnfiltered:t+"dataset/fullCollapsedGeneModelExon?datasetId=gtex_v7&gencodeId=",geneExp:t+"expression/geneExpression?datasetId=gtex_v7&gencodeId=",medGeneExp:t+"expression/medianGeneExpression?datasetId=gtex_v7&hcluster=true&pageSize=10000",geneExpBoxplot:t+"expression/geneExpression?datasetId=gtex_v7&boxplotDetail=full&gencodeId=",topInTissueFiltered:t+"expression/topExpressedGene?datasetId=gtex_v7&filterMtGene=true&sortBy=median&sortDirection=desc&pageSize=50&tissueSiteDetailId=",topInTissue:t+"expression/topExpressedGene?datasetId=gtex_v7&sortBy=median&sortDirection=desc&pageSize=50&tissueSiteDetailId=",geneId:t+"reference/gene?format=json&gencodeVersion=v19&genomeBuild=GRCh37%2Fhg19&geneId=",tissue:t+"dataset/tissueInfo?format=json&datasetId=gtex_v7",sample:"/tmpSummaryData/gtex.Sample.csv",rnaseqCram:"/tmpSummaryData/rnaseq_cram_files_v7_dbGaP_011516.txt",wgsCram:"/tmpSummaryData/wgs_cram_files_v7_hg38_dbGaP_011516.txt",fcBilling:"https://api.firecloud.org/api/profile/billing",fcWorkSpace:"https://api.firecloud.org/api/workspaces",fcPortalWorkSpace:"https://portal.firecloud.org/#workspaces"}}()){const i=[g(r.tissue),d(r.rnaseqCram),d(r.wgsCram),d(r.sample)];Promise.all(i).then(function(n){let r=function(t){const e="tissueInfo";if(!t.hasOwnProperty(e))throw"Parsing Error: required json attr is missing: "+e;const n=t[e];return["tissueSiteDetailId","tissueSiteDetail","colorHex"].forEach(t=>{if(!n[0].hasOwnProperty(t))throw"Parsing Error: required json attr is missing: "+t}),n}(n[0]);const i={rnaseq:n[1].reduce((t,e)=>(t[e.sample_id.toUpperCase()]=e,t),{}),wgs:n[2].reduce((t,e)=>(t[e.sample_id.toUpperCase()]=e,t),{})};let o=n[3].filter(t=>t.datasetId==e).map(t=>{switch(t.dataType){case"WGS":if(!i.wgs.hasOwnProperty(t.sampleId))throw t.sampleId+" has no cram files";t.cramFile=i.wgs[t.sampleId];break;case"RNASEQ":if(!i.rnaseq.hasOwnProperty(t.sampleId))throw t.sampleId+" has no cram files";t.cramFile=i.rnaseq[t.sampleId],t.dataType="RNA-Seq"}return t});o=function(t){const e=t.filter(t=>{if(!t.hasOwnProperty("dataType"))throw console.error(t),"Parse Error: required attribute is missing: dataType";return"WGS"==t.dataType}).reduce((t,e)=>{if(!e.hasOwnProperty("subjectId"))throw"Parse Error: required attribute is missing.";return t[e.subjectId]=1,t},{});return t.map(t=>{if(!t.hasOwnProperty("dataType")||!t.hasOwnProperty("subjectId"))throw"Parse Error: required attribute is missing.";return"RNA-Seq"==t.dataType&&e.hasOwnProperty(t.subjectId)&&(t._type="RNA-Seq-WGS"),t})}(o);const s=ft(e,o,r);dt(t,s,!1),function(t,e,n,r,i,o){const s=r.filter(t=>!t.hasEGenes).map(t=>t.tissueSiteDetailId),a=()=>{let i=$('input[name="sex"]:checked').val(),o=$('input[name="tissueType"]:checked').val(),a=[],c=[],u="all"!=o;$(".ageBox").each(function(){$(this).is(":checked")&&a.push($(this).val()),a.length<6&&$('input[name="allAges"]').prop("checked",!1),6==a.length&&$('input[name="allAges"][value="all"]').prop("checked",!0)}),$(".hardyScale").each(function(){$(this).is(":checked")&&c.push($(this).val()),c.length<5&&$('input[name="allHardyScales"]').prop("checked",!1),5==c.length&&$('input[name="allHardyScales"][value="all"]').prop("checked",!0)});let l="all"==o?n.slice():n.filter((t,e)=>s.indexOf(t.tissueSiteDetailId)<0&&"RNA-Seq-WGS"==t._type);l="both"==i?l:l.filter(t=>t.sex==i),l=6==a.length?l:l.filter(t=>a.indexOf(t.ageBracket)>=0),l=5==c.length?l:l.filter(t=>c.indexOf(t.hardyScale)>=0),dt(t,ft(e.datasetId,l,r),u)};$('input[name="sex"]').change(a),$(".ageBox").each(function(){$(this).change(a)}),$('input[name="allAges"]').change(function(){let t=$(this).val();switch(t){case"all":$(".ageBox").prop("checked",!0),a();break;case"reset":$(".ageBox").prop("checked",!1)}}),$('input[name="tissueType"]').change(a),$(".hardyScale").each(function(){$(this).change(a)}),$('input[name="allHardyScale"]').change(function(){let t=$(this).val();switch(t){case"all":$(".hardyScale").prop("checked",!0),a();break;case"reset":$(".hardyScale").prop("checked",!1)}})}(t,s,o,r)}).catch(function(t){console.error(t)})},t}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JhbS1maWxlLXF1ZXJ5LmJ1bmRsZS5taW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL2Rzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL2Nzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1kc3Yvc3JjL3Rzdi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mZXRjaC9zcmMvdGV4dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mZXRjaC9zcmMvZHN2LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZldGNoL3NyYy9qc29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdG9yQWxsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbWF0Y2hlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zcGFyc2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW50ZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9jb25zdGFudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9kYXRhLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NvcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vYXR0ci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3dpbmRvdy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9jbGFzc2VkLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3RleHQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaHRtbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9yYWlzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9sb3dlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9pbnNlcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmVtb3ZlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Nsb25lLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3RBbGwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2V4aXQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vbWVyZ2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vb3JkZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2FsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2Rlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2RlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NpemUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW1wdHkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZWFjaC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zdHlsZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9wcm9wZXJ0eS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hcHBlbmQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZGF0dW0uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3QuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9Ub29sYmFyLmpzIiwiLi4vLi4vc3JjL21vZHVsZXMvdXRpbHMuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9nb29nbGVVc2VyLmpzIiwiLi4vLi4vc3JjL0NyYW1GaWxlUXVlcnkuanMiLCIuLi8uLi9zcmMvbW9kdWxlcy9ndGV4RGF0YVBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRU9MID0ge30sXG4gICAgRU9GID0ge30sXG4gICAgUVVPVEUgPSAzNCxcbiAgICBORVdMSU5FID0gMTAsXG4gICAgUkVUVVJOID0gMTM7XG5cbmZ1bmN0aW9uIG9iamVjdENvbnZlcnRlcihjb2x1bW5zKSB7XG4gIHJldHVybiBuZXcgRnVuY3Rpb24oXCJkXCIsIFwicmV0dXJuIHtcIiArIGNvbHVtbnMubWFwKGZ1bmN0aW9uKG5hbWUsIGkpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobmFtZSkgKyBcIjogZFtcIiArIGkgKyBcIl1cIjtcbiAgfSkuam9pbihcIixcIikgKyBcIn1cIik7XG59XG5cbmZ1bmN0aW9uIGN1c3RvbUNvbnZlcnRlcihjb2x1bW5zLCBmKSB7XG4gIHZhciBvYmplY3QgPSBvYmplY3RDb252ZXJ0ZXIoY29sdW1ucyk7XG4gIHJldHVybiBmdW5jdGlvbihyb3csIGkpIHtcbiAgICByZXR1cm4gZihvYmplY3Qocm93KSwgaSwgY29sdW1ucyk7XG4gIH07XG59XG5cbi8vIENvbXB1dGUgdW5pcXVlIGNvbHVtbnMgaW4gb3JkZXIgb2YgZGlzY292ZXJ5LlxuZnVuY3Rpb24gaW5mZXJDb2x1bW5zKHJvd3MpIHtcbiAgdmFyIGNvbHVtblNldCA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBjb2x1bW5zID0gW107XG5cbiAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuICAgIGZvciAodmFyIGNvbHVtbiBpbiByb3cpIHtcbiAgICAgIGlmICghKGNvbHVtbiBpbiBjb2x1bW5TZXQpKSB7XG4gICAgICAgIGNvbHVtbnMucHVzaChjb2x1bW5TZXRbY29sdW1uXSA9IGNvbHVtbik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gY29sdW1ucztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZGVsaW1pdGVyKSB7XG4gIHZhciByZUZvcm1hdCA9IG5ldyBSZWdFeHAoXCJbXFxcIlwiICsgZGVsaW1pdGVyICsgXCJcXG5cXHJdXCIpLFxuICAgICAgREVMSU1JVEVSID0gZGVsaW1pdGVyLmNoYXJDb2RlQXQoMCk7XG5cbiAgZnVuY3Rpb24gcGFyc2UodGV4dCwgZikge1xuICAgIHZhciBjb252ZXJ0LCBjb2x1bW5zLCByb3dzID0gcGFyc2VSb3dzKHRleHQsIGZ1bmN0aW9uKHJvdywgaSkge1xuICAgICAgaWYgKGNvbnZlcnQpIHJldHVybiBjb252ZXJ0KHJvdywgaSAtIDEpO1xuICAgICAgY29sdW1ucyA9IHJvdywgY29udmVydCA9IGYgPyBjdXN0b21Db252ZXJ0ZXIocm93LCBmKSA6IG9iamVjdENvbnZlcnRlcihyb3cpO1xuICAgIH0pO1xuICAgIHJvd3MuY29sdW1ucyA9IGNvbHVtbnMgfHwgW107XG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVJvd3ModGV4dCwgZikge1xuICAgIHZhciByb3dzID0gW10sIC8vIG91dHB1dCByb3dzXG4gICAgICAgIE4gPSB0ZXh0Lmxlbmd0aCxcbiAgICAgICAgSSA9IDAsIC8vIGN1cnJlbnQgY2hhcmFjdGVyIGluZGV4XG4gICAgICAgIG4gPSAwLCAvLyBjdXJyZW50IGxpbmUgbnVtYmVyXG4gICAgICAgIHQsIC8vIGN1cnJlbnQgdG9rZW5cbiAgICAgICAgZW9mID0gTiA8PSAwLCAvLyBjdXJyZW50IHRva2VuIGZvbGxvd2VkIGJ5IEVPRj9cbiAgICAgICAgZW9sID0gZmFsc2U7IC8vIGN1cnJlbnQgdG9rZW4gZm9sbG93ZWQgYnkgRU9MP1xuXG4gICAgLy8gU3RyaXAgdGhlIHRyYWlsaW5nIG5ld2xpbmUuXG4gICAgaWYgKHRleHQuY2hhckNvZGVBdChOIC0gMSkgPT09IE5FV0xJTkUpIC0tTjtcbiAgICBpZiAodGV4dC5jaGFyQ29kZUF0KE4gLSAxKSA9PT0gUkVUVVJOKSAtLU47XG5cbiAgICBmdW5jdGlvbiB0b2tlbigpIHtcbiAgICAgIGlmIChlb2YpIHJldHVybiBFT0Y7XG4gICAgICBpZiAoZW9sKSByZXR1cm4gZW9sID0gZmFsc2UsIEVPTDtcblxuICAgICAgLy8gVW5lc2NhcGUgcXVvdGVzLlxuICAgICAgdmFyIGksIGogPSBJLCBjO1xuICAgICAgaWYgKHRleHQuY2hhckNvZGVBdChqKSA9PT0gUVVPVEUpIHtcbiAgICAgICAgd2hpbGUgKEkrKyA8IE4gJiYgdGV4dC5jaGFyQ29kZUF0KEkpICE9PSBRVU9URSB8fCB0ZXh0LmNoYXJDb2RlQXQoKytJKSA9PT0gUVVPVEUpO1xuICAgICAgICBpZiAoKGkgPSBJKSA+PSBOKSBlb2YgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgoYyA9IHRleHQuY2hhckNvZGVBdChJKyspKSA9PT0gTkVXTElORSkgZW9sID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gUkVUVVJOKSB7IGVvbCA9IHRydWU7IGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpICsrSTsgfVxuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqICsgMSwgaSAtIDEpLnJlcGxhY2UoL1wiXCIvZywgXCJcXFwiXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIG5leHQgZGVsaW1pdGVyIG9yIG5ld2xpbmUuXG4gICAgICB3aGlsZSAoSSA8IE4pIHtcbiAgICAgICAgaWYgKChjID0gdGV4dC5jaGFyQ29kZUF0KGkgPSBJKyspKSA9PT0gTkVXTElORSkgZW9sID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gUkVUVVJOKSB7IGVvbCA9IHRydWU7IGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpICsrSTsgfVxuICAgICAgICBlbHNlIGlmIChjICE9PSBERUxJTUlURVIpIGNvbnRpbnVlO1xuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqLCBpKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIGxhc3QgdG9rZW4gYmVmb3JlIEVPRi5cbiAgICAgIHJldHVybiBlb2YgPSB0cnVlLCB0ZXh0LnNsaWNlKGosIE4pO1xuICAgIH1cblxuICAgIHdoaWxlICgodCA9IHRva2VuKCkpICE9PSBFT0YpIHtcbiAgICAgIHZhciByb3cgPSBbXTtcbiAgICAgIHdoaWxlICh0ICE9PSBFT0wgJiYgdCAhPT0gRU9GKSByb3cucHVzaCh0KSwgdCA9IHRva2VuKCk7XG4gICAgICBpZiAoZiAmJiAocm93ID0gZihyb3csIG4rKykpID09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgcm93cy5wdXNoKHJvdyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXQocm93cywgY29sdW1ucykge1xuICAgIGlmIChjb2x1bW5zID09IG51bGwpIGNvbHVtbnMgPSBpbmZlckNvbHVtbnMocm93cyk7XG4gICAgcmV0dXJuIFtjb2x1bW5zLm1hcChmb3JtYXRWYWx1ZSkuam9pbihkZWxpbWl0ZXIpXS5jb25jYXQocm93cy5tYXAoZnVuY3Rpb24ocm93KSB7XG4gICAgICByZXR1cm4gY29sdW1ucy5tYXAoZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRWYWx1ZShyb3dbY29sdW1uXSk7XG4gICAgICB9KS5qb2luKGRlbGltaXRlcik7XG4gICAgfSkpLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRSb3dzKHJvd3MpIHtcbiAgICByZXR1cm4gcm93cy5tYXAoZm9ybWF0Um93KS5qb2luKFwiXFxuXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9ybWF0Um93KHJvdykge1xuICAgIHJldHVybiByb3cubWFwKGZvcm1hdFZhbHVlKS5qb2luKGRlbGltaXRlcik7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQgPT0gbnVsbCA/IFwiXCJcbiAgICAgICAgOiByZUZvcm1hdC50ZXN0KHRleHQgKz0gXCJcIikgPyBcIlxcXCJcIiArIHRleHQucmVwbGFjZSgvXCIvZywgXCJcXFwiXFxcIlwiKSArIFwiXFxcIlwiXG4gICAgICAgIDogdGV4dDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGFyc2U6IHBhcnNlLFxuICAgIHBhcnNlUm93czogcGFyc2VSb3dzLFxuICAgIGZvcm1hdDogZm9ybWF0LFxuICAgIGZvcm1hdFJvd3M6IGZvcm1hdFJvd3NcbiAgfTtcbn1cbiIsImltcG9ydCBkc3YgZnJvbSBcIi4vZHN2XCI7XG5cbnZhciBjc3YgPSBkc3YoXCIsXCIpO1xuXG5leHBvcnQgdmFyIGNzdlBhcnNlID0gY3N2LnBhcnNlO1xuZXhwb3J0IHZhciBjc3ZQYXJzZVJvd3MgPSBjc3YucGFyc2VSb3dzO1xuZXhwb3J0IHZhciBjc3ZGb3JtYXQgPSBjc3YuZm9ybWF0O1xuZXhwb3J0IHZhciBjc3ZGb3JtYXRSb3dzID0gY3N2LmZvcm1hdFJvd3M7XG4iLCJpbXBvcnQgZHN2IGZyb20gXCIuL2RzdlwiO1xuXG52YXIgdHN2ID0gZHN2KFwiXFx0XCIpO1xuXG5leHBvcnQgdmFyIHRzdlBhcnNlID0gdHN2LnBhcnNlO1xuZXhwb3J0IHZhciB0c3ZQYXJzZVJvd3MgPSB0c3YucGFyc2VSb3dzO1xuZXhwb3J0IHZhciB0c3ZGb3JtYXQgPSB0c3YuZm9ybWF0O1xuZXhwb3J0IHZhciB0c3ZGb3JtYXRSb3dzID0gdHN2LmZvcm1hdFJvd3M7XG4iLCJmdW5jdGlvbiByZXNwb25zZVRleHQocmVzcG9uc2UpIHtcbiAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBmZXRjaChpbnB1dCwgaW5pdCkudGhlbihyZXNwb25zZVRleHQpO1xufVxuIiwiaW1wb3J0IHtjc3ZQYXJzZSwgZHN2Rm9ybWF0LCB0c3ZQYXJzZX0gZnJvbSBcImQzLWRzdlwiO1xuaW1wb3J0IHRleHQgZnJvbSBcIi4vdGV4dFwiO1xuXG5mdW5jdGlvbiBkc3ZQYXJzZShwYXJzZSkge1xuICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIGluaXQsIHJvdykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBpbml0ID09PSBcImZ1bmN0aW9uXCIpIHJvdyA9IGluaXQsIGluaXQgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRleHQoaW5wdXQsIGluaXQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBwYXJzZShyZXNwb25zZSwgcm93KTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZHN2KGRlbGltaXRlciwgaW5wdXQsIGluaXQsIHJvdykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMyAmJiB0eXBlb2YgaW5pdCA9PT0gXCJmdW5jdGlvblwiKSByb3cgPSBpbml0LCBpbml0ID0gdW5kZWZpbmVkO1xuICB2YXIgZm9ybWF0ID0gZHN2Rm9ybWF0KGRlbGltaXRlcik7XG4gIHJldHVybiB0ZXh0KGlucHV0LCBpbml0KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGZvcm1hdC5wYXJzZShyZXNwb25zZSwgcm93KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB2YXIgY3N2ID0gZHN2UGFyc2UoY3N2UGFyc2UpO1xuZXhwb3J0IHZhciB0c3YgPSBkc3ZQYXJzZSh0c3ZQYXJzZSk7XG4iLCJmdW5jdGlvbiByZXNwb25zZUpzb24ocmVzcG9uc2UpIHtcbiAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBmZXRjaChpbnB1dCwgaW5pdCkudGhlbihyZXNwb25zZUpzb24pO1xufVxuIiwiZXhwb3J0IHZhciB4aHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogeGh0bWwsXG4gIHhsaW5rOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcbiAgeG1sOiBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG59O1xuIiwiaW1wb3J0IG5hbWVzcGFjZXMgZnJvbSBcIi4vbmFtZXNwYWNlc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBwcmVmaXggPSBuYW1lICs9IFwiXCIsIGkgPSBwcmVmaXguaW5kZXhPZihcIjpcIik7XG4gIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgcmV0dXJuIG5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogbmFtZXNwYWNlc1twcmVmaXhdLCBsb2NhbDogbmFtZX0gOiBuYW1lO1xufVxuIiwiaW1wb3J0IG5hbWVzcGFjZSBmcm9tIFwiLi9uYW1lc3BhY2VcIjtcbmltcG9ydCB7eGh0bWx9IGZyb20gXCIuL25hbWVzcGFjZXNcIjtcblxuZnVuY3Rpb24gY3JlYXRvckluaGVyaXQobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gdXJpID09PSB4aHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSB4aHRtbFxuICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSlcbiAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModXJpLCBuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRvckZpeGVkKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcbiAgcmV0dXJuIChmdWxsbmFtZS5sb2NhbFxuICAgICAgPyBjcmVhdG9yRml4ZWRcbiAgICAgIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIG5vbmUoKSB7fVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IG5vbmUgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsImZ1bmN0aW9uIGVtcHR5KCkge1xuICByZXR1cm4gW107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gZW1wdHkgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsInZhciBtYXRjaGVyID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9O1xufTtcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKCFlbGVtZW50Lm1hdGNoZXMpIHtcbiAgICB2YXIgdmVuZG9yTWF0Y2hlcyA9IGVsZW1lbnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yXG4gICAgICAgIHx8IGVsZW1lbnQubXNNYXRjaGVzU2VsZWN0b3JcbiAgICAgICAgfHwgZWxlbWVudC5tb3pNYXRjaGVzU2VsZWN0b3JcbiAgICAgICAgfHwgZWxlbWVudC5vTWF0Y2hlc1NlbGVjdG9yO1xuICAgIG1hdGNoZXIgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmVuZG9yTWF0Y2hlcy5jYWxsKHRoaXMsIHNlbGVjdG9yKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtYXRjaGVyO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odXBkYXRlKSB7XG4gIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7XG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZVwiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRW50ZXJOb2RlKHBhcmVudCwgZGF0dW0pIHtcbiAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG4gIHRoaXMubmFtZXNwYWNlVVJJID0gcGFyZW50Lm5hbWVzcGFjZVVSSTtcbiAgdGhpcy5fbmV4dCA9IG51bGw7XG4gIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5fX2RhdGFfXyA9IGRhdHVtO1xufVxuXG5FbnRlck5vZGUucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogRW50ZXJOb2RlLFxuICBhcHBlbmRDaGlsZDogZnVuY3Rpb24oY2hpbGQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHRoaXMuX25leHQpOyB9LFxuICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKGNoaWxkLCBuZXh0KSB7IHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBuZXh0KTsgfSxcbiAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsgfSxcbiAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsgfVxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQge0VudGVyTm9kZX0gZnJvbSBcIi4vZW50ZXJcIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi4vY29uc3RhbnRcIjtcblxudmFyIGtleVByZWZpeCA9IFwiJFwiOyAvLyBQcm90ZWN0IGFnYWluc3Qga2V5cyBsaWtlIOKAnF9fcHJvdG9fX+KAnS5cblxuZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHtcbiAgdmFyIGkgPSAwLFxuICAgICAgbm9kZSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBmaXQgaW50byB1cGRhdGUuXG4gIC8vIFB1dCBhbnkgbnVsbCBub2RlcyBpbnRvIGVudGVyLlxuICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuXG4gIGZvciAoOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZG9u4oCZdCBmaXQgaW50byBleGl0LlxuICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYmluZEtleShwYXJlbnQsIGdyb3VwLCBlbnRlciwgdXBkYXRlLCBleGl0LCBkYXRhLCBrZXkpIHtcbiAgdmFyIGksXG4gICAgICBub2RlLFxuICAgICAgbm9kZUJ5S2V5VmFsdWUgPSB7fSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAga2V5VmFsdWVzID0gbmV3IEFycmF5KGdyb3VwTGVuZ3RoKSxcbiAgICAgIGtleVZhbHVlO1xuXG4gIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBub2RlLlxuICAvLyBJZiBtdWx0aXBsZSBub2RlcyBoYXZlIHRoZSBzYW1lIGtleSwgdGhlIGR1cGxpY2F0ZXMgYXJlIGFkZGVkIHRvIGV4aXQuXG4gIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAga2V5VmFsdWVzW2ldID0ga2V5VmFsdWUgPSBrZXlQcmVmaXggKyBrZXkuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7XG4gICAgICBpZiAoa2V5VmFsdWUgaW4gbm9kZUJ5S2V5VmFsdWUpIHtcbiAgICAgICAgZXhpdFtpXSA9IG5vZGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlQnlLZXlWYWx1ZVtrZXlWYWx1ZV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBkYXR1bS5cbiAgLy8gSWYgdGhlcmUgYSBub2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleSwgam9pbiBhbmQgYWRkIGl0IHRvIHVwZGF0ZS5cbiAgLy8gSWYgdGhlcmUgaXMgbm90IChvciB0aGUga2V5IGlzIGEgZHVwbGljYXRlKSwgYWRkIGl0IHRvIGVudGVyLlxuICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAga2V5VmFsdWUgPSBrZXlQcmVmaXggKyBrZXkuY2FsbChwYXJlbnQsIGRhdGFbaV0sIGksIGRhdGEpO1xuICAgIGlmIChub2RlID0gbm9kZUJ5S2V5VmFsdWVba2V5VmFsdWVdKSB7XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICBub2RlQnlLZXlWYWx1ZVtrZXlWYWx1ZV0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKG5vZGVCeUtleVZhbHVlW2tleVZhbHVlc1tpXV0gPT09IG5vZGUpKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgZGF0YSA9IG5ldyBBcnJheSh0aGlzLnNpemUoKSksIGogPSAtMTtcbiAgICB0aGlzLmVhY2goZnVuY3Rpb24oZCkgeyBkYXRhWysral0gPSBkOyB9KTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHZhciBiaW5kID0ga2V5ID8gYmluZEtleSA6IGJpbmRJbmRleCxcbiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLFxuICAgICAgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdmFsdWUgPSBjb25zdGFudCh2YWx1ZSk7XG5cbiAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgdmFyIHBhcmVudCA9IHBhcmVudHNbal0sXG4gICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLFxuICAgICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgZGF0YSA9IHZhbHVlLmNhbGwocGFyZW50LCBwYXJlbnQgJiYgcGFyZW50Ll9fZGF0YV9fLCBqLCBwYXJlbnRzKSxcbiAgICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAgICBlbnRlckdyb3VwID0gZW50ZXJbal0gPSBuZXcgQXJyYXkoZGF0YUxlbmd0aCksXG4gICAgICAgIHVwZGF0ZUdyb3VwID0gdXBkYXRlW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLFxuICAgICAgICBleGl0R3JvdXAgPSBleGl0W2pdID0gbmV3IEFycmF5KGdyb3VwTGVuZ3RoKTtcblxuICAgIGJpbmQocGFyZW50LCBncm91cCwgZW50ZXJHcm91cCwgdXBkYXRlR3JvdXAsIGV4aXRHcm91cCwgZGF0YSwga2V5KTtcblxuICAgIC8vIE5vdyBjb25uZWN0IHRoZSBlbnRlciBub2RlcyB0byB0aGVpciBmb2xsb3dpbmcgdXBkYXRlIG5vZGUsIHN1Y2ggdGhhdFxuICAgIC8vIGFwcGVuZENoaWxkIGNhbiBpbnNlcnQgdGhlIG1hdGVyaWFsaXplZCBlbnRlciBub2RlIGJlZm9yZSB0aGlzIG5vZGUsXG4gICAgLy8gcmF0aGVyIHRoYW4gYXQgdGhlIGVuZCBvZiB0aGUgcGFyZW50IG5vZGUuXG4gICAgZm9yICh2YXIgaTAgPSAwLCBpMSA9IDAsIHByZXZpb3VzLCBuZXh0OyBpMCA8IGRhdGFMZW5ndGg7ICsraTApIHtcbiAgICAgIGlmIChwcmV2aW91cyA9IGVudGVyR3JvdXBbaTBdKSB7XG4gICAgICAgIGlmIChpMCA+PSBpMSkgaTEgPSBpMCArIDE7XG4gICAgICAgIHdoaWxlICghKG5leHQgPSB1cGRhdGVHcm91cFtpMV0pICYmICsraTEgPCBkYXRhTGVuZ3RoKTtcbiAgICAgICAgcHJldmlvdXMuX25leHQgPSBuZXh0IHx8IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlID0gbmV3IFNlbGVjdGlvbih1cGRhdGUsIHBhcmVudHMpO1xuICB1cGRhdGUuX2VudGVyID0gZW50ZXI7XG4gIHVwZGF0ZS5fZXhpdCA9IGV4aXQ7XG4gIHJldHVybiB1cGRhdGU7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29tcGFyZSkge1xuICBpZiAoIWNvbXBhcmUpIGNvbXBhcmUgPSBhc2NlbmRpbmc7XG5cbiAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJlKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfVxuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHNvcnRncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHNvcnRncm91cCA9IHNvcnRncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHNvcnRncm91cFtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHNvcnRncm91cC5zb3J0KGNvbXBhcmVOb2RlKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7XG59XG5cbmZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsImltcG9ydCBuYW1lc3BhY2UgZnJvbSBcIi4uL25hbWVzcGFjZVwiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHYpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKTtcbiAgICByZXR1cm4gZnVsbG5hbWUubG9jYWxcbiAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbClcbiAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJGdW5jdGlvbk5TIDogYXR0ckZ1bmN0aW9uKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpKShmdWxsbmFtZSwgdmFsdWUpKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUpIHtcbiAgcmV0dXJuIChub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSAvLyBub2RlIGlzIGEgTm9kZVxuICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG4iLCJmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7XG4gIHJldHVybiBub2RlLmNsYXNzTGlzdCB8fCBuZXcgQ2xhc3NMaXN0KG5vZGUpO1xufVxuXG5mdW5jdGlvbiBDbGFzc0xpc3Qobm9kZSkge1xuICB0aGlzLl9ub2RlID0gbm9kZTtcbiAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIik7XG59XG5cbkNsYXNzTGlzdC5wcm90b3R5cGUgPSB7XG4gIGFkZDogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA8IDApIHtcbiAgICAgIHRoaXMuX25hbWVzLnB1c2gobmFtZSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSkgPj0gMDtcbiAgfVxufTtcblxuZnVuY3Rpb24gY2xhc3NlZEFkZChub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5hZGQobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkUmVtb3ZlKG5vZGUsIG5hbWVzKSB7XG4gIHZhciBsaXN0ID0gY2xhc3NMaXN0KG5vZGUpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZhbHNlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkUmVtb3ZlKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZ1bmN0aW9uKG5hbWVzLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgKHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgPyBjbGFzc2VkQWRkIDogY2xhc3NlZFJlbW92ZSkodGhpcywgbmFtZXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgbmFtZXMgPSBjbGFzc0FycmF5KG5hbWUgKyBcIlwiKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbikgaWYgKCFsaXN0LmNvbnRhaW5zKG5hbWVzW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWVcbiAgICAgID8gY2xhc3NlZFRydWVcbiAgICAgIDogY2xhc3NlZEZhbHNlKShuYW1lcywgdmFsdWUpKTtcbn1cbiIsImZ1bmN0aW9uIHRleHRSZW1vdmUoKSB7XG4gIHRoaXMudGV4dENvbnRlbnQgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbFxuICAgICAgICAgID8gdGV4dFJlbW92ZSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gdGV4dEZ1bmN0aW9uXG4gICAgICAgICAgOiB0ZXh0Q29uc3RhbnQpKHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59XG4iLCJmdW5jdGlvbiBodG1sUmVtb3ZlKCkge1xuICB0aGlzLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaHRtbEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGh0bWxGdW5jdGlvblxuICAgICAgICAgIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLmlubmVySFRNTDtcbn1cbiIsImZ1bmN0aW9uIHJhaXNlKCkge1xuICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7XG59XG4iLCJmdW5jdGlvbiBsb3dlcigpIHtcbiAgaWYgKHRoaXMucHJldmlvdXNTaWJsaW5nKSB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gobG93ZXIpO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3JcIjtcbmltcG9ydCBzZWxlY3RvciBmcm9tIFwiLi4vc2VsZWN0b3JcIjtcblxuZnVuY3Rpb24gY29uc3RhbnROdWxsKCkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgYmVmb3JlKSB7XG4gIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZSA6IGNyZWF0b3IobmFtZSksXG4gICAgICBzZWxlY3QgPSBiZWZvcmUgPT0gbnVsbCA/IGNvbnN0YW50TnVsbCA6IHR5cGVvZiBiZWZvcmUgPT09IFwiZnVuY3Rpb25cIiA/IGJlZm9yZSA6IHNlbGVjdG9yKGJlZm9yZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IG51bGwpO1xuICB9KTtcbn1cbiIsImZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyZW1vdmUpO1xufVxuIiwiZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lU2hhbGxvdygpIHtcbiAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5jbG9uZU5vZGUoZmFsc2UpLCB0aGlzLm5leHRTaWJsaW5nKTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lRGVlcCgpIHtcbiAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5jbG9uZU5vZGUodHJ1ZSksIHRoaXMubmV4dFNpYmxpbmcpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihkZWVwKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdChkZWVwID8gc2VsZWN0aW9uX2Nsb25lRGVlcCA6IHNlbGVjdGlvbl9jbG9uZVNoYWxsb3cpO1xufVxuIiwidmFyIGZpbHRlckV2ZW50cyA9IHt9O1xuXG5leHBvcnQgdmFyIGV2ZW50ID0gbnVsbDtcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKCEoXCJvbm1vdXNlZW50ZXJcIiBpbiBlbGVtZW50KSkge1xuICAgIGZpbHRlckV2ZW50cyA9IHttb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLCBtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCJ9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbHRlckNvbnRleHRMaXN0ZW5lcihsaXN0ZW5lciwgaW5kZXgsIGdyb3VwKSB7XG4gIGxpc3RlbmVyID0gY29udGV4dExpc3RlbmVyKGxpc3RlbmVyLCBpbmRleCwgZ3JvdXApO1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgcmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7XG4gICAgaWYgKCFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0aGlzICYmICEocmVsYXRlZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzKSAmIDgpKSkge1xuICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjb250ZXh0TGlzdGVuZXIobGlzdGVuZXIsIGluZGV4LCBncm91cCkge1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQxKSB7XG4gICAgdmFyIGV2ZW50MCA9IGV2ZW50OyAvLyBFdmVudHMgY2FuIGJlIHJlZW50cmFudCAoZS5nLiwgZm9jdXMpLlxuICAgIGV2ZW50ID0gZXZlbnQxO1xuICAgIHRyeSB7XG4gICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIHRoaXMuX19kYXRhX18sIGluZGV4LCBncm91cCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGV2ZW50ID0gZXZlbnQwO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25SZW1vdmUodHlwZW5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbiA9IHRoaXMuX19vbjtcbiAgICBpZiAoIW9uKSByZXR1cm47XG4gICAgZm9yICh2YXIgaiA9IDAsIGkgPSAtMSwgbSA9IG9uLmxlbmd0aCwgbzsgaiA8IG07ICsraikge1xuICAgICAgaWYgKG8gPSBvbltqXSwgKCF0eXBlbmFtZS50eXBlIHx8IG8udHlwZSA9PT0gdHlwZW5hbWUudHlwZSkgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8uY2FwdHVyZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblsrK2ldID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCsraSkgb24ubGVuZ3RoID0gaTtcbiAgICBlbHNlIGRlbGV0ZSB0aGlzLl9fb247XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgY2FwdHVyZSkge1xuICB2YXIgd3JhcCA9IGZpbHRlckV2ZW50cy5oYXNPd25Qcm9wZXJ0eSh0eXBlbmFtZS50eXBlKSA/IGZpbHRlckNvbnRleHRMaXN0ZW5lciA6IGNvbnRleHRMaXN0ZW5lcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKGQsIGksIGdyb3VwKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uLCBvLCBsaXN0ZW5lciA9IHdyYXAodmFsdWUsIGksIGdyb3VwKTtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgICBpZiAoKG8gPSBvbltqXSkudHlwZSA9PT0gdHlwZW5hbWUudHlwZSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciwgby5jYXB0dXJlKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciA9IGxpc3RlbmVyLCBvLmNhcHR1cmUgPSBjYXB0dXJlKTtcbiAgICAgICAgby52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlbmFtZS50eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSk7XG4gICAgbyA9IHt0eXBlOiB0eXBlbmFtZS50eXBlLCBuYW1lOiB0eXBlbmFtZS5uYW1lLCB2YWx1ZTogdmFsdWUsIGxpc3RlbmVyOiBsaXN0ZW5lciwgY2FwdHVyZTogY2FwdHVyZX07XG4gICAgaWYgKCFvbikgdGhpcy5fX29uID0gW29dO1xuICAgIGVsc2Ugb24ucHVzaChvKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odHlwZW5hbWUsIHZhbHVlLCBjYXB0dXJlKSB7XG4gIHZhciB0eXBlbmFtZXMgPSBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZSArIFwiXCIpLCBpLCBuID0gdHlwZW5hbWVzLmxlbmd0aCwgdDtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgb24gPSB0aGlzLm5vZGUoKS5fX29uO1xuICAgIGlmIChvbikgZm9yICh2YXIgaiA9IDAsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHtcbiAgICAgIGZvciAoaSA9IDAsIG8gPSBvbltqXTsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoKHQgPSB0eXBlbmFtZXNbaV0pLnR5cGUgPT09IG8udHlwZSAmJiB0Lm5hbWUgPT09IG8ubmFtZSkge1xuICAgICAgICAgIHJldHVybiBvLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIG9uID0gdmFsdWUgPyBvbkFkZCA6IG9uUmVtb3ZlO1xuICBpZiAoY2FwdHVyZSA9PSBudWxsKSBjYXB0dXJlID0gZmFsc2U7XG4gIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHRoaXMuZWFjaChvbih0eXBlbmFtZXNbaV0sIHZhbHVlLCBjYXB0dXJlKSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3VzdG9tRXZlbnQoZXZlbnQxLCBsaXN0ZW5lciwgdGhhdCwgYXJncykge1xuICB2YXIgZXZlbnQwID0gZXZlbnQ7XG4gIGV2ZW50MS5zb3VyY2VFdmVudCA9IGV2ZW50O1xuICBldmVudCA9IGV2ZW50MTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbGlzdGVuZXIuYXBwbHkodGhhdCwgYXJncyk7XG4gIH0gZmluYWxseSB7XG4gICAgZXZlbnQgPSBldmVudDA7XG4gIH1cbn1cbiIsImltcG9ydCBkZWZhdWx0VmlldyBmcm9tIFwiLi4vd2luZG93XCI7XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQobm9kZSwgdHlwZSwgcGFyYW1zKSB7XG4gIHZhciB3aW5kb3cgPSBkZWZhdWx0Vmlldyhub2RlKSxcbiAgICAgIGV2ZW50ID0gd2luZG93LkN1c3RvbUV2ZW50O1xuXG4gIGlmICh0eXBlb2YgZXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGV2ZW50ID0gbmV3IGV2ZW50KHR5cGUsIHBhcmFtcyk7XG4gIH0gZWxzZSB7XG4gICAgZXZlbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICBpZiAocGFyYW1zKSBldmVudC5pbml0RXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlKSwgZXZlbnQuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgICBlbHNlIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UpO1xuICB9XG5cbiAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hDb25zdGFudCh0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRnVuY3Rpb24odHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gdGhpcy5lYWNoKCh0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZGlzcGF0Y2hGdW5jdGlvblxuICAgICAgOiBkaXNwYXRjaENvbnN0YW50KSh0eXBlLCBwYXJhbXMpKTtcbn1cbiIsImltcG9ydCBzZWxlY3Rpb25fc2VsZWN0IGZyb20gXCIuL3NlbGVjdFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RBbGwgZnJvbSBcIi4vc2VsZWN0QWxsXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2ZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcbmltcG9ydCBzZWxlY3Rpb25fZGF0YSBmcm9tIFwiLi9kYXRhXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2VudGVyIGZyb20gXCIuL2VudGVyXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2V4aXQgZnJvbSBcIi4vZXhpdFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9tZXJnZSBmcm9tIFwiLi9tZXJnZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9vcmRlciBmcm9tIFwiLi9vcmRlclwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zb3J0IGZyb20gXCIuL3NvcnRcIjtcbmltcG9ydCBzZWxlY3Rpb25fY2FsbCBmcm9tIFwiLi9jYWxsXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGVzIGZyb20gXCIuL25vZGVzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGUgZnJvbSBcIi4vbm9kZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zaXplIGZyb20gXCIuL3NpemVcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW1wdHkgZnJvbSBcIi4vZW1wdHlcIjtcbmltcG9ydCBzZWxlY3Rpb25fZWFjaCBmcm9tIFwiLi9lYWNoXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2F0dHIgZnJvbSBcIi4vYXR0clwiO1xuaW1wb3J0IHNlbGVjdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9wcm9wZXJ0eSBmcm9tIFwiLi9wcm9wZXJ0eVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbGFzc2VkIGZyb20gXCIuL2NsYXNzZWRcIjtcbmltcG9ydCBzZWxlY3Rpb25fdGV4dCBmcm9tIFwiLi90ZXh0XCI7XG5pbXBvcnQgc2VsZWN0aW9uX2h0bWwgZnJvbSBcIi4vaHRtbFwiO1xuaW1wb3J0IHNlbGVjdGlvbl9yYWlzZSBmcm9tIFwiLi9yYWlzZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9sb3dlciBmcm9tIFwiLi9sb3dlclwiO1xuaW1wb3J0IHNlbGVjdGlvbl9hcHBlbmQgZnJvbSBcIi4vYXBwZW5kXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2luc2VydCBmcm9tIFwiLi9pbnNlcnRcIjtcbmltcG9ydCBzZWxlY3Rpb25fcmVtb3ZlIGZyb20gXCIuL3JlbW92ZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbG9uZSBmcm9tIFwiLi9jbG9uZVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXR1bSBmcm9tIFwiLi9kYXR1bVwiO1xuaW1wb3J0IHNlbGVjdGlvbl9vbiBmcm9tIFwiLi9vblwiO1xuaW1wb3J0IHNlbGVjdGlvbl9kaXNwYXRjaCBmcm9tIFwiLi9kaXNwYXRjaFwiO1xuXG5leHBvcnQgdmFyIHJvb3QgPSBbbnVsbF07XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWxlY3Rpb24oZ3JvdXBzLCBwYXJlbnRzKSB7XG4gIHRoaXMuX2dyb3VwcyA9IGdyb3VwcztcbiAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7XG59XG5cblNlbGVjdGlvbi5wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogU2VsZWN0aW9uLFxuICBzZWxlY3Q6IHNlbGVjdGlvbl9zZWxlY3QsXG4gIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCxcbiAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLFxuICBkYXRhOiBzZWxlY3Rpb25fZGF0YSxcbiAgZW50ZXI6IHNlbGVjdGlvbl9lbnRlcixcbiAgZXhpdDogc2VsZWN0aW9uX2V4aXQsXG4gIG1lcmdlOiBzZWxlY3Rpb25fbWVyZ2UsXG4gIG9yZGVyOiBzZWxlY3Rpb25fb3JkZXIsXG4gIHNvcnQ6IHNlbGVjdGlvbl9zb3J0LFxuICBjYWxsOiBzZWxlY3Rpb25fY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9ub2RlcyxcbiAgbm9kZTogc2VsZWN0aW9uX25vZGUsXG4gIHNpemU6IHNlbGVjdGlvbl9zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX2VtcHR5LFxuICBlYWNoOiBzZWxlY3Rpb25fZWFjaCxcbiAgYXR0cjogc2VsZWN0aW9uX2F0dHIsXG4gIHN0eWxlOiBzZWxlY3Rpb25fc3R5bGUsXG4gIHByb3BlcnR5OiBzZWxlY3Rpb25fcHJvcGVydHksXG4gIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLFxuICB0ZXh0OiBzZWxlY3Rpb25fdGV4dCxcbiAgaHRtbDogc2VsZWN0aW9uX2h0bWwsXG4gIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsXG4gIGxvd2VyOiBzZWxlY3Rpb25fbG93ZXIsXG4gIGFwcGVuZDogc2VsZWN0aW9uX2FwcGVuZCxcbiAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LFxuICByZW1vdmU6IHNlbGVjdGlvbl9yZW1vdmUsXG4gIGNsb25lOiBzZWxlY3Rpb25fY2xvbmUsXG4gIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sXG4gIG9uOiBzZWxlY3Rpb25fb24sXG4gIGRpc3BhdGNoOiBzZWxlY3Rpb25fZGlzcGF0Y2hcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGlvbjtcbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3RvclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHNlbGVjdG9yQWxsIGZyb20gXCIuLi9zZWxlY3RvckFsbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3JBbGwoc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBbXSwgcGFyZW50cyA9IFtdLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzdWJncm91cHMucHVzaChzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpO1xuICAgICAgICBwYXJlbnRzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCBwYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IG1hdGNoZXIgZnJvbSBcIi4uL21hdGNoZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gXCJmdW5jdGlvblwiKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBtYXRjaC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkge1xuICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZVwiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9leGl0IHx8IHRoaXMuX2dyb3Vwcy5tYXAoc3BhcnNlKSwgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0aW9uKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzMCA9IHRoaXMuX2dyb3VwcywgZ3JvdXBzMSA9IHNlbGVjdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gLTEsIG0gPSBncm91cHMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbmV4dCAhPT0gbm9kZS5uZXh0U2libGluZykgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTtcbiAgICAgICAgbmV4dCA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzBdO1xuICBhcmd1bWVudHNbMF0gPSB0aGlzO1xuICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICByZXR1cm4gdGhpcztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgbm9kZXMgPSBuZXcgQXJyYXkodGhpcy5zaXplKCkpLCBpID0gLTE7XG4gIHRoaXMuZWFjaChmdW5jdGlvbigpIHsgbm9kZXNbKytpXSA9IHRoaXM7IH0pO1xuICByZXR1cm4gbm9kZXM7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgdmFyIG5vZGUgPSBncm91cFtpXTtcbiAgICAgIGlmIChub2RlKSByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgc2l6ZSA9IDA7XG4gIHRoaXMuZWFjaChmdW5jdGlvbigpIHsgKytzaXplOyB9KTtcbiAgcmV0dXJuIHNpemU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICF0aGlzLm5vZGUoKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIGNhbGxiYWNrLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwiaW1wb3J0IGRlZmF1bHRWaWV3IGZyb20gXCIuLi93aW5kb3dcIjtcblxuZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVDb25zdGFudChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2LCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgICA/IHN0eWxlUmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gc3R5bGVGdW5jdGlvblxuICAgICAgICAgICAgOiBzdHlsZUNvbnN0YW50KShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpXG4gICAgICA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVWYWx1ZShub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSlcbiAgICAgIHx8IGRlZmF1bHRWaWV3KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIHByb3BlcnR5UmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5RnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBwcm9wZXJ0eUZ1bmN0aW9uXG4gICAgICAgICAgOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpW25hbWVdO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiLCB2YWx1ZSlcbiAgICAgIDogdGhpcy5ub2RlKCkuX19kYXRhX187XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbiwgcm9vdH0gZnJvbSBcIi4vc2VsZWN0aW9uL2luZGV4XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCJcbiAgICAgID8gbmV3IFNlbGVjdGlvbihbW2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXV0sIFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdKVxuICAgICAgOiBuZXcgU2VsZWN0aW9uKFtbc2VsZWN0b3JdXSwgcm9vdCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCDCqSAyMDE1IC0gMjAxOCBUaGUgQnJvYWQgSW5zdGl0dXRlLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIDMtY2xhdXNlIGxpY2Vuc2UgKGh0dHBzOi8vZ2l0aHViLmNvbS9icm9hZGluc3RpdHV0ZS9ndGV4LXZpei9ibG9iL21hc3Rlci9MSUNFTlNFLm1kKVxuICovXG4vKipcbiAqIENyZWF0ZSBhIHRvb2xiYXJcbiAqIFRoaXMgY2xhc3MgdXNlcyBhIGxvdCBvZiBqUXVlcnkgZm9yIGRvbSBlbGVtZW50IG1hbmlwdWxhdGlvblxuICovXG5cbmltcG9ydCB7c2VsZWN0fSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge3BhcnNlQ3NzU3R5bGVzfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb29sYmFyIHtcbiAgICBjb25zdHJ1Y3Rvcihkb21JZCwgdG9vbHRpcD11bmRlZmluZWQsIHZlcnRpY2FsPWZhbHNlKXtcbiAgICAgICAgJChgIyR7ZG9tSWR9YCkuc2hvdygpOyAvLyBpZiBoaWRkZW5cblxuICAgICAgICAvLyBhZGQgYSBuZXcgYmFyZ3JvdXAgZGl2IHRvIGRvbUlEIHdpdGggYm9vdHN0cmFwIGJ1dHRvbiBjbGFzc2VzXG4gICAgICAgIGNvbnN0IGJ0bkNsYXNzZXMgPSB2ZXJ0aWNhbD8nYnRuLWdyb3VwLXZlcnRpY2FsIGJ0bi1ncm91cC1zbSc6ICdidG4tZ3JvdXAgYnRuLWdyb3VwLXNtJztcbiAgICAgICAgdGhpcy5iYXIgPSAkKCc8ZGl2Lz4nKS5hZGRDbGFzcyhidG5DbGFzc2VzKS5hcHBlbmRUbyhgIyR7ZG9tSWR9YCk7XG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xuICAgICAgICB0aGlzLnRvb2x0aXAgPSB0b29sdGlwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGRvd25sb2FkIGJ1dHRvbiBmb3IgU1ZHXG4gICAgICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBidXR0b24gZG9tIElEXG4gICAgICogQHBhcmFtIHN2Z0lkIHtTdHJpbmd9IHRoZSBTVkcgZG9tIElEIHRvIGdyYWIgYW5kIGRvd25sb2FkXG4gICAgICogQHBhcmFtIG91dGZpbGVOYW1lIHtTdHJpbmd9IHRoZSBkb3dubG9hZCBmaWxlIG5hbWVcbiAgICAgKiBAcGFyYW0gY2xvbmVJZCB7U3RyaW5nfSB0aGUgY2xvbmVkIFNWRyBkb20gSURcbiAgICAgKiBAcGFyYW0gaWNvbiB7U3RyaW5nfSBhIGZvbnRhd2Vzb21lJ3MgaWNvbiBjbGFzcyBuYW1lXG4gICAgICovXG4gICAgY3JlYXRlRG93bmxvYWRTdmdCdXR0b24oaWQsIHN2Z0lkLCBvdXRmaWxlTmFtZSwgY2xvbmVJZCwgaWNvbj0nZmEtZG93bmxvYWQnKXtcbiAgICAgICAgY29uc3QgJGJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKGlkLCBpY29uKTtcbiAgICAgICAgc2VsZWN0KGAjJHtpZH1gKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5kb3dubG9hZFN2ZyhzdmdJZCwgb3V0ZmlsZU5hbWUsIGNsb25lSWQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAuc2hvdyhcIkRvd25sb2FkXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcC5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVSZXNldEJ1dHRvbihpZCwgY2FsbGJhY2ssIGljb249J2ZhLWV4cGFuZC1hcnJvd3MtYWx0Jyl7XG4gICAgICAgIGNvbnN0ICRidXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbihpZCwgaWNvbik7XG4gICAgICAgIHNlbGVjdChgIyR7aWR9YClcbiAgICAgICAgICAgIC5vbignY2xpY2snLCBjYWxsYmFjaylcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAuc2hvdyhcIlJlc2V0IHRoZSBzY2FsZXNcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsICgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZSBhIGJ1dHRvbiB0byB0aGUgdG9vbGJhclxuICAgICAqIEBwYXJhbSBpZCB7U3RyaW5nfSB0aGUgYnV0dG9uJ3MgaWRcbiAgICAgKiBAcGFyYW0gaWNvbiB7U3RyaW5nfSBhIGZvbnRhd2Vzb21lIGljb24gY2xhc3NcbiAgICAgKiBEZXBlbmRlbmNpZXM6IEJvb3RzdHJhcCwgalF1ZXJ5LCBGb250YXdlc29tZVxuICAgICAqL1xuICAgIGNyZWF0ZUJ1dHRvbihpZCwgaWNvbj0nZmEtZG93bmxvYWQnKXtcbiAgICAgICAgY29uc3QgJGJ1dHRvbiA9ICQoJzxhLz4nKS5hdHRyKCdpZCcsIGlkKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdidG4gYnRuLWRlZmF1bHQnKS5hcHBlbmRUbyh0aGlzLmJhcik7XG4gICAgICAgICQoJzxpLz4nKS5hZGRDbGFzcyhgZmEgJHtpY29ufWApLmFwcGVuZFRvKCRidXR0b24pO1xuICAgICAgICB0aGlzLmJ1dHRvbnNbaWRdID0gJGJ1dHRvbjtcbiAgICAgICAgcmV0dXJuICRidXR0b247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYXR0YWNoIGEgdG9vbHRpcCBkb20gd2l0aCB0aGUgdG9vbGJhclxuICAgICAqIEBwYXJhbSB0b29sdGlwIHtUb29sdGlwfVxuICAgICAqL1xuICAgIGF0dGFjaFRvb2x0aXAodG9vbHRpcCl7XG4gICAgICAgIHRoaXMudG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgU1ZHIG9ialxuICAgICAqIEBwYXJhbSBzdmdJZCB7U3RyaW5nfSB0aGUgU1ZHIGRvbSBJRFxuICAgICAqIEBwYXJhbSBmaWxlTmFtZSB7U3RyaW5nfSB0aGUgb3V0cHV0IGZpbGUgbmFtZVxuICAgICAqIEBwYXJhbSBjbG9uZUlkIHtTdHJpbmd9IHRoZSB0ZW1wb3JhcnkgZG9tIElEIHRvIGNvcHkgdGhlIFNWRyB0b1xuICAgICAqIERlcGVuZGVuY2llczogRmlsZVNhdmVyXG4gICAgICovXG4gICAgZG93bmxvYWRTdmcoc3ZnSWQsIGZpbGVOYW1lLCBjbG9uZUlkKXtcbiAgICAgICAgLy8gbGV0IHN2Z09iaiA9ICQoJCgkKGAke1wiI1wiICtzdmdJZH0gc3ZnYCkpWzBdKTsgLy8gY29tcGxpY2F0ZWQgalF1ZXJ5IHRvIGdldCB0byB0aGUgU1ZHIG9iamVjdFxuICAgICAgICBsZXQgc3ZnT2JqID0gJCgkKCQoYCR7XCIjXCIgK3N2Z0lkfWApKVswXSk7XG4gICAgICAgIGxldCAkc3ZnQ29weSA9IHN2Z09iai5jbG9uZSgpXG4gICAgICAgIC5hdHRyKFwidmVyc2lvblwiLCBcIjEuMVwiKVxuICAgICAgICAuYXR0cihcInhtbG5zXCIsIFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIik7XG5cbiAgICAgICAgLy8gcGFyc2UgYW5kIGFkZCBhbGwgdGhlIENTUyBzdHlsaW5nIHVzZWQgYnkgdGhlIFNWR1xuICAgICAgICBsZXQgc3R5bGVzID0gcGFyc2VDc3NTdHlsZXMoc3ZnT2JqLmdldCgpKTtcbiAgICAgICAgJHN2Z0NvcHkucHJlcGVuZChzdHlsZXMpO1xuXG4gICAgICAgICQoXCIjXCIgKyBjbG9uZUlkKS5odG1sKCcnKS5oaWRlKCk7IC8vIG1ha2Ugc3VyZSB0aGUgY29weUlEIGlzIGludmlzaWJsZVxuICAgICAgICBsZXQgc3ZnSHRtbCA9ICQoYCMke2Nsb25lSWR9YCkuYXBwZW5kKCRzdmdDb3B5KS5odG1sKCk7XG5cbiAgICAgICAgbGV0IHN2Z0Jsb2IgPSBuZXcgQmxvYihbc3ZnSHRtbF0sIHt0eXBlOiBcImltYWdlL3N2Zyt4bWxcIn0pO1xuICAgICAgICBzYXZlQXMoc3ZnQmxvYiwgZmlsZU5hbWUpOyAvLyB0aGlzIGlzIGEgRmlsZVNhdmVyIGZ1bmN0aW9uLi4uLlxuXG4gICAgICAgIC8vIGNsZWFyIHRoZSB0ZW1wIGRvd25sb2FkIGRpdlxuICAgICAgICAkKGAjJHtjbG9uZUlkfWApLmh0bWwoJycpLmhpZGUoKTtcbiAgICB9XG59IiwiLyoqXG4gKiBDb3B5cmlnaHQgwqkgMjAxNSAtIDIwMTggVGhlIEJyb2FkIEluc3RpdHV0ZSwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEJTRCAzLWNsYXVzZSBsaWNlbnNlIChodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvZ3RleC12aXovYmxvYi9tYXN0ZXIvTElDRU5TRS5tZClcbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuIFNWR1xuICogQHBhcmFtIGlkIHtTdHJpbmd9IGEgRE9NIGVsZW1lbnQgSUQgdGhhdCBzdGFydHMgd2l0aCBhIFwiI1wiXG4gKiBAcGFyYW0gd2lkdGgge051bWVyaWN9XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1lcmljfVxuICogQHBhcmFtIG1hcmdpbiB7T2JqZWN0fSB3aXRoIHR3byBhdHRyaWJ1dGVzOiB3aWR0aCBhbmQgaGVpZ2h0XG4gKiBAcmV0dXJuIHtTZWxlY3Rpb259IHRoZSBkMyBzZWxlY3Rpb24gb2JqZWN0IG9mIHRoZSBTVkdcbiAqL1xuXG5pbXBvcnQge3NlbGVjdH0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtyYW5nZX0gZnJvbSBcImQzLWFycmF5XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0RvbUlkKGlkKXtcbiAgICAvLyB0ZXN0IGlucHV0IHBhcmFtc1xuICAgIGlmICgkKGAjJHtpZH1gKS5sZW5ndGggPT0gMCkge1xuICAgICAgICBsZXQgZXJyb3IgPSBgSW5wdXQgRXJyb3I6IERPTSBJRCAke2lkfSBpcyBub3QgZm91bmQuYDtcbiAgICAgICAgYWxlcnQoZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgQ2FudmFzIEQzIG9iamVjdFxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBwYXJlbnQgZG9tIElEXG4gKiBAcGFyYW0gd2lkdGgge051bWVyaWN9OiB0aGUgb3V0ZXIgd2lkdGhcbiAqIEBwYXJhbSBoZWlnaHQge051bWVyaWN9OiB0aGUgb3V0ZXIgaGVpZ2h0XG4gKiBAcGFyYW0gbWFyZ2luIHtPYmplY3R9IHdpdGggYXR0cjogbGVmdCwgdG9wXG4gKiBAcGFyYW0gY2FudmFzSWQge1N0cmluZ31cbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGlkLCB3aWR0aCwgaGVpZ2h0LCBtYXJnaW4sIGNhbnZhc0lkPXVuZGVmaW5lZCwgcG9zaXRpb249XCJhYnNvbHV0ZVwiKXtcbiAgICBjaGVja0RvbUlkKGlkKTtcbiAgICBpZihjYW52YXNJZD09PXVuZGVmaW5lZCkgY2FudmFzSWQ9YCR7aWR9LWNhbnZhc2A7XG4gICAgcmV0dXJuIHNlbGVjdChgIyR7aWR9YClcbiAgICAgICAgLmFwcGVuZChcImNhbnZhc1wiKVxuICAgICAgICAuYXR0cignaWQnLCBjYW52YXNJZClcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuc3R5bGUoXCJwb3NpdGlvblwiLCBwb3NpdGlvbikgLy8gVE9ETzogc2hvdWxkIHRoZSBwb3NpdGlvbiBiZSB1c2VyLWRlZmluZWQ/IHJlbGF0aXZlIHZzIGFic29sdXRlXG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIFNWRyBEMyBvYmplY3RcbiAqIEBwYXJhbSBpZCB7U3RyaW5nfSB0aGUgcGFyZW50IGRvbSBJRFxuICogQHBhcmFtIHdpZHRoIHtOdW1lcmljfTogdGhlIG91dGVyIHdpZHRoXG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1lcmljfTogdGhlIG91dGVyIGhlaWdodFxuICogQHBhcmFtIG1hcmdpbiB7T2JqZWN0fSB3aXRoIGF0dHI6IGxlZnQsIHRvcFxuICogQHBhcmFtIHN2Z0lkIHtTdHJpbmd9XG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN2ZyhpZCwgd2lkdGgsIGhlaWdodCwgbWFyZ2luLCBzdmdJZD11bmRlZmluZWQsIHBvc2l0aW9uPVwicmVsYXRpdmVcIil7XG4gICAgY2hlY2tEb21JZChpZCk7XG4gICAgaWYgKHN2Z0lkPT09dW5kZWZpbmVkKSBzdmdJZD1gJHtpZH0tc3ZnYDtcbiAgICByZXR1cm4gc2VsZWN0KFwiI1wiK2lkKS5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuYXR0cihcImlkXCIsIHN2Z0lkKVxuICAgICAgICAvLyAuc3R5bGUoXCJwb3NpdGlvblwiLCBwb3NpdGlvbilcbiAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke21hcmdpbi5sZWZ0fSwgJHttYXJnaW4udG9wfSlgKVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gc3ZnT2JqXG4gKiBAcGFyYW0gZG93bmxvYWRGaWxlTmFtZSB7U3RyaW5nfVxuICogQHBhcmFtIHRlbXBEb3dubG9hZERpdklkIHtTdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZFN2ZyhzdmdPYmosIGRvd25sb2FkRmlsZU5hbWUsIHRlbXBEb3dubG9hZERpdklkKXtcbiAgICBjb25zb2xlLmxvZyhzdmdPYmopO1xuICAgIHZhciAkc3ZnQ29weSA9IHN2Z09iai5jbG9uZSgpXG4gICAgLmF0dHIoXCJ2ZXJzaW9uXCIsIFwiMS4xXCIpXG4gICAgLmF0dHIoXCJ4bWxuc1wiLCBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIpO1xuXG4gICAgLy8gcGFyc2UgYW5kIGFkZCB0aGUgQ1NTIHN0eWxpbmcgdXNlZCBieSB0aGUgU1ZHXG4gICAgdmFyIHN0eWxlcyA9IHBhcnNlQ3NzU3R5bGVzKHN2Z09iai5nZXQoKSk7XG4gICAgJHN2Z0NvcHkucHJlcGVuZChzdHlsZXMpO1xuXG4gICAgJChcIiNcIiArIHRlbXBEb3dubG9hZERpdklkKS5odG1sKCcnKS5oaWRlKCk7XG4gICAgdmFyIHN2Z0h0bWwgPSAkKFwiI1wiICsgdGVtcERvd25sb2FkRGl2SWQpLmFwcGVuZCgkc3ZnQ29weSkuaHRtbCgpO1xuXG4gICAgdmFyIHN2Z0Jsb2IgPSBuZXcgQmxvYihbc3ZnSHRtbF0sIHt0eXBlOiBcImltYWdlL3N2Zyt4bWxcIn0pO1xuICAgIHNhdmVBcyhzdmdCbG9iLCBkb3dubG9hZEZpbGVOYW1lKTtcblxuICAgIC8vIGNsZWFyIHRoZSB0ZW1wIGRvd25sb2FkIGRpdlxuICAgICQoXCIjXCIgKyB0ZW1wRG93bmxvYWREaXZJZCkuaHRtbCgnJykuaGlkZSgpO1xufVxuLyoqXG4gKiBBIGZ1bmN0aW9uIGZvciBwYXJzaW5nIHRoZSBDU1Mgc3R5bGUgc2hlZXQgYW5kIGluY2x1ZGluZyB0aGUgc3R5bGUgcHJvcGVydGllcyBpbiB0aGUgZG93bmxvYWRhYmxlIFNWRy5cbiAqIEBwYXJhbSBkb21cbiAqIEByZXR1cm5zIHtFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDc3NTdHlsZXMgKGRvbSkge1xuICAgIHZhciB1c2VkID0gXCJcIjtcbiAgICB2YXIgc2hlZXRzID0gZG9jdW1lbnQuc3R5bGVTaGVldHM7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykgeyAvLyBUT0RPOiB3YWxrIHRocm91Z2ggdGhpcyBibG9jayBvZiBjb2RlXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChzaGVldHNbaV0uY3NzUnVsZXMgPT0gbnVsbCkgY29udGludWU7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBzaGVldHNbaV0uY3NzUnVsZXM7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHJ1bGVzW2pdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocnVsZS5zdHlsZSkgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXM7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIGFueSBzZWxlY3RvciB0ZXh0IGluY2x1ZGluZyBzdmcgZWxlbWVudCBJRCAtLSBkb20gYWxyZWFkeSBzZWxlY3RzIGZvciB0aGF0XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHJ1bGUuc2VsZWN0b3JUZXh0ID09PSB1bmRlZmluZWQ/IHJ1bGUuc2VsZWN0b3JUZXh0IDogcnVsZS5zZWxlY3RvclRleHQucmVwbGFjZShgIyR7ZG9tWzBdLmlkfSBgLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vU29tZSBzZWxlY3RvcnMgd29uJ3Qgd29yaywgYW5kIG1vc3Qgb2YgdGhlc2UgZG9uJ3QgbWF0dGVyLlxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbXMgPSAkKGRvbSkuZmluZChzZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1zID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlZCArPSBydWxlLnNlbGVjdG9yVGV4dCArIFwiIHsgXCIgKyBydWxlLnN0eWxlLmNzc1RleHQgKyBcIiB9XFxuXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEluIEZpcmVmb3gsIGlmIHN0eWxlc2hlZXQgb3JpZ2luYXRlcyBmcm9tIGEgZGlmZiBkb21haW4sXG4gICAgICAgICAgICAvLyB0cnlpbmcgdG8gYWNjZXNzIHRoZSBjc3NSdWxlcyB3aWxsIHRocm93IGEgU2VjdXJpdHlFcnJvci5cbiAgICAgICAgICAgIC8vIEhlbmNlLCB3ZSBtdXN0IHVzZSBhIHRyeS9jYXRjaCB0byBoYW5kbGUgdGhpcyBpbiBGaXJlZm94XG4gICAgICAgICAgICBpZiAoZS5uYW1lICE9PSAnU2VjdXJpdHlFcnJvcicpIHRocm93IGU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpO1xuICAgIHMuaW5uZXJIVE1MID0gXCI8IVtDREFUQVtcXG5cIiArIHVzZWQgKyBcIlxcbl1dPlwiO1xuXG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBsaXN0IG9mIHgqeSBkYXRhIG9iamVjdHMgd2l0aCByYW5kb20gdmFsdWVzXG4gKiBUaGUgZGF0YSBvYmplY3QgaGFzIHRoaXMgc3RydWN0dXJlOiB7eDogeGxhYmVsLCB5OiB5bGFiZWwsIHZhbHVlOiBzb21lIHZhbHVlLCBkaXNwbGF5VmFsdWU6IHNvbWUgdmFsdWV9XG4gKiBAcGFyYW0gcGFyXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbU1hdHJpeChwYXI9e3g6MjAsIHk6MjAsIHNjYWxlRmFjdG9yOjEsIGRpdmVyZ2luZzpmYWxzZSwgYnViYmxlOmZhbHNlfSl7XG4gICAgbGV0IFggPSByYW5nZSgxLCBwYXIueCsxKTsgLy8gZ2VuZXJhdGVzIGEgMS1iYXNlZCBsaXN0LlxuICAgIGxldCBZID0gcmFuZ2UoMSwgcGFyLnkrMSk7XG4gICAgbGV0IGRhdGEgPSBbXTtcbiAgICBYLmZvckVhY2goKHgpPT57XG4gICAgICAgIHggPSAneCcgKyB4LnRvU3RyaW5nKCk7XG4gICAgICAgIFkuZm9yRWFjaCgoeSk9PntcbiAgICAgICAgICAgIHkgPSAneScgKyB5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBsZXQgdiA9IE1hdGgucmFuZG9tKCkqcGFyLnNjYWxlRmFjdG9yO1xuICAgICAgICAgICAgdiA9IHBhci5kaXZlcmdpbmcmJk1hdGgucmFuZG9tKCkgPCAwLjUgPyAtdiA6IHY7IC8vIHJhbmRvbWx5IGFzc2lnbmluZyBuZWdhdGl2ZSBhbmQgcG9zaXRpdmUgdmFsdWVzXG4gICAgICAgICAgICBkYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdixcbiAgICAgICAgICAgICAgICBkaXNwbGF5VmFsdWU6IHBhcnNlRmxvYXQodi50b0V4cG9uZW50aWFsKCkpLnRvUHJlY2lzaW9uKDMpLFxuICAgICAgICAgICAgICAgIHI6IHBhci5idWJibGU/TWF0aC5yYW5kb20oKSozMDp1bmRlZmluZWQgLy8gb25seSByZWxldmFudCB0byBidWJibGUgbWFwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICByZXR1cm4gZGF0YTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIGxpc3Qgb2YgcmFuZG9tIHZhbHVlc1xuICogQHBhcmFtIHBhclxuICogQHJldHVybnMge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21MaXN0KHBhcj17bjoxMDAsIHNjYWxlRmFjdG9yOjF9KSB7XG4gICAgbGV0IFggPSByYW5nZSgwLCBwYXIubik7IC8vIGdlbmVyYXRlcyBhIDEtYmFzZWQgbGlzdC5cbiAgICBsZXQgZGF0YSA9IFtdO1xuICAgIHJldHVybiBYLm1hcCgoeCkgPT4gTWF0aC5yYW5kb20oKSAqIHBhci5zY2FsZUZhY3Rvcik7XG5cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IMKpIDIwMTUgLSAyMDE4IFRoZSBCcm9hZCBJbnN0aXR1dGUsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1jbGF1c2UgbGljZW5zZSAoaHR0cHM6Ly9naXRodWIuY29tL2Jyb2FkaW5zdGl0dXRlL2d0ZXgtdml6L2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQpXG4gKi9cbi8qKioqKiogR29vZ2xlIFNpZ25JbiAqKioqKiovXG5leHBvcnQgZnVuY3Rpb24gZ29vZ2xlRnVuYygpe1xuICAgIHJldHVybiB7XG4gICAgICAgIGNoZWNrU2lnbmVkSW46IGNoZWNrU2lnbmVkSW4sXG4gICAgICAgIGdldFVzZXI6IGdldFVzZXIsXG4gICAgICAgIHNpZ25JbkJ1dHRvbjogcmVuZGVyU2lnbkluQnV0dG9uLFxuICAgICAgICBzaWduT3V0OiBzaWduT3V0LFxuICAgICAgICBncmFudFNjb3BlczogZ3JhbnRTY29wZXNcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlclNpZ25JbkJ1dHRvbigpe1xuICAgIGdhcGkuc2lnbmluMi5yZW5kZXIoJ215LXNpZ25pbjInLCB7XG4gICAgICAgICdzY29wZSc6ICdwcm9maWxlIGVtYWlsJyxcbiAgICAgICAgJ3dpZHRoJzogMTMwLFxuICAgICAgICAnaGVpZ2h0JzogMzAsXG4gICAgICAgICdsb25ndGl0bGUnOiBmYWxzZSxcbiAgICAgICAgJ3RoZW1lJzogJ2RhcmsnLFxuICAgICAgICAnb25zdWNjZXNzJzogb25TdWNjZXNzLFxuICAgICAgICAnb25mYWlsdXJlJzogb25GYWlsdXJlXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gb25TdWNjZXNzKGdvb2dsZVVzZXIpe1xuICAgICQoJyNnLXNpZ25vdXQnKS5zaG93KCk7XG59XG5cbmZ1bmN0aW9uIHNpZ25PdXQoKSB7XG4gICAgbGV0IGF1dGgyID0gZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKTtcbiAgICBhdXRoMi5zaWduT3V0KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgc2lnbmVkIG91dCcpO1xuICAgIH0pO1xuICAgICQoJyNnLXNpZ25vdXQnKS5oaWRlKCk7XG59XG5cbmZ1bmN0aW9uIG9uRmFpbHVyZShlcnJvcil7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcilcbn1cblxuZnVuY3Rpb24gY2hlY2tTaWduZWRJbigpe1xuICAgIGlmIChnYXBpLmF1dGgyKSB7XG4gICAgICAgIHJldHVybiBnZXRVc2VyKCkuaXNTaWduZWRJbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFVzZXIoKXtcbiAgICByZXR1cm4gZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5jdXJyZW50VXNlci5nZXQoKVxufVxuXG5mdW5jdGlvbiBncmFudFNjb3BlcyhzY29wZXMpe1xuICAgIHRoaXMuZ2V0VXNlcigpLmdyYW50KHtzY29wZTogc2NvcGVzfSkudGhlbihcbiAgICAgICAgZnVuY3Rpb24oc3VjY2Vzcyl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh7bWVzc2FnZTogXCJzdWNjZXNzXCIsIHZhbHVlOiBzdWNjZXNzfSkpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihmYWlsKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoSlNPTj5zdHJpbmdpZnkoe21lc3NhZ2U6IFwiZmFpbFwiLCB2YWx1ZTogZmFpbH0pKTtcbiAgICAgICAgfVxuICAgICk7XG59IiwiLyoqXG4gKiBDb3B5cmlnaHQgwqkgMjAxNSAtIDIwMTggVGhlIEJyb2FkIEluc3RpdHV0ZSwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEJTRCAzLWNsYXVzZSBsaWNlbnNlIChodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvZ3RleC12aXovYmxvYi9tYXN0ZXIvTElDRU5TRS5tZClcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHtqc29uLCB0c3Z9IGZyb20gJ2QzLWZldGNoJztcbmltcG9ydCB7c2VsZWN0LCBzZWxlY3RBbGx9IGZyb20gJ2QzLXNlbGVjdGlvbic7XG5pbXBvcnQge2dldEd0ZXhVcmxzLFxuICAgIHBhcnNlVGlzc3Vlc1xufSBmcm9tICcuL21vZHVsZXMvZ3RleERhdGFQYXJzZXInO1xuaW1wb3J0IFRvb2xiYXIgZnJvbSAnLi9tb2R1bGVzL1Rvb2xiYXInO1xuaW1wb3J0IHtnb29nbGVGdW5jfSBmcm9tICcuL21vZHVsZXMvZ29vZ2xlVXNlcic7XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnb29nbGUgc2lnLWluIGJ1dHRvblxuICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0sIHRoZSBkZWZhdWx0IGZ1bmN0aW9uIGlzIGdvb2dsZUZ1bmMoKS5zaWduSW5CdXR0b25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclNpZ25JbkJ1dHRvbihjYWxsYmFjaz1nb29nbGVGdW5jKCkuc2lnbkluQnV0dG9uKXtcbiAgICBjYWxsYmFjaygpO1xufVxuXG4vKipcbiAqIERlZmluZSB0aGUgR29vZ2xlIHNpZ24gb3V0IGZ1bmN0aW9uXG4gKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSwgdGhlIGRlZmF1bHQgaXMgZ29vZ2xlRnVuYygpLnNpZ25PdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpZ25PdXQoY2FsbGJhY2s9Z29vZ2xlRnVuYygpLnNpZ25PdXQpe1xuICAgIGNhbGxiYWNrKCk7XG59XG5cbi8qKlxuICogYnVpbGQgdGhlIHN1bW1hcnkgdGFibGVcbiAqIEBwYXJhbSB0YWJsZUlkIHtTdHJpbmd9OiBhIERPTSB0YWJsZSBJRFxuICogQHBhcmFtIGRhdGFzZXRJZCB7U3RyaW5nfTogYSBkYXRhc2V0IElEXG4gKiBAcGFyYW0gZ29vZ2xlRnVuYyB7T2JqZWN0fSB3aXRoIGZ1bmN0aW9uIGF0dHJpYnV0ZXM6IGNoZWNrU2lnbmVkSW4sIGdldFVzZXJcbiAqIEBwYXJhbSB1cmxzIHtPYmplY3R9OiBBUEkgVVJMc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsYXVuY2godGFibGVJZCwgZGF0YXNldElkPSdndGV4X3Y3JywgZ29vZ2xlRnVuY0RpY3Q9Z29vZ2xlRnVuYygpLCB1cmxzPWdldEd0ZXhVcmxzKCkpe1xuICAgIGNvbnN0IHByb21pc2VzID0gW1xuICAgICAgICBqc29uKHVybHMudGlzc3VlKSxcbiAgICAgICAgdHN2KHVybHMucm5hc2VxQ3JhbSksIC8vIHJuYXNlcSBjcmFtIGZpbGUgaW5mb1xuICAgICAgICB0c3YodXJscy53Z3NDcmFtKSwgLy8gd2dzIGNyYW0gZmlsZSBpbmZvXG4gICAgICAgIHRzdih1cmxzLnNhbXBsZSksIC8vIEdURXggc2FtcGxlIFRTViBmaWxlOiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgXTtcblxuICAgIFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgICAudGhlbihmdW5jdGlvbihhcmdzKXtcbiAgICAgICAgICAgIGxldCB0aXNzdWVzID0gcGFyc2VUaXNzdWVzKGFyZ3NbMF0pOyAvLyBnZXQgR1RFeCB0aXNzdWUgb2JqZWN0c1xuICAgICAgICAgICAgY29uc3QgY3JhbSA9IHtcbiAgICAgICAgICAgICAgICBybmFzZXE6IGFyZ3NbMV0ucmVkdWNlKChhLCBkKT0+e2FbZC5zYW1wbGVfaWQudG9VcHBlckNhc2UoKV09ZDsgcmV0dXJuIGE7fSwge30pLFxuICAgICAgICAgICAgICAgIHdnczogYXJnc1syXS5yZWR1Y2UoKGEsIGQpPT57YVtkLnNhbXBsZV9pZC50b1VwcGVyQ2FzZSgpXT1kOyByZXR1cm4gYTt9LCB7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBwYXJzZSBTYW1wbGVzXG4gICAgICAgICAgICBsZXQgc2FtcGxlcyA9IGFyZ3NbM11cbiAgICAgICAgICAgICAgICAuZmlsdGVyKChzKT0+cy5kYXRhc2V0SWQ9PWRhdGFzZXRJZClcbiAgICAgICAgICAgICAgICAubWFwKChzKT0+e1xuICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSByaWdodCBDUkFNIG1hbmlmZXN0IGZpbGVcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzLmRhdGFUeXBlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJXR1NcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3JhbS53Z3MuaGFzT3duUHJvcGVydHkocy5zYW1wbGVJZCkpIHRocm93IHMuc2FtcGxlSWQgKyAnIGhhcyBubyBjcmFtIGZpbGVzJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNyYW1GaWxlID0gY3JhbS53Z3Nbcy5zYW1wbGVJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUk5BU0VRXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNyYW0ucm5hc2VxLmhhc093blByb3BlcnR5KHMuc2FtcGxlSWQpKSB0aHJvdyBzLnNhbXBsZUlkICsgJyBoYXMgbm8gY3JhbSBmaWxlcyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5jcmFtRmlsZSA9IGNyYW0ucm5hc2VxW3Muc2FtcGxlSWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZGF0YVR5cGUgPSAnUk5BLVNlcSc7IC8vIGFsc28gcmVwbGFjZSB0aGUgdGVybSBSTkFTRVEgd2l0aCBSTkEtU2VxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIGZhciwgd2UgZG8gbm90IGhhdmUgY3JhbSBmaWxlcyBmb3Igb3RoZXIgZGF0YSB0eXBlcywgc28gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2FtcGxlcyA9IF9jaGVja1JuYVNlcVdpdGhHZW5vdHlwZShzYW1wbGVzKTtcbiAgICAgICAgICAgIGNvbnN0IHRoZU1hdHJpeCA9IF9idWlsZE1hdHJpeChkYXRhc2V0SWQsIHNhbXBsZXMsIHRpc3N1ZXMpO1xuICAgICAgICAgICAgX3JlbmRlck1hdHJpeFRhYmxlKHRhYmxlSWQsIHRoZU1hdHJpeCwgZmFsc2UsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKTtcbiAgICAgICAgICAgIF9hZGRGaWx0ZXJzKHRhYmxlSWQsIHRoZU1hdHJpeCwgc2FtcGxlcywgdGlzc3VlcywgZ29vZ2xlRnVuY0RpY3QsIHVybHMpO1xuXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpe2NvbnNvbGUuZXJyb3IoZXJyKX0pO1xufVxuXG4vKipcbiAqIENoZWNrIFJOQS1TZXEgc2FtcGxlcyBmb3Igc3ViamVjdHMgd2l0aCBnZW5vdHlwZSBkYXRhIGFuZCBhc3NpZ24gUk5BLVNlcS1XR1MgdG8gdGhlIGN1c3RvbSBwcml2YXRlIHNhbXBsZSBhdHRyaWJ1dGU6IF90eXBlLlxuICogQHBhcmFtIHNhbXBsZXM6IGEgbGlzdCBvZiBzYW1wbGUgb2JqZWN0cyB3aXRoIHJlcXVpcmVkIGF0dHJpYnV0ZXM6IGRhdGFUeXBlLCBzdWJqZWN0SWQsIHRpc3N1ZVNpdGVEZXRhaWxJZFxuICogQHJldHVybnM6IGEgbmV3IGxpc3Qgb2Ygc2FtcGxlc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2NoZWNrUm5hU2VxV2l0aEdlbm90eXBlKHNhbXBsZXMpe1xuICAgIC8vIGZpbmQgc3ViamVjdHMvc2FtcGxlcyB0aGF0IGhhdmUgZ2Vub3R5cGUgZGF0YVxuICAgIGNvbnN0IHdnc0hhc2ggPSBzYW1wbGVzLmZpbHRlcigocykgPT4ge1xuICAgICAgICBpZighcy5oYXNPd25Qcm9wZXJ0eSgnZGF0YVR5cGUnKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihzKTtcbiAgICAgICAgICAgIHRocm93ICdQYXJzZSBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3Npbmc6IGRhdGFUeXBlJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5kYXRhVHlwZSA9PSAnV0dTJztcbiAgICB9KS5yZWR1Y2UoKGEsIGQpID0+IHtcbiAgICAgICAgaWYgKCFkLmhhc093blByb3BlcnR5KCdzdWJqZWN0SWQnKSkgdGhyb3cgJ1BhcnNlIEVycm9yOiByZXF1aXJlZCBhdHRyaWJ1dGUgaXMgbWlzc2luZy4nO1xuICAgICAgICBhW2Quc3ViamVjdElkXSA9IDE7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH0sIHt9KTtcbiAgICBjb25zdCBhdHRyID0gJ3Rpc3N1ZVNpdGVEZXRhaWxJZCc7XG4gICAgcmV0dXJuIHNhbXBsZXMubWFwKChzKT0+e1xuICAgICAgICBpZighcy5oYXNPd25Qcm9wZXJ0eSgnZGF0YVR5cGUnKSB8fCAhcy5oYXNPd25Qcm9wZXJ0eSgnc3ViamVjdElkJykpIHRocm93ICdQYXJzZSBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3NpbmcuJztcbiAgICAgICAgaWYgKHMuZGF0YVR5cGUgPT0gJ1JOQS1TZXEnICYmIHdnc0hhc2guaGFzT3duUHJvcGVydHkocy5zdWJqZWN0SWQpKXtcbiAgICAgICAgICAgIHMuX3R5cGUgPSAnUk5BLVNlcS1XR1MnOyAvLyBtb2RpZmllZCB0aGUgX3R5cGUgdG8gUk5BLVNlcS1XR1NcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9KTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGRhdGFzZXRJZCB7U3RyaW5nfVxuICogQHBhcmFtIHNhbXBsZXMge0xpc3R9IGEgbGlzdCBvZiBzYW1wbGUgb2JqZWN0cyBpbiBkYXRhc2V0IElEXG4gKiBAcGFyYW0gdGlzc3VlcyB7TGlzdH1cbiAqIEByZXR1cm5zIHt7ZGF0YXNldElkOiAqLCBYOiAqLCBZOiAqW10sIGRhdGE6ICp9fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2J1aWxkTWF0cml4KGRhdGFzZXRJZCwgc2FtcGxlcywgdGlzc3Vlcyl7XG4gICAgY29uc3QgX19idWlsZEhhc2ggPSBmdW5jdGlvbihkYXRhVHlwZSl7XG4gICAgICAgIGNvbnN0IGF0dHIgPSAndGlzc3VlU2l0ZURldGFpbElkJztcbiAgICAgICAgcmV0dXJuIHNhbXBsZXMuZmlsdGVyKChzKT0+e1xuICAgICAgICAgICAgaWYoIXMuaGFzT3duUHJvcGVydHkoJ2RhdGFUeXBlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHMpO1xuICAgICAgICAgICAgICAgIHRocm93ICdQYXJzZSBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3Npbmc6IF90eXBlIG9yIGRhdGFUeXBlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhVHlwZSA9PSAnUk5BLVNlcS1XR1MnKSByZXR1cm4gcy5fdHlwZSA9PSBkYXRhVHlwZTtcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHMuZGF0YVR5cGU9PWRhdGFUeXBlO1xuICAgICAgICB9KS5yZWR1Y2UoKGEsIHMpPT57XG4gICAgICAgICAgICBpZighcy5oYXNPd25Qcm9wZXJ0eShhdHRyKSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzKTtcbiAgICAgICAgICAgICAgICB0aHJvdyAnUGFyc2UgRXJyb3I6IHJlcXVpcmVkIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOicgKyBhdHRyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoYVtzW2F0dHJdXT09PXVuZGVmaW5lZCkgYVtzW2F0dHJdXSA9IFtdO1xuICAgICAgICAgICAgYVtzW2F0dHJdXS5wdXNoKHMpO1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbGFiZWw6ICdSTkEtU2VxJyxcbiAgICAgICAgICAgIGlkOiAnUk5BLVNlcScsXG4gICAgICAgICAgICBkYXRhOiBfX2J1aWxkSGFzaCgnUk5BLVNlcScpIC8vIGxpc3RzIG9mIFJOQS1TZXEgc2FtcGxlcyBpbmRleGVkIGJ5IHRpc3N1ZVNpdGVEZXRhaWxJZFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ1JOQS1TZXEgV2l0aCBXR1MnLFxuICAgICAgICAgICAgaWQ6ICdSTkEtU2VxLVdHUycsXG4gICAgICAgICAgICBkYXRhOiBfX2J1aWxkSGFzaCgnUk5BLVNlcS1XR1MnKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ1dFUycsXG4gICAgICAgICAgICBpZDogJ1dFUycsXG4gICAgICAgICAgICBkYXRhOiBfX2J1aWxkSGFzaCgnV0VTJylcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbGFiZWw6ICdXR1MnLFxuICAgICAgICAgICAgaWQ6ICdXR1MnLFxuICAgICAgICAgICAgZGF0YTogX19idWlsZEhhc2goJ1dHUycpXG4gICAgICAgIH1cbiAgICBdO1xuICAgIGNvbnN0IHJvd3MgPSB0aXNzdWVzLm1hcCgodCk9PntcbiAgICAgICAgWyd0aXNzdWVTaXRlRGV0YWlsSWQnLCAndGlzc3VlU2l0ZURldGFpbCddLmZvckVhY2goKGQpPT57XG4gICAgICAgICAgICBpZiAoIXQuaGFzT3duUHJvcGVydHkoZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHQpO1xuICAgICAgICAgICAgICAgIHRocm93ICdUaXNzdWUgcGFyc2luZyBlcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdC5pZCA9IHQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICB0LmxhYmVsID0gdC50aXNzdWVTaXRlRGV0YWlsO1xuICAgICAgICBjb2x1bW5zLmZvckVhY2goKGNvbCk9PntcbiAgICAgICAgICAgIHRbY29sLmlkXSA9IGNvbC5kYXRhW3QuaWRdIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YXNldElkOiBkYXRhc2V0SWQsXG4gICAgICAgIFg6IHJvd3MsXG4gICAgICAgIFk6IGNvbHVtbnMsXG4gICAgICAgIGRhdGE6IHNhbXBsZXMgLy8gbm90IHN1cmUgaWYgdGhpcyBpcyBuZWVkZWQuXG4gICAgfTtcbn1cblxuLyoqXG4gKiBmaWx0ZXJpbmcgc2FtcGxlIGNvdW50cyBiYXNlZCBvbiB1c2VyIGlucHV0c1xuICogQHBhcmFtIHRhYmxlSWQge1N0cmluZ31cbiAqIEBwYXJhbSBtYXQge09iamVjdH06IGdlbmVyYXRlZCBieSBfX2J1aWxkTWF0cml4KClcbiAqIEBwYXJhbSBzYW1wbGVzIHtMaXN0fSBhIGxpc3Qgb2Ygc2FtcGxlIG9iamVjdHNcbiAqIEBwYXJhbSB0aXNzdWVzIHtMaXN0fSBhIGxpc3Qgb2YgdGlzc3VlIG9iamVjdHNcbiAqIEBwYXJhbSBnb29nbGVGdW5jRGljdCB7T2JqZWN0fSB3aXRoIGZ1bmN0aW9uIGF0dHJpYnV0ZXM6IGNoZWNrU2lnbmVkSW4sIGdldFVzZXJcbiAqIEBwYXJhbSB1cmxzIHtPYmplY3R9OiBBUEkgVVJMc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2FkZEZpbHRlcnModGFibGVJZCwgbWF0LCBzYW1wbGVzLCB0aXNzdWVzLCBnb29nbGVGdW5jRGljdCwgdXJscyl7XG4gICAgY29uc3Qgbm9uRXF0bFRpc3N1ZXMgPSB0aXNzdWVzLmZpbHRlcigodCk9PiF0Lmhhc0VHZW5lcykubWFwKCh0KT0+dC50aXNzdWVTaXRlRGV0YWlsSWQpO1xuICAgIGNvbnN0IF9fZmlsdGVyID0gKCk9PntcbiAgICAgICAgbGV0IHNleCA9ICQoJ2lucHV0W25hbWU9XCJzZXhcIl06Y2hlY2tlZCcpLnZhbCgpOyAvLyBqUXVlcnkgc3ludGF4IGZvciBET00gbWFuaXB1bGF0aW9uc1xuICAgICAgICBsZXQgdGlzc3VlVHlwZSA9ICQoJ2lucHV0W25hbWU9XCJ0aXNzdWVUeXBlXCJdOmNoZWNrZWQnKS52YWwoKTtcbiAgICAgICAgbGV0IGFnZXMgPSBbXTtcbiAgICAgICAgbGV0IGhhcmR5U2NhbGVzID0gW107XG4gICAgICAgIGxldCBtYXJrRXF0bFRpc3N1ZXMgPSB0aXNzdWVUeXBlPT0nYWxsJz9mYWxzZTp0cnVlO1xuXG4gICAgICAgIC8vIG1vZGlmaWVkIHRoZSBhZ2UgYnJhY2tldCBcImFsbEFnZXNcIiByYWRpbyBidXR0b24gYmFzZWQgb24gdGhlIGFnZSBicmFja2V0IHNlbGVjdGlvbnNcbiAgICAgICAgJCgnLmFnZUJveCcpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpIGFnZXMucHVzaCgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmKGFnZXMubGVuZ3RoIDwgNikgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgaWYoYWdlcy5sZW5ndGggPT0gNikgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl1bdmFsdWU9XCJhbGxcIl0nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIG1vZGlmaWVkIHRoZSBoYXJkeSBzY2FsZSBmaWx0ZXJpbmdcbiAgICAgICAgJCgnLmhhcmR5U2NhbGUnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKSBoYXJkeVNjYWxlcy5wdXNoKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYoaGFyZHlTY2FsZXMubGVuZ3RoIDwgNSkgJCgnaW5wdXRbbmFtZT1cImFsbEhhcmR5U2NhbGVzXCJdJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmKGhhcmR5U2NhbGVzLmxlbmd0aCA9PSA1KSAkKCdpbnB1dFtuYW1lPVwiYWxsSGFyZHlTY2FsZXNcIl1bdmFsdWU9XCJhbGxcIl0nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHRpc3N1ZSBmaWx0ZXJpbmcgKGFsbCBvciBlUVRMIHRpc3N1ZXMpXG4gICAgICAgIGxldCB0ZW1wU2FtcGxlcyA9IHRpc3N1ZVR5cGUgPT0gJ2FsbCc/c2FtcGxlcy5zbGljZSgpOnNhbXBsZXMuZmlsdGVyKChzLCBpKT0+e1xuICAgICAgICAgICAgcmV0dXJuIG5vbkVxdGxUaXNzdWVzLmluZGV4T2Yocy50aXNzdWVTaXRlRGV0YWlsSWQpPDAgJiYgcy5fdHlwZT09J1JOQS1TZXEtV0dTJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBzZXggZmlsdGVyaW5nXG4gICAgICAgIHRlbXBTYW1wbGVzID0gc2V4ID09ICdib3RoJz8gdGVtcFNhbXBsZXM6IHRlbXBTYW1wbGVzLmZpbHRlcigocyk9PnMuc2V4PT1zZXgpO1xuXG4gICAgICAgIC8vIGFnZSBmaWx0ZXJpbmdcbiAgICAgICAgdGVtcFNhbXBsZXMgPSBhZ2VzLmxlbmd0aCA9PSA2PyB0ZW1wU2FtcGxlczogdGVtcFNhbXBsZXMuZmlsdGVyKChzKT0+YWdlcy5pbmRleE9mKHMuYWdlQnJhY2tldCk+PTApO1xuXG4gICAgICAgIC8vIGhhcmR5IHNjYWxlIGZpbHRlcmluZ1xuICAgICAgICB0ZW1wU2FtcGxlcyA9IGhhcmR5U2NhbGVzLmxlbmd0aCA9PSA1PyB0ZW1wU2FtcGxlczogdGVtcFNhbXBsZXMuZmlsdGVyKChzKT0+aGFyZHlTY2FsZXMuaW5kZXhPZihzLmhhcmR5U2NhbGUpPj0wKTtcblxuICAgICAgICAvLyByZWJ1aWxkIGFuZCByZS1yZW5kZXIgdGhlIHRhYmxlXG4gICAgICAgIF9yZW5kZXJNYXRyaXhUYWJsZSh0YWJsZUlkLCBfYnVpbGRNYXRyaXgobWF0LmRhdGFzZXRJZCwgdGVtcFNhbXBsZXMsIHRpc3N1ZXMpLCBtYXJrRXF0bFRpc3N1ZXMsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKTtcblxuICAgIH07XG5cbiAgICAvLyBEZWZpbmUgaW5wdXQgY2hhbmdlIGV2ZW50czpcbiAgICAkKCdpbnB1dFtuYW1lPVwic2V4XCJdJykuY2hhbmdlKF9fZmlsdGVyKTtcbiAgICAkKCcuYWdlQm94JykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLmNoYW5nZShfX2ZpbHRlcik7XG4gICAgfSk7XG4gICAgJCgnaW5wdXRbbmFtZT1cImFsbEFnZXNcIl0nKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgbGV0IHZhbCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgIHN3aXRjaCh2YWwpe1xuICAgICAgICAgICAgY2FzZSAnYWxsJzoge1xuICAgICAgICAgICAgICAgICQoJy5hZ2VCb3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgX19maWx0ZXIoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3Jlc2V0Jzoge1xuICAgICAgICAgICAgICAgICQoJy5hZ2VCb3gnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJ2lucHV0W25hbWU9XCJ0aXNzdWVUeXBlXCJdJykuY2hhbmdlKF9fZmlsdGVyKTtcblxuICAgICQoJy5oYXJkeVNjYWxlJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLmNoYW5nZShfX2ZpbHRlcik7XG4gICAgfSk7XG4gICAgJCgnaW5wdXRbbmFtZT1cImFsbEhhcmR5U2NhbGVcIl0nKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgbGV0IHZhbCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgIHN3aXRjaCh2YWwpe1xuICAgICAgICAgICAgY2FzZSAnYWxsJzoge1xuICAgICAgICAgICAgICAgICQoJy5oYXJkeVNjYWxlJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIF9fZmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdyZXNldCc6IHtcbiAgICAgICAgICAgICAgICAkKCcuaGFyZHlTY2FsZScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFJlbmRlciB0aGUgbWF0cml4IGluIGFuIEhUTUwgdGFibGUgZm9ybWF0XG4gKiBAcGFyYW0gdGFibGVJZCB7U3RyaW5nfSB0aGUgRE9NIElEIG9mIHRoZSB0YWJsZVxuICogQHBhcmFtIG1hdCB7T2JqZWN0fSBvZiBhdHRyOiBkYXRhc2V0SWQsIFgtLWEgbGlzdCBvZiB4IG9iamVjdHMsIFktLWEgbGlzdCBvZiB5IG9iamVjdHNcbiAqIEBwYXJhbSBtYXJrRXF0bFRpc3N1ZXMge0Jvb2xlYW59XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfcmVuZGVyTWF0cml4VGFibGUodGFibGVJZCwgbWF0LCBtYXJrRXF0bFRpc3N1ZXMsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKXtcbiAgICBjb25zdCBkYXRhc2V0ID0geyAvLyBUT0RPOiByZW1vdmUgaGFyZC1jb2RlZCBkYXRhIHNldCBpbmZvXG4gICAgICAgICdndGV4X3Y3Jzoge1xuICAgICAgICAgICAgbGFiZWw6J0dURVggVjcnLFxuICAgICAgICAgICAgYmdjb2xvcjogJyMyYTcxOGInXG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIHJlbmRlcmluZyB0aGUgY29sdW1uIGxhYmVsc1xuICAgIGNvbnN0IHRoZVRhYmxlID0gc2VsZWN0KGAjJHt0YWJsZUlkfWApO1xuICAgIHRoZVRhYmxlLnNlbGVjdCgndGhlYWQnKS5zZWxlY3RBbGwoJ3RoJylcbiAgICAgICAgLmRhdGEoW3tsYWJlbDpcIlwiLCBpZDpcIlwifV0uY29uY2F0KG1hdC5ZKSlcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZCgndGgnKVxuICAgICAgICAuYXR0cignc2NvcGUnLCAnY29sJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgKGQsIGkpPT5kLmlkPT1cIlwiPycnOmB5JHtpLTF9YClcbiAgICAgICAgLnRleHQoKGQpPT5kLmxhYmVsKVxuXG5cbiAgICB0aGVUYWJsZS5zZWxlY3QoJy50YWJsZS1sYWJlbCcpLnNlbGVjdEFsbCgnKicpLnJlbW92ZSgpO1xuICAgIHRoZVRhYmxlLnNlbGVjdCgnLnRhYmxlLWxhYmVsJykuYXBwZW5kKCd0aCcpXG4gICAgICAgIC5hdHRyKCdjb2xzcGFuJywgbWF0LlkubGVuZ3RoICsgMSlcbiAgICAgICAgLnRleHQoZGF0YXNldFttYXQuZGF0YXNldElkXS5sYWJlbClcbiAgICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJyxkYXRhc2V0W21hdC5kYXRhc2V0SWRdLmJnY29sb3IpO1xuXG4gICAgX3JlbmRlckNvdW50cyh0aGVUYWJsZS5zZWxlY3QoJ3Rib2R5JyksIG1hdCwgbWFya0VxdGxUaXNzdWVzKTtcbiAgICBfYWRkQ2xpY2tFdmVudHModGFibGVJZCk7XG4gICAgX2FkZFRvb2xiYXIodGFibGVJZCwgbWF0LCBnb29nbGVGdW5jRGljdCwgdXJscyk7IC8vIHJlYnVpbGQgdGhlIHRvb2xiYXIgd2l0aCB0aGUgbmV3IG1hdHJpeFxufVxuXG4vKipcbiAqIFJlbmRlciBzYW1wbGUgY291bnRzIGluIHRoZSBzdW1tYXJ5IHRhYmxlXG4gKiBAcGFyYW0gdGJvZHkge09iamVjdH0gYSBEMyBzZWxlY3Qgb2JqZWN0XG4gKiBAcGFyYW0gbWF0IHtPYmplY3R9IGdlbmVyYXRlZCBieSBfYnVpbGRNYXRyaXgoKVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX3JlbmRlckNvdW50cyh0Ym9keSwgbWF0LCBtYXJrRXF0bFRpc3N1ZXMpe1xuICAgIHRib2R5LnNlbGVjdEFsbCgnLmRhdGEtcm93JykucmVtb3ZlKCk7XG4gICAgY29uc3QgdGhlUm93cyA9IHRib2R5LnNlbGVjdEFsbCgnLmRhdGEtcm93JylcbiAgICAgICAgLmRhdGEobWF0LlgpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoJ3RyJylcbiAgICAgICAgLmNsYXNzZWQoJ2RhdGEtcm93JywgdHJ1ZSk7XG5cbiAgICAvLyByZW5kZXJpbmcgdGhlIHJvdyBsYWJlbFxuICAgIHRoZVJvd3MuYXBwZW5kKCd0aCcpXG4gICAgICAgIC5hdHRyKCdzY29wZScsICdyb3cnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAoZCwgaSk9PmB4JHtpfWApXG4gICAgICAgIC50ZXh0KChkKT0+e1xuICAgICAgICAgICAgcmV0dXJuIGQubGFiZWxcbiAgICAgICAgfSlcbiAgICAgICAgLnN0eWxlKCd0ZXh0LWRlY29yYXRpb24nLCAoZCk9PntcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGQpO1xuICAgICAgICAgICAgaWYobWFya0VxdGxUaXNzdWVzICYmICFkLmhhc0VHZW5lcyl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibGluZS10aHJvdWdoXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgLy8gcmVuZGVyaW5nIHNhbXBsZSBjb3VudHNcbiAgICBtYXQuWS5mb3JFYWNoKCh5LCBqKT0+e1xuICAgICAgICB0aGVSb3dzLmFwcGVuZCgndGQnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgKGQsIGkpPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRbeS5pZF09PT11bmRlZmluZWQ/Jyc6YHgke2l9IHkke2p9YDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGV4dCgoZCk9PntcbiAgICAgICAgICAgICAgICBsZXQgY291bnRzID0gZFt5LmlkXT9kW3kuaWRdLmxlbmd0aCA6ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb3VudHM7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcblxufVxuXG4vKipcbiAqIEFkZCBjdXN0b21pemVkIGNvbHVtbiwgcm93IGFuZCBjZWxsIGNsaWNrIGV2ZW50c1xuICogQHBhcmFtIHRhYmxlSWQge1N0cmluZ30gdGhlIGRvbSBJRCBvZiB0aGUgdGFibGVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9hZGRDbGlja0V2ZW50cyh0YWJsZUlkKXtcbiAgICBjb25zdCB0aGVDZWxscyA9IHNlbGVjdChgIyR7dGFibGVJZH1gKS5zZWxlY3QoJ3Rib2R5Jykuc2VsZWN0QWxsKCd0ZCcpO1xuXG4gICAgLy8gY29sdW1uIGxhYmVsc1xuICAgIHNlbGVjdChgIyR7dGFibGVJZH1gKS5zZWxlY3QoJ3RoZWFkJykuc2VsZWN0QWxsKCd0aCcpXG4gICAgICAgIC5zdHlsZSgnY3Vyc29yJywgJ3BvaW50ZXInKVxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIHRvZ2dsZSB0aGUgc2VsZWN0aW9uXG4gICAgICAgICAgIGNvbnN0IHRoZUNvbHVtbiA9IHNlbGVjdCh0aGlzKS5hdHRyKCdjbGFzcycpO1xuICAgICAgICAgICBpZiAoc2VsZWN0KHRoaXMpLmF0dHIoJ3Njb3BlJykgPT0gJ2NvbCcpIHtcbiAgICAgICAgICAgICAgIHNlbGVjdCh0aGlzKS5hdHRyKCdzY29wZScsICdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgdGhlQ2VsbHMuZmlsdGVyKGAuJHt0aGVDb2x1bW59YCkuY2xhc3NlZCgnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgIHNlbGVjdCh0aGlzKS5hdHRyKCdzY29wZScsICdjb2wnKTtcbiAgICAgICAgICAgICAgIHRoZUNlbGxzLmZpbHRlcihgLiR7dGhlQ29sdW1ufWApLmNsYXNzZWQoJ3NlbGVjdGVkJywgZmFsc2UpO1xuICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgLy8gcm93IGxhYmVsc1xuICAgIHNlbGVjdChgIyR7dGFibGVJZH1gKS5zZWxlY3QoJ3Rib2R5Jykuc2VsZWN0QWxsKCd0aCcpXG4gICAgICAgIC5zdHlsZSgnY3Vyc29yJywgJ3BvaW50ZXInKVxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgY29uc3QgdGhlUm93ID0gc2VsZWN0KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XG4gICAgICAgICAgIGlmIChzZWxlY3QodGhpcykuYXR0cignc2NvcGUnKSA9PSAncm93Jykge1xuICAgICAgICAgICAgICAgc2VsZWN0KHRoaXMpLmF0dHIoJ3Njb3BlJywgJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICB0aGVDZWxscy5maWx0ZXIoYC4ke3RoZVJvd31gKS5jbGFzc2VkKCdzZWxlY3RlZCcsIHRydWUpO1xuICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgc2VsZWN0KHRoaXMpLmF0dHIoJ3Njb3BlJywgJ3JvdycpO1xuICAgICAgICAgICAgICAgdGhlQ2VsbHMuZmlsdGVyKGAuJHt0aGVSb3d9YCkuY2xhc3NlZCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgIC8vIGRhdGEgY2VsbHNcbiAgICB0aGVDZWxscy5zdHlsZSgnY3Vyc29yJywgJ3BvaW50ZXInKVxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIHRvZ2dsZSB0aGUgc2VsZWN0ZWQgY2xhc3MgYXNzaWdubWVudFxuICAgICAgICAgICAgc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ3NlbGVjdGVkJywgIXNlbGVjdCh0aGlzKS5jbGFzc2VkKCdzZWxlY3RlZCcpKTtcbiAgICAgICAgfSlcbn1cblxuLyoqXG4gKiBBZGQgYSB0b29sIGJhclxuICogQHBhcmFtIHRhYmxlSWRcbiAqIEBwYXJhbSBtYXRcbiAqIEBwcml2YXRlXG4gKiBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9cbiAqIERlcGVuZGVuY2llczogZ29vZ2xlVXNlci5qc1xuICovXG5mdW5jdGlvbiBfYWRkVG9vbGJhcih0YWJsZUlkLCBtYXQsIGdvb2dsZUZ1bmNEaWN0LCB1cmxzKXtcbiAgICAvLyBUT0RPOiBkZWNvdXBsZSBkYXRhIGRvd25sb2FkIGFuZCBmaXJlIGNsb3VkIHN1Ym1pc3Npb25cblxuICAgIC8vIGNyZWF0ZSB0aGUgdG9vbGJhciBhbmQgYnV0dG9uc1xuICAgIHNlbGVjdCgnI21hdHJpeC10YWJsZS10b29sYmFyJykuc2VsZWN0QWxsKCcqJykucmVtb3ZlKCk7XG4gICAgY29uc3QgdG9vbGJhciA9IG5ldyBUb29sYmFyKCdtYXRyaXgtdGFibGUtdG9vbGJhcicsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgdG9vbGJhci5jcmVhdGVCdXR0b24oJ3NhbXBsZS1kb3dubG9hZCcpO1xuICAgIC8vIHRvb2xiYXIuY3JlYXRlQnV0dG9uKCdzZW5kLXRvLWZpcmVjbG91ZCcsICdmYS1jbG91ZC11cGxvYWQtYWx0Jyk7IC8vIEZpcmVDbG91ZCByZWxhdGVkLCBub3QgaW4gdXNlIGF0IHRoaXMgdGltZVxuXG4gICAgYmluZERvd25sb2FkQ2xpY2tFdmVudCh0YWJsZUlkLCBtYXQpO1xuICAgIC8vIGJpbmRGaXJlQ2xvdWRDbGlja0V2ZW50cyh0YWJsZUlkLCBnb29nbGVGdW5jRGljdCkgLy8gbm90IGluIHVzZSBhdCB0aGlzIHRpbWVcbn1cblxuZnVuY3Rpb24gYmluZERvd25sb2FkQ2xpY2tFdmVudCh0YWJsZUlkLCBtYXQpe1xuICAgIGNvbnN0IGFsbENlbGxzID0gc2VsZWN0KGAjJHt0YWJsZUlkfWApLnNlbGVjdCgndGJvZHknKS5zZWxlY3RBbGwoJ3RkJyk7XG4gICAgc2VsZWN0KCcjc2FtcGxlLWRvd25sb2FkJylcbiAgICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gZmV0Y2ggc2VsZWN0ZWQgdGFibGUgY2VsbHNcbiAgICAgICAgICAgIGxldCBjZWxscyA9IGFsbENlbGxzLmZpbHRlcihgLnNlbGVjdGVkYCk7XG4gICAgICAgICAgICBpZiAoY2VsbHMuZW1wdHkoKSkgYWxlcnQoJ1lvdSBoYXZlIG5vdCBzZWxlY3RlZCBhbnkgc2FtcGxlcyB0byBkb3dubG9hZC4nKTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBkb3dubG9hZENvbnRlbnQgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnU2FtcGxlIElEJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdUaXNzdWUgTmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnRGF0YSBUeXBlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDUkFNIEZpbGUgR0NQJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDUkFNIEZpbGUgQVdTJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDUkFNIEZpbGUgTUQ1JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDUkFNIEZpbGUgU2l6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnQ1JBTSBJbmRleCBHQ1AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NSQU0gSW5kZXggQVdTJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCJcXHRcIikgKyAnXFxuJzsgLy8gaW5pdGlhdGUgdGhlIGRvd25sb2FkIGNvbnRlbnQgd2l0aCB0aGUgY29sdW1uIGhlYWRlcnNcblxuICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIHNlbGVjdGVkIGNlbGxcbiAgICAgICAgICAgICAgICBjZWxscy5lYWNoKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgICAgICAvLyBwYXJzZSB0aGUgY2VsbCdzIHggYW5kIHkgSURzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlciA9IHNlbGVjdCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJykuZmlsdGVyKChjKT0+e3JldHVybiBjIT0nc2VsZWN0ZWQnfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSBtYXQuWFtwYXJzZUludChtYXJrZXJbMF0ucmVwbGFjZSgneCcsICcnKSldO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gbWF0LllbcGFyc2VJbnQobWFya2VyWzFdLnJlcGxhY2UoJ3knLCAnJykpXTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFNhbXBsZXMgPSB5LmRhdGFbeC5pZF0ubWFwKChzKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNyYW0gPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NyYW1fZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NyYW1fZmlsZV9hd3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmFtX2ZpbGVfbWQ1JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY3JhbV9maWxlX3NpemUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmFtX2luZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY3JhbV9pbmRleF9hd3MnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLm1hcCgoZCk9PnMuY3JhbUZpbGVbZF0pOyAvLyBvYnRhaW4gdGhlIENSQU0gZmlsZSBpbmZvIG9mIHRoZSBzYW1wbGUsIGRcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXJyb3ItY2hlY2tpbmcgb2YgZGF0YSBpbnRlZ3JpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnY3JhbUZpbGUnLCAndGlzc3VlU2l0ZURldGFpbCcsICdkYXRhVHlwZSddLmZvckVhY2goKGspPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXMuaGFzT3duUHJvcGVydHkoaykpIHRocm93ICdQYXJzZSBFcnJvcjogcmVxdWlyZWQgYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9idGFpbiBzYW1wbGUncyBtZXRhIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW5zID0gW3MuY3JhbUZpbGUuc2FtcGxlX2lkLCBzLnRpc3N1ZVNpdGVEZXRhaWwsIHMuZGF0YVR5cGVdLmNvbmNhdChjcmFtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW5zLmpvaW4oXCJcXHRcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZENvbnRlbnQgKz0gc2VsZWN0ZWRTYW1wbGVzLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBuZXcgQmxvYihbZG93bmxvYWRDb250ZW50XSwge3R5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnfSk7XG4gICAgICAgICAgICAgICAgc2F2ZUFzKGZpbGUsICdHVEV4LmNyYW0udHh0JywgdHJ1ZSk7IC8vIHNhdmVBcygpIGlzIGEgRmlsZVNhdmVyIGZ1bmN0aW9uLCBkaXNhYmxlIGF1dG8gQk9NXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBiaW5kRmlyZUNsb3VkQ2xpY2tFdmVudHModGFibGVJZCwgZ29vZ2xlRnVuY0RpY3Qpe1xuICAgIC8vIFRPRE86IG5vdCB5ZXQgdGVzdGVkIGFmdGVyIGNvZGUgcmV2aWV3XG4gICAgIGNvbnN0IGFsbENlbGxzID0gc2VsZWN0KGAjJHt0YWJsZUlkfWApLnNlbGVjdCgndGJvZHknKS5zZWxlY3RBbGwoJ3RkJyk7XG5cbiAgICAgc2VsZWN0KCcjc2VuZC10by1maXJlY2xvdWQnKVxuICAgICAgICAuc3R5bGUoJ2N1cnNvcicsICdwb2ludGVyJylcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKCcjZmlyZS1jbG91ZC1zdGF0dXMnKS5lbXB0eSgpO1xuICAgICAgICAgICAgaWYgKCFnb29nbGVGdW5jRGljdC5jaGVja1NpZ25lZEluKCkpe1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IG5lZWQgdG8gc2lnbiBpbiBmaXJzdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNjb3BlcyA9ICdwcm9maWxlIGVtYWlsIGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZGV2c3RvcmFnZS5mdWxsX2NvbnRyb2wgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9wbHVzLm1lJztcbiAgICAgICAgICAgIGdvb2dsZUZ1bmNEaWN0LmdyYW50U2NvcGVzKHNjb3Blcyk7XG4gICAgICAgICAgICBfcmVwb3J0QmlsbGluZ1Byb2plY3RzKGdvb2dsZUZ1bmNEaWN0LmdldFVzZXIoKSk7XG5cbiAgICAgICAgICAgIGxldCBjZWxscyA9IGFsbENlbGxzLmZpbHRlcihgLnNlbGVjdGVkYCk7XG4gICAgICAgICAgICBpZiAoY2VsbHMuZW1wdHkoKSkgYWxlcnQoJ1lvdSBoYXZlIG5vdCBzZWxlY3RlZCBhbnkgc2FtcGxlcyB0byBzdWJtaXQuJyk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxlY3QoJyNmaXJlLWNsb3VkLWZvcm0nKS5zdHlsZShcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICBjb25zdCBfX3N1Ym1pc3Npb25QcmVwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gaW5wdXQgd29ya3NwYWNlIGVycm9yLWNoZWNraW5nXG4gICAgICAgIGNvbnN0IHdzSW5wdXQgPSAkKCdpbnB1dFtuYW1lPVwid29ya3NwYWNlXCJdJykudmFsKCk7XG4gICAgICAgIGxldCBpbnB1dFN0YXR1cyA9IDE7XG4gICAgICAgIF9nZXRXb3Jrc3BhY2VzKGdvb2dsZUZ1bmNEaWN0LmdldFVzZXIoKSwgZnVuY3Rpb24od3Mpe1xuICAgICAgICAgICAgd3MuZm9yRWFjaCgoZCk9PntcbiAgICAgICAgICAgICAgICBpZiAoZC53b3Jrc3BhY2UubmFtZSA9PSB3c0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbnB1dCBFcnJvcjogV29ya3NwYWNlIGFscmVhZHkgZXhpc3RzLiBcIiArIHdzSW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICAgJCgnI2ZpcmUtY2xvdWQtc3RhdHVzJykuaHRtbChcIldvcmtzcGFjZSBcIiArIHdzSW5wdXQgKyBcIiBhbHJlYWR5IGV4aXN0cy4gPGJyLz4gUGxlYXNlIG5hbWUgYSBuZXcgb25lLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRTdGF0dXMgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGlucHV0U3RhdHVzID09IDEpIHtcbiAgICAgICAgICAgICAgICAkKCcjZmlyZS1jbG91ZC1zdGF0dXMnKS5lbXB0eSgpOyAvLyBjbGVhciBhbnkgZXhpc3RpbmcgRmlyZUNsb3VkIHN0YXR1cyBtZXNzYWdlc1xuICAgICAgICAgICAgICAgIGxldCBjZWxscyA9IGFsbENlbGxzLmZpbHRlcihgLnNlbGVjdGVkYCk7XG4gICAgICAgICAgICAgICAgbGV0IGFsbFNlbGVjdGVkU2FtcGxlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGNlbGxzLmVhY2goZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXIgPSBzZWxlY3QodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpLmZpbHRlcigoYykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMgIT0gJ3NlbGVjdGVkJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IG1hdC5YW3BhcnNlSW50KG1hcmtlclswXS5yZXBsYWNlKCd4JywgJycpKV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBtYXQuWVtwYXJzZUludChtYXJrZXJbMV0ucmVwbGFjZSgneScsICcnKSldO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0geS5kYXRhW3guaWRdLm1hcChkPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBkLnNhbXBsZUlkLnNwbGl0KCctJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLmRvbm9ySWQgPSB0ZW1wWzBdICsgJy0nICsgdGVtcFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICAgICAgICAgICAgICB9KTsgLy8gTk9URTogY3VycmVudGx5IHdlIGRvbid0IGhhdmUgV0VTIENSQU0gZmlsZSBwYXRoc1xuICAgICAgICAgICAgICAgICAgICBhbGxTZWxlY3RlZFNhbXBsZXMgPSBhbGxTZWxlY3RlZFNhbXBsZXMuY29uY2F0KHNlbGVjdGVkKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX3N1Ym1pdFRvRmlyZUNsb3VkKGdvb2dsZUZ1bmNEaWN0LCBhbGxTZWxlY3RlZFNhbXBsZXMsIHVybHMpO1xuICAgICAgICAgICAgICAgIHNlbGVjdCgnI2ZpcmUtY2xvdWQtZm9ybScpLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkKCdpbnB1dFtuYW1lPVwid29ya3NwYWNlXCJdJykua2V5cHJlc3MoZnVuY3Rpb24oZSl7XG4gICAgICAgIGlmKGUua2V5Q29kZT09MTMpe1xuICAgICAgICAgICAgX19zdWJtaXNzaW9uUHJlcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgc2VsZWN0KCcjc3VibWl0LXRvLWZpcmVjbG91ZC1idG4nKS5vbignY2xpY2snLCBfX3N1Ym1pc3Npb25QcmVwKTtcbiAgICBzZWxlY3QoJyNjYW5jZWwtZmlyZWNsb3VkLWJ0bicpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2VsZWN0KCcjZmlyZS1jbG91ZC1mb3JtJykuc3R5bGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgIGFsZXJ0KCdTdWJtaXNzaW9uIENhbmNlbGVkIScpO1xuICAgICAgICAgICAgJCgnI2ZpcmUtY2xvdWQtc3RhdHVzJykuZW1wdHkoKTsgLy8gY2xlYXIgYW55IGV4aXN0aW5nIEZpcmVDbG91ZCBzdGF0dXMgbWVzc2FnZXNcblxuICAgICAgICB9KVxufVxuXG4vKioqKiogRmlyZUNsb3VkIEFQSSAqKioqKi9cbi8vIHJlZmVyZW5jZTogdXNlIHRoaXMgVVJMLCBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvdG9rZW5pbmZvP2FjY2Vzc190b2tlbj1NeUFjY2Vzc1Rva2VuLCB0byBjaGVjayB0aGUgYWNjZXNzIHRva2VuIGluZm9cbi8vIHJlZmVyZW5jZTogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vaWRlbnRpdHkvc2lnbi1pbi93ZWIvYnVpbGQtYnV0dG9uXG4vLyBkZXBlbmRlbmNpZXM6IGpRdWVyeVxuLyoqXG4gKiBHZXQgdGhlIHVzZXIncyBGaXJlQ2xvdWQgYmlsbGluZyBwcm9qZWN0c1xuICogQHBhcmFtIGdvb2dsZVVzZXIge09iamVjdH0gR29vZ2xlIEFQSSBjdXJyZW50IHVzZXIgb2JqZWN0XG4gKiBAcGFyYW0gZG9tSWQge1N0cmluZ30gdGhlIERPTSBJRCBmb3IgcmVwb3J0aW5nIHRoZSBiaWxsaW5nIHByb2plY3RzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfcmVwb3J0QmlsbGluZ1Byb2plY3RzKGdvb2dsZVVzZXIsIGRvbUlkPVwiYmlsbGluZy1wcm9qZWN0LWxpc3RcIikge1xuXG4gICAgLy8gZ2V0IHRoZSB1c2VyJ3MgYWNjZXNzIHRva2VuXG4gICAgbGV0IHRva2VuID0gZ29vZ2xlVXNlci5nZXRBdXRoUmVzcG9uc2UodHJ1ZSkuYWNjZXNzX3Rva2VuO1xuXG4gICAgLy8gYWpheCBjYWxsIHRvIEZpcmVDbG91ZCBiaWxpbmcgcHJvamVjdCB3ZWIgc2VydmljZVxuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLmZpcmVjbG91ZC5vcmcvYXBpL3Byb2ZpbGUvYmlsbGluZycsXG4gICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICB4aHJGaWVsZHM6IHtcbiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24gKHhocikge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0b2tlbik7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIC8vIGpRdWVyeVxuICAgICAgICAgICAgJChgIyR7ZG9tSWR9YCkuZW1wdHkoKTtcbiAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goKGQpPT57XG4gICAgICAgICAgICAgICAgJCgnPGxhYmVsPicgK1xuICAgICAgICAgICAgICAgICAgICBgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJiaWxsaW5nLXByb2plY3RcIiB2YWx1ZT1cIiR7ZC5wcm9qZWN0TmFtZX1cIj4gYCArXG4gICAgICAgICAgICAgICAgICAgIGQucHJvamVjdE5hbWUgK1xuICAgICAgICAgICAgICAgICAgICc8L2xhYmVsPjxici8+J1xuICAgICAgICAgICAgICAgICkuYXBwZW5kVG8oJChgIyR7ZG9tSWR9YCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHVzZXIncyBleGlzaXRuIHdvcmtzcGFjZXMgb24gRmlyZUNsb3VkXG4gKiBAcGFyYW0gZ29vZ2xlVXNlciB7T2JqZWN0fSBHb29nbGUgQVBJIGN1cnJlbnQgdXNlciBvYmplY3RcbiAqIEBwYXJhbSBjYWxsYmFjayB7RnVuY3Rpb259XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfZ2V0V29ya3NwYWNlcyhnb29nbGVVc2VyLCBjYWxsYmFjayl7XG4gICAgbGV0IHRva2VuID0gZ29vZ2xlVXNlci5nZXRBdXRoUmVzcG9uc2UodHJ1ZSkuYWNjZXNzX3Rva2VuO1xuICAgICAvLyBsaXN0IFVzZXIncyB3b3Jrc3BhY2VzXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkuZmlyZWNsb3VkLm9yZy9hcGkvd29ya3NwYWNlcycsXG4gICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICB4aHJGaWVsZHM6IHtcbiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24gKHhocikge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0b2tlbik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgY29uc3Qgd29ya3NwYWNlcyA9IHJlc3BvbnNlLmZpbHRlcigoZCk9PiFkLnB1YmxpYyk7XG4gICAgICAgICAgICBjYWxsYmFjayh3b3Jrc3BhY2VzKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBnb29nbGVGdW5jRGljdCB7T2JqZWN0fVxuICogQHBhcmFtIHNhbXBsZXMge0xpc3R9IFNhbXBsZSBPYmplY3RzXG4gKiBAcGFyYW0gdXJscyB7T2JqZWN0fSBBUEkgVVJMc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX3N1Ym1pdFRvRmlyZUNsb3VkKGdvb2dsZUZ1bmNEaWN0LCBzYW1wbGVzLCB1cmxzKXtcbiAgICBjb25zdCB0b2tlbiA9IGdvb2dsZUZ1bmNEaWN0LmdldFVzZXIoKS5nZXRBdXRoUmVzcG9uc2UodHJ1ZSkuYWNjZXNzX3Rva2VuO1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9ICQoJ2lucHV0W25hbWU9XCJiaWxsaW5nLXByb2plY3RcIl0nKS52YWwoKTtcbiAgICBjb25zdCB3b3Jrc3BhY2UgPSAkKCdpbnB1dFtuYW1lPVwid29ya3NwYWNlXCJdJykudmFsKCk7XG4gICAgaWYobmFtZXNwYWNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYWxlcnQoJ1lvdSBtdXN0IHByb3ZpZGUgYSBiaWxsaW4gcHJvamVjdCcpO1xuICAgICAgICB0aHJvdyhcImJpbGxpbmcgcHJvamVjdCBpcyBub3QgcHJvdmlkZWRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdvcmtzcGFjZSA9PT0gdW5kZWZpbmVkIHx8IHdvcmtzcGFjZSA9PSAnJyl7XG4gICAgICAgIGFsZXJ0KCdZb3UgbXVzdCBwcm92aWRlIGEgbmV3IHdvcmtzcGFjZSBuYW1lJyk7XG4gICAgICAgIHRocm93KCd3b3Jrc3BhY2UgbmFtZSBpcyBub3QgcHJvdmlkZWQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAkKCcjc3Bpbm5lcicpLnNob3coKTtcbiAgICAvLyBjcmVhdGUgdGhlIHdvcmtzcGFjZVxuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogdXJscy5mY1dvcmtTcGFjZSxcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICB4aHJGaWVsZHM6IHtcbiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24gKHhocikge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0b2tlbik7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIFwibmFtZXNwYWNlXCI6IG5hbWVzcGFjZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiB3b3Jrc3BhY2UsXG4gICAgICAgICAgICBcImF0dHJpYnV0ZXNcIjoge30sXG4gICAgICAgICAgICBcImF1dGhvcml6YXRpb25Eb21haW5cIjogW11cbiAgICAgICAgfSksXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKXsgLy8gY2FsbGJhY2sgZnVuY3Rpb24gYWZ0ZXIgd29ya3NwYWNlIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmluaXNoZWQgY3JlYXRpbmcgd29ya3NwYWNlLi4uXCIpO1xuICAgICAgICAgICAgY29uc3QgZG9ub3JzID0gc2FtcGxlcy5tYXAoZD0+e1xuICAgICAgICAgICAgICAgIGlmICghZC5oYXNPd25Qcm9wZXJ0eSgnZG9ub3JJZCcpKSB0aHJvdyAnU2FtcGxlIGRvZXMgbm90IGNvbnRhaW4gYXR0ciBkb25vcklkLic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuZG9ub3JJZDtcbiAgICAgICAgICAgIH0pLmZpbHRlcigoZCwgaSwgYSkgPT4gYS5pbmRleE9mKGQpID09PSBpKTsgLy8gb2J0YWluIHVuaXF1ZSBkb25vcnNcbiAgICAgICAgICAgIGNvbnN0IGRvbm9yRW50aXR5U3RyaW5nID0gYGVudGl0aWVzPWVudGl0eTpwYXJ0aWNpcGFudF9pZFxcbiR7ZG9ub3JzLmpvaW4oJ1xcbicpfVxcbmA7XG4gICAgICAgICAgICBjb25zdCBkb25vckVudGl0eVVybEVuY29kZSA9IGVuY29kZVVSSShkb25vckVudGl0eVN0cmluZyk7XG5cbiAgICAgICAgICAgIC8vIHN1Ym1pdHRpbmcgcGFydGljaXBhbnQgSURzXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogYCR7dXJscy5mY1dvcmtTcGFjZX0vJHtuYW1lc3BhY2V9LyR7d29ya3NwYWNlfS9pbXBvcnRFbnRpdGllc2AsXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdG9rZW4pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgZGF0YTogZG9ub3JFbnRpdHlVcmxFbmNvZGUsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICAgICAkKCcjc3Bpbm5lcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmluYWxseSwgc3VibWl0dGluZyBzYW1wbGVzXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgdGhlIHNhbXBsZUVudGl0eVN0cmluZyBmb3IgRmlyZUNsb3VkIEFQSVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZpbmlzaGVkIGltcG9ydGluZyBwYXJ0aWNpcGFudCBJRHMuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzYW1wbGVFbnRpdHkgPSBbWydlbnRpdHk6c2FtcGxlX2lkJywgJ3BhcnRpY2lwYW50X2lkJywgJ3NhbXBsZV90eXBlJywgJ2JhbV9maWxlJywgJ2JhbV9pbmRleCddLmpvaW4oJ1xcdCcpXTtcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlRW50aXR5ID0gc2FtcGxlRW50aXR5LmNvbmNhdChzYW1wbGVzLm1hcChkPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC5jcmFtRmlsZSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBcIkRhdGEgRXJyb3I6IFwiICsgZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkLmNyYW1GaWxlLmhhc093blByb3BlcnR5KCdjcmFtX2ZpbGUnKSkgdGhyb3cgXCJEYXRhIEVycm9yOiBcIiArIGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiB1c2UgY3JhbUZpbGUuc2FtcGxlX2lkIGluc3RlYWQgb2YgZC5zYW1wbGVJZCB0byBwcmVzZXJ2ZSB0aGUgbWl4ZWQgY2FzZSBzYW1wbGUgSURzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2QuY3JhbUZpbGUuc2FtcGxlX2lkLCBkLmRvbm9ySWQsIGQuZGF0YVR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGQuY3JhbUZpbGUuY3JhbV9maWxlLCBkLmNyYW1GaWxlLmNyYW1faW5kZXhdLmpvaW4oJ1xcdCcpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbXBsZUVudGl0eVN0cmluZyA9IGBlbnRpdGllcz0ke3NhbXBsZUVudGl0eS5qb2luKCdcXG4nKX1cXG5gO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYW1wbGVFbnRpdHlVcmxFbmNvZGUgPSBlbmNvZGVVUkkoc2FtcGxlRW50aXR5U3RyaW5nKTtcblxuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBgJHt1cmxzLmZjV29ya1NwYWNlfS8ke25hbWVzcGFjZX0vJHt3b3Jrc3BhY2V9L2ltcG9ydEVudGl0aWVzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNhbXBsZUVudGl0eVVybEVuY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZpbmlzaGVkIGltcG9ydGluZyBzYW1wbGVzLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZjVVJMID0gYCR7dXJscy5mY1BvcnRhbFdvcmtTcGFjZX0vJHtuYW1lc3BhY2V9LyR7d29ya3NwYWNlfS9kYXRhYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihmY1VSTCwgJ19ibGFuaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNmaXJlLWNsb3VkLXN0YXR1cycpLmh0bWwoYFN1Ym1pdHRlZCEgPGJyLz4gR28gdG8geW91ciA8YnIvPiA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHtmY1VSTH1cIj5GaXJlQ2xvdWQgd29ya3NwYWNlPC9hPmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvcil7Y29uc29sZS5lcnJvcihlcnJvcil9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKXtjb25zb2xlLmVycm9yKGVycm9yKX1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3Ipe2NvbnNvbGUuZXJyb3IoZXJyb3IpfVxuICAgIH0pO1xufVxuXG5cblxuXG4iLCIvKipcbiAqIENvcHlyaWdodCDCqSAyMDE1IC0gMjAxOCBUaGUgQnJvYWQgSW5zdGl0dXRlLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIDMtY2xhdXNlIGxpY2Vuc2UgKGh0dHBzOi8vZ2l0aHViLmNvbS9icm9hZGluc3RpdHV0ZS9ndGV4LXZpei9ibG9iL21hc3Rlci9MSUNFTlNFLm1kKVxuICovXG5cInVzZSBzdHJpY3RcIjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHdGV4VXJscygpe1xuICAgIGNvbnN0IGhvc3QgPSAnaHR0cHM6Ly9ndGV4cG9ydGFsLm9yZy9yZXN0L3YxLyc7XG4gICAgLy8gY29uc3QgaG9zdCA9ICdsb2NhbC5ndGV4cG9ydGFsLm9yZy9yZXN0L3YxLydcbiAgICByZXR1cm4ge1xuICAgICAgICAvLyBnZW5lLWVxdGwgdmlzdWFsaXplciBzcGVjaWZpY1xuICAgICAgICBzaW5nbGVUaXNzdWVFcXRsOiBob3N0ICsgJ2Fzc29jaWF0aW9uL3NpbmdsZVRpc3N1ZUVxdGw/Zm9ybWF0PWpzb24mZGF0YXNldElkPWd0ZXhfdjcmZ2VuY29kZUlkPScsXG4gICAgICAgIGxkOiBob3N0ICsgJ2RhdGFzZXQvbGQ/Zm9ybWF0PWpzb24mZGF0YXNldElkPWd0ZXhfdjcmZ2VuY29kZUlkPScsXG5cbiAgICAgICAgLy8gZXF0bCBEYXNoYm9hcmQgc3BlY2lmaWNcbiAgICAgICAgZHluZXF0bDogaG9zdCArICdhc3NvY2lhdGlvbi9keW5lcXRsJyxcbiAgICAgICAgc25wOiBob3N0ICsgJ3JlZmVyZW5jZS92YXJpYW50P2Zvcm1hdD1qc29uJnNucElkPScsXG4gICAgICAgIHZhcmlhbnRJZDogaG9zdCArICdkYXRhc2V0L3ZhcmlhbnQ/Zm9ybWF0PWpzb24mdmFyaWFudElkPScsXG5cbiAgICAgICAgLy8gdHJhbnNjcmlwdCwgZXhvbiwganVuY3Rpb24gZXhwcmVzc2lvbiBzcGVjaWZpY1xuICAgICAgICBleG9uRXhwOiBob3N0ICsgJ2V4cHJlc3Npb24vbWVkaWFuRXhvbkV4cHJlc3Npb24/ZGF0YXNldElkPWd0ZXhfdjcmaGNsdXN0ZXI9dHJ1ZSZnZW5jb2RlSWQ9JyxcbiAgICAgICAgdHJhbnNjcmlwdEV4cDogaG9zdCArICdleHByZXNzaW9uL21lZGlhblRyYW5zY3JpcHRFeHByZXNzaW9uP2RhdGFzZXRJZD1ndGV4X3Y3JmhjbHVzdGVyPXRydWUmZ2VuY29kZUlkPScsXG4gICAgICAgIGp1bmN0aW9uRXhwOiBob3N0ICsgJ2V4cHJlc3Npb24vbWVkaWFuSnVuY3Rpb25FeHByZXNzaW9uP2RhdGFzZXRJZD1ndGV4X3Y3JmhjbHVzdGVyPXRydWUmZ2VuY29kZUlkPScsXG4gICAgICAgIHRyYW5zY3JpcHQ6IGhvc3QgKyAncmVmZXJlbmNlL3RyYW5zY3JpcHQ/ZGF0YXNldElkPWd0ZXhfdjcmZ2VuY29kZUlkPScsXG4gICAgICAgIGV4b246IGhvc3QgKyAncmVmZXJlbmNlL2V4b24/ZGF0YXNldElkPWd0ZXhfdjcmZ2VuY29kZUlkPScsXG4gICAgICAgIGdlbmVNb2RlbDogaG9zdCArICdkYXRhc2V0L2NvbGxhcHNlZEdlbmVNb2RlbEV4b24/ZGF0YXNldElkPWd0ZXhfdjcmZ2VuY29kZUlkPScsXG4gICAgICAgIGdlbmVNb2RlbFVuZmlsdGVyZWQ6IGhvc3QgKyAnZGF0YXNldC9mdWxsQ29sbGFwc2VkR2VuZU1vZGVsRXhvbj9kYXRhc2V0SWQ9Z3RleF92NyZnZW5jb2RlSWQ9JyxcblxuICAgICAgICAvLyBnZW5lIGV4cHJlc3Npb24gdmlvbGluIHBsb3Qgc3BlY2lmaWNcbiAgICAgICAgZ2VuZUV4cDogaG9zdCArICdleHByZXNzaW9uL2dlbmVFeHByZXNzaW9uP2RhdGFzZXRJZD1ndGV4X3Y3JmdlbmNvZGVJZD0nLFxuXG4gICAgICAgIC8vIGdlbmUgZXhwcmVzc2lvbiBoZWF0IG1hcCBzcGVjaWZpY1xuICAgICAgICBtZWRHZW5lRXhwOiBob3N0ICsgJ2V4cHJlc3Npb24vbWVkaWFuR2VuZUV4cHJlc3Npb24/ZGF0YXNldElkPWd0ZXhfdjcmaGNsdXN0ZXI9dHJ1ZSZwYWdlU2l6ZT0xMDAwMCcsXG5cbiAgICAgICAgLy8gZ2VuZSBleHByZXNzaW9uIGJveHBsb3Qgc3BlY2lmaWNcbiAgICAgICAgZ2VuZUV4cEJveHBsb3Q6IGhvc3QgKyAnZXhwcmVzc2lvbi9nZW5lRXhwcmVzc2lvbj9kYXRhc2V0SWQ9Z3RleF92NyZib3hwbG90RGV0YWlsPWZ1bGwmZ2VuY29kZUlkPScsXG5cbiAgICAgICAgLy8gdG9wIGV4cHJlc3NlZCBnZW5lIGV4cHJlc3Npb24gc3BlY2lmaWNcbiAgICAgICAgdG9wSW5UaXNzdWVGaWx0ZXJlZDogaG9zdCArICdleHByZXNzaW9uL3RvcEV4cHJlc3NlZEdlbmU/ZGF0YXNldElkPWd0ZXhfdjcmZmlsdGVyTXRHZW5lPXRydWUmc29ydEJ5PW1lZGlhbiZzb3J0RGlyZWN0aW9uPWRlc2MmcGFnZVNpemU9NTAmdGlzc3VlU2l0ZURldGFpbElkPScsXG4gICAgICAgIHRvcEluVGlzc3VlOiBob3N0ICsgJ2V4cHJlc3Npb24vdG9wRXhwcmVzc2VkR2VuZT9kYXRhc2V0SWQ9Z3RleF92NyZzb3J0Qnk9bWVkaWFuJnNvcnREaXJlY3Rpb249ZGVzYyZwYWdlU2l6ZT01MCZ0aXNzdWVTaXRlRGV0YWlsSWQ9JyxcblxuICAgICAgICBnZW5lSWQ6IGhvc3QgKyAncmVmZXJlbmNlL2dlbmU/Zm9ybWF0PWpzb24mZ2VuY29kZVZlcnNpb249djE5Jmdlbm9tZUJ1aWxkPUdSQ2gzNyUyRmhnMTkmZ2VuZUlkPScsXG5cbiAgICAgICAgLy8gdGlzc3VlIG1lbnUgc3BlY2lmaWNcbiAgICAgICAgdGlzc3VlOiAgaG9zdCArICdkYXRhc2V0L3Rpc3N1ZUluZm8/Zm9ybWF0PWpzb24mZGF0YXNldElkPWd0ZXhfdjcnLFxuXG4gICAgICAgIC8vIGxvY2FsIHN0YXRpYyBmaWxlc1xuICAgICAgICBzYW1wbGU6ICcvdG1wU3VtbWFyeURhdGEvZ3RleC5TYW1wbGUuY3N2JyxcbiAgICAgICAgcm5hc2VxQ3JhbTogJy90bXBTdW1tYXJ5RGF0YS9ybmFzZXFfY3JhbV9maWxlc192N19kYkdhUF8wMTE1MTYudHh0JyxcbiAgICAgICAgd2dzQ3JhbTogJy90bXBTdW1tYXJ5RGF0YS93Z3NfY3JhbV9maWxlc192N19oZzM4X2RiR2FQXzAxMTUxNi50eHQnLFxuXG4gICAgICAgIC8vIGZpcmVDbG91ZFxuICAgICAgICBmY0JpbGxpbmc6ICdodHRwczovL2FwaS5maXJlY2xvdWQub3JnL2FwaS9wcm9maWxlL2JpbGxpbmcnLFxuICAgICAgICBmY1dvcmtTcGFjZTogJ2h0dHBzOi8vYXBpLmZpcmVjbG91ZC5vcmcvYXBpL3dvcmtzcGFjZXMnLFxuICAgICAgICBmY1BvcnRhbFdvcmtTcGFjZTogJ2h0dHBzOi8vcG9ydGFsLmZpcmVjbG91ZC5vcmcvI3dvcmtzcGFjZXMnXG4gICAgfVxufVxuXG4vKipcbiAqIHBhcnNlIEdURXggZHluZXF0bCBqc29uXG4gKiBAcGFyYW0gZGF0YSB7SlNPTn0gZnJvbSBHVEV4IGR5bmVxdGwgd2ViIHNlcnZpY2VcbiAqIEByZXR1cm5zIGRhdGEge0pTT059IG1vZGlmaWVkIGRhdGFcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUR5bkVxdGwoanNvbil7XG4gICAgLy8gY2hlY2sgcmVxdWlyZWQganNvbiBhdHRyaWJ1dGVzXG4gICAgWydkYXRhJywgJ2dlbm90eXBlcycsICdwVmFsdWUnLCAncFZhbHVlVGhyZXNob2xkJywgJ3Rpc3N1ZVNpdGVEZXRhaWxJZCddLmZvckVhY2goKGQpPT57XG4gICAgICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGQpKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoanNvbik7XG4gICAgICAgICAgICB0aHJvdyAnUGFyc2UgRXJyb3I6IFJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBkO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBqc29uLmV4cHJlc3Npb25fdmFsdWVzID0ganNvbi5kYXRhLm1hcCgoZCk9PnBhcnNlRmxvYXQoZCkpO1xuICAgIGpzb24uZ2Vub3R5cGVzID0ganNvbi5nZW5vdHlwZXMubWFwKChkKT0+cGFyc2VGbG9hdChkKSk7XG5cbiAgICBqc29uLmhvbW9SZWZFeHAgPSBqc29uLmV4cHJlc3Npb25fdmFsdWVzLmZpbHRlcigoZCxpKSA9PiB7XG4gICAgICAgIHJldHVybiBqc29uLmdlbm90eXBlc1tpXSA9PSAwXG4gICAgfSk7XG4gICAganNvbi5ob21vQWx0RXhwID0ganNvbi5leHByZXNzaW9uX3ZhbHVlcy5maWx0ZXIoKGQsaSkgPT4ge1xuICAgICAgICByZXR1cm4ganNvbi5nZW5vdHlwZXNbaV0gPT0gMlxuICAgIH0pO1xuICAgIGpzb24uaGV0ZXJvRXhwID0ganNvbi5leHByZXNzaW9uX3ZhbHVlcy5maWx0ZXIoKGQsaSkgPT4ge1xuICAgICAgICByZXR1cm4ganNvbi5nZW5vdHlwZXNbaV0gPT0gMVxuICAgIH0pO1xuXG4gICAgLy8gZ2VuZXJhdGUgZ2Vub3R5cGUgdGV4dCBsYWJlbHNcbiAgICBsZXQgcmVmID0ganNvbi52YXJpYW50SWQuc3BsaXQoL18vKVsyXTtcbiAgICBsZXQgYWx0ID0ganNvbi52YXJpYW50SWQuc3BsaXQoL18vKVszXTtcbiAgICBqc29uLmhldCA9IHJlZiArIGFsdDtcbiAgICBqc29uLnJlZiA9IHJlZiArIHJlZjtcbiAgICBqc29uLmFsdCA9IGFsdCArIGFsdDtcblxuICAgIHJldHVybiBqc29uO1xufVxuXG5cbi8qKlxuICogUGFyc2UgdGhlIHNpbmdsZSB0aXNzdWUgZXF0bHMgZnJvbSBHVEV4IHdlYiBzZXJ2aWNlXG4gKiBAcGFyYW0gZGF0YSB7SnNvbn1cbiAqIEBwYXJhbSB0aXNzdWVTaXRlVGFibGUge0pzb259IG9wdGlvbmFsIGZvciBtYXBwaW5nIHRpc3N1ZVNpdGVEZXRhaWxJZCB0byB0aXNzdWVTaXRlRGV0YWlsLCBhIGRpY3Rpb25hcnkgb2YgdGlzc3VlU2l0ZSBvYmplY3RzICh3aXRoIHRoZSBhdHRyIHRpc3N1ZVNpdGVEZXRhaWwpIGluZGV4ZWQgYnkgdGlzc3VlU2l0ZURldGFpbElkLCBhbmRcbiAqIEByZXR1cm5zIHtMaXN0fSBvZiBlcXRscyB3aXRoIGF0dHJpYnV0ZXMgcmVxdWlyZWQgZm9yIEdFViByZW5kZXJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2luZ2xlVGlzc3VlRXF0bHMoZGF0YSwgdGlzc3VlU2l0ZVRhYmxlID0gdW5kZWZpbmVkKXtcbiAgICBjb25zdCBhdHRyID0gJ3NpbmdsZVRpc3N1ZUVxdGwnO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyBcIlBhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGF0dHJpYnV0ZSBpcyBub3QgZm91bmQ6IFwiICsgYXR0cjtcbiAgICBbJ3ZhcmlhbnRJZCcsICd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnbmVzJywgJ3BWYWx1ZSddLmZvckVhY2goKGspPT57XG4gICAgICAgIGlmICghZGF0YVthdHRyXVswXS5oYXNPd25Qcm9wZXJ0eShrKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsgYXR0cjtcbiAgICB9KTtcblxuXG4gICAgcmV0dXJuIGRhdGFbYXR0cl0ubWFwKChkKT0+e1xuICAgICAgICBkLnggPSBkLnZhcmlhbnRJZDtcbiAgICAgICAgZC5kaXNwbGF5WCA9IGdlbmVyYXRlU2hvcnRWYXJpYW50SWQoZC52YXJpYW50SWQpO1xuICAgICAgICBkLnkgPSBkLnRpc3N1ZVNpdGVEZXRhaWxJZDtcbiAgICAgICAgaWYgKHRpc3N1ZVNpdGVUYWJsZSkgZC5kaXNwbGF5WSA9IHRpc3N1ZVNpdGVUYWJsZVtkLnRpc3N1ZVNpdGVEZXRhaWxJZF0udGlzc3VlU2l0ZURldGFpbDtcbiAgICAgICAgZC52YWx1ZSA9IGQubmVzO1xuICAgICAgICBkLmRpc3BsYXlWYWx1ZSA9IGQubmVzLnRvUHJlY2lzaW9uKDMpO1xuICAgICAgICBkLnIgPSAtTWF0aC5sb2cxMChkLnBWYWx1ZSk7IC8vIHNldCByIHRvIGJlIHRoZSAtbG9nMTAocC12YWx1ZSlcbiAgICAgICAgZC5yRGlzcGxheVZhbHVlID0gcGFyc2VGbG9hdChkLnBWYWx1ZS50b0V4cG9uZW50aWFsKCkpLnRvUHJlY2lzaW9uKDMpO1xuICAgICAgICByZXR1cm4gZDtcbiAgICB9KVxufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBnZW5lcyBmcm9tIEdURXggd2ViIHNlcnZpY2VcbiAqIEBwYXJhbSBkYXRhIHtKc29ufVxuICogQHJldHVybnMge0xpc3R9IG9mIGdlbmVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUdlbmVzKGRhdGEsIHNpbmdsZT1mYWxzZSwgZ2VuZUlkPW51bGwpe1xuICAgIGNvbnN0IGF0dHIgPSAnZ2VuZSc7XG4gICAgaWYoIWRhdGEuaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93IFwiUGFyc2luZyBFcnJvcjogYXR0cmlidXRlIGdlbmUgZG9lc24ndCBleGlzdC5cIjtcbiAgICBpZiAoZGF0YS5nZW5lLmxlbmd0aD09MCl7XG4gICAgICAgICBhbGVydChcIk5vIGdlbmUgaXMgZm91bmRcIik7XG4gICAgICAgICB0aHJvdyBcIkZhdGFsIEVycm9yOiBnZW5lKHMpIG5vdCBmb3VuZFwiO1xuICAgICB9XG4gICAgaWYgKHNpbmdsZSl7XG4gICAgICAgIGlmIChnZW5lSWQgPT09IG51bGwpIHRocm93IFwiUGxlYXNlIHByb3ZpZGUgYSBnZW5lIElEIGZvciBzZWFyY2ggcmVzdWx0cyB2YWxpZGF0aW9uXCI7XG4gICAgICAgIGlmIChkYXRhLmdlbmUubGVuZ3RoPjEpIHsgLy8gd2hlbiBhIHNpbmdsZSBnZW5lIElEIGhhcyBtdWx0aXBsZSBtYXRjaGVzXG4gICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gZGF0YS5nZW5lLmZpbHRlcigoZyk9PntcbiAgICAgICAgICAgICAgICAgcmV0dXJuIGcuZ2VuZVN5bWJvbFVwcGVyPT1nZW5lSWQudG9VcHBlckNhc2UoKSB8fCBnLmdlbmNvZGVJZCA9PSBnZW5lSWQudG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmF0YWwgRXJyb3I6IGlucHV0IGdlbmUgSUQgaXMgbm90IHVuaXF1ZS5cIik7XG4gICAgICAgICAgICAgICAgIHRocm93IFwiRmF0YWwgRXJyb3I6IGlucHV0IGdlbmUgSUQgaXMgbm90IHVuaXF1ZS5cIjtcbiAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXJlZC5sZW5ndGggPT0gMCl7XG4gICAgICAgICAgICAgICAgIGFsZXJ0KFwiTm8gZ2VuZSBpcyBmb3VuZCB3aXRoIFwiICsgZ2VuZUlkKTtcbiAgICAgICAgICAgICAgICAgdGhyb3cgXCJGYXRhbCBFcnJvcjogZ2VuZSBub3QgZm91bmRcIjtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgZGF0YS5nZW5lID0gZmlsdGVyZWRcbiAgICAgICAgICAgICB9XG4gICAgICAgICB9XG4gICAgICAgICByZXR1cm4gZGF0YS5nZW5lWzBdXG4gICAgfVxuICAgIGVsc2UgcmV0dXJuIGRhdGFbYXR0cl07XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHRpc3N1ZXNcbiAqIEBwYXJhbSBkYXRhIHtKc29ufVxuICogQHJldHVybnMge0xpc3R9IG9mIHRpc3N1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVGlzc3Vlcyhqc29uKXtcbiAgICBjb25zdCBhdHRyID0gJ3Rpc3N1ZUluZm8nO1xuICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIGNvbnN0IHRpc3N1ZXMgPSBqc29uW2F0dHJdO1xuXG4gICAgLy8gc2FuaXR5IGNoZWNrXG4gICAgWyd0aXNzdWVTaXRlRGV0YWlsSWQnLCAndGlzc3VlU2l0ZURldGFpbCcsICdjb2xvckhleCddLmZvckVhY2goKGQpPT57XG4gICAgICAgIGlmICghdGlzc3Vlc1swXS5oYXNPd25Qcm9wZXJ0eShkKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0ciBpcyBtaXNzaW5nOiAnICsgZDtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aXNzdWVzO1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSB0aXNzdWVzIGFuZCByZXR1cm4gYSBsb29rdXAgdGFibGUgaW5kZXhlZCBieSB0aXNzdWVTaXRlRGV0YWlsSWRcbiAqIEBwYXJhbSBqc29uIGZyb20gd2ViIHNlcnZpY2UgdGlzc3VlU2l0ZURldGFpbFxuICogQHJldHVybnMgeyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRpc3N1ZURpY3QoanNvbil7XG4gICAgY29uc3QgYXR0ciA9ICd0aXNzdWVJbmZvJztcbiAgICBpZighanNvbi5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0ciBpcyBtaXNzaW5nOiAnICsgYXR0cjtcbiAgICBjb25zdCB0aXNzdWVzID0ganNvblthdHRyXTtcbiAgICAvLyBzYW5pdHkgY2hlY2tcbiAgICBbJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICd0aXNzdWVTaXRlRGV0YWlsJywgJ2NvbG9ySGV4J10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKCF0aXNzdWVzWzBdLmhhc093blByb3BlcnR5KGQpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyIGlzIG1pc3Npbmc6ICcgKyBkO1xuICAgIH0pO1xuICAgIHJldHVybiB0aXNzdWVzLnJlZHVjZSgoYXJyLCBkKT0+e2FycltkLnRpc3N1ZVNpdGVEZXRhaWxJZF0gPSBkOyByZXR1cm4gYXJyO30se30pO1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSB0aXNzdWVzIHNhbXBsZSBjb3VudHMsIEdURXggcmVsZWFzZSBzcGVjaWZpY1xuICogQHBhcmFtIGpzb24gZnJvbSB3ZWIgc2VydmljZSB0aXNzdWVJbmZvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRpc3N1ZVNhbXBsZUNvdW50cyhqc29uKXtcbiAgICBjb25zdCBhdHRyID0gJ3Rpc3N1ZUluZm8nO1xuICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIGNvbnN0IHRpc3N1ZXMgPSBqc29uW2F0dHJdO1xuXG4gICAgLy8gY2hlY2sganNvbiBzdHJ1Y3R1cmVcbiAgICBjb25zdCB0aXNzdWUgPSB0aXNzdWVzWzBdO1xuICAgIGlmICghdGlzc3VlLmhhc093blByb3BlcnR5KCd0aXNzdWVTaXRlRGV0YWlsSWQnKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGF0dHIgaXMgbWlzc2luZzogdGlzc3VlU2l0ZURldGFpbElkJztcbiAgICBpZiAoIXRpc3N1ZS5oYXNPd25Qcm9wZXJ0eSgncm5hU2VxQW5kR2Vub3R5cGVTYW1wbGVDb3VudCcpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQgYXR0ciBpcyBtaXNzaW5nOiBybmFTZXFBbmRHZW5vdHlwZVNhbXBsZUNvdW50JztcbiAgICByZXR1cm4gdGlzc3Vlcztcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgdGlzc3VlIGdyb3Vwc1xuICogQHBhcmFtIGRhdGEge0pzb259XG4gKiBAcGFyYW0gZm9yRXF0bCB7Qm9vbGVhbn0gcmVzdHJpY3QgdG8gZXF0bCB0aXNzdWVzXG4gKiBAcmV0dXJucyB7RGljdGlvbmFyeX0gb2YgbGlzdHMgb2YgdGlzc3VlcyBpbmRleGVkIGJ5IHRoZSB0aXNzdWUgZ3JvdXAgbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUaXNzdWVTaXRlcyhkYXRhLCBmb3JFcXRsPWZhbHNlKXtcbiAgICAvLyB0aGUgbGlzdCBvZiBpbnZhbGlkIGVxdGwgdGlzc3VlcyBkdWUgdG8gc2FtcGxlIHNpemUgPCA3MFxuICAgIC8vIGEgaGFyZC1jb2RlZCBsaXN0IGJlY2F1c2UgdGhlIHNhbXBsZSBzaXplIGlzIG5vdCBlYXN5IHRvIHJldHJpZXZlXG4gICAgY29uc3QgaW52YWxpZFRpc3N1ZXMgPSBbJ0JsYWRkZXInLCAnQ2Vydml4X0VjdG9jZXJ2aXgnLCAnQ2Vydml4X0VuZG9jZXJ2aXgnLCAnRmFsbG9waWFuX1R1YmUnLCAnS2lkbmV5X0NvcnRleCddO1xuXG4gICAgY29uc3QgYXR0ciA9ICd0aXNzdWVJbmZvJztcbiAgICBpZighZGF0YS5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIGxldCB0aXNzdWVzID0gZGF0YVthdHRyXTtcbiAgICBbJ3Rpc3N1ZVNpdGUnLCd0aXNzdWVTaXRlRGV0YWlsSWQnLCd0aXNzdWVTaXRlRGV0YWlsJ10uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgaWYgKCF0aXNzdWVzWzBdLmhhc093blByb3BlcnR5KGQpKSB0aHJvdyBgcGFyc2VUaXNzdWVTaXRlcyBhdHRyIGVycm9yLiAke2R9IGlzIG5vdCBmb3VuZGA7XG4gICAgfSk7XG4gICAgdGlzc3VlcyA9IGZvckVxdGw9PWZhbHNlP3Rpc3N1ZXM6dGlzc3Vlcy5maWx0ZXIoKGQpPT57cmV0dXJuICFpbnZhbGlkVGlzc3Vlcy5pbmNsdWRlcyhkLnRpc3N1ZVNpdGVEZXRhaWxJZCl9KTsgLy8gYW4gYXJyYXkgb2YgdGlzc3VlU2l0ZURldGFpbElkIG9iamVjdHNcblxuICAgIC8vIGJ1aWxkIHRoZSB0aXNzdWVHcm91cHMgbG9va3VwIGRpY3Rpb25hcnkgaW5kZXhlZCBieSB0aGUgdGlzc3VlIGdyb3VwIG5hbWUgKGkuZS4gdGhlIHRpc3N1ZSBtYWluIHNpdGUgbmFtZSlcbiAgICBsZXQgdGlzc3VlR3JvdXBzID0gdGlzc3Vlcy5yZWR1Y2UoKGFyciwgZCk9PntcbiAgICAgICAgbGV0IGdyb3VwTmFtZSA9IGQudGlzc3VlU2l0ZTtcbiAgICAgICAgbGV0IHNpdGUgPSB7XG4gICAgICAgICAgICBpZDogZC50aXNzdWVTaXRlRGV0YWlsSWQsXG4gICAgICAgICAgICBuYW1lOiBkLnRpc3N1ZVNpdGVEZXRhaWxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFhcnIuaGFzT3duUHJvcGVydHkoZ3JvdXBOYW1lKSkgYXJyW2dyb3VwTmFtZV0gPSBbXTsgLy8gaW5pdGlhdGUgYW4gYXJyYXlcbiAgICAgICAgYXJyW2dyb3VwTmFtZV0ucHVzaChzaXRlKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LCB7fSk7XG5cbiAgICAvLyBtb2RpZnkgdGhlIHRpc3N1ZSBncm91cHMgdGhhdCBoYXZlIG9ubHkgYSBzaW5nbGUgc2l0ZVxuICAgIC8vIGJ5IHJlcGxhY2luZyB0aGUgZ3JvdXAncyBuYW1lIHdpdGggdGhlIHNpbmdsZSBzaXRlJ3MgbmFtZSAtLSByZXN1bHRpbmcgYSBiZXR0ZXIgQWxwaGFiZXRpY2FsIG9yZGVyIG9mIHRoZSB0aXNzdWUgZ3JvdXBzXG5cbiAgICBPYmplY3Qua2V5cyh0aXNzdWVHcm91cHMpLmZvckVhY2goKGQpPT57XG4gICAgICAgIGlmICh0aXNzdWVHcm91cHNbZF0ubGVuZ3RoID09IDEpeyAvLyBhIHNpbmdsZS1zaXRlIGdyb3VwXG4gICAgICAgICAgICBsZXQgc2l0ZSA9IHRpc3N1ZUdyb3Vwc1tkXVswXTsgLy8gdGhlIHNpbmdsZSBzaXRlXG4gICAgICAgICAgICBkZWxldGUgdGlzc3VlR3JvdXBzW2RdOyAvLyByZW1vdmUgdGhlIG9sZCBncm91cCBpbiB0aGUgZGljdGlvbmFyeVxuICAgICAgICAgICAgdGlzc3VlR3JvdXBzW3NpdGUubmFtZV0gPSBbc2l0ZV07IC8vIGNyZWF0ZSBhIG5ldyBncm91cCB3aXRoIHRoZSBzaXRlJ3MgbmFtZVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRpc3N1ZUdyb3Vwcztcbn1cblxuLyoqXG4gKiBwYXJzZSB0aGUgZXhvbnNcbiAqIEBwYXJhbSBkYXRhIHtKc29ufVxuICogQHBhcmFtIGZ1bGwge0Jvb2xlYW59XG4gKiBAcmV0dXJucyB7TGlzdH0gb2YgZXhvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTW9kZWxFeG9ucyhqc29uKXtcbiAgICBjb25zdCBhdHRyID0gJ2NvbGxhcHNlZEdlbmVNb2RlbEV4b24nO1xuICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGF0dHIpKXtcbiAgICAgICAgY29uc29sZS5lcnJvcihqc29uKTtcbiAgICAgICAgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IFJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIH1cbiAgICAvLyBzYW5pdHkgY2hlY2tcbiAgICBbJ3N0YXJ0JywgJ2VuZCddLmZvckVhY2goKGQpPT57XG4gICAgICAgIGlmICghanNvblthdHRyXVswXS5oYXNPd25Qcm9wZXJ0eShkKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IFJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBkO1xuICAgIH0pO1xuICAgIHJldHVybiBqc29uW2F0dHJdLm1hcCgoZCk9PntcbiAgICAgICAgZC5jaHJvbVN0YXJ0ID0gZC5zdGFydDtcbiAgICAgICAgZC5jaHJvbUVuZCA9IGQuZW5kO1xuICAgICAgICByZXR1cm4gZDtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBwYXJzZSB0aGUganVuY3Rpb25zXG4gKiBAcGFyYW0gZGF0YVxuICogQHJldHVybnMge0xpc3R9IG9mIGp1bmN0aW9uc1xuICogLy8ganVuY3Rpb24gYW5ub3RhdGlvbnMgYXJlIG5vdCBzdG9yZWQgaW4gTW9uZ29cbiAgICAvLyBzbyBoZXJlIHdlIHVzZSB0aGUganVuY3Rpb24gZXhwcmVzc2lvbiB3ZWIgc2VydmljZSB0byBwYXJzZSB0aGUganVuY3Rpb24gSUQgZm9yIGl0cyBnZW5vbWljIGxvY2F0aW9uXG4gICAgLy8gYXNzdW1pbmcgdGhhdCBlYWNoIHRpc3N1ZSBoYXMgdGhlIHNhbWUganVuY3Rpb25zLFxuICAgIC8vIHRvIGdyYWIgYWxsIHRoZSBrbm93biBqdW5jdGlvbnMgb2YgYSBnZW5lLCB3ZSBvbmx5IG5lZWQgdG8gcXVlcnkgb25lIHRpc3N1ZVxuICAgIC8vIGhlcmUgd2UgYXJiaXRyYXJpbHkgcGljayBMaXZlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnVuY3Rpb25zKGpzb24pe1xuXG4gICAgY29uc3QgYXR0ciA9ICdtZWRpYW5KdW5jdGlvbkV4cHJlc3Npb24nO1xuICAgIGlmKCFqc29uLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcGFyc2VKdW5jdGlvbnMgaW5wdXQgZXJyb3IuICcgKyBhdHRyO1xuXG4gICAgLy8gY2hlY2sgcmVxdWlyZWQganNvbiBhdHRyaWJ1dGVzXG4gICAgWyd0aXNzdWVTaXRlRGV0YWlsSWQnLCAnanVuY3Rpb25JZCddLmZvckVhY2goKGQpPT57XG4gICAgICAgIC8vIHVzZSB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUganNvbiBvYmplY3RzIGFzIGEgdGVzdCBjYXNlXG4gICAgICAgIGlmKCFqc29uW2F0dHJdWzBdLmhhc093blByb3BlcnR5KGQpKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoanNvblthdHRyXVswXSk7XG4gICAgICAgICAgICB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganVuY3Rpb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBkO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGpzb25bYXR0cl0uZmlsdGVyKChkKT0+ZC50aXNzdWVTaXRlRGV0YWlsSWQ9PSdMaXZlcicpXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3MgPSBkLmp1bmN0aW9uSWQuc3BsaXQoJ18nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hyb206IHBvc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbVN0YXJ0OiBwb3NbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21FbmQ6IHBvc1syXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdW5jdGlvbklkOiBkLmp1bmN0aW9uSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG59XG5cbi8qKlxuICogcGFyc2UgdHJhbnNjcmlwdCBpc29mb3JtcyBmcm9tIHRoZSBHVEV4IHdlYiBzZXJ2aWNlOiAncmVmZXJlbmNlL3RyYW5zY3JpcHQ/cmVsZWFzZT12NyZnZW5jb2RlX2lkPSdcbiAqIEBwYXJhbSBkYXRhIHtKc29ufVxuICogcmV0dXJucyBhIGRpY3Rpb25hcnkgb2YgdHJhbnNjcmlwdCBleG9uIG9iamVjdCBsaXN0cyBpbmRleGVkIGJ5IHRyYW5zY3JpcHQgSURzIC0tIEVOU1QgSURzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUV4b25zKGpzb24pe1xuICAgIGNvbnN0IGF0dHIgPSAnZXhvbic7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiBleG9uJztcbiAgICByZXR1cm4ganNvblthdHRyXS5yZWR1Y2UoKGEsIGQpPT57XG4gICAgICAgIC8vIGNoZWNrIHJlcXVpcmVkIGF0dHJpYnV0ZXNcbiAgICAgICAgWyd0cmFuc2NyaXB0SWQnLCAnY2hyb21vc29tZScsICdzdGFydCcsICdlbmQnLCAnZXhvbk51bWJlcicsICdleG9uSWQnXS5mb3JFYWNoKChrKT0+e1xuICAgICAgICAgICAgaWYoIWQuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGQpO1xuICAgICAgICAgICAgICAgIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsga1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFbZC50cmFuc2NyaXB0SWRdID09PSB1bmRlZmluZWQpIGFbZC50cmFuc2NyaXB0SWRdID0gW107XG4gICAgICAgIGQuY2hyb20gPSBkLmNocm9tb3NvbWU7XG4gICAgICAgIGQuY2hyb21TdGFydCA9IGQuc3RhcnQ7XG4gICAgICAgIGQuY2hyb21FbmQgPSBkLmVuZDtcbiAgICAgICAgYVtkLnRyYW5zY3JpcHRJZF0ucHVzaChkKTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfSwge30pO1xufVxuXG4vKipcbiAqIHBhcnNlIHRyYW5zY3JpcHQgaXNvZm9ybXMgZnJvbSB0aGUgR1RFeCB3ZWIgc2VydmljZTogJ3JlZmVyZW5jZS90cmFuc2NyaXB0P3JlbGVhc2U9djcmZ2VuY29kZV9pZD0nXG4gKiBAcGFyYW0gZGF0YSB7SnNvbn0gZnJvbSB3ZWIgc2VydmljZSBleG9uXG4gKiByZXR1cm5zIGEgbGlzdCBvZiBhbGwgRXhvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRXhvbnNUb0xpc3QoanNvbil7XG4gICAgY29uc3QgYXR0ciA9ICdleG9uJztcbiAgICBpZighanNvbi5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6IGV4b24nO1xuICAgIHJldHVybiBqc29uW2F0dHJdO1xufVxuXG4vKipcbiAqIHBhcnNlIHRyYW5zY3JpcHQgaXNvZm9ybXNcbiAqIEBwYXJhbSBkYXRhIHtKc29ufSBmcm9tIEdURXggd2ViIHNlcnZpY2UgJ3JlZmVyZW5jZS90cmFuc2NyaXB0P3JlbGVhc2U9djcmZ2VuY29kZV9pZD0nXG4gKiByZXR1cm5zIGEgbGlzdCBvZiBpc29mb3JtIG9iamVjdHMgc29ydGVkIGJ5IGxlbmd0aCBpbiBkZXNjZW5kaW5nIG9yZGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRyYW5zY3JpcHRzKGpzb24pe1xuICAgIGNvbnN0IGF0dHIgPSAndHJhbnNjcmlwdCc7XG4gICAgaWYoIWpzb24uaGFzT3duUHJvcGVydHkoYXR0cikpIHRocm93KCdwYXJzZUlzb2Zvcm1zIGlucHV0IGVycm9yJyk7XG5cbiAgICAvLyBjaGVjayByZXF1aXJlZCBhdHRyaWJ1dGVzLCB1c2UgdGhlIGZpcnN0IHRyYW5zY3JpcHQgYXMgdGhlIHRlc3QgY2FzZVxuICAgIFsndHJhbnNjcmlwdElkJywgJ3N0YXJ0JywgJ2VuZCddLmZvckVhY2goKGspPT57XG4gICAgICAgIGlmKCFqc29uW2F0dHJdWzBdLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGQpO1xuICAgICAgICAgICAgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBrXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBqc29uW2F0dHJdLnNvcnQoKGEsIGIpPT57XG4gICAgICAgIGNvbnN0IGwxID0gTWF0aC5hYnMoYS5lbmQgLSBhLnN0YXJ0KSArIDE7XG4gICAgICAgIGNvbnN0IGwyID0gTWF0aC5hYnMoYi5lbmQgLSBiLnN0YXJ0KSArIDE7XG4gICAgICAgIHJldHVybiAtKGwxLWwyKTsgLy8gc29ydCBieSBpc29mb3JtIGxlbmd0aCBpbiBkZXNjZW5kaW5nIG9yZGVyXG4gICAgfSk7XG59XG5cbi8qKlxuICogcGFyc2UgZmluYWwgKG1hc2tlZCkgZ2VuZSBtb2RlbCBleG9uIGV4cHJlc3Npb25cbiAqIGV4cHJlc3Npb24gaXMgbm9ybWFsaXplZCB0byByZWFkcyBwZXIga2JcbiAqIEBwYXJhbSBkYXRhIHtKU09OfSBvZiBleG9uIGV4cHJlc3Npb24gd2ViIHNlcnZpY2VcbiAqIEBwYXJhbSBleG9ucyB7TGlzdH0gb2YgZXhvbnMgd2l0aCBwb3NpdGlvbnNcbiAqIEByZXR1cm5zIHtMaXN0fSBvZiBleG9uIG9iamVjdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRXhvbkV4cHJlc3Npb24oZGF0YSwgZXhvbnMpe1xuICAgIGNvbnN0IGV4b25EaWN0ID0gZXhvbnMucmVkdWNlKChhLCBkKT0+e2FbZC5leG9uSWRdID0gZDsgcmV0dXJuIGE7fSwge30pO1xuICAgIGNvbnN0IGF0dHIgPSAnbWVkaWFuRXhvbkV4cHJlc3Npb24nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdygncGFyc2VFeG9uRXhwcmVzc2lvbiBpbnB1dCBlcnJvcicpO1xuXG4gICAgY29uc3QgZXhvbk9iamVjdHMgPSBkYXRhW2F0dHJdO1xuICAgIC8vIGVycm9yLWNoZWNraW5nXG4gICAgWydtZWRpYW4nLCAnZXhvbklkJywgJ3Rpc3N1ZVNpdGVEZXRhaWxJZCddLmZvckVhY2goKGQpPT57XG4gICAgICAgIGlmICghZXhvbk9iamVjdHNbMF0uaGFzT3duUHJvcGVydHkoZCkpIHRocm93ICdGYXRhbCBFcnJvcjogcGFyc2VFeG9uRXhwcmVzc2lvbiBhdHRyIG5vdCBmb3VuZDogJyArIGQ7XG4gICAgfSk7XG4gICAgLy8gcGFyc2UgR1RFeCBtZWRpYW4gZXhvbiBjb3VudHNcbiAgICBleG9uT2JqZWN0cy5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgIGNvbnN0IGV4b24gPSBleG9uRGljdFtkLmV4b25JZF07IC8vIGZvciByZXRyaWV2aW5nIGV4b24gcG9zaXRpb25zXG4gICAgICAgIC8vIGVycm9yLWNoZWNraW5nXG4gICAgICAgIFsnZW5kJywgJ3N0YXJ0J10uZm9yRWFjaCgocCk9PntcbiAgICAgICAgICAgIGlmICghZXhvbi5oYXNPd25Qcm9wZXJ0eShwKSkgdGhyb3cgJ0ZhdGFsIEVycm9yOiBwYXJzZUV4b25FeHByZXNzaW9uIHBvc2l0aW9uIGF0dHIgbm90IGZvdW5kOiAnICsgcDtcbiAgICAgICAgfSk7XG4gICAgICAgIGQubCA9IGV4b24uZW5kIC0gZXhvbi5zdGFydCArIDE7XG4gICAgICAgIGQudmFsdWUgPSBOdW1iZXIoZC5tZWRpYW4pL2QubDtcbiAgICAgICAgZC5kaXNwbGF5VmFsdWUgPSBOdW1iZXIoZC5tZWRpYW4pL2QubDtcbiAgICAgICAgZC54ID0gZC5leG9uSWQ7XG4gICAgICAgIGQueSA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBkLmlkID0gZC5nZW5jb2RlSWQ7XG4gICAgICAgIGQuY2hyb21TdGFydCA9IGV4b24uc3RhcnQ7XG4gICAgICAgIGQuY2hyb21FbmQgPSBleG9uLmVuZDtcbiAgICAgICAgZC51bml0ID0gJ21lZGlhbiAnICsgZC51bml0ICsgJyBwZXIgYmFzZSc7XG4gICAgICAgIGQudGlzc3VlSWQgPSBkLnRpc3N1ZVNpdGVEZXRhaWxJZDtcbiAgICB9KTtcbiAgICByZXR1cm4gZXhvbk9iamVjdHMuc29ydCgoYSxiKT0+e1xuICAgICAgICBpZiAoYS5jaHJvbVN0YXJ0PGIuY2hyb21TdGFydCkgcmV0dXJuIC0xO1xuICAgICAgICBpZiAoYS5jaHJvbVN0YXJ0PmIuY2hyb21TdGFydCkgcmV0dXJuIDE7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH0pOyAvLyBzb3J0IGJ5IGdlbm9taWMgbG9jYXRpb24gaW4gYXNjZW5kaW5nIG9yZGVyXG59XG5cbi8qKlxuICogUGFyc2UganVuY3Rpb24gbWVkaWFuIHJlYWQgY291bnQgZGF0YVxuICogQHBhcmFtIGRhdGEge0pTT059IG9mIHRoZSBqdW5jdGlvbiBleHByZXNzaW9uIHdlYiBzZXJ2aWNlXG4gKiBAcmV0dXJucyB7TGlzdH0gb2YganVuY3Rpb24gb2JqZWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKdW5jdGlvbkV4cHJlc3Npb24oZGF0YSl7XG4gICAgY29uc3QgYXR0ciA9ICdtZWRpYW5KdW5jdGlvbkV4cHJlc3Npb24nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdygncGFyc2VKdW5jdGlvbkV4cHJlc3Npb24gaW5wdXQgZXJyb3InKTtcblxuICAgIGNvbnN0IGp1bmN0aW9ucyA9IGRhdGFbYXR0cl07XG5cbiAgICAvLyBlcnJvci1jaGVja2luZ1xuICAgIGlmIChqdW5jdGlvbnMgPT09IHVuZGVmaW5lZCB8fCBqdW5jdGlvbnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdObyBqdW5jdGlvbiBkYXRhIGZvdW5kJyk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG5cbiAgICAvLyBwYXJzZSBHVEV4IG1lZGlhbiBqdW5jdGlvbiByZWFkIGNvdW50c1xuICAgIGp1bmN0aW9ucy5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgIFsndGlzc3VlU2l0ZURldGFpbElkJywgJ2p1bmN0aW9uSWQnLCAnbWVkaWFuJywgJ2dlbmNvZGVJZCddLmZvckVhY2goKGspPT57XG4gICAgICAgICAgICBpZiAoIWQuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGQpO1xuICAgICAgICAgICAgICAgIHRocm93ICdQYXJzaW5nciBFcnJvcjogcGFyc2VKdW5jdGlvbkV4cHJlc3Npb24gYXR0ciBub3QgZm91bmQ6ICcgKyBrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG1lZGlhbiA9IGQubWVkaWFuO1xuICAgICAgICBsZXQgdGlzc3VlSWQgPSBkLnRpc3N1ZVNpdGVEZXRhaWxJZDtcbiAgICAgICAgZC50aXNzdWVJZCA9IHRpc3N1ZUlkO1xuICAgICAgICBkLmlkID0gZC5nZW5jb2RlSWQ7XG4gICAgICAgIGQueCA9IGQuanVuY3Rpb25JZDtcbiAgICAgICAgZC55ID0gdGlzc3VlSWQ7XG4gICAgICAgIGQudmFsdWUgPSBOdW1iZXIobWVkaWFuKTtcbiAgICAgICAgZC5kaXNwbGF5VmFsdWUgPSBOdW1iZXIobWVkaWFuKTtcbiAgICB9KTtcblxuICAgIC8vIHNvcnQgYnkgZ2Vub21pYyBsb2NhdGlvbiBpbiBhc2NlbmRpbmcgb3JkZXJcbiAgICByZXR1cm4ganVuY3Rpb25zLnNvcnQoKGEsYik9PntcbiAgICAgICAgaWYgKGEuanVuY3Rpb25JZD5iLmp1bmN0aW9uSWQpIHJldHVybiAxO1xuICAgICAgICBlbHNlIGlmIChhLmp1bmN0aW9uSWQ8Yi5qdW5jdGlvbklkKSByZXR1cm4gLTE7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIHBhcnNlIHRyYW5zY3JpcHQgZXhwcmVzc2lvblxuICogQHBhcmFtIGRhdGFcbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUcmFuc2NyaXB0RXhwcmVzc2lvbihkYXRhKXtcbiAgICBjb25zdCBhdHRyID0gJ21lZGlhblRyYW5zY3JpcHRFeHByZXNzaW9uJztcbiAgICBpZighZGF0YS5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3coJ1BhcnNpbmcgRXJyb3I6IHBhcnNlVHJhbnNjcmlwdEV4cHJlc3Npb24gaW5wdXQgZXJyb3InKTtcbiAgICAvLyBwYXJzZSBHVEV4IGlzb2Zvcm0gbWVkaWFuIFRQTVxuICAgIGRhdGFbYXR0cl0uZm9yRWFjaCgoZCkgPT4ge1xuICAgICAgICBbJ21lZGlhbicsICd0cmFuc2NyaXB0SWQnLCAndGlzc3VlU2l0ZURldGFpbElkJywgJ2dlbmNvZGVJZCddLmZvckVhY2goKGspPT57XG4gICAgICAgICAgICBpZighZC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3coJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIHRyYW5zY2lwdCBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZC52YWx1ZSA9IE51bWJlcihkLm1lZGlhbik7XG4gICAgICAgIGQuZGlzcGxheVZhbHVlID0gTnVtYmVyKGQubWVkaWFuKTtcbiAgICAgICAgZC54ID0gZC50cmFuc2NyaXB0SWQ7XG4gICAgICAgIGQueSA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBkLmlkID0gZC5nZW5jb2RlSWQ7XG4gICAgICAgIGQudGlzc3VlSWQgPSBkLnRpc3N1ZVNpdGVEZXRhaWxJZDtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhW2F0dHJdO1xufVxuXG4vKipcbiAqIHBhcnNlIHRyYW5zY3JpcHQgZXhwcmVzc2lvbiwgYW5kIHRyYW5zcG9zZSB0aGUgbWF0cml4XG4gKiBAcGFyYW0gZGF0YVxuICogQHJldHVybnMgeyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRyYW5zY3JpcHRFeHByZXNzaW9uVHJhbnNwb3NlKGRhdGEpe1xuICAgIGNvbnN0IGF0dHIgPSAnbWVkaWFuVHJhbnNjcmlwdEV4cHJlc3Npb24nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZGF0YSk7XG4gICAgICAgIHRocm93KCdQYXJzaW5nIEVycm9yOiBwYXJzZVRyYW5zY3JpcHRFeHByZXNzaW9uVHJhbnNwb3NlIGlucHV0IGVycm9yLicpO1xuICAgIH1cbiAgICAvLyBwYXJzZSBHVEV4IGlzb2Zvcm0gbWVkaWFuIFRQTVxuICAgIGRhdGFbYXR0cl0uZm9yRWFjaCgoZCkgPT4ge1xuICAgICAgICBbJ21lZGlhbicsICd0cmFuc2NyaXB0SWQnLCAndGlzc3VlU2l0ZURldGFpbElkJywgJ2dlbmNvZGVJZCddLmZvckVhY2goKGspPT57XG4gICAgICAgICAgICBpZighZC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgdGhyb3coJ1BhcnNpbmcgRXJyb3I6IFJlcXVpcmVkIHRyYW5zY3JpcHQgYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG1lZGlhbiA9IGQubWVkaWFuO1xuICAgICAgICBjb25zdCB0aXNzdWVJZCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBkLnZhbHVlID0gTnVtYmVyKG1lZGlhbik7XG4gICAgICAgIGQuZGlzcGxheVZhbHVlID0gTnVtYmVyKG1lZGlhbik7XG4gICAgICAgIGQueSA9IGQudHJhbnNjcmlwdElkO1xuICAgICAgICBkLnggPSB0aXNzdWVJZDtcbiAgICAgICAgZC5pZCA9IGQuZ2VuY29kZUlkO1xuICAgICAgICBkLnRpc3N1ZUlkID0gdGlzc3VlSWQ7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGF0YVthdHRyXTtcbn1cblxuLyoqXG4gKiBwYXJzZSBtZWRpYW4gZ2VuZSBleHByZXNzaW9uXG4gKiBAcGFyYW0gZGF0YSB7SnNvbn0gd2l0aCBhdHRyIG1lZGlhbkdlbmVFeHByZXNzaW9uXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTWVkaWFuRXhwcmVzc2lvbihkYXRhKXtcbiAgICBjb25zdCBhdHRyID0gJ21lZGlhbkdlbmVFeHByZXNzaW9uJztcbiAgICBpZighZGF0YS5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3cgJ1BhcnNpbmcgRXJyb3I6IHJlcXVpcmVkIGpzb24gYXR0cmlidXRlIGlzIG1pc3Npbmc6ICcgKyBhdHRyO1xuICAgIGNvbnN0IGFkanVzdCA9IDE7XG4gICAgLy8gcGFyc2UgR1RFeCBtZWRpYW4gZ2VuZSBleHByZXNzaW9uXG4gICAgLy8gZXJyb3ItY2hlY2tpbmcgdGhlIHJlcXVpcmVkIGF0dHJpYnV0ZXM6XG4gICAgaWYgKGRhdGFbYXR0cl0ubGVuZ3RoID09IDApIHRocm93ICdwYXJzZU1lZGlhbkV4cHJlc3Npb24gZmluZHMgbm8gZGF0YS4nO1xuICAgIFsnbWVkaWFuJywgJ3Rpc3N1ZVNpdGVEZXRhaWxJZCcsICdnZW5jb2RlSWQnXS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBpZiAoIWRhdGFbYXR0cl1bMF0uaGFzT3duUHJvcGVydHkoZCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZGF0YVthdHRyXVswXSk7XG4gICAgICAgICAgICB0aHJvdyBgUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZ3A6ICR7ZH1gO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdHMgPSBkYXRhW2F0dHJdO1xuICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbihkKXtcbiAgICAgICAgZC52YWx1ZSA9IE51bWJlcihkLm1lZGlhbik7XG4gICAgICAgIGQueCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBkLnkgPSBkLmdlbmNvZGVJZDtcbiAgICAgICAgZC5kaXNwbGF5VmFsdWUgPSBOdW1iZXIoZC5tZWRpYW4pO1xuICAgICAgICBkLmlkID0gZC5nZW5jb2RlSWQ7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cblxuLyoqXG4gKiBwYXJzZSB0aGUgZXhwcmVzc2lvbiBkYXRhIG9mIGEgZ2VuZSBmb3IgYSBncm91cGVkIHZpb2xpbiBwbG90XG4gKiBAcGFyYW0gZGF0YSB7SlNPTn0gZnJvbSBHVEV4IGdlbmUgZXhwcmVzc2lvbiB3ZWIgc2VydmljZVxuICogQHBhcmFtIGNvbG9ycyB7RGljdGlvbmFyeX0gdGhlIHZpb2xpbiBjb2xvciBmb3IgZ2VuZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlR2VuZUV4cHJlc3Npb25Gb3JWaW9saW4oZGF0YSwgdXNlTG9nPXRydWUsIGNvbG9ycz11bmRlZmluZWQpe1xuICAgIGNvbnN0IGF0dHIgPSAnZ2VuZUV4cHJlc3Npb24nO1xuICAgIGlmKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgZGF0YVthdHRyXS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBbJ2RhdGEnLCAndGlzc3VlU2l0ZURldGFpbElkJywgJ2dlbmVTeW1ib2wnLCAnZ2VuY29kZUlkJ10uZm9yRWFjaCgoayk9PntcbiAgICAgICAgICAgIGlmKCFkLmhhc093blByb3BlcnR5KGspKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGQpO1xuICAgICAgICAgICAgICAgIHRocm93ICdQYXJzaW5nIEVycm9yOiByZXF1aXJlZCBqc29uIGF0dHJpYnV0ZSBpcyBtaXNzaW5nOiAnICsgaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGQudmFsdWVzID0gdXNlTG9nP2QuZGF0YS5tYXAoKGRkKT0+e3JldHVybiBNYXRoLmxvZzEwKCtkZCsxKX0pOmQuZGF0YTtcbiAgICAgICAgZC5ncm91cCA9IGQudGlzc3VlU2l0ZURldGFpbElkO1xuICAgICAgICBkLmxhYmVsID0gZC5nZW5lU3ltYm9sO1xuICAgICAgICBkLmNvbG9yID0gY29sb3JzPT09dW5kZWZpbmVkPycjOTBjMWMxJzpjb2xvcnNbZC5nZW5jb2RlSWRdO1xuICAgIH0pO1xuICAgIHJldHVybiBkYXRhW2F0dHJdO1xufVxuXG4vKipcbiAqIHBhcnNlIHRoZSBMRCAobGlua2FnZSBkaXNlcXVpbGlicml1bSBkYXRhKVxuICogQHBhcmFtIGRhdGEge0pTT059IGZyb20gR1RFeCBsZCB3ZWIgc2VydmljZVxuICogQHJldHVybnMge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VMRChkYXRhKSB7XG4gICAgY29uc3QgYXR0ciA9ICdsZCc7XG4gICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGF0dHIpKSB0aHJvdyAnUGFyc2luZyBFcnJvcjogcmVxdWlyZWQganNvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZzogJyArIGF0dHI7XG4gICAgbGV0IHBhcnNlZCA9IFtdO1xuICAgIGxldCB1bmlxdWUgPSB7fTtcbiAgICBkYXRhW2F0dHJdLmZvckVhY2goKGQpID0+IHtcbiAgICAgICAgbGV0IGxhYmVscyA9IGRbMF0uc3BsaXQoXCIsXCIpLnNvcnQoKTsgLy8gc29ydCB0aGUgdmFyaWFudCBJRHNcbiAgICAgICAgdW5pcXVlW2xhYmVsc1swXV0gPSB0cnVlO1xuICAgICAgICB1bmlxdWVbbGFiZWxzWzFdXSA9IHRydWU7XG4gICAgICAgIHBhcnNlZC5wdXNoKHtcbiAgICAgICAgICAgIHg6IGxhYmVsc1swXSxcbiAgICAgICAgICAgIGRpc3BsYXlYOiBnZW5lcmF0ZVNob3J0VmFyaWFudElkKGxhYmVsc1swXSksXG4gICAgICAgICAgICB5OiBsYWJlbHNbMV0sXG4gICAgICAgICAgICBkaXNwbGF5WTogZ2VuZXJhdGVTaG9ydFZhcmlhbnRJZChsYWJlbHNbMV0pLFxuICAgICAgICAgICAgdmFsdWU6IHBhcnNlRmxvYXQoZFsxXSksXG4gICAgICAgICAgICBkaXNwbGF5VmFsdWU6IHBhcnNlRmxvYXQoZFsxXSkudG9QcmVjaXNpb24oMykgLy8gdG9QcmVjaXNpb24oKSByZXR1cm5zIGEgc3RyaW5nXG4gICAgICAgIH0pXG4gICAgfSk7XG4gICAgT2JqZWN0LmtleXModW5pcXVlKS5mb3JFYWNoKChkKT0+e1xuICAgICAgICBwYXJzZWQucHVzaCh7XG4gICAgICAgICAgICB4OiBkLFxuICAgICAgICAgICAgZGlzcGxheVg6IGdlbmVyYXRlU2hvcnRWYXJpYW50SWQoZCksXG4gICAgICAgICAgICB5OiBkLFxuICAgICAgICAgICAgZGlzcGxheVk6IGdlbmVyYXRlU2hvcnRWYXJpYW50SWQoZCksXG4gICAgICAgICAgICB2YWx1ZTogMSxcbiAgICAgICAgICAgIGRpc3BsYXlWYWx1ZTogXCIxXCJcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyc2VkO1xufVxuXG4vKiBwYXJzZSB0aGUgZXhwcmVzc2lvbiBkYXRhIG9mIGEgZ2VuZSBmb3IgYm94cGxvdFxuICogQHBhcmFtIGRhdGEge0pTT059IGZyb20gR1RFeCBnZW5lIGV4cHJlc3Npb24gd2ViIHNlcnZpY2VcbiAqIEBwYXJhbSB0aXNzdWVzIHtPYmplY3R9IG1hcHBpbmcgb2YgdGlzc3VlIGlkcyB0byBsYWJlbHMgKHRpc3N1ZSBuYW1lKVxuICogQHBhcmFtIGNvbG9ycyB7T2JqZWN0fSBtYXBwaW5nIG9mIHRpc3N1ZSBpZHMgdG8gYm94cGxvdCBjb2xvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlR2VuZUV4cHJlc3Npb25Gb3JCb3hwbG90KGRhdGEsIHRpc3N1ZXM9dW5kZWZpbmVkLCBjb2xvcnM9dW5kZWZpbmVkKSB7XG4gICAgY29uc3QgYXR0ciA9ICdnZW5lRXhwcmVzc2lvbic7XG5cbiAgICBpZighZGF0YS5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgdGhyb3coYFBhcnNpbmcgZXJyb3I6IHJlcXVpcmVkIEpTT04gYXR0cmlidXRlICR7YXR0cn0gbWlzc2luZy5gKTtcblxuICAgIGRhdGFbYXR0cl0uZm9yRWFjaCgoZCk9PntcbiAgICAgICAgWydkYXRhJywgJ2dlbmNvZGVJZCcsICdnZW5lU3ltYm9sJywgJ3Rpc3N1ZVNpdGVEZXRhaWxJZCddLmZvckVhY2goKGspPT57XG4gICAgICAgICAgICBpZiAoIWQuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGQpO1xuICAgICAgICAgICAgICAgIHRocm93IGBQYXJzaW5nIGVycm9yOiByZXF1aXJlZCBKU09OIGF0dHJpYnV0ZSAke2t9IGlzIG1pc3NpbmcgZnJvbSBhIHJlY29yZC5gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZC5sYWJlbCA9IHRpc3N1ZXM9PT11bmRlZmluZWQ/ZC50aXNzdWVTaXRlRGV0YWlsSWQ6dGlzc3Vlc1tkLnRpc3N1ZVNpdGVEZXRhaWxJZF07XG4gICAgICAgIGQuY29sb3IgPSBjb2xvcnM9PT11bmRlZmluZWQ/JyM0NjgyYjQnOmNvbG9yc1tkLnRpc3N1ZVNpdGVEZXRhaWxJZF07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGF0YVthdHRyXTtcbn1cblxuLyoqXG4gKiBnZW5lcmF0ZSB2YXJpYW50IElEIHNob3J0aGFuZFxuICogQHBhcmFtIGlkXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVTaG9ydFZhcmlhbnRJZChpZCl7XG4gICAgbGV0IHRlbXAgPSBpZC5zcGxpdChcIl9cIik7XG4gICAgaWYodGVtcFsyXS5sZW5ndGggPT0gMSAmJiB0ZW1wWzNdLmxlbmd0aCA9PSAxKSByZXR1cm4gaWQ7XG4gICAgaWYodGVtcFsyXS5sZW5ndGggPiB0ZW1wWzNdLmxlbmd0aCkge1xuICAgICAgICB0ZW1wWzJdID0gXCJkZWxcIjtcbiAgICAgICAgdGVtcC5zcGxpY2UoMywgMSk7IC8vIGRlbGV0ZSB0aGUgYWx0XG4gICAgfVxuICAgIGVsc2UgaWYodGVtcFszXS5sZW5ndGggPiB0ZW1wWzJdLmxlbmd0aCkge1xuICAgICAgICB0ZW1wWzNdID0gXCJpbnNcIjtcbiAgICAgICAgdGVtcC5zcGxpY2UoMiwgMSk7IC8vIGRlbGV0ZSB0aGUgcmVmXG4gICAgfVxuICAgIGVsc2UgeyAvLyB0ZW1wWzNdLmxlbmd0aCA9PSB0ZW1wWzJdLmxlbmd0aCBhbmQgdGVtcFszXS5sZW5ndGggPiAxXG4gICAgICAgIHRlbXBbM10gPSBcInN1YlwiO1xuICAgICAgICB0ZW1wLnNwbGljZSgyLCAxKTsgLy8gZGVsZXRlIHRoZSByZWZcbiAgICB9XG4gICAgcmV0dXJuIHRlbXAuam9pbihcIl9cIik7XG59XG4iXSwibmFtZXMiOlsiRU9MIiwiRU9GIiwiUVVPVEUiLCJORVdMSU5FIiwiUkVUVVJOIiwib2JqZWN0Q29udmVydGVyIiwiY29sdW1ucyIsIkZ1bmN0aW9uIiwibWFwIiwibmFtZSIsImkiLCJKU09OIiwic3RyaW5naWZ5Iiwiam9pbiIsImRlbGltaXRlciIsInJlRm9ybWF0IiwiUmVnRXhwIiwiREVMSU1JVEVSIiwiY2hhckNvZGVBdCIsInBhcnNlUm93cyIsInRleHQiLCJmIiwidCIsInJvd3MiLCJOIiwibGVuZ3RoIiwiSSIsIm4iLCJlb2YiLCJlb2wiLCJ0b2tlbiIsImMiLCJqIiwic2xpY2UiLCJyZXBsYWNlIiwicm93IiwicHVzaCIsImZvcm1hdFJvdyIsImZvcm1hdFZhbHVlIiwidGVzdCIsInBhcnNlIiwiY29udmVydCIsIm9iamVjdCIsImN1c3RvbUNvbnZlcnRlciIsImZvcm1hdCIsImNvbHVtblNldCIsIk9iamVjdCIsImNyZWF0ZSIsImZvckVhY2giLCJjb2x1bW4iLCJpbmZlckNvbHVtbnMiLCJjb25jYXQiLCJmb3JtYXRSb3dzIiwiY3N2UGFyc2UiLCJkc3YiLCJ0c3ZQYXJzZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlIiwib2siLCJFcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJpbnB1dCIsImluaXQiLCJmZXRjaCIsInRoZW4iLCJkc3ZQYXJzZSIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsInRzdiIsInJlc3BvbnNlSnNvbiIsImpzb24iLCJ4aHRtbCIsInN2ZyIsInhsaW5rIiwieG1sIiwieG1sbnMiLCJwcmVmaXgiLCJpbmRleE9mIiwibmFtZXNwYWNlcyIsImhhc093blByb3BlcnR5Iiwic3BhY2UiLCJsb2NhbCIsImZ1bGxuYW1lIiwibmFtZXNwYWNlIiwidGhpcyIsIm93bmVyRG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJkb2N1bWVudCIsInVyaSIsIm5hbWVzcGFjZVVSSSIsImRvY3VtZW50RWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJub25lIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwiZW1wdHkiLCJtYXRjaGVyIiwibWF0Y2hlcyIsImVsZW1lbnQiLCJ2ZW5kb3JNYXRjaGVzIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwiY2FsbCIsInVwZGF0ZSIsIkFycmF5IiwiRW50ZXJOb2RlIiwicGFyZW50IiwiZGF0dW0iLCJfbmV4dCIsIl9wYXJlbnQiLCJfX2RhdGFfXyIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwiYXBwZW5kQ2hpbGQiLCJjaGlsZCIsImluc2VydEJlZm9yZSIsIm5leHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwia2V5UHJlZml4IiwiYmluZEluZGV4IiwiZ3JvdXAiLCJlbnRlciIsImV4aXQiLCJkYXRhIiwibm9kZSIsImdyb3VwTGVuZ3RoIiwiZGF0YUxlbmd0aCIsImJpbmRLZXkiLCJrZXkiLCJrZXlWYWx1ZSIsIm5vZGVCeUtleVZhbHVlIiwia2V5VmFsdWVzIiwiYXNjZW5kaW5nIiwiYSIsImIiLCJOYU4iLCJkZWZhdWx0VmlldyIsImNsYXNzQXJyYXkiLCJzdHJpbmciLCJ0cmltIiwic3BsaXQiLCJjbGFzc0xpc3QiLCJDbGFzc0xpc3QiLCJfbm9kZSIsIl9uYW1lcyIsImdldEF0dHJpYnV0ZSIsImNsYXNzZWRBZGQiLCJuYW1lcyIsImxpc3QiLCJhZGQiLCJjbGFzc2VkUmVtb3ZlIiwicmVtb3ZlIiwic2V0QXR0cmlidXRlIiwic3BsaWNlIiwiY29udGFpbnMiLCJ0ZXh0UmVtb3ZlIiwidGV4dENvbnRlbnQiLCJodG1sUmVtb3ZlIiwiaW5uZXJIVE1MIiwicmFpc2UiLCJuZXh0U2libGluZyIsInBhcmVudE5vZGUiLCJsb3dlciIsInByZXZpb3VzU2libGluZyIsImZpcnN0Q2hpbGQiLCJjb25zdGFudE51bGwiLCJyZW1vdmVDaGlsZCIsInNlbGVjdGlvbl9jbG9uZVNoYWxsb3ciLCJjbG9uZU5vZGUiLCJzZWxlY3Rpb25fY2xvbmVEZWVwIiwiZmlsdGVyRXZlbnRzIiwibW91c2VlbnRlciIsIm1vdXNlbGVhdmUiLCJmaWx0ZXJDb250ZXh0TGlzdGVuZXIiLCJsaXN0ZW5lciIsImluZGV4IiwiY29udGV4dExpc3RlbmVyIiwiZXZlbnQiLCJyZWxhdGVkIiwicmVsYXRlZFRhcmdldCIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiZXZlbnQxIiwib25SZW1vdmUiLCJ0eXBlbmFtZSIsIm9uIiwiX19vbiIsIm8iLCJtIiwidHlwZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjYXB0dXJlIiwib25BZGQiLCJ2YWx1ZSIsIndyYXAiLCJkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiLCJwYXJhbXMiLCJ3aW5kb3ciLCJDdXN0b21FdmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJyb290IiwiU2VsZWN0aW9uIiwiZ3JvdXBzIiwicGFyZW50cyIsIl9ncm91cHMiLCJfcGFyZW50cyIsInNlbGVjdCIsInN1Ymdyb3VwcyIsInN1Ym5vZGUiLCJzdWJncm91cCIsInNlbGVjdEFsbCIsImZpbHRlciIsIm1hdGNoIiwic2l6ZSIsImVhY2giLCJ4IiwiYmluZCIsImVudGVyR3JvdXAiLCJ1cGRhdGVHcm91cCIsInByZXZpb3VzIiwiaTAiLCJpMSIsIl9lbnRlciIsIl9leGl0Iiwic3BhcnNlIiwibWVyZ2UiLCJzZWxlY3Rpb24iLCJncm91cHMwIiwiZ3JvdXBzMSIsIm0wIiwibTEiLCJNYXRoIiwibWluIiwibWVyZ2VzIiwiZ3JvdXAwIiwiZ3JvdXAxIiwib3JkZXIiLCJzb3J0IiwiY29tcGFyZSIsImNvbXBhcmVOb2RlIiwic29ydGdyb3VwcyIsInNvcnRncm91cCIsImNhbGxiYWNrIiwiYXBwbHkiLCJub2RlcyIsImF0dHIiLCJnZXRBdHRyaWJ1dGVOUyIsInJlbW92ZUF0dHJpYnV0ZU5TIiwicmVtb3ZlQXR0cmlidXRlIiwidiIsInNldEF0dHJpYnV0ZU5TIiwic3R5bGUiLCJwcmlvcml0eSIsInJlbW92ZVByb3BlcnR5Iiwic2V0UHJvcGVydHkiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInN0eWxlVmFsdWUiLCJwcm9wZXJ0eSIsImNsYXNzZWQiLCJodG1sIiwiYXBwZW5kIiwiY3JlYXRvciIsImluc2VydCIsImJlZm9yZSIsImNsb25lIiwiZGVlcCIsInR5cGVuYW1lcyIsInBhcnNlVHlwZW5hbWVzIiwiZGlzcGF0Y2giLCJUb29sYmFyIiwiW29iamVjdCBPYmplY3RdIiwiZG9tSWQiLCJ0b29sdGlwIiwidmVydGljYWwiLCIkIiwic2hvdyIsImJ0bkNsYXNzZXMiLCJiYXIiLCJhZGRDbGFzcyIsImFwcGVuZFRvIiwiYnV0dG9ucyIsImlkIiwic3ZnSWQiLCJvdXRmaWxlTmFtZSIsImNsb25lSWQiLCJpY29uIiwiY3JlYXRlQnV0dG9uIiwiZG93bmxvYWRTdmciLCJoaWRlIiwiJGJ1dHRvbiIsImZpbGVOYW1lIiwic3ZnT2JqIiwiJHN2Z0NvcHkiLCJzdHlsZXMiLCJkb20iLCJ1c2VkIiwic2hlZXRzIiwic3R5bGVTaGVldHMiLCJjc3NSdWxlcyIsInJ1bGVzIiwicnVsZSIsImVsZW1zIiwic2VsZWN0b3JUZXh0IiwiZmluZCIsImUiLCJjc3NUZXh0IiwicyIsInBhcnNlQ3NzU3R5bGVzIiwiZ2V0IiwicHJlcGVuZCIsInN2Z0h0bWwiLCJzdmdCbG9iIiwiQmxvYiIsInNhdmVBcyIsImdvb2dsZUZ1bmMiLCJjaGVja1NpZ25lZEluIiwiZ2V0VXNlciIsInNpZ25JbkJ1dHRvbiIsInJlbmRlclNpZ25JbkJ1dHRvbiIsInNpZ25PdXQiLCJncmFudFNjb3BlcyIsImdhcGkiLCJzaWduaW4yIiwicmVuZGVyIiwic2NvcGUiLCJ3aWR0aCIsImhlaWdodCIsImxvbmd0aXRsZSIsInRoZW1lIiwib25zdWNjZXNzIiwib25TdWNjZXNzIiwib25mYWlsdXJlIiwib25GYWlsdXJlIiwiZ29vZ2xlVXNlciIsImF1dGgyIiwiZ2V0QXV0aEluc3RhbmNlIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiaXNTaWduZWRJbiIsImN1cnJlbnRVc2VyIiwic2NvcGVzIiwiZ3JhbnQiLCJzdWNjZXNzIiwibWVzc2FnZSIsImZhaWwiLCJfYnVpbGRNYXRyaXgiLCJkYXRhc2V0SWQiLCJzYW1wbGVzIiwidGlzc3VlcyIsIl9fYnVpbGRIYXNoIiwiZGF0YVR5cGUiLCJfdHlwZSIsInJlZHVjZSIsImxhYmVsIiwiWCIsInRpc3N1ZVNpdGVEZXRhaWxJZCIsInRpc3N1ZVNpdGVEZXRhaWwiLCJjb2wiLCJZIiwiX3JlbmRlck1hdHJpeFRhYmxlIiwidGFibGVJZCIsIm1hdCIsIm1hcmtFcXRsVGlzc3VlcyIsImdvb2dsZUZ1bmNEaWN0IiwidXJscyIsImRhdGFzZXQiLCJndGV4X3Y3IiwiYmdjb2xvciIsInRoZVRhYmxlIiwidGJvZHkiLCJ0aGVSb3dzIiwiaGFzRUdlbmVzIiwieSIsImNvdW50cyIsIl9yZW5kZXJDb3VudHMiLCJ0aGVDZWxscyIsInRoZUNvbHVtbiIsInRoZVJvdyIsIl9hZGRDbGlja0V2ZW50cyIsImFsbENlbGxzIiwiY2VsbHMiLCJhbGVydCIsImRvd25sb2FkQ29udGVudCIsIm1hcmtlciIsInBhcnNlSW50Iiwic2VsZWN0ZWRTYW1wbGVzIiwiY3JhbSIsImNyYW1GaWxlIiwiayIsInNhbXBsZV9pZCIsImZpbGUiLCJiaW5kRG93bmxvYWRDbGlja0V2ZW50IiwiX2FkZFRvb2xiYXIiLCJob3N0Iiwic2luZ2xlVGlzc3VlRXF0bCIsImxkIiwiZHluZXF0bCIsInNucCIsInZhcmlhbnRJZCIsImV4b25FeHAiLCJ0cmFuc2NyaXB0RXhwIiwianVuY3Rpb25FeHAiLCJ0cmFuc2NyaXB0IiwiZXhvbiIsImdlbmVNb2RlbCIsImdlbmVNb2RlbFVuZmlsdGVyZWQiLCJnZW5lRXhwIiwibWVkR2VuZUV4cCIsImdlbmVFeHBCb3hwbG90IiwidG9wSW5UaXNzdWVGaWx0ZXJlZCIsInRvcEluVGlzc3VlIiwiZ2VuZUlkIiwidGlzc3VlIiwic2FtcGxlIiwicm5hc2VxQ3JhbSIsIndnc0NyYW0iLCJmY0JpbGxpbmciLCJmY1dvcmtTcGFjZSIsImZjUG9ydGFsV29ya1NwYWNlIiwiZ2V0R3RleFVybHMiLCJwcm9taXNlcyIsIlByb21pc2UiLCJhbGwiLCJhcmdzIiwicGFyc2VUaXNzdWVzIiwicm5hc2VxIiwidG9VcHBlckNhc2UiLCJ3Z3MiLCJzYW1wbGVJZCIsIndnc0hhc2giLCJzdWJqZWN0SWQiLCJfY2hlY2tSbmFTZXFXaXRoR2Vub3R5cGUiLCJ0aGVNYXRyaXgiLCJub25FcXRsVGlzc3VlcyIsIl9fZmlsdGVyIiwic2V4IiwidmFsIiwidGlzc3VlVHlwZSIsImFnZXMiLCJoYXJkeVNjYWxlcyIsImlzIiwicHJvcCIsInRlbXBTYW1wbGVzIiwiYWdlQnJhY2tldCIsImhhcmR5U2NhbGUiLCJjaGFuZ2UiLCJfYWRkRmlsdGVycyIsImNhdGNoIiwiZXJyIl0sIm1hcHBpbmdzIjoiMkNBQUEsSUFBSUEsS0FDQUMsS0FDQUMsRUFBUSxHQUNSQyxFQUFVLEdBQ1ZDLEVBQVMsR0FFYixTQUFTQyxFQUFnQkMsR0FDdkIsT0FBTyxJQUFJQyxTQUFTLElBQUssV0FBYUQsRUFBUUUsSUFBSSxTQUFTQyxFQUFNQyxHQUMvRCxPQUFPQyxLQUFLQyxVQUFVSCxHQUFRLE9BQVNDLEVBQUksTUFDMUNHLEtBQUssS0FBTyxLQTBCakIsTUFBZSxTQUFTQyxHQUN0QixJQUFJQyxFQUFXLElBQUlDLE9BQU8sS0FBUUYsRUFBWSxTQUMxQ0csRUFBWUgsRUFBVUksV0FBVyxHQVdyQyxTQUFTQyxFQUFVQyxFQUFNQyxHQUN2QixJQUlJQyxFQUpBQyxLQUNBQyxFQUFJSixFQUFLSyxPQUNUQyxFQUFJLEVBQ0pDLEVBQUksRUFFSkMsRUFBTUosR0FBSyxFQUNYSyxHQUFNLEVBTVYsU0FBU0MsSUFDUCxHQUFJRixFQUFLLE9BQU8zQixFQUNoQixHQUFJNEIsRUFBSyxPQUFPQSxHQUFNLEVBQU83QixFQUc3QixJQUFJVSxFQUFVcUIsRUFBUEMsRUFBSU4sRUFDWCxHQUFJTixFQUFLRixXQUFXYyxLQUFPOUIsRUFBTyxDQUNoQyxLQUFPd0IsSUFBTUYsR0FBS0osRUFBS0YsV0FBV1EsS0FBT3hCLEdBQVNrQixFQUFLRixhQUFhUSxLQUFPeEIsSUFJM0UsT0FIS1EsRUFBSWdCLElBQU1GLEVBQUdJLEdBQU0sR0FDZEcsRUFBSVgsRUFBS0YsV0FBV1EsUUFBVXZCLEVBQVMwQixHQUFNLEVBQzlDRSxJQUFNM0IsSUFBVXlCLEdBQU0sRUFBVVQsRUFBS0YsV0FBV1EsS0FBT3ZCLEtBQVd1QixHQUNwRU4sRUFBS2EsTUFBTUQsRUFBSSxFQUFHdEIsRUFBSSxHQUFHd0IsUUFBUSxNQUFPLEtBSWpELEtBQU9SLEVBQUlGLEdBQUcsQ0FDWixJQUFLTyxFQUFJWCxFQUFLRixXQUFXUixFQUFJZ0IsUUFBVXZCLEVBQVMwQixHQUFNLE9BQ2pELEdBQUlFLElBQU0zQixFQUFVeUIsR0FBTSxFQUFVVCxFQUFLRixXQUFXUSxLQUFPdkIsS0FBV3VCLE9BQ3RFLEdBQUlLLElBQU1kLEVBQVcsU0FDMUIsT0FBT0csRUFBS2EsTUFBTUQsRUFBR3RCLEdBSXZCLE9BQU9rQixHQUFNLEVBQU1SLEVBQUthLE1BQU1ELEVBQUdSLEdBR25DLElBN0JJSixFQUFLRixXQUFXTSxFQUFJLEtBQU9yQixLQUFXcUIsRUFDdENKLEVBQUtGLFdBQVdNLEVBQUksS0FBT3BCLEtBQVVvQixHQTRCakNGLEVBQUlRLE9BQWE3QixHQUFLLENBRTVCLElBREEsSUFBSWtDLEtBQ0diLElBQU10QixHQUFPc0IsSUFBTXJCLEdBQUtrQyxFQUFJQyxLQUFLZCxHQUFJQSxFQUFJUSxJQUM1Q1QsR0FBNEIsT0FBdEJjLEVBQU1kLEVBQUVjLEVBQUtSLE9BQ3ZCSixFQUFLYSxLQUFLRCxHQUdaLE9BQU9aLEVBZ0JULFNBQVNjLEVBQVVGLEdBQ2pCLE9BQU9BLEVBQUkzQixJQUFJOEIsR0FBYXpCLEtBQUtDLEdBR25DLFNBQVN3QixFQUFZbEIsR0FDbkIsT0FBZSxNQUFSQSxFQUFlLEdBQ2hCTCxFQUFTd0IsS0FBS25CLEdBQVEsSUFBTSxJQUFPQSxFQUFLYyxRQUFRLEtBQU0sTUFBVSxJQUNoRWQsRUFHUixPQUNFb0IsTUFsRkYsU0FBZXBCLEVBQU1DLEdBQ25CLElBQUlvQixFQUFTbkMsRUFBU2lCLEVBQU9KLEVBQVVDLEVBQU0sU0FBU2UsRUFBS3pCLEdBQ3pELEdBQUkrQixFQUFTLE9BQU9BLEVBQVFOLEVBQUt6QixFQUFJLEdBQ3JDSixFQUFVNkIsRUFBS00sRUFBVXBCLEVBOUIvQixTQUF5QmYsRUFBU2UsR0FDaEMsSUFBSXFCLEVBQVNyQyxFQUFnQkMsR0FDN0IsT0FBTyxTQUFTNkIsRUFBS3pCLEdBQ25CLE9BQU9XLEVBQUVxQixFQUFPUCxHQUFNekIsRUFBR0osSUEyQk1xQyxDQUFnQlIsRUFBS2QsR0FBS2hCLEVBQWdCOEIsS0FHekUsT0FEQVosRUFBS2pCLFFBQVVBLE1BQ1JpQixHQTZFUEosVUFBV0EsRUFDWHlCLE9BMUJGLFNBQWdCckIsRUFBTWpCLEdBRXBCLE9BRGUsTUFBWEEsSUFBaUJBLEVBOUV6QixTQUFzQmlCLEdBQ3BCLElBQUlzQixFQUFZQyxPQUFPQyxPQUFPLE1BQzFCekMsS0FVSixPQVJBaUIsRUFBS3lCLFFBQVEsU0FBU2IsR0FDcEIsSUFBSyxJQUFJYyxLQUFVZCxFQUNYYyxLQUFVSixHQUNkdkMsRUFBUThCLEtBQUtTLEVBQVVJLEdBQVVBLEtBS2hDM0MsRUFrRTBCNEMsQ0FBYTNCLEtBQ3BDakIsRUFBUUUsSUFBSThCLEdBQWF6QixLQUFLQyxJQUFZcUMsT0FBTzVCLEVBQUtmLElBQUksU0FBUzJCLEdBQ3pFLE9BQU83QixFQUFRRSxJQUFJLFNBQVN5QyxHQUMxQixPQUFPWCxFQUFZSCxFQUFJYyxNQUN0QnBDLEtBQUtDLE1BQ05ELEtBQUssT0FxQlR1QyxXQWxCRixTQUFvQjdCLEdBQ2xCLE9BQU9BLEVBQUtmLElBQUk2QixHQUFXeEIsS0FBSyxTQ3ZHekJ3QyxFQUZEQyxFQUFJLEtBRVlkLE1DQWZlLEVBRkRELEVBQUksTUFFWWQsTUNKMUIsU0FBU2dCLEVBQWFDLEdBQ3BCLElBQUtBLEVBQVNDLEdBQUksTUFBTSxJQUFJQyxNQUFNRixFQUFTRyxPQUFTLElBQU1ILEVBQVNJLFlBQ25FLE9BQU9KLEVBQVNyQyxPQUdsQixNQUFlLFNBQVMwQyxFQUFPQyxHQUM3QixPQUFPQyxNQUFNRixFQUFPQyxHQUFNRSxLQUFLVCxJQ0hqQyxTQUFTVSxFQUFTMUIsR0FDaEIsT0FBTyxTQUFTc0IsRUFBT0MsRUFBTTVCLEdBRTNCLE9BRHlCLElBQXJCZ0MsVUFBVTFDLFFBQWdDLG1CQUFUc0MsSUFBcUI1QixFQUFNNEIsRUFBTUEsT0FBT0ssR0FDdEVoRCxFQUFLMEMsRUFBT0MsR0FBTUUsS0FBSyxTQUFTUixHQUNyQyxPQUFPakIsRUFBTWlCLEVBQVV0QixNQWFaK0IsRUFBU2IsR0FSMUIsSUFTV2dCLEVBQU1ILEVBQVNYLEdDckIxQixTQUFTZSxFQUFhYixHQUNwQixJQUFLQSxFQUFTQyxHQUFJLE1BQU0sSUFBSUMsTUFBTUYsRUFBU0csT0FBUyxJQUFNSCxFQUFTSSxZQUNuRSxPQUFPSixFQUFTYyxPQUdsQixNQUFlLFNBQVNULEVBQU9DLEdBQzdCLE9BQU9DLE1BQU1GLEVBQU9DLEdBQU1FLEtBQUtLLElDTnRCRSxFQUFRLGtDQUdqQkMsSUFBSyw2QkFDTEQsTUFBT0EsRUFDUEUsTUFBTywrQkFDUEMsSUFBSyx1Q0FDTEMsTUFBTyxtQ0NMTSxTQUFTbkUsR0FDdEIsSUFBSW9FLEVBQVNwRSxHQUFRLEdBQUlDLEVBQUltRSxFQUFPQyxRQUFRLEtBRTVDLE9BRElwRSxHQUFLLEdBQXFDLFdBQS9CbUUsRUFBU3BFLEVBQUt3QixNQUFNLEVBQUd2QixNQUFpQkQsRUFBT0EsRUFBS3dCLE1BQU12QixFQUFJLElBQ3RFcUUsRUFBV0MsZUFBZUgsSUFBV0ksTUFBT0YsRUFBV0YsR0FBU0ssTUFBT3pFLEdBQVFBLEdDY3hGLE1BQWUsU0FBU0EsR0FDdEIsSUFBSTBFLEVBQVdDLEVBQVUzRSxHQUN6QixPQUFRMEUsRUFBU0QsTUFSbkIsU0FBc0JDLEdBQ3BCLE9BQU8sV0FDTCxPQUFPRSxLQUFLQyxjQUFjQyxnQkFBZ0JKLEVBQVNGLE1BQU9FLEVBQVNELFNBWnZFLFNBQXdCekUsR0FDdEIsT0FBTyxXQUNMLElBQUkrRSxFQUFXSCxLQUFLQyxjQUNoQkcsRUFBTUosS0FBS0ssYUFDZixPQUFPRCxJQUFRakIsR0FBU2dCLEVBQVNHLGdCQUFnQkQsZUFBaUJsQixFQUM1RGdCLEVBQVNJLGNBQWNuRixHQUN2QitFLEVBQVNELGdCQUFnQkUsRUFBS2hGLE1BY2hCMEUsSUN2QnhCLFNBQVNVLEtBRVQsTUFBZSxTQUFTQyxHQUN0QixPQUFtQixNQUFaQSxFQUFtQkQsRUFBTyxXQUMvQixPQUFPUixLQUFLVSxjQUFjRCxLQ0o5QixTQUFTRSxJQUNQLFNBR0YsSUNKSUMsRUFBVSxTQUFTSCxHQUNyQixPQUFPLFdBQ0wsT0FBT1QsS0FBS2EsUUFBUUosS0FJeEIsR0FBd0Isb0JBQWJOLFNBQTBCLENBQ25DLElBQUlXLEVBQVVYLFNBQVNHLGdCQUN2QixJQUFLUSxFQUFRRCxRQUFTLENBQ3BCLElBQUlFLEVBQWdCRCxFQUFRRSx1QkFDckJGLEVBQVFHLG1CQUNSSCxFQUFRSSxvQkFDUkosRUFBUUssaUJBQ2ZQLEVBQVUsU0FBU0gsR0FDakIsT0FBTyxXQUNMLE9BQU9NLEVBQWNLLEtBQUtwQixLQUFNUyxNQU14QyxNQUFlRyxJQ3JCQSxTQUFTUyxHQUN0QixPQUFPLElBQUlDLE1BQU1ELEVBQU9qRixTQ00xQixTQUFnQm1GLEVBQVVDLEVBQVFDLEdBQ2hDekIsS0FBS0MsY0FBZ0J1QixFQUFPdkIsY0FDNUJELEtBQUtLLGFBQWVtQixFQUFPbkIsYUFDM0JMLEtBQUswQixNQUFRLEtBQ2IxQixLQUFLMkIsUUFBVUgsRUFDZnhCLEtBQUs0QixTQUFXSCxFQUdsQkYsRUFBVU0sV0FDUkMsWUFBYVAsRUFDYlEsWUFBYSxTQUFTQyxHQUFTLE9BQU9oQyxLQUFLMkIsUUFBUU0sYUFBYUQsRUFBT2hDLEtBQUswQixRQUM1RU8sYUFBYyxTQUFTRCxFQUFPRSxHQUFRLE9BQU9sQyxLQUFLMkIsUUFBUU0sYUFBYUQsRUFBT0UsSUFDOUV4QixjQUFlLFNBQVNELEdBQVksT0FBT1QsS0FBSzJCLFFBQVFqQixjQUFjRCxJQUN0RTBCLGlCQUFrQixTQUFTMUIsR0FBWSxPQUFPVCxLQUFLMkIsUUFBUVEsaUJBQWlCMUIsS0NwQjlFLElDSUkyQixFQUFZLElBRWhCLFNBQVNDLEVBQVViLEVBQVFjLEVBQU9DLEVBQU9sQixFQUFRbUIsRUFBTUMsR0FTckQsSUFSQSxJQUNJQyxFQURBckgsRUFBSSxFQUVKc0gsRUFBY0wsRUFBTWxHLE9BQ3BCd0csRUFBYUgsRUFBS3JHLE9BS2ZmLEVBQUl1SCxJQUFjdkgsR0FDbkJxSCxFQUFPSixFQUFNakgsS0FDZnFILEVBQUtkLFNBQVdhLEVBQUtwSCxHQUNyQmdHLEVBQU9oRyxHQUFLcUgsR0FFWkgsRUFBTWxILEdBQUssSUFBSWtHLEVBQVVDLEVBQVFpQixFQUFLcEgsSUFLMUMsS0FBT0EsRUFBSXNILElBQWV0SCxHQUNwQnFILEVBQU9KLEVBQU1qSCxNQUNmbUgsRUFBS25ILEdBQUtxSCxHQUtoQixTQUFTRyxFQUFRckIsRUFBUWMsRUFBT0MsRUFBT2xCLEVBQVFtQixFQUFNQyxFQUFNSyxHQUN6RCxJQUFJekgsRUFDQXFILEVBS0FLLEVBSkFDLEtBQ0FMLEVBQWNMLEVBQU1sRyxPQUNwQndHLEVBQWFILEVBQUtyRyxPQUNsQjZHLEVBQVksSUFBSTNCLE1BQU1xQixHQUsxQixJQUFLdEgsRUFBSSxFQUFHQSxFQUFJc0gsSUFBZXRILEdBQ3pCcUgsRUFBT0osRUFBTWpILE1BQ2Y0SCxFQUFVNUgsR0FBSzBILEVBQVdYLEVBQVlVLEVBQUkxQixLQUFLc0IsRUFBTUEsRUFBS2QsU0FBVXZHLEVBQUdpSCxHQUNuRVMsS0FBWUMsRUFDZFIsRUFBS25ILEdBQUtxSCxFQUVWTSxFQUFlRCxHQUFZTCxHQVFqQyxJQUFLckgsRUFBSSxFQUFHQSxFQUFJdUgsSUFBY3ZILEdBRXhCcUgsRUFBT00sRUFEWEQsRUFBV1gsRUFBWVUsRUFBSTFCLEtBQUtJLEVBQVFpQixFQUFLcEgsR0FBSUEsRUFBR29ILE1BRWxEcEIsRUFBT2hHLEdBQUtxSCxFQUNaQSxFQUFLZCxTQUFXYSxFQUFLcEgsR0FDckIySCxFQUFlRCxHQUFZLE1BRTNCUixFQUFNbEgsR0FBSyxJQUFJa0csRUFBVUMsRUFBUWlCLEVBQUtwSCxJQUsxQyxJQUFLQSxFQUFJLEVBQUdBLEVBQUlzSCxJQUFldEgsR0FDeEJxSCxFQUFPSixFQUFNakgsS0FBUTJILEVBQWVDLEVBQVU1SCxNQUFRcUgsSUFDekRGLEVBQUtuSCxHQUFLcUgsR0NsRGhCLFNBQVNRLEVBQVVDLEVBQUdDLEdBQ3BCLE9BQU9ELEVBQUlDLEdBQUssRUFBSUQsRUFBSUMsRUFBSSxFQUFJRCxHQUFLQyxFQUFJLEVBQUlDLElDb0IvQyxNQzFDZSxTQUFTWCxHQUN0QixPQUFRQSxFQUFLekMsZUFBaUJ5QyxFQUFLekMsY0FBY3FELGFBQ3pDWixFQUFLdkMsVUFBWXVDLEdBQ2xCQSxFQUFLWSxhQ0hkLFNBQVNDLEVBQVdDLEdBQ2xCLE9BQU9BLEVBQU9DLE9BQU9DLE1BQU0sU0FHN0IsU0FBU0MsRUFBVWpCLEdBQ2pCLE9BQU9BLEVBQUtpQixXQUFhLElBQUlDLEVBQVVsQixHQUd6QyxTQUFTa0IsRUFBVWxCLEdBQ2pCMUMsS0FBSzZELE1BQVFuQixFQUNiMUMsS0FBSzhELE9BQVNQLEVBQVdiLEVBQUtxQixhQUFhLFVBQVksSUF1QnpELFNBQVNDLEVBQVd0QixFQUFNdUIsR0FFeEIsSUFEQSxJQUFJQyxFQUFPUCxFQUFVakIsR0FBT3JILEdBQUssRUFBR2lCLEVBQUkySCxFQUFNN0gsU0FDckNmLEVBQUlpQixHQUFHNEgsRUFBS0MsSUFBSUYsRUFBTTVJLElBR2pDLFNBQVMrSSxFQUFjMUIsRUFBTXVCLEdBRTNCLElBREEsSUFBSUMsRUFBT1AsRUFBVWpCLEdBQU9ySCxHQUFLLEVBQUdpQixFQUFJMkgsRUFBTTdILFNBQ3JDZixFQUFJaUIsR0FBRzRILEVBQUtHLE9BQU9KLEVBQU01SSxJQTNCcEN1SSxFQUFVL0IsV0FDUnNDLElBQUssU0FBUy9JLEdBQ0o0RSxLQUFLOEQsT0FBT3JFLFFBQVFyRSxHQUNwQixJQUNONEUsS0FBSzhELE9BQU8vRyxLQUFLM0IsR0FDakI0RSxLQUFLNkQsTUFBTVMsYUFBYSxRQUFTdEUsS0FBSzhELE9BQU90SSxLQUFLLFFBR3RENkksT0FBUSxTQUFTakosR0FDZixJQUFJQyxFQUFJMkUsS0FBSzhELE9BQU9yRSxRQUFRckUsR0FDeEJDLEdBQUssSUFDUDJFLEtBQUs4RCxPQUFPUyxPQUFPbEosRUFBRyxHQUN0QjJFLEtBQUs2RCxNQUFNUyxhQUFhLFFBQVN0RSxLQUFLOEQsT0FBT3RJLEtBQUssUUFHdERnSixTQUFVLFNBQVNwSixHQUNqQixPQUFPNEUsS0FBSzhELE9BQU9yRSxRQUFRckUsSUFBUyxJQzdCeEMsU0FBU3FKLElBQ1B6RSxLQUFLMEUsWUFBYyxHQ0RyQixTQUFTQyxJQUNQM0UsS0FBSzRFLFVBQVksR0NEbkIsU0FBU0MsSUFDSDdFLEtBQUs4RSxhQUFhOUUsS0FBSytFLFdBQVdoRCxZQUFZL0IsTUNEcEQsU0FBU2dGLElBQ0hoRixLQUFLaUYsaUJBQWlCakYsS0FBSytFLFdBQVc5QyxhQUFhakMsS0FBTUEsS0FBSytFLFdBQVdHLFlDRS9FLFNBQVNDLElBQ1AsT0FBTyxLQ0pULFNBQVNkLElBQ1AsSUFBSTdDLEVBQVN4QixLQUFLK0UsV0FDZHZELEdBQVFBLEVBQU80RCxZQUFZcEYsTUNGakMsU0FBU3FGLElBQ1AsT0FBT3JGLEtBQUsrRSxXQUFXOUMsYUFBYWpDLEtBQUtzRixXQUFVLEdBQVF0RixLQUFLOEUsYUFHbEUsU0FBU1MsSUFDUCxPQUFPdkYsS0FBSytFLFdBQVc5QyxhQUFhakMsS0FBS3NGLFdBQVUsR0FBT3RGLEtBQUs4RSxhQUdqRSxJQ1JJVSxLQUlvQixvQkFBYnJGLFdBRUgsaUJBRFFBLFNBQVNHLGtCQUVyQmtGLEdBQWdCQyxXQUFZLFlBQWFDLFdBQVksY0FJekQsU0FBU0MsRUFBc0JDLEVBQVVDLEVBQU92RCxHQUU5QyxPQURBc0QsRUFBV0UsRUFBZ0JGLEVBQVVDLEVBQU92RCxHQUNyQyxTQUFTeUQsR0FDZCxJQUFJQyxFQUFVRCxFQUFNRSxjQUNmRCxJQUFZQSxJQUFZaEcsTUFBa0QsRUFBeENnRyxFQUFRRSx3QkFBd0JsRyxRQUNyRTRGLEVBQVN4RSxLQUFLcEIsS0FBTStGLElBSzFCLFNBQVNELEVBQWdCRixFQUFVQyxFQUFPdkQsR0FDeEMsT0FBTyxTQUFTNkQsR0FDZCxJQUdFUCxFQUFTeEUsS0FBS3BCLEtBQU1BLEtBQUs0QixTQUFVaUUsRUFBT3ZELGNBZWhELFNBQVM4RCxFQUFTQyxHQUNoQixPQUFPLFdBQ0wsSUFBSUMsRUFBS3RHLEtBQUt1RyxLQUNkLEdBQUtELEVBQUwsQ0FDQSxJQUFLLElBQWtDRSxFQUE5QjdKLEVBQUksRUFBR3RCLEdBQUssRUFBR29MLEVBQUlILEVBQUdsSyxPQUFXTyxFQUFJOEosSUFBSzlKLEVBQzdDNkosRUFBSUYsRUFBRzNKLEdBQU0wSixFQUFTSyxNQUFRRixFQUFFRSxPQUFTTCxFQUFTSyxNQUFTRixFQUFFcEwsT0FBU2lMLEVBQVNqTCxLQUdqRmtMLElBQUtqTCxHQUFLbUwsRUFGVnhHLEtBQUsyRyxvQkFBb0JILEVBQUVFLEtBQU1GLEVBQUVaLFNBQVVZLEVBQUVJLFdBSzdDdkwsRUFBR2lMLEVBQUdsSyxPQUFTZixTQUNUMkUsS0FBS3VHLE9BSXJCLFNBQVNNLEVBQU1SLEVBQVVTLEVBQU9GLEdBQzlCLElBQUlHLEVBQU92QixFQUFhN0YsZUFBZTBHLEVBQVNLLE1BQVFmLEVBQXdCRyxFQUNoRixPQUFPLFNBQVNrQixFQUFHM0wsRUFBR2lILEdBQ3BCLElBQW9Ca0UsRUFBaEJGLEVBQUt0RyxLQUFLdUcsS0FBU1gsRUFBV21CLEVBQUtELEVBQU96TCxFQUFHaUgsR0FDakQsR0FBSWdFLEVBQUksSUFBSyxJQUFJM0osRUFBSSxFQUFHOEosRUFBSUgsRUFBR2xLLE9BQVFPLEVBQUk4SixJQUFLOUosRUFDOUMsSUFBSzZKLEVBQUlGLEVBQUczSixJQUFJK0osT0FBU0wsRUFBU0ssTUFBUUYsRUFBRXBMLE9BQVNpTCxFQUFTakwsS0FJNUQsT0FIQTRFLEtBQUsyRyxvQkFBb0JILEVBQUVFLEtBQU1GLEVBQUVaLFNBQVVZLEVBQUVJLFNBQy9DNUcsS0FBS2lILGlCQUFpQlQsRUFBRUUsS0FBTUYsRUFBRVosU0FBV0EsRUFBVVksRUFBRUksUUFBVUEsUUFDakVKLEVBQUVNLE1BQVFBLEdBSWQ5RyxLQUFLaUgsaUJBQWlCWixFQUFTSyxLQUFNZCxFQUFVZ0IsR0FDL0NKLEdBQUtFLEtBQU1MLEVBQVNLLEtBQU10TCxLQUFNaUwsRUFBU2pMLEtBQU0wTCxNQUFPQSxFQUFPbEIsU0FBVUEsRUFBVWdCLFFBQVNBLEdBQ3JGTixFQUNBQSxFQUFHdkosS0FBS3lKLEdBREp4RyxLQUFLdUcsTUFBUUMsSUNyRTFCLFNBQVNVLEVBQWN4RSxFQUFNZ0UsRUFBTVMsR0FDakMsSUFBSUMsRUFBUzlELEVBQVlaLEdBQ3JCcUQsRUFBUXFCLEVBQU9DLFlBRUUsbUJBQVZ0QixFQUNUQSxFQUFRLElBQUlBLEVBQU1XLEVBQU1TLElBRXhCcEIsRUFBUXFCLEVBQU9qSCxTQUFTbUgsWUFBWSxTQUNoQ0gsR0FBUXBCLEVBQU13QixVQUFVYixFQUFNUyxFQUFPSyxRQUFTTCxFQUFPTSxZQUFhMUIsRUFBTTJCLE9BQVNQLEVBQU9PLFFBQ3ZGM0IsRUFBTXdCLFVBQVViLEdBQU0sR0FBTyxJQUdwQ2hFLEVBQUt3RSxjQUFjbkIsR0FlckIsSUNFVzRCLElBQVEsTUFFbkIsU0FBZ0JDLEdBQVVDLEVBQVFDLEdBQ2hDOUgsS0FBSytILFFBQVVGLEVBQ2Y3SCxLQUFLZ0ksU0FBV0YsRUFPbEJGLEdBQVUvRixVQUpWLFdBQ0UsT0FBTyxJQUFJK0YsS0FBWXpILFNBQVNHLGtCQUFtQnFILEtBR3JCOUYsV0FDOUJDLFlBQWE4RixHQUNiSyxPQ3pDYSxTQUFTQSxHQUNBLG1CQUFYQSxJQUF1QkEsRUFBU3hILEVBQVN3SCxJQUVwRCxJQUFLLElBQUlKLEVBQVM3SCxLQUFLK0gsUUFBU3RCLEVBQUlvQixFQUFPekwsT0FBUThMLEVBQVksSUFBSTVHLE1BQU1tRixHQUFJOUosRUFBSSxFQUFHQSxFQUFJOEosSUFBSzlKLEVBQzNGLElBQUssSUFBaUYrRixFQUFNeUYsRUFBbkY3RixFQUFRdUYsRUFBT2xMLEdBQUlMLEVBQUlnRyxFQUFNbEcsT0FBUWdNLEVBQVdGLEVBQVV2TCxHQUFLLElBQUkyRSxNQUFNaEYsR0FBbUJqQixFQUFJLEVBQUdBLEVBQUlpQixJQUFLakIsR0FDOUdxSCxFQUFPSixFQUFNakgsTUFBUThNLEVBQVVGLEVBQU83RyxLQUFLc0IsRUFBTUEsRUFBS2QsU0FBVXZHLEVBQUdpSCxNQUNsRSxhQUFjSSxJQUFNeUYsRUFBUXZHLFNBQVdjLEVBQUtkLFVBQ2hEd0csRUFBUy9NLEdBQUs4TSxHQUtwQixPQUFPLElBQUlQLEdBQVVNLEVBQVdsSSxLQUFLZ0ksV0Q4QnJDSyxVRTFDYSxTQUFTSixHckJDVCxJQUFTeEgsRXFCQUEsbUJBQVh3SCxJQUF1QkEsRXJCQ2YsT0FER3hILEVxQkFpQ3dILEdyQkM3QnRILEVBQVEsV0FDaEMsT0FBT1gsS0FBS21DLGlCQUFpQjFCLEtxQkEvQixJQUFLLElBQUlvSCxFQUFTN0gsS0FBSytILFFBQVN0QixFQUFJb0IsRUFBT3pMLE9BQVE4TCxLQUFnQkosS0FBY25MLEVBQUksRUFBR0EsRUFBSThKLElBQUs5SixFQUMvRixJQUFLLElBQXlDK0YsRUFBckNKLEVBQVF1RixFQUFPbEwsR0FBSUwsRUFBSWdHLEVBQU1sRyxPQUFjZixFQUFJLEVBQUdBLEVBQUlpQixJQUFLakIsR0FDOURxSCxFQUFPSixFQUFNakgsTUFDZjZNLEVBQVVuTCxLQUFLa0wsRUFBTzdHLEtBQUtzQixFQUFNQSxFQUFLZCxTQUFVdkcsRUFBR2lILElBQ25Ed0YsRUFBUS9LLEtBQUsyRixJQUtuQixPQUFPLElBQUlrRixHQUFVTSxFQUFXSixJRitCaENRLE9HM0NhLFNBQVNDLEdBQ0QsbUJBQVZBLElBQXNCQSxFQUFRM0gsRUFBUTJILElBRWpELElBQUssSUFBSVYsRUFBUzdILEtBQUsrSCxRQUFTdEIsRUFBSW9CLEVBQU96TCxPQUFROEwsRUFBWSxJQUFJNUcsTUFBTW1GLEdBQUk5SixFQUFJLEVBQUdBLEVBQUk4SixJQUFLOUosRUFDM0YsSUFBSyxJQUF1RStGLEVBQW5FSixFQUFRdUYsRUFBT2xMLEdBQUlMLEVBQUlnRyxFQUFNbEcsT0FBUWdNLEVBQVdGLEVBQVV2TCxNQUFldEIsRUFBSSxFQUFHQSxFQUFJaUIsSUFBS2pCLEdBQzNGcUgsRUFBT0osRUFBTWpILEtBQU9rTixFQUFNbkgsS0FBS3NCLEVBQU1BLEVBQUtkLFNBQVV2RyxFQUFHaUgsSUFDMUQ4RixFQUFTckwsS0FBSzJGLEdBS3BCLE9BQU8sSUFBSWtGLEdBQVVNLEVBQVdsSSxLQUFLZ0ksV0hpQ3JDdkYsS2Q2QmEsU0FBU3FFLEVBQU9oRSxHQUM3QixJQUFLZ0UsRUFHSCxPQUZBckUsRUFBTyxJQUFJbkIsTUFBTXRCLEtBQUt3SSxRQUFTN0wsR0FBSyxFQUNwQ3FELEtBQUt5SSxLQUFLLFNBQVN6QixHQUFLdkUsSUFBTzlGLEdBQUtxSyxJQUM3QnZFLEVBR1QsSURuRnNCaUcsRUNtRmxCQyxFQUFPN0YsRUFBTUQsRUFBVVIsRUFDdkJ5RixFQUFVOUgsS0FBS2dJLFNBQ2ZILEVBQVM3SCxLQUFLK0gsUUFFRyxtQkFBVmpCLElEdkZXNEIsRUN1RjRCNUIsRUFBakJBLEVEdEYxQixXQUNMLE9BQU80QixJQ3VGVCxJQUFLLElBQUlqQyxFQUFJb0IsRUFBT3pMLE9BQVFpRixFQUFTLElBQUlDLE1BQU1tRixHQUFJbEUsRUFBUSxJQUFJakIsTUFBTW1GLEdBQUlqRSxFQUFPLElBQUlsQixNQUFNbUYsR0FBSTlKLEVBQUksRUFBR0EsRUFBSThKLElBQUs5SixFQUFHLENBQy9HLElBQUk2RSxFQUFTc0csRUFBUW5MLEdBQ2pCMkYsRUFBUXVGLEVBQU9sTCxHQUNmZ0csRUFBY0wsRUFBTWxHLE9BQ3BCcUcsRUFBT3FFLEVBQU0xRixLQUFLSSxFQUFRQSxHQUFVQSxFQUFPSSxTQUFVakYsRUFBR21MLEdBQ3hEbEYsRUFBYUgsRUFBS3JHLE9BQ2xCd00sRUFBYXJHLEVBQU01RixHQUFLLElBQUkyRSxNQUFNc0IsR0FDbENpRyxFQUFjeEgsRUFBTzFFLEdBQUssSUFBSTJFLE1BQU1zQixHQUd4QytGLEVBQUtuSCxFQUFRYyxFQUFPc0csRUFBWUMsRUFGaEJyRyxFQUFLN0YsR0FBSyxJQUFJMkUsTUFBTXFCLEdBRW9CRixFQUFNSyxHQUs5RCxJQUFLLElBQW9CZ0csRUFBVTVHLEVBQTFCNkcsRUFBSyxFQUFHQyxFQUFLLEVBQW1CRCxFQUFLbkcsSUFBY21HLEVBQzFELEdBQUlELEVBQVdGLEVBQVdHLEdBQUssQ0FFN0IsSUFESUEsR0FBTUMsSUFBSUEsRUFBS0QsRUFBSyxLQUNmN0csRUFBTzJHLEVBQVlHLE9BQVVBLEVBQUtwRyxJQUMzQ2tHLEVBQVNwSCxNQUFRUSxHQUFRLE1BUS9CLE9BSEFiLEVBQVMsSUFBSXVHLEdBQVV2RyxFQUFReUcsSUFDeEJtQixPQUFTMUcsRUFDaEJsQixFQUFPNkgsTUFBUTFHLEVBQ1JuQixHY3BFUGtCLE1oQjdDYSxXQUNiLE9BQU8sSUFBSXFGLEdBQVU1SCxLQUFLaUosUUFBVWpKLEtBQUsrSCxRQUFRNU0sSUFBSWdPLEdBQVNuSixLQUFLZ0ksV2dCNkNuRXhGLEtJOUNhLFdBQ2IsT0FBTyxJQUFJb0YsR0FBVTVILEtBQUtrSixPQUFTbEosS0FBSytILFFBQVE1TSxJQUFJZ08sR0FBU25KLEtBQUtnSSxXSjhDbEVvQixNS2hEYSxTQUFTQyxHQUV0QixJQUFLLElBQUlDLEVBQVV0SixLQUFLK0gsUUFBU3dCLEVBQVVGLEVBQVV0QixRQUFTeUIsRUFBS0YsRUFBUWxOLE9BQVFxTixFQUFLRixFQUFRbk4sT0FBUXFLLEVBQUlpRCxLQUFLQyxJQUFJSCxFQUFJQyxHQUFLRyxFQUFTLElBQUl0SSxNQUFNa0ksR0FBSzdNLEVBQUksRUFBR0EsRUFBSThKLElBQUs5SixFQUNwSyxJQUFLLElBQW1HK0YsRUFBL0ZtSCxFQUFTUCxFQUFRM00sR0FBSW1OLEVBQVNQLEVBQVE1TSxHQUFJTCxFQUFJdU4sRUFBT3pOLE9BQVFnTixFQUFRUSxFQUFPak4sR0FBSyxJQUFJMkUsTUFBTWhGLEdBQVVqQixFQUFJLEVBQUdBLEVBQUlpQixJQUFLakIsR0FDeEhxSCxFQUFPbUgsRUFBT3hPLElBQU15TyxFQUFPek8sTUFDN0IrTixFQUFNL04sR0FBS3FILEdBS2pCLEtBQU8vRixFQUFJNk0sSUFBTTdNLEVBQ2ZpTixFQUFPak4sR0FBSzJNLEVBQVEzTSxHQUd0QixPQUFPLElBQUlpTCxHQUFVZ0MsRUFBUTVKLEtBQUtnSSxXTG1DbEMrQixNTW5EYSxXQUViLElBQUssSUFBSWxDLEVBQVM3SCxLQUFLK0gsUUFBU3BMLEdBQUssRUFBRzhKLEVBQUlvQixFQUFPekwsU0FBVU8sRUFBSThKLEdBQy9ELElBQUssSUFBOEQvRCxFQUExREosRUFBUXVGLEVBQU9sTCxHQUFJdEIsRUFBSWlILEVBQU1sRyxPQUFTLEVBQUc4RixFQUFPSSxFQUFNakgsS0FBWUEsR0FBSyxJQUMxRXFILEVBQU9KLEVBQU1qSCxNQUNYNkcsR0FBUUEsSUFBU1EsRUFBS29DLGFBQWE1QyxFQUFLNkMsV0FBVzlDLGFBQWFTLEVBQU1SLEdBQzFFQSxFQUFPUSxHQUtiLE9BQU8xQyxNTnlDUGdLLEtibERhLFNBQVNDLEdBR3RCLFNBQVNDLEVBQVkvRyxFQUFHQyxHQUN0QixPQUFPRCxHQUFLQyxFQUFJNkcsRUFBUTlHLEVBQUV2QixTQUFVd0IsRUFBRXhCLFdBQWF1QixHQUFLQyxFQUhyRDZHLElBQVNBLEVBQVUvRyxHQU14QixJQUFLLElBQUkyRSxFQUFTN0gsS0FBSytILFFBQVN0QixFQUFJb0IsRUFBT3pMLE9BQVErTixFQUFhLElBQUk3SSxNQUFNbUYsR0FBSTlKLEVBQUksRUFBR0EsRUFBSThKLElBQUs5SixFQUFHLENBQy9GLElBQUssSUFBbUYrRixFQUEvRUosRUFBUXVGLEVBQU9sTCxHQUFJTCxFQUFJZ0csRUFBTWxHLE9BQVFnTyxFQUFZRCxFQUFXeE4sR0FBSyxJQUFJMkUsTUFBTWhGLEdBQVVqQixFQUFJLEVBQUdBLEVBQUlpQixJQUFLakIsR0FDeEdxSCxFQUFPSixFQUFNakgsTUFDZitPLEVBQVUvTyxHQUFLcUgsR0FHbkIwSCxFQUFVSixLQUFLRSxHQUdqQixPQUFPLElBQUl0QyxHQUFVdUMsRUFBWW5LLEtBQUtnSSxVQUFVK0IsU2FtQ2hEM0ksS09yRGEsV0FDYixJQUFJaUosRUFBV3ZMLFVBQVUsR0FHekIsT0FGQUEsVUFBVSxHQUFLa0IsS0FDZnFLLEVBQVNDLE1BQU0sS0FBTXhMLFdBQ2RrQixNUGtEUHVLLE1RdERhLFdBQ2IsSUFBSUEsRUFBUSxJQUFJakosTUFBTXRCLEtBQUt3SSxRQUFTbk4sR0FBSyxFQUV6QyxPQURBMkUsS0FBS3lJLEtBQUssV0FBYThCLElBQVFsUCxHQUFLMkUsT0FDN0J1SyxHUm9EUDdILEtTdkRhLFdBRWIsSUFBSyxJQUFJbUYsRUFBUzdILEtBQUsrSCxRQUFTcEwsRUFBSSxFQUFHOEosRUFBSW9CLEVBQU96TCxPQUFRTyxFQUFJOEosSUFBSzlKLEVBQ2pFLElBQUssSUFBSTJGLEVBQVF1RixFQUFPbEwsR0FBSXRCLEVBQUksRUFBR2lCLEVBQUlnRyxFQUFNbEcsT0FBUWYsRUFBSWlCLElBQUtqQixFQUFHLENBQy9ELElBQUlxSCxFQUFPSixFQUFNakgsR0FDakIsR0FBSXFILEVBQU0sT0FBT0EsRUFJckIsT0FBTyxNVCtDUDhGLEtVeERhLFdBQ2IsSUFBSUEsRUFBTyxFQUVYLE9BREF4SSxLQUFLeUksS0FBSyxhQUFlRCxJQUNsQkEsR1ZzRFA3SCxNV3pEYSxXQUNiLE9BQVFYLEtBQUswQyxRWHlEYitGLEtZMURhLFNBQVM0QixHQUV0QixJQUFLLElBQUl4QyxFQUFTN0gsS0FBSytILFFBQVNwTCxFQUFJLEVBQUc4SixFQUFJb0IsRUFBT3pMLE9BQVFPLEVBQUk4SixJQUFLOUosRUFDakUsSUFBSyxJQUFnRCtGLEVBQTVDSixFQUFRdUYsRUFBT2xMLEdBQUl0QixFQUFJLEVBQUdpQixFQUFJZ0csRUFBTWxHLE9BQWNmLEVBQUlpQixJQUFLakIsR0FDOURxSCxFQUFPSixFQUFNakgsS0FBSWdQLEVBQVNqSixLQUFLc0IsRUFBTUEsRUFBS2QsU0FBVXZHLEVBQUdpSCxHQUkvRCxPQUFPdEMsTVptRFB3SyxLWmpCYSxTQUFTcFAsRUFBTTBMLEdBQzVCLElBQUloSCxFQUFXQyxFQUFVM0UsR0FFekIsR0FBSTBELFVBQVUxQyxPQUFTLEVBQUcsQ0FDeEIsSUFBSXNHLEVBQU8xQyxLQUFLMEMsT0FDaEIsT0FBTzVDLEVBQVNELE1BQ1Y2QyxFQUFLK0gsZUFBZTNLLEVBQVNGLE1BQU9FLEVBQVNELE9BQzdDNkMsRUFBS3FCLGFBQWFqRSxHQUcxQixPQUFPRSxLQUFLeUksTUFBZSxNQUFUM0IsRUFDWGhILEVBQVNELE1BN0NsQixTQUFzQkMsR0FDcEIsT0FBTyxXQUNMRSxLQUFLMEssa0JBQWtCNUssRUFBU0YsTUFBT0UsRUFBU0QsU0FScEQsU0FBb0J6RSxHQUNsQixPQUFPLFdBQ0w0RSxLQUFLMkssZ0JBQWdCdlAsS0FpRGdELG1CQUFWMEwsRUFDdERoSCxFQUFTRCxNQXBCbEIsU0FBd0JDLEVBQVVnSCxHQUNoQyxPQUFPLFdBQ0wsSUFBSThELEVBQUk5RCxFQUFNd0QsTUFBTXRLLEtBQU1sQixXQUNqQixNQUFMOEwsRUFBVzVLLEtBQUswSyxrQkFBa0I1SyxFQUFTRixNQUFPRSxFQUFTRCxPQUMxREcsS0FBSzZLLGVBQWUvSyxFQUFTRixNQUFPRSxFQUFTRCxNQUFPK0ssS0FaN0QsU0FBc0J4UCxFQUFNMEwsR0FDMUIsT0FBTyxXQUNMLElBQUk4RCxFQUFJOUQsRUFBTXdELE1BQU10SyxLQUFNbEIsV0FDakIsTUFBTDhMLEVBQVc1SyxLQUFLMkssZ0JBQWdCdlAsR0FDL0I0RSxLQUFLc0UsYUFBYWxKLEVBQU13UCxLQXlCeEI5SyxFQUFTRCxNQW5DbEIsU0FBd0JDLEVBQVVnSCxHQUNoQyxPQUFPLFdBQ0w5RyxLQUFLNkssZUFBZS9LLEVBQVNGLE1BQU9FLEVBQVNELE1BQU9pSCxLQVJ4RCxTQUFzQjFMLEVBQU0wTCxHQUMxQixPQUFPLFdBQ0w5RyxLQUFLc0UsYUFBYWxKLEVBQU0wTCxNQXVDK0JoSCxFQUFVZ0gsS1lLbkVnRSxNYXRDYSxTQUFTMVAsRUFBTTBMLEVBQU9pRSxHQUNuQyxPQUFPak0sVUFBVTFDLE9BQVMsRUFDcEI0RCxLQUFLeUksTUFBZSxNQUFUM0IsRUF0Qm5CLFNBQXFCMUwsR0FDbkIsT0FBTyxXQUNMNEUsS0FBSzhLLE1BQU1FLGVBQWU1UCxLQXFCZSxtQkFBVjBMLEVBWG5DLFNBQXVCMUwsRUFBTTBMLEVBQU9pRSxHQUNsQyxPQUFPLFdBQ0wsSUFBSUgsRUFBSTlELEVBQU13RCxNQUFNdEssS0FBTWxCLFdBQ2pCLE1BQUw4TCxFQUFXNUssS0FBSzhLLE1BQU1FLGVBQWU1UCxHQUNwQzRFLEtBQUs4SyxNQUFNRyxZQUFZN1AsRUFBTXdQLEVBQUdHLEtBVnpDLFNBQXVCM1AsRUFBTTBMLEVBQU9pRSxHQUNsQyxPQUFPLFdBQ0wvSyxLQUFLOEssTUFBTUcsWUFBWTdQLEVBQU0wTCxFQUFPaUUsTUFpQlgzUCxFQUFNMEwsRUFBbUIsTUFBWmlFLEVBQW1CLEdBQUtBLElBSWxFLFNBQTJCckksRUFBTXRILEdBQy9CLE9BQU9zSCxFQUFLb0ksTUFBTUksaUJBQWlCOVAsSUFDNUJrSSxFQUFZWixHQUFNeUksaUJBQWlCekksRUFBTSxNQUFNd0ksaUJBQWlCOVAsR0FMakVnUSxDQUFXcEwsS0FBSzBDLE9BQVF0SCxJYmlDOUJpUSxTY3pDYSxTQUFTalEsRUFBTTBMLEdBQzVCLE9BQU9oSSxVQUFVMUMsT0FBUyxFQUNwQjRELEtBQUt5SSxNQUFlLE1BQVQzQixFQXRCbkIsU0FBd0IxTCxHQUN0QixPQUFPLGtCQUNFNEUsS0FBSzVFLEtBcUI4QixtQkFBVjBMLEVBWHBDLFNBQTBCMUwsRUFBTTBMLEdBQzlCLE9BQU8sV0FDTCxJQUFJOEQsRUFBSTlELEVBQU13RCxNQUFNdEssS0FBTWxCLFdBQ2pCLE1BQUw4TCxTQUFrQjVLLEtBQUs1RSxHQUN0QjRFLEtBQUs1RSxHQUFRd1AsSUFWdEIsU0FBMEJ4UCxFQUFNMEwsR0FDOUIsT0FBTyxXQUNMOUcsS0FBSzVFLEdBQVEwTCxLQWlCYTFMLEVBQU0wTCxJQUM1QjlHLEtBQUswQyxPQUFPdEgsSWRvQ2xCa1EsUVZEYSxTQUFTbFEsRUFBTTBMLEdBQzVCLElBQUk3QyxFQUFRVixFQUFXbkksRUFBTyxJQUU5QixHQUFJMEQsVUFBVTFDLE9BQVMsRUFBRyxDQUV4QixJQURBLElBQUk4SCxFQUFPUCxFQUFVM0QsS0FBSzBDLFFBQVNySCxHQUFLLEVBQUdpQixFQUFJMkgsRUFBTTdILFNBQzVDZixFQUFJaUIsR0FBRyxJQUFLNEgsRUFBS00sU0FBU1AsRUFBTTVJLElBQUssT0FBTyxFQUNyRCxPQUFPLEVBR1QsT0FBTzJFLEtBQUt5SSxNQUF1QixtQkFBVjNCLEVBZjNCLFNBQXlCN0MsRUFBTzZDLEdBQzlCLE9BQU8sWUFDSkEsRUFBTXdELE1BQU10SyxLQUFNbEIsV0FBYWtGLEVBQWFJLEdBQWVwRSxLQUFNaUUsS0FjNUM2QyxFQTVCMUIsU0FBcUI3QyxHQUNuQixPQUFPLFdBQ0xELEVBQVdoRSxLQUFNaUUsS0FJckIsU0FBc0JBLEdBQ3BCLE9BQU8sV0FDTEcsRUFBY3BFLEtBQU1pRSxNQXNCRkEsRUFBTzZDLEtVVjNCL0ssS1Q5Q2EsU0FBUytLLEdBQ3RCLE9BQU9oSSxVQUFVMUMsT0FDWDRELEtBQUt5SSxLQUFjLE1BQVQzQixFQUNOckMsR0FBK0IsbUJBQVZxQyxFQVZqQyxTQUFzQkEsR0FDcEIsT0FBTyxXQUNMLElBQUk4RCxFQUFJOUQsRUFBTXdELE1BQU10SyxLQUFNbEIsV0FDMUJrQixLQUFLMEUsWUFBbUIsTUFBTGtHLEVBQVksR0FBS0EsSUFUeEMsU0FBc0I5RCxHQUNwQixPQUFPLFdBQ0w5RyxLQUFLMEUsWUFBY29DLEtBZ0JHQSxJQUNsQjlHLEtBQUswQyxPQUFPZ0MsYVN5Q2xCNkcsS1IvQ2EsU0FBU3pFLEdBQ3RCLE9BQU9oSSxVQUFVMUMsT0FDWDRELEtBQUt5SSxLQUFjLE1BQVQzQixFQUNObkMsR0FBK0IsbUJBQVZtQyxFQVZqQyxTQUFzQkEsR0FDcEIsT0FBTyxXQUNMLElBQUk4RCxFQUFJOUQsRUFBTXdELE1BQU10SyxLQUFNbEIsV0FDMUJrQixLQUFLNEUsVUFBaUIsTUFBTGdHLEVBQVksR0FBS0EsSUFUdEMsU0FBc0I5RCxHQUNwQixPQUFPLFdBQ0w5RyxLQUFLNEUsVUFBWWtDLEtBZ0JLQSxJQUNsQjlHLEtBQUswQyxPQUFPa0MsV1EwQ2xCQyxNUDdEYSxXQUNiLE9BQU83RSxLQUFLeUksS0FBSzVELElPNkRqQkcsTU45RGEsV0FDYixPQUFPaEYsS0FBS3lJLEtBQUt6RCxJTThEakJ3RyxPZWpFYSxTQUFTcFEsR0FDdEIsSUFBSXNDLEVBQXlCLG1CQUFUdEMsRUFBc0JBLEVBQU9xUSxFQUFRclEsR0FDekQsT0FBTzRFLEtBQUtpSSxPQUFPLFdBQ2pCLE9BQU9qSSxLQUFLK0IsWUFBWXJFLEVBQU80TSxNQUFNdEssS0FBTWxCLGVmK0Q3QzRNLE9MN0RhLFNBQVN0USxFQUFNdVEsR0FDNUIsSUFBSWpPLEVBQXlCLG1CQUFUdEMsRUFBc0JBLEVBQU9xUSxFQUFRclEsR0FDckQ2TSxFQUFtQixNQUFWMEQsRUFBaUJ4RyxFQUFpQyxtQkFBWHdHLEVBQXdCQSxFQUFTbEwsRUFBU2tMLEdBQzlGLE9BQU8zTCxLQUFLaUksT0FBTyxXQUNqQixPQUFPakksS0FBS2lDLGFBQWF2RSxFQUFPNE0sTUFBTXRLLEtBQU1sQixXQUFZbUosRUFBT3FDLE1BQU10SyxLQUFNbEIsWUFBYyxTSzBEM0Z1RixPSmhFYSxXQUNiLE9BQU9yRSxLQUFLeUksS0FBS3BFLElJZ0VqQnVILE1IOURhLFNBQVNDLEdBQ3RCLE9BQU83TCxLQUFLaUksT0FBTzRELEVBQU90RyxFQUFzQkYsSUc4RGhENUQsTWdCdkVhLFNBQVNxRixHQUN0QixPQUFPaEksVUFBVTFDLE9BQ1g0RCxLQUFLcUwsU0FBUyxXQUFZdkUsR0FDMUI5RyxLQUFLMEMsT0FBT2QsVWhCcUVsQjBFLEdGSWEsU0FBU0QsRUFBVVMsRUFBT0YsR0FDdkMsSUFBK0N2TCxFQUF5QlksRUFBcEU2UCxFQTVDTixTQUF3QkEsR0FDdEIsT0FBT0EsRUFBVXJJLE9BQU9DLE1BQU0sU0FBU3ZJLElBQUksU0FBU2MsR0FDbEQsSUFBSWIsRUFBTyxHQUFJQyxFQUFJWSxFQUFFd0QsUUFBUSxLQUU3QixPQURJcEUsR0FBSyxJQUFHRCxFQUFPYSxFQUFFVyxNQUFNdkIsRUFBSSxHQUFJWSxFQUFJQSxFQUFFVyxNQUFNLEVBQUd2QixLQUMxQ3FMLEtBQU16SyxFQUFHYixLQUFNQSxLQXdDVDJRLENBQWUxRixFQUFXLElBQVEvSixFQUFJd1AsRUFBVTFQLE9BRWhFLEtBQUkwQyxVQUFVMUMsT0FBUyxHQUF2QixDQWNBLElBRkFrSyxFQUFLUSxFQUFRRCxFQUFRVCxFQUNOLE1BQVhRLElBQWlCQSxHQUFVLEdBQzFCdkwsRUFBSSxFQUFHQSxFQUFJaUIsSUFBS2pCLEVBQUcyRSxLQUFLeUksS0FBS25DLEVBQUd3RixFQUFVelEsR0FBSXlMLEVBQU9GLElBQzFELE9BQU81RyxLQWRMLElBQUlzRyxFQUFLdEcsS0FBSzBDLE9BQU82RCxLQUNyQixHQUFJRCxFQUFJLElBQUssSUFBMEJFLEVBQXRCN0osRUFBSSxFQUFHOEosRUFBSUgsRUFBR2xLLE9BQVdPLEVBQUk4SixJQUFLOUosRUFDakQsSUFBS3RCLEVBQUksRUFBR21MLEVBQUlGLEVBQUczSixHQUFJdEIsRUFBSWlCLElBQUtqQixFQUM5QixJQUFLWSxFQUFJNlAsRUFBVXpRLElBQUlxTCxPQUFTRixFQUFFRSxNQUFRekssRUFBRWIsT0FBU29MLEVBQUVwTCxLQUNyRCxPQUFPb0wsRUFBRU0sT0VYakJrRixTRDVDYSxTQUFTdEYsRUFBTVMsR0FDNUIsT0FBT25ILEtBQUt5SSxNQUF3QixtQkFBWHRCLEVBUDNCLFNBQTBCVCxFQUFNUyxHQUM5QixPQUFPLFdBQ0wsT0FBT0QsRUFBY2xILEtBQU0wRyxFQUFNUyxFQUFPbUQsTUFBTXRLLEtBQU1sQixjQVJ4RCxTQUEwQjRILEVBQU1TLEdBQzlCLE9BQU8sV0FDTCxPQUFPRCxFQUFjbEgsS0FBTTBHLEVBQU1TLE1BYVhULEVBQU1TLE1rQjlCaEMsT0FBZSxTQUFTMUcsR0FDdEIsTUFBMkIsaUJBQWJBLEVBQ1IsSUFBSW1ILEtBQVl6SCxTQUFTTyxjQUFjRCxNQUFjTixTQUFTRyxrQkFDOUQsSUFBSXNILEtBQVluSCxJQUFZa0gsV0NPZnNFLEdBQ2pCQyxZQUFZQyxFQUFPQyxFQUFtQkMsR0FBUyxHQUMzQ0MsTUFBTUgsS0FBU0ksT0FHZixNQUFNQyxFQUFhSCxFQUFTLGtDQUFtQyx5QkFDL0RyTSxLQUFLeU0sSUFBTUgsRUFBRSxVQUFVSSxTQUFTRixHQUFZRyxhQUFhUixLQUN6RG5NLEtBQUs0TSxXQUNMNU0sS0FBS29NLFFBQVVBLEVBV25CRix3QkFBd0JXLEVBQUlDLEVBQU9DLEVBQWFDLEVBQVNDLEVBQUssZUFDMUNqTixLQUFLa04sYUFBYUwsRUFBSUksR0FDdENoRixPQUFXNEUsS0FDTnZHLEdBQUcsUUFBUyxLQUNUdEcsS0FBS21OLFlBQVlMLEVBQU9DLEVBQWFDLEtBRXhDMUcsR0FBRyxZQUFhLEtBQ2J0RyxLQUFLb00sUUFBUUcsS0FBSyxjQUVyQmpHLEdBQUcsV0FBWSxLQUNadEcsS0FBS29NLFFBQVFnQixTQUl6QmxCLGtCQUFrQlcsRUFBSXhDLEVBQVU0QyxFQUFLLHdCQUNqQmpOLEtBQUtrTixhQUFhTCxFQUFJSSxHQUN0Q2hGLE9BQVc0RSxLQUNOdkcsR0FBRyxRQUFTK0QsR0FDWi9ELEdBQUcsWUFBYSxLQUNidEcsS0FBS29NLFFBQVFHLEtBQUssc0JBRXJCakcsR0FBRyxXQUFZLEtBQ1p0RyxLQUFLb00sUUFBUWdCLFNBVXpCbEIsYUFBYVcsRUFBSUksRUFBSyxlQUNsQixNQUFNSSxFQUFVZixFQUFFLFFBQVE5QixLQUFLLEtBQU1xQyxHQUNoQ0gsU0FBUyxtQkFBbUJDLFNBQVMzTSxLQUFLeU0sS0FHL0MsT0FGQUgsRUFBRSxRQUFRSSxlQUFlTyxLQUFRTixTQUFTVSxHQUMxQ3JOLEtBQUs0TSxRQUFRQyxHQUFNUSxFQUNaQSxFQU9YbkIsY0FBY0UsR0FDVnBNLEtBQUtvTSxRQUFVQSxFQVVuQkYsWUFBWVksRUFBT1EsRUFBVU4sR0FFekIsSUFBSU8sRUFBU2pCLEVBQUVBLEVBQUVBLEtBQUssSUFBS1EsTUFBVSxJQUNqQ1UsRUFBV0QsRUFBTzNCLFFBQ3JCcEIsS0FBSyxVQUFXLE9BQ2hCQSxLQUFLLFFBQVMsOEJBR1hpRCxFQ0VaLFNBQWdDQyxHQUk1QixJQUhBLElBQUlDLEVBQU8sR0FDUEMsRUFBU3pOLFNBQVMwTixZQUVieFMsRUFBSSxFQUFHQSxFQUFJdVMsRUFBT3hSLE9BQVFmLElBRS9CLElBQ0ksR0FBMEIsTUFBdEJ1UyxFQUFPdlMsR0FBR3lTLFNBQWtCLFNBR2hDLElBRkEsSUFBSUMsRUFBUUgsRUFBT3ZTLEdBQUd5UyxTQUViblIsRUFBSSxFQUFHQSxFQUFJb1IsRUFBTTNSLE9BQVFPLElBQUssQ0FDbkMsSUFBSXFSLEVBQU9ELEVBQU1wUixHQUNqQixRQUEwQixJQUFmcVIsRUFBVSxNQUFrQixDQUNuQyxJQUFJQyxFQUVBeE4sT0FBaUMxQixJQUF0QmlQLEVBQUtFLGFBQTRCRixFQUFLRSxhQUFlRixFQUFLRSxhQUFhclIsWUFBWTZRLEVBQUksR0FBR2IsTUFBTyxJQUVoSCxJQUNJb0IsRUFBUTNCLEVBQUVvQixHQUFLUyxLQUFLMU4sR0FDdEIsTUFBTzJOLEdBQ0xILEtBR0FBLEVBQU03UixPQUFTLElBQ2Z1UixHQUFRSyxFQUFLRSxhQUFlLE1BQVFGLEVBQUtsRCxNQUFNdUQsUUFBVSxVQUl2RSxNQUFPRCxHQUlMLEdBQWUsa0JBQVhBLEVBQUVoVCxLQUEwQixNQUFNZ1QsRUFDdEMsU0FJUixJQUFJRSxFQUFJbk8sU0FBU0ksY0FBYyxTQUkvQixPQUhBK04sRUFBRWhLLGFBQWEsT0FBUSxZQUN2QmdLLEVBQUUxSixVQUFZLGNBQWdCK0ksRUFBTyxRQUU5QlcsRUQzQ1VDLENBQWVoQixFQUFPaUIsT0FDbkNoQixFQUFTaUIsUUFBUWhCLEdBRWpCbkIsRUFBRSxJQUFNVSxHQUFTekIsS0FBSyxJQUFJNkIsT0FDMUIsSUFBSXNCLEVBQVVwQyxNQUFNVSxLQUFXeEIsT0FBT2dDLEdBQVVqQyxPQUU1Q29ELEVBQVUsSUFBSUMsTUFBTUYsSUFBV2hJLEtBQU0sa0JBQ3pDbUksT0FBT0YsRUFBU3JCLEdBR2hCaEIsTUFBTVUsS0FBV3pCLEtBQUssSUFBSTZCLFFFbkdsQyxTQUFnQjBCLEtBQ1osT0FDSUMsY0FBZUEsR0FDZkMsUUFBU0EsR0FDVEMsYUFBY0MsR0FDZEMsUUFBU0EsR0FDVEMsWUFBYUEsSUFJckIsU0FBU0YsS0FDTEcsS0FBS0MsUUFBUUMsT0FBTyxjQUNoQkMsTUFBUyxnQkFDVEMsTUFBUyxJQUNUQyxPQUFVLEdBQ1ZDLFdBQWEsRUFDYkMsTUFBUyxPQUNUQyxVQUFhQyxHQUNiQyxVQUFhQyxLQUlyQixTQUFTRixHQUFVRyxHQUNmM0QsRUFBRSxjQUFjQyxPQUdwQixTQUFTNEMsS0FDT0UsS0FBS2EsTUFBTUMsa0JBQ2pCaEIsVUFBVXZRLEtBQUssV0FDakJ3UixRQUFRQyxJQUFJLHFCQUVoQi9ELEVBQUUsY0FBY2MsT0FHcEIsU0FBUzRDLEdBQVVNLEdBQ2ZGLFFBQVFFLE1BQU1BLEdBR2xCLFNBQVN2QixLQUNMLFFBQUlNLEtBQUthLE9BQ0VsQixLQUFVdUIsYUFNekIsU0FBU3ZCLEtBQ0wsT0FBT0ssS0FBS2EsTUFBTUMsa0JBQWtCSyxZQUFZaEMsTUFHcEQsU0FBU1ksR0FBWXFCLEdBQ2pCelEsS0FBS2dQLFVBQVUwQixPQUFPbEIsTUFBT2lCLElBQVM3UixLQUNsQyxTQUFTK1IsR0FDTFAsUUFBUUMsSUFBSS9VLEtBQUtDLFdBQVdxVixRQUFTLFVBQVc5SixNQUFPNkosTUFFM0QsU0FBU0UsR0FDTFQsUUFBUUUsTUFBTWhWLEtBQUtDLFdBQVdxVixRQUFTLE9BQVE5SixNQUFPK0osT0MyRGxFLFNBQVNDLEdBQWFDLEVBQVdDLEVBQVNDLEdBQ3RDLE1BQU1DLEVBQWMsU0FBU0MsR0FDekIsTUFBTTNHLEVBQU8scUJBQ2IsT0FBT3dHLEVBQVExSSxPQUFRZ0csSUFDbkIsSUFBSUEsRUFBRTNPLGVBQWUsWUFFakIsTUFEQXlRLFFBQVFFLE1BQU1oQyxHQUNSLGdFQUVWLE1BQWdCLGVBQVo2QyxFQUFrQzdDLEVBQUU4QyxPQUFTRCxFQUNyQzdDLEVBQUU2QyxVQUFVQSxJQUN6QkUsT0FBTyxDQUFDbE8sRUFBR21MLEtBQ1YsSUFBSUEsRUFBRTNPLGVBQWU2SyxHQUVqQixNQURBNEYsUUFBUUUsTUFBTWhDLEdBQ1IsOENBQWdEOUQsRUFJMUQsWUFGZ0J6TCxJQUFib0UsRUFBRW1MLEVBQUU5RCxNQUFvQnJILEVBQUVtTCxFQUFFOUQsUUFDL0JySCxFQUFFbUwsRUFBRTlELElBQU96TixLQUFLdVIsR0FDVG5MLFFBSVRsSSxJQUVFcVcsTUFBTyxVQUNQekUsR0FBSSxVQUNKcEssS0FBTXlPLEVBQVksYUFHbEJJLE1BQU8sbUJBQ1B6RSxHQUFJLGNBQ0pwSyxLQUFNeU8sRUFBWSxpQkFHbEJJLE1BQU8sTUFDUHpFLEdBQUksTUFDSnBLLEtBQU15TyxFQUFZLFNBR2xCSSxNQUFPLE1BQ1B6RSxHQUFJLE1BQ0pwSyxLQUFNeU8sRUFBWSxTQWtCMUIsT0FDSUgsVUFBV0EsRUFDWFEsRUFqQlNOLEVBQVE5VixJQUFLYyxLQUNyQixxQkFBc0Isb0JBQW9CMEIsUUFBU3FKLElBQ2hELElBQUsvSyxFQUFFMEQsZUFBZXFILEdBRWxCLE1BREFvSixRQUFRRSxNQUFNclUsR0FDUix3REFBMEQrSyxJQUd4RS9LLEVBQUU0USxHQUFLNVEsRUFBRXVWLG1CQUNUdlYsRUFBRXFWLE1BQVFyVixFQUFFd1YsaUJBQ1p4VyxFQUFRMEMsUUFBUytULElBQ2J6VixFQUFFeVYsRUFBSTdFLElBQU02RSxFQUFJalAsS0FBS3hHLEVBQUU0USxVQUFPOU4sSUFFM0I5QyxJQU1QMFYsRUFBRzFXLEVBQ0h3SCxLQUFNdU8sR0E0R2QsU0FBU1ksR0FBbUJDLEVBQVNDLEVBQUtDLEVBQWlCQyxFQUFnQkMsR0FDdkUsTUFBTUMsR0FDRkMsU0FDSWIsTUFBTSxVQUNOYyxRQUFTLFlBSVhDLEVBQVdwSyxPQUFXNEosS0FDNUJRLEVBQVNwSyxPQUFPLFNBQVNJLFVBQVUsTUFDOUI1RixPQUFPNk8sTUFBTSxHQUFJekUsR0FBRyxLQUFLL08sT0FBT2dVLEVBQUlILElBQ3BDcFAsUUFDQWlKLE9BQU8sTUFDUGhCLEtBQUssUUFBUyxPQUNkQSxLQUFLLFFBQVMsQ0FBQ3hELEVBQUczTCxJQUFVLElBQU4yTCxFQUFFNkYsR0FBTyxPQUFPeFIsRUFBRSxLQUN4Q1UsS0FBTWlMLEdBQUlBLEVBQUVzSyxPQUdqQmUsRUFBU3BLLE9BQU8sZ0JBQWdCSSxVQUFVLEtBQUtoRSxTQUMvQ2dPLEVBQVNwSyxPQUFPLGdCQUFnQnVELE9BQU8sTUFDbENoQixLQUFLLFVBQVdzSCxFQUFJSCxFQUFFdlYsT0FBUyxHQUMvQkwsS0FBS21XLEVBQVFKLEVBQUlmLFdBQVdPLE9BQzVCeEcsTUFBTSxtQkFBbUJvSCxFQUFRSixFQUFJZixXQUFXcUIsU0FhekQsU0FBdUJFLEVBQU9SLEVBQUtDLEdBQy9CTyxFQUFNakssVUFBVSxhQUFhaEUsU0FDN0IsTUFBTWtPLEVBQVVELEVBQU1qSyxVQUFVLGFBQzNCNUYsS0FBS3FQLEVBQUlQLEdBQ1RoUCxRQUNBaUosT0FBTyxNQUNQRixRQUFRLFlBQVksR0FHekJpSCxFQUFRL0csT0FBTyxNQUNWaEIsS0FBSyxRQUFTLE9BQ2RBLEtBQUssUUFBUyxDQUFDeEQsRUFBRzNMLFFBQVFBLEtBQzFCVSxLQUFNaUwsR0FDSUEsRUFBRXNLLE9BRVp4RyxNQUFNLGtCQUFvQjlELElBRXZCLEdBREFvSixRQUFRQyxJQUFJckosR0FDVCtLLElBQW9CL0ssRUFBRXdMLFVBQ3JCLE1BQU8saUJBS25CVixFQUFJSCxFQUFFaFUsUUFBUSxDQUFDOFUsRUFBRzlWLEtBQ2Q0VixFQUFRL0csT0FBTyxNQUNWaEIsS0FBSyxRQUFTLENBQUN4RCxFQUFHM0wsU0FDRTBELElBQVZpSSxFQUFFeUwsRUFBRTVGLElBQWdCLE9BQU94UixNQUFNc0IsS0FFM0NaLEtBQU1pTCxJQUNILElBQUkwTCxFQUFTMUwsRUFBRXlMLEVBQUU1RixJQUFJN0YsRUFBRXlMLEVBQUU1RixJQUFJelEsT0FBUyxHQUN0QyxPQUFPc1csTUF6Q25CQyxDQUFjTixFQUFTcEssT0FBTyxTQUFVNkosRUFBS0MsR0FvRGpELFNBQXlCRixHQUNyQixNQUFNZSxFQUFXM0ssT0FBVzRKLEtBQVc1SixPQUFPLFNBQVNJLFVBQVUsTUFHakVKLE9BQVc0SixLQUFXNUosT0FBTyxTQUFTSSxVQUFVLE1BQzNDeUMsTUFBTSxTQUFVLFdBQ2hCeEUsR0FBRyxRQUFTLFdBRVYsTUFBTXVNLEVBQVk1SyxHQUFPakksTUFBTXdLLEtBQUssU0FDRixPQUE5QnZDLEdBQU9qSSxNQUFNd0ssS0FBSyxVQUNsQnZDLEdBQU9qSSxNQUFNd0ssS0FBSyxRQUFTLFlBQzNCb0ksRUFBU3RLLFdBQVd1SyxLQUFhdkgsUUFBUSxZQUFZLEtBRXJEckQsR0FBT2pJLE1BQU13SyxLQUFLLFFBQVMsT0FDM0JvSSxFQUFTdEssV0FBV3VLLEtBQWF2SCxRQUFRLFlBQVksTUFLaEVyRCxPQUFXNEosS0FBVzVKLE9BQU8sU0FBU0ksVUFBVSxNQUMzQ3lDLE1BQU0sU0FBVSxXQUNoQnhFLEdBQUcsUUFBUyxXQUNWLE1BQU13TSxFQUFTN0ssR0FBT2pJLE1BQU13SyxLQUFLLFNBQ0MsT0FBOUJ2QyxHQUFPakksTUFBTXdLLEtBQUssVUFDbEJ2QyxHQUFPakksTUFBTXdLLEtBQUssUUFBUyxZQUMzQm9JLEVBQVN0SyxXQUFXd0ssS0FBVXhILFFBQVEsWUFBWSxLQUVsRHJELEdBQU9qSSxNQUFNd0ssS0FBSyxRQUFTLE9BQzNCb0ksRUFBU3RLLFdBQVd3SyxLQUFVeEgsUUFBUSxZQUFZLE1BTTdEc0gsRUFBUzlILE1BQU0sU0FBVSxXQUNwQnhFLEdBQUcsUUFBUyxXQUVUMkIsR0FBT2pJLE1BQU1zTCxRQUFRLFlBQWFyRCxHQUFPakksTUFBTXNMLFFBQVEsZUF4Ri9EeUgsQ0FBZ0JsQixHQW9HcEIsU0FBcUJBLEVBQVNDLEVBQUtFLEVBQWdCQyxHQUkvQ2hLLEdBQU8seUJBQXlCSSxVQUFVLEtBQUtoRSxTQUMvQixJQUFJNEgsR0FBUSw0QkFBd0JsTixHQUFXLEdBQ3ZEbU8sYUFBYSxtQkFPekIsU0FBZ0MyRSxFQUFTQyxHQUNyQyxNQUFNa0IsRUFBVy9LLE9BQVc0SixLQUFXNUosT0FBTyxTQUFTSSxVQUFVLE1BQ2pFSixHQUFPLG9CQUNGNkMsTUFBTSxTQUFVLFdBQ2hCeEUsR0FBRyxRQUFTLFdBRVQsSUFBSTJNLEVBQVFELEVBQVMxSyxPQUFPLGFBQzVCLEdBQUkySyxFQUFNdFMsUUFBU3VTLE1BQU0sc0RBQ3BCLENBQ0QsSUFBSUMsR0FDSSxZQUNBLGNBQ0EsWUFDQSxnQkFDQSxnQkFDQSxnQkFDQSxpQkFDQSxpQkFDQSxrQkFDRjNYLEtBQUssTUFBUSxLQUduQnlYLEVBQU14SyxLQUFLLFNBQVN6QixHQUVoQixNQUFNb00sRUFBU25MLEdBQU9qSSxNQUFNd0ssS0FBSyxTQUFTOUcsTUFBTSxLQUFLNEUsT0FBUTVMLEdBQWUsWUFBSEEsR0FDbkVnTSxFQUFJb0osRUFBSVAsRUFBRThCLFNBQVNELEVBQU8sR0FBR3ZXLFFBQVEsSUFBSyxNQUMxQzRWLEVBQUlYLEVBQUlILEVBQUUwQixTQUFTRCxFQUFPLEdBQUd2VyxRQUFRLElBQUssTUFFMUN5VyxFQUFrQmIsRUFBRWhRLEtBQUtpRyxFQUFFbUUsSUFBSTFSLElBQUttVCxJQUN0QyxJQUFJaUYsR0FDQSxZQUNBLGdCQUNBLGdCQUNBLGlCQUNBLGFBQ0Esa0JBQ0ZwWSxJQUFLNkwsR0FBSXNILEVBQUVrRixTQUFTeE0sS0FHckIsV0FBWSxtQkFBb0IsWUFBWXJKLFFBQVM4VixJQUNsRCxJQUFJbkYsRUFBRTNPLGVBQWU4VCxHQUFJLEtBQU0sK0NBQWlEQSxJQUlwRixJQUFJeFksR0FBV3FULEVBQUVrRixTQUFTRSxVQUFXcEYsRUFBRW1ELGlCQUFrQm5ELEVBQUU2QyxVQUFVclQsT0FBT3lWLEdBQzVFLE9BQU90WSxFQUFRTyxLQUFLLFFBRXhCMlgsR0FBbUJHLEVBQWdCOVgsS0FBSyxRQUU1QyxJQUFJbVksRUFBTyxJQUFJL0UsTUFBTXVFLElBQW1Cek0sS0FBTSw2QkFDOUNtSSxPQUFPOEUsRUFBTSxpQkFBaUIsTUF0RDFDQyxDQUF1Qi9CLEVBQVNDLEdBNUdoQytCLENBQVloQyxFQUFTQywrQkEzU3pCLFNBQW1DekgsRUFBU3lFLEtBQWFHLGNBQ3JENUUsZUFPSixTQUF3QkEsRUFBU3lFLEtBQWFLLFNBQzFDOUUsY0FXSixTQUF1QndILEVBQVNkLEVBQVUsVUFBV2lCLEVBQWVsRCxLQUFjbUQsRUNoQ2xGLFdBQ0ksTUFBTTZCLEVBQU8sa0NBRWIsT0FFSUMsaUJBQWtCRCxFQUFPLHdFQUN6QkUsR0FBSUYsRUFBTyxzREFHWEcsUUFBU0gsRUFBTyxzQkFDaEJJLElBQUtKLEVBQU8sdUNBQ1pLLFVBQVdMLEVBQU8seUNBR2xCTSxRQUFTTixFQUFPLDZFQUNoQk8sY0FBZVAsRUFBTyxtRkFDdEJRLFlBQWFSLEVBQU8saUZBQ3BCUyxXQUFZVCxFQUFPLG9EQUNuQlUsS0FBTVYsRUFBTyw4Q0FDYlcsVUFBV1gsRUFBTyw4REFDbEJZLG9CQUFxQlosRUFBTyxrRUFHNUJhLFFBQVNiLEVBQU8seURBR2hCYyxXQUFZZCxFQUFPLGlGQUduQmUsZUFBZ0JmLEVBQU8sNEVBR3ZCZ0Isb0JBQXFCaEIsRUFBTyxtSUFDNUJpQixZQUFhakIsRUFBTyxpSEFFcEJrQixPQUFRbEIsRUFBTyxrRkFHZm1CLE9BQVNuQixFQUFPLG1EQUdoQm9CLE9BQVEsa0NBQ1JDLFdBQVksd0RBQ1pDLFFBQVMsMERBR1RDLFVBQVcsZ0RBQ1hDLFlBQWEsMkNBQ2JDLGtCQUFtQiw0Q0RoQjREQyxJQUNuRixNQUFNQyxHQUNGdlcsRUFBSytTLEVBQUtnRCxRQUNWalcsRUFBSWlULEVBQUtrRCxZQUNUblcsRUFBSWlULEVBQUttRCxTQUNUcFcsRUFBSWlULEVBQUtpRCxTQUdiUSxRQUFRQyxJQUFJRixHQUNQN1csS0FBSyxTQUFTZ1gsR0FDWCxJQUFJM0UsRUNvSGhCLFNBQTZCL1IsR0FDekIsTUFBTXNMLEVBQU8sYUFDYixJQUFJdEwsRUFBS1MsZUFBZTZLLEdBQU8sS0FBTSxpREFBbURBLEVBQ3hGLE1BQU15RyxFQUFVL1IsRUFBS3NMLEdBT3JCLE9BSkMscUJBQXNCLG1CQUFvQixZQUFZN00sUUFBU3FKLElBQzVELElBQUtpSyxFQUFRLEdBQUd0UixlQUFlcUgsR0FBSSxLQUFNLGlEQUFtREEsSUFHekZpSyxFRDlIZTRFLENBQWFELEVBQUssSUFDaEMsTUFBTXJDLEdBQ0Z1QyxPQUFRRixFQUFLLEdBQUd2RSxPQUFPLENBQUNsTyxFQUFHNkQsS0FBSzdELEVBQUU2RCxFQUFFME0sVUFBVXFDLGVBQWUvTyxFQUFVN0QsT0FDdkU2UyxJQUFLSixFQUFLLEdBQUd2RSxPQUFPLENBQUNsTyxFQUFHNkQsS0FBSzdELEVBQUU2RCxFQUFFME0sVUFBVXFDLGVBQWUvTyxFQUFVN0QsUUFHeEUsSUFBSTZOLEVBQVU0RSxFQUFLLEdBQ2R0TixPQUFRZ0csR0FBSUEsRUFBRXlDLFdBQVdBLEdBQ3pCNVYsSUFBS21ULElBRUYsT0FBUUEsRUFBRTZDLFVBQ04sSUFBSyxNQUNELElBQUtvQyxFQUFLeUMsSUFBSXJXLGVBQWUyTyxFQUFFMkgsVUFBVyxNQUFNM0gsRUFBRTJILFNBQVcscUJBQzdEM0gsRUFBRWtGLFNBQVdELEVBQUt5QyxJQUFJMUgsRUFBRTJILFVBQ3hCLE1BRUosSUFBSyxTQUNELElBQUsxQyxFQUFLdUMsT0FBT25XLGVBQWUyTyxFQUFFMkgsVUFBVyxNQUFNM0gsRUFBRTJILFNBQVcscUJBQ2hFM0gsRUFBRWtGLFNBQVdELEVBQUt1QyxPQUFPeEgsRUFBRTJILFVBQzNCM0gsRUFBRTZDLFNBQVcsVUFNckIsT0FBTzdDLElBRWYwQyxFQWVaLFNBQWtDQSxHQUU5QixNQUFNa0YsRUFBVWxGLEVBQVExSSxPQUFRZ0csSUFDNUIsSUFBSUEsRUFBRTNPLGVBQWUsWUFFakIsTUFEQXlRLFFBQVFFLE1BQU1oQyxHQUNSLHVEQUVWLE1BQXFCLE9BQWRBLEVBQUU2QyxXQUNWRSxPQUFPLENBQUNsTyxFQUFHNkQsS0FDVixJQUFLQSxFQUFFckgsZUFBZSxhQUFjLEtBQU0sOENBRTFDLE9BREF3RCxFQUFFNkQsRUFBRW1QLFdBQWEsRUFDVmhULE9BRVgsT0FDTzZOLEVBQVE3VixJQUFLbVQsSUFDaEIsSUFBSUEsRUFBRTNPLGVBQWUsY0FBZ0IyTyxFQUFFM08sZUFBZSxhQUFjLEtBQU0sOENBSTFFLE1BSGtCLFdBQWQyTyxFQUFFNkMsVUFBeUIrRSxFQUFRdlcsZUFBZTJPLEVBQUU2SCxhQUNwRDdILEVBQUU4QyxNQUFRLGVBRVA5QyxJQWxDTzhILENBQXlCcEYsR0FDbkMsTUFBTXFGLEVBQVl2RixHQUFhQyxFQUFXQyxFQUFTQyxHQUNuRFcsR0FBbUJDLEVBQVN3RSxHQUFXLEdBd0huRCxTQUFxQnhFLEVBQVNDLEVBQUtkLEVBQVNDLEVBQVNlLEVBQWdCQyxHQUNqRSxNQUFNcUUsRUFBaUJyRixFQUFRM0ksT0FBUXJNLElBQUtBLEVBQUV1VyxXQUFXclgsSUFBS2MsR0FBSUEsRUFBRXVWLG9CQUM5RCtFLEVBQVcsS0FDYixJQUFJQyxFQUFNbEssRUFBRSw2QkFBNkJtSyxNQUNyQ0MsRUFBYXBLLEVBQUUsb0NBQW9DbUssTUFDbkRFLEtBQ0FDLEtBQ0E3RSxFQUE4QixPQUFaMkUsRUFHdEJwSyxFQUFFLFdBQVc3RCxLQUFLLFdBQ1Y2RCxFQUFFdE0sTUFBTTZXLEdBQUcsYUFBYUYsRUFBSzVaLEtBQUt1UCxFQUFFdE0sTUFBTXlXLE9BQzNDRSxFQUFLdmEsT0FBUyxHQUFHa1EsRUFBRSx5QkFBeUJ3SyxLQUFLLFdBQVcsR0FDN0MsR0FBZkgsRUFBS3ZhLFFBQWFrUSxFQUFFLHNDQUFzQ3dLLEtBQUssV0FBVyxLQUlqRnhLLEVBQUUsZUFBZTdELEtBQUssV0FDZDZELEVBQUV0TSxNQUFNNlcsR0FBRyxhQUFhRCxFQUFZN1osS0FBS3VQLEVBQUV0TSxNQUFNeVcsT0FDbERHLEVBQVl4YSxPQUFTLEdBQUdrUSxFQUFFLGdDQUFnQ3dLLEtBQUssV0FBVyxHQUNwRCxHQUF0QkYsRUFBWXhhLFFBQWFrUSxFQUFFLDZDQUE2Q3dLLEtBQUssV0FBVyxLQUkvRixJQUFJQyxFQUE0QixPQUFkTCxFQUFvQjFGLEVBQVFwVSxRQUFRb1UsRUFBUTFJLE9BQU8sQ0FBQ2dHLEVBQUdqVCxJQUM5RGliLEVBQWU3VyxRQUFRNk8sRUFBRWtELG9CQUFvQixHQUFjLGVBQVRsRCxFQUFFOEMsT0FJL0QyRixFQUFxQixRQUFQUCxFQUFlTyxFQUFhQSxFQUFZek8sT0FBUWdHLEdBQUlBLEVBQUVrSSxLQUFLQSxHQUd6RU8sRUFBNkIsR0FBZkosRUFBS3ZhLE9BQWEyYSxFQUFhQSxFQUFZek8sT0FBUWdHLEdBQUlxSSxFQUFLbFgsUUFBUTZPLEVBQUUwSSxhQUFhLEdBR2pHRCxFQUFvQyxHQUF0QkgsRUFBWXhhLE9BQWEyYSxFQUFhQSxFQUFZek8sT0FBUWdHLEdBQUlzSSxFQUFZblgsUUFBUTZPLEVBQUUySSxhQUFhLEdBRy9HckYsR0FBbUJDLEVBQVNmLEdBQWFnQixFQUFJZixVQUFXZ0csRUFBYTlGLEdBQVVjLElBS25GekYsRUFBRSxxQkFBcUI0SyxPQUFPWCxHQUM5QmpLLEVBQUUsV0FBVzdELEtBQUssV0FDZDZELEVBQUV0TSxNQUFNa1gsT0FBT1gsS0FFbkJqSyxFQUFFLHlCQUF5QjRLLE9BQU8sV0FDOUIsSUFBSVQsRUFBTW5LLEVBQUV0TSxNQUFNeVcsTUFDbEIsT0FBT0EsR0FDSCxJQUFLLE1BQ0RuSyxFQUFFLFdBQVd3SyxLQUFLLFdBQVcsR0FDN0JQLElBQ0EsTUFFSixJQUFLLFFBQ0RqSyxFQUFFLFdBQVd3SyxLQUFLLFdBQVcsTUFRekN4SyxFQUFFLDRCQUE0QjRLLE9BQU9YLEdBRXJDakssRUFBRSxlQUFlN0QsS0FBSyxXQUNsQjZELEVBQUV0TSxNQUFNa1gsT0FBT1gsS0FFbkJqSyxFQUFFLCtCQUErQjRLLE9BQU8sV0FDcEMsSUFBSVQsRUFBTW5LLEVBQUV0TSxNQUFNeVcsTUFDbEIsT0FBT0EsR0FDSCxJQUFLLE1BQ0RuSyxFQUFFLGVBQWV3SyxLQUFLLFdBQVcsR0FDakNQLElBQ0EsTUFFSixJQUFLLFFBQ0RqSyxFQUFFLGVBQWV3SyxLQUFLLFdBQVcsTUFyTXJDSyxDQUFZdEYsRUFBU3dFLEVBQVdyRixFQUFTQyxLQUc1Q21HLE1BQU0sU0FBU0MsR0FBS2pILFFBQVFFLE1BQU0rRyJ9
